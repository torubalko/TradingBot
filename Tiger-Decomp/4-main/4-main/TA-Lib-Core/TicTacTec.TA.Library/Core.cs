using System;

namespace TicTacTec.TA.Library;

public static class Core
{
	public enum RetCode
	{
		Success = 0,
		LibNotInitialize = 1,
		BadParam = 2,
		AllocErr = 3,
		GroupNotFound = 4,
		FuncNotFound = 5,
		InvalidHandle = 6,
		InvalidParamHolder = 7,
		InvalidParamHolderType = 8,
		InvalidParamFunction = 9,
		InputNotAllInitialize = 10,
		OutputNotAllInitialize = 11,
		OutOfRangeStartIndex = 12,
		OutOfRangeEndIndex = 13,
		InvalidListType = 14,
		BadObject = 15,
		NotSupported = 16,
		InternalError = 5000,
		UnknownErr = 65535
	}

	public enum Compatibility
	{
		Default,
		Metastock
	}

	public enum MAType
	{
		Sma,
		Ema,
		Wma,
		Dema,
		Tema,
		Trima,
		Kama,
		Mama,
		T3
	}

	public enum FuncUnstId
	{
		Adx = 0,
		Adxr = 1,
		Atr = 2,
		Cmo = 3,
		Dx = 4,
		Ema = 5,
		HtDcPeriod = 6,
		HtDcPhase = 7,
		HtPhasor = 8,
		HtSine = 9,
		HtTrendline = 10,
		HtTrendMode = 11,
		Kama = 12,
		Mama = 13,
		Mfi = 14,
		MinusDI = 15,
		MinusDM = 16,
		Natr = 17,
		PlusDI = 18,
		PlusDM = 19,
		Rsi = 20,
		StochRsi = 21,
		T3 = 22,
		FuncUnstAll = 23,
		FuncUnstNone = -1
	}

	public enum RangeType
	{
		RealBody,
		HighLow,
		Shadows
	}

	public enum CandleSettingType
	{
		BodyLong,
		BodyVeryLong,
		BodyShort,
		BodyDoji,
		ShadowLong,
		ShadowVeryLong,
		ShadowShort,
		ShadowVeryShort,
		Near,
		Far,
		Equal,
		AllCandleSettings
	}

	private sealed class CandleSetting
	{
		public CandleSettingType settingType;

		public RangeType rangeType;

		public int avgPeriod;

		public double factor;
	}

	private sealed class GlobalsType
	{
		public Compatibility compatibility;

		public uint[] unstablePeriod;

		public CandleSetting[] candleSettings;

		public GlobalsType()
		{
			unstablePeriod = new uint[23];
			compatibility = Compatibility.Default;
			int num = 0;
			do
			{
				unstablePeriod[num] = 0u;
				num++;
			}
			while (num < 23);
			CandleSetting[] array = (candleSettings = new CandleSetting[11]);
			int num2 = 0;
			if (0 < (nint)array.LongLength)
			{
				do
				{
					candleSettings[num2] = new CandleSetting();
					num2++;
				}
				while (num2 < (nint)candleSettings.LongLength);
			}
		}
	}

	private static GlobalsType Globals;

	private static RetCode TA_INT_EMA(int startIdx, int endIdx, float[] inReal_0, int optInTimePeriod_0, double optInK_1, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = EmaLookback(optInTimePeriod_0);
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		outBegIdx = startIdx;
		int num2;
		double num6;
		if (Globals.compatibility == Compatibility.Default)
		{
			num2 = startIdx - num;
			double num3 = 0.0;
			int num4 = optInTimePeriod_0 - 1;
			if (optInTimePeriod_0 > 0)
			{
				int num5;
				do
				{
					num3 = (double)inReal_0[num2] + num3;
					num2++;
					num5 = num4;
					num4--;
				}
				while (num5 > 0);
			}
			num6 = num3 / (double)optInTimePeriod_0;
		}
		else
		{
			num6 = inReal_0[0];
			num2 = 1;
		}
		if (num2 <= startIdx)
		{
			do
			{
				num6 = ((double)inReal_0[num2] - num6) * optInK_1 + num6;
				num2++;
			}
			while (num2 <= startIdx);
		}
		outReal_0[0] = num6;
		int num7 = 1;
		if (num2 <= endIdx)
		{
			int num8 = num2;
			do
			{
				num6 = (outReal_0[num7] = ((double)inReal_0[num8] - num6) * optInK_1 + num6);
				num7++;
				num8++;
			}
			while (num8 <= endIdx);
		}
		outNbElement = num7;
		return RetCode.Success;
	}

	private static RetCode TA_INT_EMA(int startIdx, int endIdx, double[] inReal_0, int optInTimePeriod_0, double optInK_1, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = EmaLookback(optInTimePeriod_0);
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		outBegIdx = startIdx;
		int num2;
		double num6;
		if (Globals.compatibility == Compatibility.Default)
		{
			num2 = startIdx - num;
			double num3 = 0.0;
			int num4 = optInTimePeriod_0 - 1;
			if (optInTimePeriod_0 > 0)
			{
				int num5;
				do
				{
					num3 = inReal_0[num2] + num3;
					num2++;
					num5 = num4;
					num4--;
				}
				while (num5 > 0);
			}
			num6 = num3 / (double)optInTimePeriod_0;
		}
		else
		{
			num6 = inReal_0[0];
			num2 = 1;
		}
		if (num2 <= startIdx)
		{
			do
			{
				num6 = (inReal_0[num2] - num6) * optInK_1 + num6;
				num2++;
			}
			while (num2 <= startIdx);
		}
		outReal_0[0] = num6;
		int num7 = 1;
		if (num2 <= endIdx)
		{
			int num8 = num2;
			do
			{
				num6 = (outReal_0[num7] = (inReal_0[num8] - num6) * optInK_1 + num6);
				num7++;
				num8++;
			}
			while (num8 <= endIdx);
		}
		outNbElement = num7;
		return RetCode.Success;
	}

	private static RetCode TA_INT_SMA(int startIdx, int endIdx, float[] inReal_0, int optInTimePeriod_0, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = optInTimePeriod_0 - 1;
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		double num2 = 0.0;
		int num3 = startIdx - num;
		int num4 = num3;
		int num5 = num4;
		if (optInTimePeriod_0 > 1 && num4 < startIdx)
		{
			do
			{
				num2 = (double)inReal_0[num5] + num2;
				num5++;
			}
			while (num5 < startIdx);
		}
		int num6 = 0;
		double num7 = optInTimePeriod_0;
		do
		{
			num2 = (double)inReal_0[num5] + num2;
			num5++;
			double num8 = num2;
			num2 -= (double)inReal_0[num3 + num6];
			outReal_0[num6] = num8 / num7;
			num6++;
		}
		while (num5 <= endIdx);
		outNbElement = num6;
		outBegIdx = startIdx;
		return RetCode.Success;
	}

	private static RetCode TA_INT_SMA(int startIdx, int endIdx, double[] inReal_0, int optInTimePeriod_0, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = optInTimePeriod_0 - 1;
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		double num2 = 0.0;
		int num3 = startIdx - num;
		int num4 = num3;
		int num5 = num4;
		if (optInTimePeriod_0 > 1 && num4 < startIdx)
		{
			do
			{
				num2 = inReal_0[num5] + num2;
				num5++;
			}
			while (num5 < startIdx);
		}
		int num6 = 0;
		double num7 = optInTimePeriod_0;
		do
		{
			num2 = inReal_0[num5] + num2;
			num5++;
			double num8 = num2;
			num2 -= inReal_0[num3 + num6];
			outReal_0[num6] = num8 / num7;
			num6++;
		}
		while (num5 <= endIdx);
		outNbElement = num6;
		outBegIdx = startIdx;
		return RetCode.Success;
	}

	private static RetCode TA_INT_MACD(int startIdx, int endIdx, float[] inReal_0, int optInFastPeriod_0, int optInSlowPeriod_1, int optInSignalPeriod_2, out int outBegIdx, out int outNbElement, double[] outMACD_0, double[] outMACDSignal_1, double[] outMACDHist_2)
	{
		int num;
		if (optInSlowPeriod_1 < optInFastPeriod_0)
		{
			num = optInSlowPeriod_1;
			optInSlowPeriod_1 = optInFastPeriod_0;
			optInFastPeriod_0 = num;
		}
		double optInK_;
		if (optInSlowPeriod_1 != 0)
		{
			optInK_ = 2.0 / (double)(optInSlowPeriod_1 + 1);
		}
		else
		{
			optInSlowPeriod_1 = 26;
			optInK_ = 0.075;
		}
		double optInK_2;
		if (optInFastPeriod_0 != 0)
		{
			optInK_2 = 2.0 / (double)(optInFastPeriod_0 + 1);
		}
		else
		{
			optInFastPeriod_0 = 12;
			optInK_2 = 0.15;
		}
		int num2 = EmaLookback(optInSignalPeriod_2);
		int num3 = EmaLookback(optInSlowPeriod_1) + num2;
		if (startIdx < num3)
		{
			startIdx = num3;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		int num4 = endIdx + (num2 - startIdx) + 1;
		num = num4;
		double[] array = new double[num];
		if (array == null)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.AllocErr;
		}
		double[] array2 = new double[num];
		if (array2 == null)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.AllocErr;
		}
		num = startIdx - num2;
		RetCode retCode = TA_INT_EMA(num, endIdx, inReal_0, optInSlowPeriod_1, optInK_, out var outBegIdx2, out var outNbElement2, array2);
		if (retCode != RetCode.Success)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return retCode;
		}
		retCode = TA_INT_EMA(num, endIdx, inReal_0, optInFastPeriod_0, optInK_2, out var outBegIdx3, out var outNbElement3, array);
		if (retCode != RetCode.Success)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return retCode;
		}
		if (outBegIdx2 == num && outBegIdx3 == num && outNbElement2 == outNbElement3 && outNbElement2 == num4)
		{
			int num5 = 0;
			if (0 < outNbElement2)
			{
				do
				{
					array[num5] -= array2[num5];
					num5++;
				}
				while (num5 < outNbElement2);
			}
			Array.Copy(array, num2, outMACD_0, 0, endIdx - startIdx + 1);
			retCode = TA_INT_EMA(0, outNbElement2 - 1, array, optInSignalPeriod_2, 2.0 / (double)(optInSignalPeriod_2 + 1), out outBegIdx3, out outNbElement3, outMACDSignal_1);
			if (retCode != RetCode.Success)
			{
				outBegIdx = 0;
				outNbElement = 0;
				return retCode;
			}
			int num6 = 0;
			if (0 < outNbElement3)
			{
				do
				{
					outMACDHist_2[num6] = outMACD_0[num6] - outMACDSignal_1[num6];
					num6++;
				}
				while (num6 < outNbElement3);
			}
			outBegIdx = startIdx;
			outNbElement = outNbElement3;
			return RetCode.Success;
		}
		outBegIdx = 0;
		outNbElement = 0;
		return RetCode.InternalError;
	}

	private static RetCode TA_INT_MACD(int startIdx, int endIdx, double[] inReal_0, int optInFastPeriod_0, int optInSlowPeriod_1, int optInSignalPeriod_2, out int outBegIdx, out int outNbElement, double[] outMACD_0, double[] outMACDSignal_1, double[] outMACDHist_2)
	{
		int num;
		if (optInSlowPeriod_1 < optInFastPeriod_0)
		{
			num = optInSlowPeriod_1;
			optInSlowPeriod_1 = optInFastPeriod_0;
			optInFastPeriod_0 = num;
		}
		double optInK_;
		if (optInSlowPeriod_1 != 0)
		{
			optInK_ = 2.0 / (double)(optInSlowPeriod_1 + 1);
		}
		else
		{
			optInSlowPeriod_1 = 26;
			optInK_ = 0.075;
		}
		double optInK_2;
		if (optInFastPeriod_0 != 0)
		{
			optInK_2 = 2.0 / (double)(optInFastPeriod_0 + 1);
		}
		else
		{
			optInFastPeriod_0 = 12;
			optInK_2 = 0.15;
		}
		int num2 = EmaLookback(optInSignalPeriod_2);
		int num3 = EmaLookback(optInSlowPeriod_1) + num2;
		if (startIdx < num3)
		{
			startIdx = num3;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		int num4 = endIdx + (num2 - startIdx) + 1;
		num = num4;
		double[] array = new double[num];
		if (array == null)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.AllocErr;
		}
		double[] array2 = new double[num];
		if (array2 == null)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.AllocErr;
		}
		num = startIdx - num2;
		RetCode retCode = TA_INT_EMA(num, endIdx, inReal_0, optInSlowPeriod_1, optInK_, out var outBegIdx2, out var outNbElement2, array2);
		if (retCode != RetCode.Success)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return retCode;
		}
		retCode = TA_INT_EMA(num, endIdx, inReal_0, optInFastPeriod_0, optInK_2, out var outBegIdx3, out var outNbElement3, array);
		if (retCode != RetCode.Success)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return retCode;
		}
		if (outBegIdx2 == num && outBegIdx3 == num && outNbElement2 == outNbElement3 && outNbElement2 == num4)
		{
			int num5 = 0;
			if (0 < outNbElement2)
			{
				do
				{
					array[num5] -= array2[num5];
					num5++;
				}
				while (num5 < outNbElement2);
			}
			Array.Copy(array, num2, outMACD_0, 0, endIdx - startIdx + 1);
			retCode = TA_INT_EMA(0, outNbElement2 - 1, array, optInSignalPeriod_2, 2.0 / (double)(optInSignalPeriod_2 + 1), out outBegIdx3, out outNbElement3, outMACDSignal_1);
			if (retCode != RetCode.Success)
			{
				outBegIdx = 0;
				outNbElement = 0;
				return retCode;
			}
			int num6 = 0;
			if (0 < outNbElement3)
			{
				do
				{
					outMACDHist_2[num6] = outMACD_0[num6] - outMACDSignal_1[num6];
					num6++;
				}
				while (num6 < outNbElement3);
			}
			outBegIdx = startIdx;
			outNbElement = outNbElement3;
			return RetCode.Success;
		}
		outBegIdx = 0;
		outNbElement = 0;
		return RetCode.InternalError;
	}

	private static RetCode TA_INT_PO(int startIdx, int endIdx, float[] inReal_0, int optInFastPeriod_0, int optInSlowPeriod_1, MAType optInMethod_2, out int outBegIdx, out int outNbElement, double[] outReal_0, double[] tempBuffer, int doPercentageOutput)
	{
		if (optInSlowPeriod_1 < optInFastPeriod_0)
		{
			int num = optInSlowPeriod_1;
			optInSlowPeriod_1 = optInFastPeriod_0;
			optInFastPeriod_0 = num;
		}
		int outBegIdx2;
		int outNBElement;
		RetCode retCode = MovingAverage(startIdx, endIdx, inReal_0, optInFastPeriod_0, optInMethod_2, out outBegIdx2, out outNBElement, tempBuffer);
		if (retCode == RetCode.Success)
		{
			retCode = MovingAverage(startIdx, endIdx, inReal_0, optInSlowPeriod_1, optInMethod_2, out var outBegIdx3, out var outNBElement2, outReal_0);
			if (retCode == RetCode.Success)
			{
				int num2 = outBegIdx3 - outBegIdx2;
				if (doPercentageOutput != 0)
				{
					int num3 = 0;
					if (0 < outNBElement2)
					{
						do
						{
							double num4 = outReal_0[num3];
							if (-1E-08 < num4 && num4 < 1E-08)
							{
								outReal_0[num3] = 0.0;
							}
							else
							{
								outReal_0[num3] = (tempBuffer[num3 + num2] - num4) / num4 * 100.0;
							}
							num3++;
						}
						while (num3 < outNBElement2);
					}
				}
				else
				{
					int num3 = 0;
					if (0 < outNBElement2)
					{
						do
						{
							outReal_0[num3] = tempBuffer[num3 + num2] - outReal_0[num3];
							num3++;
						}
						while (num3 < outNBElement2);
					}
				}
				outBegIdx = outBegIdx3;
				outNbElement = outNBElement2;
				goto IL_00ce;
			}
		}
		outBegIdx = 0;
		outNbElement = 0;
		goto IL_00ce;
		IL_00ce:
		return retCode;
	}

	private static RetCode TA_INT_PO(int startIdx, int endIdx, double[] inReal_0, int optInFastPeriod_0, int optInSlowPeriod_1, MAType optInMethod_2, out int outBegIdx, out int outNbElement, double[] outReal_0, double[] tempBuffer, int doPercentageOutput)
	{
		if (optInSlowPeriod_1 < optInFastPeriod_0)
		{
			int num = optInSlowPeriod_1;
			optInSlowPeriod_1 = optInFastPeriod_0;
			optInFastPeriod_0 = num;
		}
		int outBegIdx2;
		int outNBElement;
		RetCode retCode = MovingAverage(startIdx, endIdx, inReal_0, optInFastPeriod_0, optInMethod_2, out outBegIdx2, out outNBElement, tempBuffer);
		if (retCode == RetCode.Success)
		{
			retCode = MovingAverage(startIdx, endIdx, inReal_0, optInSlowPeriod_1, optInMethod_2, out var outBegIdx3, out var outNBElement2, outReal_0);
			if (retCode == RetCode.Success)
			{
				int num2 = outBegIdx3 - outBegIdx2;
				if (doPercentageOutput != 0)
				{
					int num3 = 0;
					if (0 < outNBElement2)
					{
						do
						{
							double num4 = outReal_0[num3];
							if (-1E-08 < num4 && num4 < 1E-08)
							{
								outReal_0[num3] = 0.0;
							}
							else
							{
								outReal_0[num3] = (tempBuffer[num3 + num2] - num4) / num4 * 100.0;
							}
							num3++;
						}
						while (num3 < outNBElement2);
					}
				}
				else
				{
					int num3 = 0;
					if (0 < outNBElement2)
					{
						do
						{
							outReal_0[num3] = tempBuffer[num3 + num2] - outReal_0[num3];
							num3++;
						}
						while (num3 < outNBElement2);
					}
				}
				outBegIdx = outBegIdx3;
				outNbElement = outNBElement2;
				goto IL_00ce;
			}
		}
		outBegIdx = 0;
		outNbElement = 0;
		goto IL_00ce;
		IL_00ce:
		return retCode;
	}

	private static RetCode TA_INT_VAR(int startIdx, int endIdx, float[] inReal_0, int optInTimePeriod_0, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = optInTimePeriod_0 - 1;
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		double num2 = 0.0;
		double num3 = 0.0;
		int num4 = startIdx - num;
		int num5 = num4;
		int num6 = num5;
		if (optInTimePeriod_0 > 1 && num5 < startIdx)
		{
			do
			{
				double num7 = inReal_0[num6];
				num6++;
				num2 = num7 + num2;
				double num8 = num7;
				num3 = num8 * num8 + num3;
			}
			while (num6 < startIdx);
		}
		int num9 = 0;
		double num10 = optInTimePeriod_0;
		do
		{
			double num7 = inReal_0[num6];
			num6++;
			num2 = num7 + num2;
			double num11 = num7;
			num3 = num11 * num11 + num3;
			double num12 = num2 / num10;
			double num13 = num3 / num10;
			num7 = inReal_0[num4 + num9];
			num2 -= num7;
			double num14 = num3;
			double num15 = num7;
			num3 = num14 - num15 * num15;
			outReal_0[num9] = num13 - num12 * num12;
			num9++;
		}
		while (num6 <= endIdx);
		outNbElement = num9;
		outBegIdx = startIdx;
		return RetCode.Success;
	}

	private static RetCode TA_INT_VAR(int startIdx, int endIdx, double[] inReal_0, int optInTimePeriod_0, out int outBegIdx, out int outNbElement, double[] outReal_0)
	{
		int num = optInTimePeriod_0 - 1;
		if (startIdx < num)
		{
			startIdx = num;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNbElement = 0;
			return RetCode.Success;
		}
		double num2 = 0.0;
		double num3 = 0.0;
		int num4 = startIdx - num;
		int num5 = num4;
		int num6 = num5;
		if (optInTimePeriod_0 > 1 && num5 < startIdx)
		{
			do
			{
				double num7 = inReal_0[num6];
				num6++;
				num2 = num7 + num2;
				double num8 = num7;
				num3 = num8 * num8 + num3;
			}
			while (num6 < startIdx);
		}
		int num9 = 0;
		double num10 = optInTimePeriod_0;
		do
		{
			double num7 = inReal_0[num6];
			num6++;
			num2 = num7 + num2;
			double num11 = num7;
			num3 = num11 * num11 + num3;
			double num12 = num2 / num10;
			double num13 = num3 / num10;
			num7 = inReal_0[num4 + num9];
			num2 -= num7;
			double num14 = num3;
			double num15 = num7;
			num3 = num14 - num15 * num15;
			outReal_0[num9] = num13 - num12 * num12;
			num9++;
		}
		while (num6 <= endIdx);
		outNbElement = num9;
		outBegIdx = startIdx;
		return RetCode.Success;
	}

	private static void TA_INT_stddev_using_precalc_ma(float[] inReal, double[] inMovAvg, int inMovAvgBegIdx, int inMovAvgNbElement, int timePeriod, double[] output)
	{
		int num = inMovAvgBegIdx - timePeriod + 1;
		int num2 = num;
		double num3 = 0.0;
		int num4 = num2;
		if (num2 < inMovAvgBegIdx)
		{
			do
			{
				double num5 = inReal[num4];
				double num6 = num5;
				num3 = num6 * num6 + num3;
				num4++;
			}
			while (num4 < inMovAvgBegIdx);
		}
		int num7 = 0;
		if (0 >= inMovAvgNbElement)
		{
			return;
		}
		double num8 = timePeriod;
		int num9 = inMovAvgBegIdx - num;
		do
		{
			double num5 = inReal[num9 + (num7 + num)];
			double num10 = num5;
			num3 = num10 * num10 + num3;
			double num11 = num3 / num8;
			num5 = inReal[num7 + num];
			double num12 = num3;
			double num13 = num5;
			num3 = num12 - num13 * num13;
			num5 = inMovAvg[num7];
			double num14 = num11;
			double num15 = num5;
			num11 = num14 - num15 * num15;
			if (!(num11 < 1E-08))
			{
				output[num7] = Math.Sqrt(num11);
			}
			else
			{
				output[num7] = 0.0;
			}
			num7++;
		}
		while (num7 < inMovAvgNbElement);
	}

	private static void TA_INT_stddev_using_precalc_ma(double[] inReal, double[] inMovAvg, int inMovAvgBegIdx, int inMovAvgNbElement, int timePeriod, double[] output)
	{
		int num = inMovAvgBegIdx - timePeriod + 1;
		int num2 = num;
		double num3 = 0.0;
		int num4 = num2;
		if (num2 < inMovAvgBegIdx)
		{
			do
			{
				double num5 = inReal[num4];
				double num6 = num5;
				num3 = num6 * num6 + num3;
				num4++;
			}
			while (num4 < inMovAvgBegIdx);
		}
		int num7 = 0;
		if (0 >= inMovAvgNbElement)
		{
			return;
		}
		double num8 = timePeriod;
		int num9 = inMovAvgBegIdx - num;
		do
		{
			double num5 = inReal[num9 + (num7 + num)];
			double num10 = num5;
			num3 = num10 * num10 + num3;
			double num11 = num3 / num8;
			num5 = inReal[num7 + num];
			double num12 = num3;
			double num13 = num5;
			num3 = num12 - num13 * num13;
			num5 = inMovAvg[num7];
			double num14 = num11;
			double num15 = num5;
			num11 = num14 - num15 * num15;
			if (!(num11 < 1E-08))
			{
				output[num7] = Math.Sqrt(num11);
			}
			else
			{
				output[num7] = 0.0;
			}
			num7++;
		}
		while (num7 < inMovAvgNbElement);
	}

	static Core()
	{
		Globals = new GlobalsType();
		RestoreCandleDefaultSettings(CandleSettingType.AllCandleSettings);
	}

	public static RetCode SetUnstablePeriod(FuncUnstId id, uint unstablePeriod)
	{
		if (id > FuncUnstId.FuncUnstAll)
		{
			return RetCode.BadParam;
		}
		if (id == FuncUnstId.FuncUnstAll)
		{
			int num = 0;
			do
			{
				Globals.unstablePeriod[num] = unstablePeriod;
				num++;
			}
			while (num < 23);
		}
		else
		{
			Globals.unstablePeriod[(int)id] = unstablePeriod;
		}
		return RetCode.Success;
	}

	public static uint GetUnstablePeriod(FuncUnstId id)
	{
		if (id >= FuncUnstId.FuncUnstAll)
		{
			return 0u;
		}
		return Globals.unstablePeriod[(int)id];
	}

	public static RetCode SetCompatibility(Compatibility value)
	{
		Globals.compatibility = value;
		return RetCode.Success;
	}

	public static Compatibility GetCompatibility()
	{
		return Globals.compatibility;
	}

	public static RetCode SetCandleSettings(CandleSettingType settingType, RangeType rangeType, int avgPeriod, double factor)
	{
		if (settingType >= CandleSettingType.AllCandleSettings)
		{
			return RetCode.BadParam;
		}
		Globals.candleSettings[(int)settingType].settingType = settingType;
		Globals.candleSettings[(int)settingType].rangeType = rangeType;
		Globals.candleSettings[(int)settingType].avgPeriod = avgPeriod;
		Globals.candleSettings[(int)settingType].factor = factor;
		return RetCode.Success;
	}

	public static RetCode RestoreCandleDefaultSettings(CandleSettingType settingType)
	{
		switch (settingType)
		{
		case CandleSettingType.BodyLong:
			SetCandleSettings(CandleSettingType.BodyLong, RangeType.RealBody, 10, 1.0);
			break;
		case CandleSettingType.BodyVeryLong:
			SetCandleSettings(CandleSettingType.BodyVeryLong, RangeType.RealBody, 10, 3.0);
			break;
		case CandleSettingType.BodyShort:
			SetCandleSettings(CandleSettingType.BodyShort, RangeType.RealBody, 10, 1.0);
			break;
		case CandleSettingType.BodyDoji:
			SetCandleSettings(CandleSettingType.BodyDoji, RangeType.HighLow, 10, 0.1);
			break;
		case CandleSettingType.ShadowLong:
			SetCandleSettings(CandleSettingType.ShadowLong, RangeType.RealBody, 0, 1.0);
			break;
		case CandleSettingType.ShadowVeryLong:
			SetCandleSettings(CandleSettingType.ShadowVeryLong, RangeType.RealBody, 0, 2.0);
			break;
		case CandleSettingType.ShadowShort:
			SetCandleSettings(CandleSettingType.ShadowShort, RangeType.Shadows, 10, 1.0);
			break;
		case CandleSettingType.ShadowVeryShort:
			SetCandleSettings(CandleSettingType.ShadowVeryShort, RangeType.HighLow, 10, 0.1);
			break;
		case CandleSettingType.Near:
			SetCandleSettings(CandleSettingType.Near, RangeType.HighLow, 5, 0.2);
			break;
		case CandleSettingType.Far:
			SetCandleSettings(CandleSettingType.Far, RangeType.HighLow, 5, 0.6);
			break;
		case CandleSettingType.Equal:
			SetCandleSettings(CandleSettingType.Equal, RangeType.HighLow, 5, 0.05);
			break;
		case CandleSettingType.AllCandleSettings:
			SetCandleSettings(CandleSettingType.BodyLong, RangeType.RealBody, 10, 1.0);
			SetCandleSettings(CandleSettingType.BodyVeryLong, RangeType.RealBody, 10, 3.0);
			SetCandleSettings(CandleSettingType.BodyShort, RangeType.RealBody, 10, 1.0);
			SetCandleSettings(CandleSettingType.BodyDoji, RangeType.HighLow, 10, 0.1);
			SetCandleSettings(CandleSettingType.ShadowLong, RangeType.RealBody, 0, 1.0);
			SetCandleSettings(CandleSettingType.ShadowVeryLong, RangeType.RealBody, 0, 2.0);
			SetCandleSettings(CandleSettingType.ShadowShort, RangeType.Shadows, 10, 1.0);
			SetCandleSettings(CandleSettingType.ShadowVeryShort, RangeType.HighLow, 10, 0.1);
			SetCandleSettings(CandleSettingType.Near, RangeType.HighLow, 5, 0.2);
			SetCandleSettings(CandleSettingType.Far, RangeType.HighLow, 5, 0.6);
			SetCandleSettings(CandleSettingType.Equal, RangeType.HighLow, 5, 0.05);
			break;
		}
		return RetCode.Success;
	}

	public static int AcosLookback()
	{
		return 0;
	}

	public static RetCode Acos(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Acos(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Acos(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Acos(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AdLookback()
	{
		return 0;
	}

	public static RetCode Ad(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, float[] inVolume, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = (outNBElement = endIdx - startIdx + 1);
				outBegIdx = startIdx;
				int num2 = startIdx;
				int num3 = 0;
				double num4 = 0.0;
				if (num != 0)
				{
					do
					{
						double num5 = inHigh[num2];
						double num6 = inLow[num2];
						double num7 = num5 - num6;
						double num8 = inClose[num2];
						if (num7 > 0.0)
						{
							num4 = (double)inVolume[num2] * ((num8 - num6 - (num5 - num8)) / num7) + num4;
						}
						outReal[num3] = num4;
						num3++;
						num2++;
						num--;
					}
					while (num != 0);
				}
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Ad(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, double[] inVolume, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = (outNBElement = endIdx - startIdx + 1);
				outBegIdx = startIdx;
				int num2 = startIdx;
				int num3 = 0;
				double num4 = 0.0;
				if (num != 0)
				{
					do
					{
						double num5 = inHigh[num2];
						double num6 = inLow[num2];
						double num7 = num5 - num6;
						double num8 = inClose[num2];
						if (num7 > 0.0)
						{
							num4 = inVolume[num2] * ((num8 - num6 - (num5 - num8)) / num7) + num4;
						}
						outReal[num3] = num4;
						num3++;
						num2++;
						num--;
					}
					while (num != 0);
				}
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AddLookback()
	{
		return 0;
	}

	public static RetCode Add(int startIdx, int endIdx, float[] inReal0, float[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = (double)inReal0[num2] + (double)inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Add(int startIdx, int endIdx, double[] inReal0, double[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = inReal0[num2] + inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AdOscLookback(int optInFastPeriod, int optInSlowPeriod)
	{
		if (optInFastPeriod == int.MinValue)
		{
			optInFastPeriod = 3;
		}
		else if ((uint)(optInFastPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSlowPeriod == int.MinValue)
		{
			optInSlowPeriod = 10;
		}
		else if ((uint)(optInSlowPeriod - 2) > 99998u)
		{
			return -1;
		}
		return EmaLookback((optInFastPeriod >= optInSlowPeriod) ? optInFastPeriod : optInSlowPeriod);
	}

	public static RetCode AdOsc(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, float[] inVolume, int optInFastPeriod, int optInSlowPeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (optInFastPeriod == int.MinValue)
				{
					optInFastPeriod = 3;
				}
				else if ((uint)(optInFastPeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowPeriod == int.MinValue)
				{
					optInSlowPeriod = 10;
				}
				else if ((uint)(optInSlowPeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = EmaLookback((optInFastPeriod >= optInSlowPeriod) ? optInFastPeriod : optInSlowPeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				int num2 = startIdx - num;
				double num3 = 0.0;
				double num4 = 2.0 / (double)(optInFastPeriod + 1);
				double num5 = 1.0 - num4;
				double num6 = 2.0 / (double)(optInSlowPeriod + 1);
				double num7 = 1.0 - num6;
				double num8 = inHigh[num2];
				double num9 = inLow[num2];
				double num10 = num8 - num9;
				double num11 = inClose[num2];
				if (num10 > 0.0)
				{
					num3 = (double)inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + 0.0;
				}
				num2++;
				double num12 = num3;
				double num13 = num3;
				if (num2 < startIdx)
				{
					do
					{
						num8 = inHigh[num2];
						num9 = inLow[num2];
						num10 = num8 - num9;
						num11 = inClose[num2];
						if (num10 > 0.0)
						{
							num3 = (double)inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + num3;
						}
						num2++;
						num12 = num12 * num5 + num4 * num3;
						num13 = num13 * num7 + num6 * num3;
					}
					while (num2 < startIdx);
				}
				int num14 = 0;
				if (num2 <= endIdx)
				{
					do
					{
						num8 = inHigh[num2];
						num9 = inLow[num2];
						num10 = num8 - num9;
						num11 = inClose[num2];
						if (num10 > 0.0)
						{
							num3 = (double)inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + num3;
						}
						num2++;
						num12 = num12 * num5 + num4 * num3;
						num13 = num13 * num7 + num6 * num3;
						outReal[num14] = num12 - num13;
						num14++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num14;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode AdOsc(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, double[] inVolume, int optInFastPeriod, int optInSlowPeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (optInFastPeriod == int.MinValue)
				{
					optInFastPeriod = 3;
				}
				else if ((uint)(optInFastPeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowPeriod == int.MinValue)
				{
					optInSlowPeriod = 10;
				}
				else if ((uint)(optInSlowPeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = EmaLookback((optInFastPeriod >= optInSlowPeriod) ? optInFastPeriod : optInSlowPeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				int num2 = startIdx - num;
				double num3 = 0.0;
				double num4 = 2.0 / (double)(optInFastPeriod + 1);
				double num5 = 1.0 - num4;
				double num6 = 2.0 / (double)(optInSlowPeriod + 1);
				double num7 = 1.0 - num6;
				double num8 = inHigh[num2];
				double num9 = inLow[num2];
				double num10 = num8 - num9;
				double num11 = inClose[num2];
				if (num10 > 0.0)
				{
					num3 = inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + 0.0;
				}
				num2++;
				double num12 = num3;
				double num13 = num3;
				if (num2 < startIdx)
				{
					do
					{
						num8 = inHigh[num2];
						num9 = inLow[num2];
						num10 = num8 - num9;
						num11 = inClose[num2];
						if (num10 > 0.0)
						{
							num3 = inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + num3;
						}
						num2++;
						num12 = num12 * num5 + num4 * num3;
						num13 = num13 * num7 + num6 * num3;
					}
					while (num2 < startIdx);
				}
				int num14 = 0;
				if (num2 <= endIdx)
				{
					do
					{
						num8 = inHigh[num2];
						num9 = inLow[num2];
						num10 = num8 - num9;
						num11 = inClose[num2];
						if (num10 > 0.0)
						{
							num3 = inVolume[num2] * ((num11 - num9 - (num8 - num11)) / num10) + num3;
						}
						num2++;
						num12 = num12 * num5 + num4 * num3;
						num13 = num13 * num7 + num6 * num3;
						outReal[num14] = num12 - num13;
						num14++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num14;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AdxLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod * 2 + (int)Globals.unstablePeriod[0] - 1;
	}

	public static RetCode Adx(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod * 2 + (int)Globals.unstablePeriod[0] - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				int num5 = startIdx - num;
				double num6 = inHigh[num5];
				double num7 = inLow[num5];
				double num8 = inClose[num5];
				int num9 = optInTimePeriod - 1;
				int num10 = num9;
				num9--;
				if (num10 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num4 = num11 + num4;
						num8 = inClose[num5];
						num10 = num9;
						num9--;
					}
					while (num10 > 0);
				}
				double num15 = 0.0;
				int num16 = optInTimePeriod - 1;
				double num17;
				if (optInTimePeriod > 0)
				{
					num17 = optInTimePeriod;
					int num23;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num18 = num2;
						num2 = num18 - num18 / num17;
						double num19 = num3;
						num3 = num19 - num19 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num20 = num4;
						num4 = num20 - num20 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num15 = Math.Abs(num21 - num22) / num11 * 100.0 + num15;
							}
						}
						num23 = num16;
						num16--;
					}
					while (num23 > 0);
				}
				num17 = optInTimePeriod;
				double num24 = num15 / num17;
				int num25 = (int)Globals.unstablePeriod[0];
				int num26 = num25;
				num25--;
				if (num26 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num27 = num2;
						num2 = num27 - num27 / num17;
						double num28 = num3;
						num3 = num28 - num28 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num29 = num4;
						num4 = num29 - num29 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num24 = (Math.Abs(num21 - num22) / num11 * 100.0 + (double)(optInTimePeriod - 1) * num24) / num17;
							}
						}
						num26 = num25;
						num25--;
					}
					while (num26 > 0);
				}
				outReal[0] = num24;
				int num30 = 1;
				if (num5 < endIdx)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num31 = num2;
						num2 = num31 - num31 / num17;
						double num32 = num3;
						num3 = num32 - num32 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num33 = num4;
						num4 = num33 - num33 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num24 = (Math.Abs(num21 - num22) / num11 * 100.0 + (double)(optInTimePeriod - 1) * num24) / num17;
							}
						}
						outReal[num30] = num24;
						num30++;
					}
					while (num5 < endIdx);
				}
				outNBElement = num30;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Adx(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod * 2 + (int)Globals.unstablePeriod[0] - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				int num5 = startIdx - num;
				double num6 = inHigh[num5];
				double num7 = inLow[num5];
				double num8 = inClose[num5];
				int num9 = optInTimePeriod - 1;
				int num10 = num9;
				num9--;
				if (num10 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num4 = num11 + num4;
						num8 = inClose[num5];
						num10 = num9;
						num9--;
					}
					while (num10 > 0);
				}
				double num15 = 0.0;
				int num16 = optInTimePeriod - 1;
				double num17;
				if (optInTimePeriod > 0)
				{
					num17 = optInTimePeriod;
					int num23;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num18 = num2;
						num2 = num18 - num18 / num17;
						double num19 = num3;
						num3 = num19 - num19 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num20 = num4;
						num4 = num20 - num20 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num15 = Math.Abs(num21 - num22) / num11 * 100.0 + num15;
							}
						}
						num23 = num16;
						num16--;
					}
					while (num23 > 0);
				}
				num17 = optInTimePeriod;
				double num24 = num15 / num17;
				int num25 = (int)Globals.unstablePeriod[0];
				int num26 = num25;
				num25--;
				if (num26 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num27 = num2;
						num2 = num27 - num27 / num17;
						double num28 = num3;
						num3 = num28 - num28 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num29 = num4;
						num4 = num29 - num29 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num24 = (Math.Abs(num21 - num22) / num11 * 100.0 + (double)(optInTimePeriod - 1) * num24) / num17;
							}
						}
						num26 = num25;
						num25--;
					}
					while (num26 > 0);
				}
				outReal[0] = num24;
				int num30 = 1;
				if (num5 < endIdx)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num31 = num2;
						num2 = num31 - num31 / num17;
						double num32 = num3;
						num3 = num32 - num32 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num33 = num4;
						num4 = num33 - num33 / num17 + num11;
						num8 = inClose[num5];
						if (!(-1E-08 < num4) || !(num4 < 1E-08))
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (!(-1E-08 < num11) || !(num11 < 1E-08))
							{
								num24 = (Math.Abs(num21 - num22) / num11 * 100.0 + (double)(optInTimePeriod - 1) * num24) / num17;
							}
						}
						outReal[num30] = num24;
						num30++;
					}
					while (num5 < endIdx);
				}
				outNBElement = num30;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AdxrLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 3;
			}
		}
		int num = optInTimePeriod;
		return num + AdxLookback(num) - 1;
	}

	public static RetCode Adxr(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num;
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				num = optInTimePeriod;
				if (optInTimePeriod == int.MinValue)
				{
					num = 14;
					goto IL_006e;
				}
				if ((uint)(optInTimePeriod - 2) <= 99998u)
				{
					if (optInTimePeriod > 1)
					{
						goto IL_006e;
					}
					num2 = 3;
				}
				else
				{
					num2 = -1;
				}
				goto IL_0082;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_006e:
		int num3 = num;
		num2 = num3 + AdxLookback(num3) - 1;
		goto IL_0082;
		IL_0082:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num4 = endIdx - startIdx;
		double[] array = new double[num4 + optInTimePeriod];
		if (array == null)
		{
			return RetCode.AllocErr;
		}
		RetCode retCode = Adx(startIdx - optInTimePeriod + 1, endIdx, inHigh, inLow, inClose, optInTimePeriod, out outBegIdx, out outNBElement, array);
		if (retCode != RetCode.Success)
		{
			return retCode;
		}
		int num5 = optInTimePeriod - 1;
		int num6 = 0;
		int num7 = num4 + 1;
		if (num7 != 0)
		{
			do
			{
				outReal[num6] = (array[num5 + num6] + array[num6]) * 0.5;
				num6++;
				num7--;
			}
			while (num7 != 0);
		}
		outBegIdx = startIdx;
		outNBElement = num6;
		return RetCode.Success;
	}

	public static RetCode Adxr(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num;
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				num = optInTimePeriod;
				if (optInTimePeriod == int.MinValue)
				{
					num = 14;
					goto IL_006e;
				}
				if ((uint)(optInTimePeriod - 2) <= 99998u)
				{
					if (optInTimePeriod > 1)
					{
						goto IL_006e;
					}
					num2 = 3;
				}
				else
				{
					num2 = -1;
				}
				goto IL_0082;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_006e:
		int num3 = num;
		num2 = num3 + AdxLookback(num3) - 1;
		goto IL_0082;
		IL_0082:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num4 = endIdx - startIdx;
		double[] array = new double[num4 + optInTimePeriod];
		if (array == null)
		{
			return RetCode.AllocErr;
		}
		RetCode retCode = Adx(startIdx - optInTimePeriod + 1, endIdx, inHigh, inLow, inClose, optInTimePeriod, out outBegIdx, out outNBElement, array);
		if (retCode != RetCode.Success)
		{
			return retCode;
		}
		int num5 = optInTimePeriod - 1;
		int num6 = 0;
		int num7 = num4 + 1;
		if (num7 != 0)
		{
			do
			{
				outReal[num6] = (array[num5 + num6] + array[num6]) * 0.5;
				num6++;
				num7--;
			}
			while (num7 != 0);
		}
		outBegIdx = startIdx;
		outNBElement = num6;
		return RetCode.Success;
	}

	public static int ApoLookback(int optInFastPeriod, int optInSlowPeriod, MAType optInMAType)
	{
		if (optInFastPeriod == int.MinValue)
		{
			optInFastPeriod = 12;
		}
		else if ((uint)(optInFastPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSlowPeriod == int.MinValue)
		{
			optInSlowPeriod = 26;
		}
		else if ((uint)(optInSlowPeriod - 2) > 99998u)
		{
			return -1;
		}
		return MovingAverageLookback((optInSlowPeriod <= optInFastPeriod) ? optInFastPeriod : optInSlowPeriod, optInMAType);
	}

	public static RetCode Apo(int startIdx, int endIdx, float[] inReal, int optInFastPeriod, int optInSlowPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array = new double[endIdx - startIdx + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			return TA_INT_PO(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInMAType, out outBegIdx, out outNBElement, outReal, array, 0);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Apo(int startIdx, int endIdx, double[] inReal, int optInFastPeriod, int optInSlowPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array = new double[endIdx - startIdx + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			return TA_INT_PO(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInMAType, out outBegIdx, out outNBElement, outReal, array, 0);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AroonLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode Aroon(int startIdx, int endIdx, float[] inHigh, float[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outAroonDown, double[] outAroonUp)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outAroonDown == null)
				{
					return RetCode.BadParam;
				}
				if (outAroonUp == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < optInTimePeriod)
				{
					startIdx = optInTimePeriod;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx;
				int num3 = startIdx - optInTimePeriod;
				int num4 = -1;
				int num5 = -1;
				double num6 = 0.0;
				double num7 = 0.0;
				double num8 = 100.0 / (double)optInTimePeriod;
				int num9 = num3;
				do
				{
					double num10 = inLow[num2];
					if (num4 < num9)
					{
						num4 = num9;
						num6 = inLow[num9];
						int num11 = num9 + 1;
						if (num9 + 1 <= num2)
						{
							do
							{
								num10 = inLow[num11];
								if (num10 <= num6)
								{
									num4 = num11;
									num6 = num10;
								}
								num11++;
							}
							while (num11 <= num2);
						}
					}
					else if (num10 <= num6)
					{
						num4 = num2;
						num6 = num10;
					}
					num10 = inHigh[num2];
					if (num5 < num9)
					{
						num5 = num9;
						num7 = inHigh[num9];
						int num12 = num9 + 1;
						if (num9 + 1 <= num2)
						{
							do
							{
								num10 = inHigh[num12];
								if (num10 >= num7)
								{
									num5 = num12;
									num7 = num10;
								}
								num12++;
							}
							while (num12 <= num2);
						}
					}
					else if (num10 >= num7)
					{
						num5 = num2;
						num7 = num10;
					}
					outAroonUp[num] = (double)(num5 - num2 + optInTimePeriod) * num8;
					outAroonDown[num] = (double)(num4 - num2 + optInTimePeriod) * num8;
					num++;
					num2++;
					num9++;
				}
				while (num2 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Aroon(int startIdx, int endIdx, double[] inHigh, double[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outAroonDown, double[] outAroonUp)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outAroonDown == null)
				{
					return RetCode.BadParam;
				}
				if (outAroonUp == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < optInTimePeriod)
				{
					startIdx = optInTimePeriod;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx;
				int num3 = startIdx - optInTimePeriod;
				int num4 = -1;
				int num5 = -1;
				double num6 = 0.0;
				double num7 = 0.0;
				double num8 = 100.0 / (double)optInTimePeriod;
				int num9 = num3;
				do
				{
					double num10 = inLow[num2];
					if (num4 < num9)
					{
						num4 = num9;
						num6 = inLow[num9];
						int num11 = num9 + 1;
						if (num9 + 1 <= num2)
						{
							do
							{
								num10 = inLow[num11];
								if (num10 <= num6)
								{
									num4 = num11;
									num6 = num10;
								}
								num11++;
							}
							while (num11 <= num2);
						}
					}
					else if (num10 <= num6)
					{
						num4 = num2;
						num6 = num10;
					}
					num10 = inHigh[num2];
					if (num5 < num9)
					{
						num5 = num9;
						num7 = inHigh[num9];
						int num12 = num9 + 1;
						if (num9 + 1 <= num2)
						{
							do
							{
								num10 = inHigh[num12];
								if (num10 >= num7)
								{
									num5 = num12;
									num7 = num10;
								}
								num12++;
							}
							while (num12 <= num2);
						}
					}
					else if (num10 >= num7)
					{
						num5 = num2;
						num7 = num10;
					}
					outAroonUp[num] = (double)(num5 - num2 + optInTimePeriod) * num8;
					outAroonDown[num] = (double)(num4 - num2 + optInTimePeriod) * num8;
					num++;
					num2++;
					num9++;
				}
				while (num2 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AroonOscLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode AroonOsc(int startIdx, int endIdx, float[] inHigh, float[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < optInTimePeriod)
				{
					startIdx = optInTimePeriod;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - optInTimePeriod;
				int num3 = -1;
				int num4 = -1;
				double num5 = 0.0;
				double num6 = 0.0;
				double num7 = 100.0 / (double)optInTimePeriod;
				int num8 = num2;
				do
				{
					double num9 = inLow[optInTimePeriod + num8];
					if (num3 < num8)
					{
						num3 = num8;
						num5 = inLow[num8];
						int num10 = num8 + 1;
						if (num8 + 1 <= optInTimePeriod + num8)
						{
							do
							{
								num9 = inLow[num10];
								if (num9 <= num5)
								{
									num3 = num10;
									num5 = num9;
								}
								num10++;
							}
							while (num10 <= optInTimePeriod + num8);
						}
					}
					else if (num9 <= num5)
					{
						num3 = optInTimePeriod + num8;
						num5 = num9;
					}
					num9 = inHigh[optInTimePeriod + num8];
					if (num4 < num8)
					{
						num4 = num8;
						num6 = inHigh[num8];
						int num11 = num8 + 1;
						if (num8 + 1 <= optInTimePeriod + num8)
						{
							do
							{
								num9 = inHigh[num11];
								if (num9 >= num6)
								{
									num4 = num11;
									num6 = num9;
								}
								num11++;
							}
							while (num11 <= optInTimePeriod + num8);
						}
					}
					else if (num9 >= num6)
					{
						num4 = optInTimePeriod + num8;
						num6 = num9;
					}
					outReal[num] = (double)(num4 - num3) * num7;
					num++;
					num8++;
				}
				while (num8 + optInTimePeriod <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode AroonOsc(int startIdx, int endIdx, double[] inHigh, double[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < optInTimePeriod)
				{
					startIdx = optInTimePeriod;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - optInTimePeriod;
				int num3 = -1;
				int num4 = -1;
				double num5 = 0.0;
				double num6 = 0.0;
				double num7 = 100.0 / (double)optInTimePeriod;
				int num8 = num2;
				do
				{
					double num9 = inLow[optInTimePeriod + num8];
					if (num3 < num8)
					{
						num3 = num8;
						num5 = inLow[num8];
						int num10 = num8 + 1;
						if (num8 + 1 <= optInTimePeriod + num8)
						{
							do
							{
								num9 = inLow[num10];
								if (num9 <= num5)
								{
									num3 = num10;
									num5 = num9;
								}
								num10++;
							}
							while (num10 <= optInTimePeriod + num8);
						}
					}
					else if (num9 <= num5)
					{
						num3 = optInTimePeriod + num8;
						num5 = num9;
					}
					num9 = inHigh[optInTimePeriod + num8];
					if (num4 < num8)
					{
						num4 = num8;
						num6 = inHigh[num8];
						int num11 = num8 + 1;
						if (num8 + 1 <= optInTimePeriod + num8)
						{
							do
							{
								num9 = inHigh[num11];
								if (num9 >= num6)
								{
									num4 = num11;
									num6 = num9;
								}
								num11++;
							}
							while (num11 <= optInTimePeriod + num8);
						}
					}
					else if (num9 >= num6)
					{
						num4 = optInTimePeriod + num8;
						num6 = num9;
					}
					outReal[num] = (double)(num4 - num3) * num7;
					num++;
					num8++;
				}
				while (num8 + optInTimePeriod <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AsinLookback()
	{
		return 0;
	}

	public static RetCode Asin(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Asin(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Asin(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Asin(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AtanLookback()
	{
		return 0;
	}

	public static RetCode Atan(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Atan(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Atan(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Atan(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AtrLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return (int)Globals.unstablePeriod[2] + optInTimePeriod;
	}

	public static RetCode Atr(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				int num = AtrLookback(optInTimePeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				if (optInTimePeriod <= 1)
				{
					return TrueRange(startIdx, endIdx, inHigh, inLow, inClose, out outBegIdx, out outNBElement, outReal);
				}
				double[] array2 = new double[endIdx + (num - startIdx) + 1];
				int outBegIdx2;
				int outNBElement2;
				RetCode retCode = TrueRange(startIdx - num + 1, endIdx, inHigh, inLow, inClose, out outBegIdx2, out outNBElement2, array2);
				if (retCode != RetCode.Success)
				{
					return retCode;
				}
				RetCode retCode2 = TA_INT_SMA(optInTimePeriod - 1, optInTimePeriod - 1, array2, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
				if (retCode2 != RetCode.Success)
				{
					return retCode2;
				}
				double num2 = array[0];
				int num3 = optInTimePeriod;
				int num4 = (int)Globals.unstablePeriod[2];
				if (num4 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num4--;
					}
					while (num4 != 0);
				}
				int num7 = 1;
				outReal[0] = num2;
				int num8 = endIdx - startIdx;
				if (num8 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					int num9 = num3 - 1;
					do
					{
						num2 = array2[num9 + num7] + num5 * num2;
						num2 = (outReal[num7] = num2 / num6);
						num7++;
						num8--;
					}
					while (num8 != 0);
				}
				outBegIdx = startIdx;
				outNBElement = num7;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Atr(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				int num = AtrLookback(optInTimePeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				if (optInTimePeriod <= 1)
				{
					return TrueRange(startIdx, endIdx, inHigh, inLow, inClose, out outBegIdx, out outNBElement, outReal);
				}
				double[] array2 = new double[endIdx + (num - startIdx) + 1];
				int outBegIdx2;
				int outNBElement2;
				RetCode retCode = TrueRange(startIdx - num + 1, endIdx, inHigh, inLow, inClose, out outBegIdx2, out outNBElement2, array2);
				if (retCode != RetCode.Success)
				{
					return retCode;
				}
				RetCode retCode2 = TA_INT_SMA(optInTimePeriod - 1, optInTimePeriod - 1, array2, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
				if (retCode2 != RetCode.Success)
				{
					return retCode2;
				}
				double num2 = array[0];
				int num3 = optInTimePeriod;
				int num4 = (int)Globals.unstablePeriod[2];
				if (num4 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num4--;
					}
					while (num4 != 0);
				}
				int num7 = 1;
				outReal[0] = num2;
				int num8 = endIdx - startIdx;
				if (num8 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					int num9 = num3 - 1;
					do
					{
						num2 = array2[num9 + num7] + num5 * num2;
						num2 = (outReal[num7] = num2 / num6);
						num7++;
						num8--;
					}
					while (num8 != 0);
				}
				outBegIdx = startIdx;
				outNBElement = num7;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int AvgPriceLookback()
	{
		return 0;
	}

	public static RetCode AvgPrice(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = ((double)inHigh[num2] + (double)inLow[num2] + (double)inClose[num2] + (double)inOpen[num2]) * 0.25;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode AvgPrice(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = (inHigh[num2] + inLow[num2] + inClose[num2] + inOpen[num2]) * 0.25;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int BbandsLookback(int optInTimePeriod, double optInNbDevUp, double optInNbDevDn, MAType optInMAType)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 5;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInNbDevUp == -4E+37 || (!(optInNbDevUp < -3E+37) && !(optInNbDevUp > 3E+37)))
		{
			if (optInNbDevDn == -4E+37 || (!(optInNbDevDn < -3E+37) && !(optInNbDevDn > 3E+37)))
			{
				return MovingAverageLookback(optInTimePeriod, optInMAType);
			}
			return -1;
		}
		return -1;
	}

	public static RetCode Bbands(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, double optInNbDevUp, double optInNbDevDn, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outRealUpperBand, double[] outRealMiddleBand, double[] outRealLowerBand)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDevUp == -4E+37)
			{
				optInNbDevUp = 2.0;
			}
			else if (optInNbDevUp < -3E+37 || optInNbDevUp > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (optInNbDevDn == -4E+37)
			{
				optInNbDevDn = 2.0;
			}
			else if (optInNbDevDn < -3E+37 || optInNbDevDn > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (outRealUpperBand == null)
			{
				return RetCode.BadParam;
			}
			if (outRealMiddleBand == null)
			{
				return RetCode.BadParam;
			}
			if (outRealLowerBand == null)
			{
				return RetCode.BadParam;
			}
			RetCode retCode = MovingAverage(startIdx, endIdx, inReal, optInTimePeriod, optInMAType, out outBegIdx, out outNBElement, outRealMiddleBand);
			if (retCode == RetCode.Success)
			{
				int num = outNBElement;
				if (num != 0)
				{
					if (optInMAType == MAType.Sma)
					{
						TA_INT_stddev_using_precalc_ma(inReal, outRealMiddleBand, outBegIdx, num, optInTimePeriod, outRealLowerBand);
					}
					else
					{
						retCode = StdDev(outBegIdx, endIdx, inReal, optInTimePeriod, 1.0, out outBegIdx, out outNBElement, outRealLowerBand);
						if (retCode != RetCode.Success)
						{
							outNBElement = 0;
							return retCode;
						}
					}
					if (optInNbDevUp == optInNbDevDn)
					{
						if (optInNbDevUp == 1.0)
						{
							int num2 = 0;
							if (0 < outNBElement)
							{
								do
								{
									double num3 = outRealLowerBand[num2];
									double num4 = outRealMiddleBand[num2];
									outRealUpperBand[num2] = num4 + num3;
									outRealLowerBand[num2] = num4 - num3;
									num2++;
								}
								while (num2 < outNBElement);
							}
						}
						else
						{
							int num2 = 0;
							if (0 < outNBElement)
							{
								do
								{
									double num3 = outRealLowerBand[num2] * optInNbDevUp;
									double num4 = outRealMiddleBand[num2];
									outRealUpperBand[num2] = num4 + num3;
									outRealLowerBand[num2] = num4 - num3;
									num2++;
								}
								while (num2 < outNBElement);
							}
						}
					}
					else if (optInNbDevUp == 1.0)
					{
						int num2 = 0;
						if (0 < outNBElement)
						{
							do
							{
								double num3 = outRealLowerBand[num2];
								double num4 = outRealMiddleBand[num2];
								outRealUpperBand[num2] = num4 + num3;
								outRealLowerBand[num2] = num4 - num3 * optInNbDevDn;
								num2++;
							}
							while (num2 < outNBElement);
						}
					}
					else if (optInNbDevDn == 1.0)
					{
						int num2 = 0;
						if (0 < outNBElement)
						{
							do
							{
								double num3 = outRealLowerBand[num2];
								double num4 = outRealMiddleBand[num2];
								outRealLowerBand[num2] = num4 - num3;
								outRealUpperBand[num2] = num3 * optInNbDevUp + num4;
								num2++;
							}
							while (num2 < outNBElement);
						}
					}
					else
					{
						int num2 = 0;
						if (0 < outNBElement)
						{
							do
							{
								double num3 = outRealLowerBand[num2];
								double num4 = outRealMiddleBand[num2];
								outRealUpperBand[num2] = num3 * optInNbDevUp + num4;
								outRealLowerBand[num2] = num4 - num3 * optInNbDevDn;
								num2++;
							}
							while (num2 < outNBElement);
						}
					}
					return RetCode.Success;
				}
			}
			outNBElement = 0;
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Bbands(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, double optInNbDevUp, double optInNbDevDn, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outRealUpperBand, double[] outRealMiddleBand, double[] outRealLowerBand)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDevUp == -4E+37)
			{
				optInNbDevUp = 2.0;
			}
			else if (optInNbDevUp < -3E+37 || optInNbDevUp > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (optInNbDevDn == -4E+37)
			{
				optInNbDevDn = 2.0;
			}
			else if (optInNbDevDn < -3E+37 || optInNbDevDn > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (outRealUpperBand == null)
			{
				return RetCode.BadParam;
			}
			if (outRealMiddleBand == null)
			{
				return RetCode.BadParam;
			}
			if (outRealLowerBand == null)
			{
				return RetCode.BadParam;
			}
			double[] array;
			double[] array2;
			if (inReal == outRealUpperBand)
			{
				array = outRealMiddleBand;
				array2 = outRealLowerBand;
			}
			else if (inReal == outRealLowerBand)
			{
				array = outRealMiddleBand;
				array2 = outRealUpperBand;
			}
			else if (inReal == outRealMiddleBand)
			{
				array = outRealLowerBand;
				array2 = outRealUpperBand;
			}
			else
			{
				array = outRealMiddleBand;
				array2 = outRealUpperBand;
			}
			if (array != inReal && array2 != inReal)
			{
				RetCode retCode = MovingAverage(startIdx, endIdx, inReal, optInTimePeriod, optInMAType, out outBegIdx, out outNBElement, array);
				if (retCode == RetCode.Success)
				{
					int num = outNBElement;
					if (num != 0)
					{
						if (optInMAType == MAType.Sma)
						{
							TA_INT_stddev_using_precalc_ma(inReal, array, outBegIdx, num, optInTimePeriod, array2);
						}
						else
						{
							retCode = StdDev(outBegIdx, endIdx, inReal, optInTimePeriod, 1.0, out outBegIdx, out outNBElement, array2);
							if (retCode != RetCode.Success)
							{
								outNBElement = 0;
								return retCode;
							}
						}
						if (array != outRealMiddleBand)
						{
							Array.Copy(array, 0, outRealMiddleBand, 0, outNBElement);
						}
						if (optInNbDevUp == optInNbDevDn)
						{
							if (optInNbDevUp == 1.0)
							{
								int num2 = 0;
								if (0 < outNBElement)
								{
									do
									{
										double num3 = array2[num2];
										double num4 = outRealMiddleBand[num2];
										outRealUpperBand[num2] = num4 + num3;
										outRealLowerBand[num2] = num4 - num3;
										num2++;
									}
									while (num2 < outNBElement);
								}
							}
							else
							{
								int num2 = 0;
								if (0 < outNBElement)
								{
									do
									{
										double num3 = array2[num2] * optInNbDevUp;
										double num4 = outRealMiddleBand[num2];
										outRealUpperBand[num2] = num4 + num3;
										outRealLowerBand[num2] = num4 - num3;
										num2++;
									}
									while (num2 < outNBElement);
								}
							}
						}
						else if (optInNbDevUp == 1.0)
						{
							int num2 = 0;
							if (0 < outNBElement)
							{
								do
								{
									double num3 = array2[num2];
									double num4 = outRealMiddleBand[num2];
									outRealUpperBand[num2] = num4 + num3;
									outRealLowerBand[num2] = num4 - num3 * optInNbDevDn;
									num2++;
								}
								while (num2 < outNBElement);
							}
						}
						else if (optInNbDevDn == 1.0)
						{
							int num2 = 0;
							if (0 < outNBElement)
							{
								do
								{
									double num3 = array2[num2];
									double num4 = outRealMiddleBand[num2];
									outRealLowerBand[num2] = num4 - num3;
									outRealUpperBand[num2] = num3 * optInNbDevUp + num4;
									num2++;
								}
								while (num2 < outNBElement);
							}
						}
						else
						{
							int num2 = 0;
							if (0 < outNBElement)
							{
								do
								{
									double num3 = array2[num2];
									double num4 = outRealMiddleBand[num2];
									outRealUpperBand[num2] = num3 * optInNbDevUp + num4;
									outRealLowerBand[num2] = num4 - num3 * optInNbDevDn;
									num2++;
								}
								while (num2 < outNBElement);
							}
						}
						return RetCode.Success;
					}
				}
				outNBElement = 0;
				return retCode;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int BetaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 5;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode Beta(int startIdx, int endIdx, float[] inReal0, float[] inReal1, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double num = 0.0;
		double num2 = 0.0;
		double num3 = 0.0;
		double num4 = 0.0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num5 = startIdx - optInTimePeriod;
			double num6 = inReal0[num5];
			double num7 = num6;
			double num8 = inReal1[num5];
			double num9 = num8;
			num5++;
			int num10 = num5;
			if (num5 < startIdx)
			{
				do
				{
					double num11 = inReal0[num10];
					double num12 = ((!(-1E-08 < num7) || !(num7 < 1E-08)) ? ((num11 - num7) / num7) : 0.0);
					num7 = num11;
					num11 = inReal1[num10];
					num10++;
					double num13 = ((!(-1E-08 < num9) || !(num9 < 1E-08)) ? ((num11 - num9) / num9) : 0.0);
					num9 = num11;
					double num14 = num12;
					num = num14 * num14 + num;
					num2 = num13 * num12 + num2;
					num3 = num12 + num3;
					num4 = num13 + num4;
				}
				while (num10 < startIdx);
			}
			int num15 = 0;
			double num16 = optInTimePeriod;
			do
			{
				double num11 = inReal0[num10];
				double num12 = ((!(-1E-08 < num7) || !(num7 < 1E-08)) ? ((num11 - num7) / num7) : 0.0);
				num7 = num11;
				num11 = inReal1[num10];
				num10++;
				double num13 = ((!(-1E-08 < num9) || !(num9 < 1E-08)) ? ((num11 - num9) / num9) : 0.0);
				num9 = num11;
				double num17 = num12;
				num = num17 * num17 + num;
				num2 = num13 * num12 + num2;
				num3 = num12 + num3;
				num4 = num13 + num4;
				num11 = inReal0[num5];
				num12 = ((!(-1E-08 < num6) || !(num6 < 1E-08)) ? ((num11 - num6) / num6) : 0.0);
				num6 = num11;
				num11 = inReal1[num5];
				num5++;
				num13 = ((!(-1E-08 < num8) || !(num8 < 1E-08)) ? ((num11 - num8) / num8) : 0.0);
				num8 = num11;
				double num18 = num16 * num;
				double num19 = num3;
				num11 = num18 - num19 * num19;
				if (-1E-08 < num11 && num11 < 1E-08)
				{
					outReal[num15] = 0.0;
					num15++;
				}
				else
				{
					outReal[num15] = (num16 * num2 - num4 * num3) / num11;
					num15++;
				}
				double num20 = num;
				double num21 = num12;
				num = num20 - num21 * num21;
				num2 -= num13 * num12;
				num3 -= num12;
				num4 -= num13;
			}
			while (num10 <= endIdx);
			outNBElement = num15;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Beta(int startIdx, int endIdx, double[] inReal0, double[] inReal1, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double num = 0.0;
		double num2 = 0.0;
		double num3 = 0.0;
		double num4 = 0.0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num5 = startIdx - optInTimePeriod;
			double num6 = inReal0[num5];
			double num7 = num6;
			double num8 = inReal1[num5];
			double num9 = num8;
			num5++;
			int num10 = num5;
			if (num5 < startIdx)
			{
				do
				{
					double num11 = inReal0[num10];
					double num12 = ((!(-1E-08 < num7) || !(num7 < 1E-08)) ? ((num11 - num7) / num7) : 0.0);
					num7 = num11;
					num11 = inReal1[num10];
					num10++;
					double num13 = ((!(-1E-08 < num9) || !(num9 < 1E-08)) ? ((num11 - num9) / num9) : 0.0);
					num9 = num11;
					double num14 = num12;
					num = num14 * num14 + num;
					num2 = num13 * num12 + num2;
					num3 = num12 + num3;
					num4 = num13 + num4;
				}
				while (num10 < startIdx);
			}
			int num15 = 0;
			double num16 = optInTimePeriod;
			do
			{
				double num11 = inReal0[num10];
				double num12 = ((!(-1E-08 < num7) || !(num7 < 1E-08)) ? ((num11 - num7) / num7) : 0.0);
				num7 = num11;
				num11 = inReal1[num10];
				num10++;
				double num13 = ((!(-1E-08 < num9) || !(num9 < 1E-08)) ? ((num11 - num9) / num9) : 0.0);
				num9 = num11;
				double num17 = num12;
				num = num17 * num17 + num;
				num2 = num13 * num12 + num2;
				num3 = num12 + num3;
				num4 = num13 + num4;
				num11 = inReal0[num5];
				num12 = ((!(-1E-08 < num6) || !(num6 < 1E-08)) ? ((num11 - num6) / num6) : 0.0);
				num6 = num11;
				num11 = inReal1[num5];
				num5++;
				num13 = ((!(-1E-08 < num8) || !(num8 < 1E-08)) ? ((num11 - num8) / num8) : 0.0);
				num8 = num11;
				double num18 = num16 * num;
				double num19 = num3;
				num11 = num18 - num19 * num19;
				if (-1E-08 < num11 && num11 < 1E-08)
				{
					outReal[num15] = 0.0;
					num15++;
				}
				else
				{
					outReal[num15] = (num16 * num2 - num4 * num3) / num11;
					num15++;
				}
				double num20 = num;
				double num21 = num12;
				num = num20 - num21 * num21;
				num2 -= num13 * num12;
				num3 -= num12;
				num4 -= num13;
			}
			while (num10 <= endIdx);
			outNBElement = num15;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int BopLookback()
	{
		return 0;
	}

	public static RetCode Bop(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						double num3 = (double)inHigh[num2] - (double)inLow[num2];
						if (num3 < 1E-08)
						{
							outReal[num] = 0.0;
							num++;
						}
						else
						{
							outReal[num] = ((double)inClose[num2] - (double)inOpen[num2]) / num3;
							num++;
						}
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Bop(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						double num3 = inHigh[num2] - inLow[num2];
						if (num3 < 1E-08)
						{
							outReal[num] = 0.0;
							num++;
						}
						else
						{
							outReal[num] = (inClose[num2] - inOpen[num2]) / num3;
							num++;
						}
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CciLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Cci(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num2 = optInTimePeriod - 1;
				if (startIdx < num2)
				{
					startIdx = num2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				if (optInTimePeriod <= 0)
				{
					return RetCode.AllocErr;
				}
				double[] array = new double[optInTimePeriod];
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				int num3 = optInTimePeriod - 1;
				int num4 = startIdx - num2;
				if (optInTimePeriod > 1 && num4 < startIdx)
				{
					do
					{
						array[num] = ((double)inHigh[num4] + (double)inLow[num4] + (double)inClose[num4]) / 3.0;
						num4++;
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num4 < startIdx);
				}
				int num5 = 0;
				double num6 = optInTimePeriod;
				do
				{
					double num7 = (array[num] = ((double)inHigh[num4] + (double)inLow[num4] + (double)inClose[num4]) / 3.0);
					double num8 = 0.0;
					int num9 = 0;
					if (0 < optInTimePeriod)
					{
						do
						{
							num8 = array[num9] + num8;
							num9++;
						}
						while (num9 < optInTimePeriod);
					}
					num8 /= num6;
					double num10 = 0.0;
					int num11 = 0;
					if (0 < optInTimePeriod)
					{
						do
						{
							num10 = Math.Abs(array[num11] - num8) + num10;
							num11++;
						}
						while (num11 < optInTimePeriod);
					}
					double num12 = num7 - num8;
					if (num12 != 0.0 && num10 != 0.0)
					{
						outReal[num5] = num12 / (num10 / num6 * 0.015);
						num5++;
					}
					else
					{
						outReal[num5] = 0.0;
						num5++;
					}
					num++;
					if (num > num3)
					{
						num = 0;
					}
					num4++;
				}
				while (num4 <= endIdx);
				outNBElement = num5;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cci(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num2 = optInTimePeriod - 1;
				if (startIdx < num2)
				{
					startIdx = num2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				if (optInTimePeriod <= 0)
				{
					return RetCode.AllocErr;
				}
				double[] array = new double[optInTimePeriod];
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				int num3 = optInTimePeriod - 1;
				int num4 = startIdx - num2;
				if (optInTimePeriod > 1 && num4 < startIdx)
				{
					do
					{
						array[num] = (inHigh[num4] + inLow[num4] + inClose[num4]) / 3.0;
						num4++;
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num4 < startIdx);
				}
				int num5 = 0;
				double num6 = optInTimePeriod;
				do
				{
					double num7 = (array[num] = (inHigh[num4] + inLow[num4] + inClose[num4]) / 3.0);
					double num8 = 0.0;
					int num9 = 0;
					if (0 < optInTimePeriod)
					{
						do
						{
							num8 = array[num9] + num8;
							num9++;
						}
						while (num9 < optInTimePeriod);
					}
					num8 /= num6;
					double num10 = 0.0;
					int num11 = 0;
					if (0 < optInTimePeriod)
					{
						do
						{
							num10 = Math.Abs(array[num11] - num8) + num10;
							num11++;
						}
						while (num11 < optInTimePeriod);
					}
					double num12 = num7 - num8;
					if (num12 != 0.0 && num10 != 0.0)
					{
						outReal[num5] = num12 / (num10 / num6 * 0.015);
						num5++;
					}
					else
					{
						outReal[num5] = 0.0;
						num5++;
					}
					num++;
					if (num > num3)
					{
						num = 0;
					}
					num4++;
				}
				while (num4 <= endIdx);
				outNBElement = num5;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl2CrowsLookback()
	{
		return Globals.candleSettings[0].avgPeriod + 2;
	}

	public static RetCode Cdl2Crows(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl2CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod - 2;
				int num4 = num3;
				if (num3 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = (double)num5 + num2;
						num4++;
					}
					while (num4 < startIdx - 2);
				}
				int num12 = 0;
				int num13 = num3;
				int num14 = startIdx - 2;
				do
				{
					float num15 = inClose[num14];
					float num16 = inOpen[num14];
					RangeType rangeType;
					if ((double)num15 >= (double)num16)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num17 = candleSetting.avgPeriod;
						double num18;
						if (num17 != 0.0)
						{
							num18 = num2 / num17;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num19;
							if (rangeType == RangeType.RealBody)
							{
								num19 = (float)(double)Math.Abs((float)((double)num15 - (double)num16));
							}
							else
							{
								float num20;
								if (rangeType == RangeType.HighLow)
								{
									num20 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num23;
									if (rangeType == RangeType.Shadows)
									{
										float num21 = ((!((double)num15 >= (double)num16)) ? num16 : num15);
										float num22 = ((!((double)num15 >= (double)num16)) ? num15 : num16);
										num23 = (float)((double)num22 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num21));
									}
									else
									{
										num23 = 0f;
									}
									num20 = num23;
								}
								num19 = num20;
							}
							num18 = num19;
						}
						double num24 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > Globals.candleSettings[0].factor * num18 / num24)
						{
							float num25 = inClose[num14 + 1];
							float num26 = inOpen[num14 + 1];
							if (!((double)num25 >= (double)num26))
							{
								float num27 = ((!((double)num26 < (double)num25)) ? num25 : num26);
								num16 = inOpen[num14];
								num15 = inClose[num14];
								float num28 = ((!((double)num16 > (double)num15)) ? num15 : num16);
								if ((double)num27 > (double)num28)
								{
									float num29 = inClose[num14 + 2];
									float num30 = inOpen[num14 + 2];
									if (!((double)num29 >= (double)num30) && (double)num30 < (double)num26 && (double)num30 > (double)num25 && (double)num29 > (double)num16 && (double)num29 < (double)num15)
									{
										outInteger[num12] = -100;
										num12++;
										goto IL_02fc;
									}
								}
							}
						}
					}
					outInteger[num12] = 0;
					num12++;
					goto IL_02fc;
					IL_02fc:
					rangeType = Globals.candleSettings[0].rangeType;
					float num31;
					if (rangeType == RangeType.RealBody)
					{
						num31 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num32;
						if (rangeType == RangeType.HighLow)
						{
							num32 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num35;
							if (rangeType == RangeType.Shadows)
							{
								num15 = inClose[num14];
								num16 = inOpen[num14];
								float num33 = ((!((double)num15 >= (double)num16)) ? num16 : num15);
								float num34 = ((!((double)num15 >= (double)num16)) ? num15 : num16);
								num35 = (float)((double)num34 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num33));
							}
							else
							{
								num35 = 0f;
							}
							num32 = num35;
						}
						num31 = num32;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num36;
					if (rangeType == RangeType.RealBody)
					{
						num36 = (float)(double)Math.Abs((float)((double)inClose[num13] - (double)inOpen[num13]));
					}
					else
					{
						float num37;
						if (rangeType == RangeType.HighLow)
						{
							num37 = (float)((double)inHigh[num13] - (double)inLow[num13]);
						}
						else
						{
							float num42;
							if (rangeType == RangeType.Shadows)
							{
								float num38 = inClose[num13];
								float num39 = inOpen[num13];
								float num40 = ((!((double)num38 >= (double)num39)) ? num39 : num38);
								float num41 = ((!((double)num38 >= (double)num39)) ? num38 : num39);
								num42 = (float)((double)num41 - (double)inLow[num13] + ((double)inHigh[num13] - (double)num40));
							}
							else
							{
								num42 = 0f;
							}
							num37 = num42;
						}
						num36 = num37;
					}
					num2 = (double)(num31 - num36) + num2;
					num14++;
					num13++;
				}
				while (num14 + 2 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl2Crows(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl2CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod - 2;
				int num4 = num3;
				if (num3 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4] + (inHigh[num4] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = num5 + num2;
						num4++;
					}
					while (num4 < startIdx - 2);
				}
				int num12 = 0;
				int num13 = num3;
				int num14 = startIdx - 2;
				do
				{
					double num15 = inClose[num14];
					double num16 = inOpen[num14];
					RangeType rangeType;
					if (num15 >= num16)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num17 = candleSetting.avgPeriod;
						double num18;
						if (num17 != 0.0)
						{
							num18 = num2 / num17;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num19;
							if (rangeType == RangeType.RealBody)
							{
								num19 = Math.Abs(num15 - num16);
							}
							else
							{
								double num20;
								if (rangeType == RangeType.HighLow)
								{
									num20 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num23;
									if (rangeType == RangeType.Shadows)
									{
										double num21 = num15;
										double num22 = num16;
										num23 = num22 - inLow[num14] + (inHigh[num14] - num21);
									}
									else
									{
										num23 = 0.0;
									}
									num20 = num23;
								}
								num19 = num20;
							}
							num18 = num19;
						}
						double num24 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num14] - inOpen[num14]) > Globals.candleSettings[0].factor * num18 / num24)
						{
							double num25 = inClose[num14 + 1];
							double num26 = inOpen[num14 + 1];
							if (!(num25 >= num26))
							{
								double num27 = ((!(num26 < num25)) ? num25 : num26);
								num16 = inOpen[num14];
								num15 = inClose[num14];
								double num28 = ((!(num16 > num15)) ? num15 : num16);
								if (num27 > num28)
								{
									double num29 = inClose[num14 + 2];
									double num30 = inOpen[num14 + 2];
									if (!(num29 >= num30) && num30 < num26 && num30 > num25 && num29 > num16 && num29 < num15)
									{
										outInteger[num12] = -100;
										num12++;
										goto IL_02b0;
									}
								}
							}
						}
					}
					outInteger[num12] = 0;
					num12++;
					goto IL_02b0;
					IL_02b0:
					rangeType = Globals.candleSettings[0].rangeType;
					double num31;
					if (rangeType == RangeType.RealBody)
					{
						num31 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num32;
						if (rangeType == RangeType.HighLow)
						{
							num32 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num35;
							if (rangeType == RangeType.Shadows)
							{
								num15 = inClose[num14];
								num16 = inOpen[num14];
								double num33 = ((!(num15 >= num16)) ? num16 : num15);
								double num34 = ((!(num15 >= num16)) ? num15 : num16);
								num35 = num34 - inLow[num14] + (inHigh[num14] - num33);
							}
							else
							{
								num35 = 0.0;
							}
							num32 = num35;
						}
						num31 = num32;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num36;
					if (rangeType == RangeType.RealBody)
					{
						num36 = Math.Abs(inClose[num13] - inOpen[num13]);
					}
					else
					{
						double num37;
						if (rangeType == RangeType.HighLow)
						{
							num37 = inHigh[num13] - inLow[num13];
						}
						else
						{
							double num42;
							if (rangeType == RangeType.Shadows)
							{
								double num38 = inClose[num13];
								double num39 = inOpen[num13];
								double num40 = ((!(num38 >= num39)) ? num39 : num38);
								double num41 = ((!(num38 >= num39)) ? num38 : num39);
								num42 = num41 - inLow[num13] + (inHigh[num13] - num40);
							}
							else
							{
								num42 = 0.0;
							}
							num37 = num42;
						}
						num36 = num37;
					}
					num2 = num31 - num36 + num2;
					num14++;
					num13++;
				}
				while (num14 + 2 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3BlackCrowsLookback()
	{
		return Globals.candleSettings[7].avgPeriod + 3;
	}

	public static RetCode Cdl3BlackCrows(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3BlackCrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				int num2 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num4;
						if (rangeType == RangeType.RealBody)
						{
							num4 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
						}
						else
						{
							float num5;
							if (rangeType == RangeType.HighLow)
							{
								num5 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
							}
							else
							{
								float num10;
								if (rangeType == RangeType.Shadows)
								{
									float num6 = inClose[num3 - 1];
									float num7 = inOpen[num3 - 1];
									float num8 = ((!((double)num6 >= (double)num7)) ? num7 : num6);
									float num9 = ((!((double)num6 >= (double)num7)) ? num6 : num7);
									num10 = (float)((double)num9 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num8));
								}
								else
								{
									num10 = 0f;
								}
								num5 = num10;
							}
							num4 = num5;
						}
						array[2] += num4;
						rangeType = Globals.candleSettings[7].rangeType;
						float num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
						}
						else
						{
							float num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = (float)((double)inHigh[num3] - (double)inLow[num3]);
							}
							else
							{
								float num17;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num3];
									float num14 = inOpen[num3];
									float num15 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num16 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num17 = (float)((double)num16 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num15));
								}
								else
								{
									num17 = 0f;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						array[1] += num11;
						rangeType = Globals.candleSettings[7].rangeType;
						float num18;
						if (rangeType == RangeType.RealBody)
						{
							num18 = (float)(double)Math.Abs((float)((double)inClose[num3 + 1] - (double)inOpen[num3 + 1]));
						}
						else
						{
							float num19;
							if (rangeType == RangeType.HighLow)
							{
								num19 = (float)((double)inHigh[num3 + 1] - (double)inLow[num3 + 1]);
							}
							else
							{
								float num24;
								if (rangeType == RangeType.Shadows)
								{
									float num20 = inClose[num3 + 1];
									float num21 = inOpen[num3 + 1];
									float num22 = ((!((double)num20 >= (double)num21)) ? num21 : num20);
									float num23 = ((!((double)num20 >= (double)num21)) ? num20 : num21);
									num24 = (float)((double)num23 - (double)inLow[num3 + 1] + ((double)inHigh[num3 + 1] - (double)num22));
								}
								else
								{
									num24 = 0f;
								}
								num19 = num24;
							}
							num18 = num19;
						}
						array[0] += num18;
						num3++;
					}
					while (num3 + 1 < startIdx);
				}
				int num25 = startIdx;
				int num26 = 0;
				do
				{
					if ((double)inClose[num25 - 3] >= (double)inOpen[num25 - 3])
					{
						float num27 = inClose[num25 - 2];
						float num28 = inOpen[num25 - 2];
						if (!((double)num27 >= (double)num28))
						{
							float num29 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
							CandleSetting candleSetting = Globals.candleSettings[7];
							double num30 = candleSetting.avgPeriod;
							double num31;
							RangeType rangeType;
							if (num30 != 0.0)
							{
								num31 = array[2] / num30;
							}
							else
							{
								rangeType = candleSetting.rangeType;
								float num32;
								if (rangeType == RangeType.RealBody)
								{
									num32 = (float)(double)Math.Abs((float)((double)num27 - (double)num28));
								}
								else
								{
									float num33;
									if (rangeType == RangeType.HighLow)
									{
										num33 = (float)((double)inHigh[num25 - 2] - (double)inLow[num25 - 2]);
									}
									else
									{
										float num36;
										if (rangeType == RangeType.Shadows)
										{
											float num34 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
											float num35 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
											num36 = (float)((double)num35 - (double)inLow[num25 - 2] + ((double)inHigh[num25 - 2] - (double)num34));
										}
										else
										{
											num36 = 0f;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							CandleSetting candleSetting2 = Globals.candleSettings[7];
							rangeType = candleSetting2.rangeType;
							double num37 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num29 - (double)inLow[num25 - 2] < candleSetting2.factor * num31 / num37)
							{
								float num38 = inClose[num25 - 1];
								float num39 = inOpen[num25 - 1];
								if (!((double)num38 >= (double)num39))
								{
									float num40 = ((!((double)num38 >= (double)num39)) ? num38 : num39);
									num30 = candleSetting2.avgPeriod;
									double num41;
									if (num30 != 0.0)
									{
										num41 = array[1] / num30;
									}
									else
									{
										float num42;
										if (rangeType == RangeType.RealBody)
										{
											num42 = (float)(double)Math.Abs((float)((double)num38 - (double)num39));
										}
										else
										{
											float num43;
											if (rangeType == RangeType.HighLow)
											{
												num43 = (float)((double)inHigh[num25 - 1] - (double)inLow[num25 - 1]);
											}
											else
											{
												float num46;
												if (rangeType == RangeType.Shadows)
												{
													float num44 = ((!((double)num38 >= (double)num39)) ? num39 : num38);
													float num45 = ((!((double)num38 >= (double)num39)) ? num38 : num39);
													num46 = (float)((double)num45 - (double)inLow[num25 - 1] + ((double)inHigh[num25 - 1] - (double)num44));
												}
												else
												{
													num46 = 0f;
												}
												num43 = num46;
											}
											num42 = num43;
										}
										num41 = num42;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[7];
									rangeType = candleSetting3.rangeType;
									double num47 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if ((double)num40 - (double)inLow[num25 - 1] < candleSetting3.factor * num41 / num47)
									{
										float num48 = inClose[num25];
										float num49 = inOpen[num25];
										if (!((double)num48 >= (double)num49))
										{
											float num50 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
											num30 = candleSetting3.avgPeriod;
											double num51;
											if (num30 != 0.0)
											{
												num51 = array[0] / num30;
											}
											else
											{
												float num52;
												if (rangeType == RangeType.RealBody)
												{
													num52 = (float)(double)Math.Abs((float)((double)num48 - (double)num49));
												}
												else
												{
													float num53;
													if (rangeType == RangeType.HighLow)
													{
														num53 = (float)((double)inHigh[num25] - (double)inLow[num25]);
													}
													else
													{
														float num56;
														if (rangeType == RangeType.Shadows)
														{
															float num54 = ((!((double)num48 >= (double)num49)) ? num49 : num48);
															float num55 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
															num56 = (float)((double)num55 - (double)inLow[num25] + ((double)inHigh[num25] - (double)num54));
														}
														else
														{
															num56 = 0f;
														}
														num53 = num56;
													}
													num52 = num53;
												}
												num51 = num52;
											}
											CandleSetting candleSetting4 = Globals.candleSettings[7];
											double num57 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if ((double)num50 - (double)inLow[num25] < candleSetting4.factor * num51 / num57)
											{
												num39 = inOpen[num25 - 1];
												if ((double)num39 < (double)inOpen[num25 - 2])
												{
													num27 = inClose[num25 - 2];
													if ((double)num39 > (double)num27)
													{
														num49 = inOpen[num25];
														if ((double)num49 < (double)num39)
														{
															num38 = inClose[num25 - 1];
															if ((double)num49 > (double)num38 && (double)inHigh[num25 - 3] > (double)num27 && (double)num27 > (double)num38 && (double)num38 > (double)inClose[num25])
															{
																outInteger[num26] = -100;
																num26++;
																goto IL_06de;
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num26] = 0;
					num26++;
					goto IL_06de;
					IL_06de:
					int num58 = 2;
					int num59 = num2 - 2;
					int num60 = num25 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num61;
						if (rangeType == RangeType.RealBody)
						{
							num61 = (float)(double)Math.Abs((float)((double)inClose[num59 + num60] - (double)inOpen[num59 + num60]));
						}
						else
						{
							float num62;
							if (rangeType == RangeType.HighLow)
							{
								num62 = (float)((double)inHigh[num59 + num60] - (double)inLow[num59 + num60]);
							}
							else
							{
								float num67;
								if (rangeType == RangeType.Shadows)
								{
									float num63 = inClose[num59 + num60];
									float num64 = inOpen[num59 + num60];
									float num65 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
									float num66 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
									num67 = (float)((double)num66 - (double)inLow[num59 + num60] + ((double)inHigh[num59 + num60] - (double)num65));
								}
								else
								{
									num67 = 0f;
								}
								num62 = num67;
							}
							num61 = num62;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num68;
						if (rangeType == RangeType.RealBody)
						{
							num68 = (float)(double)Math.Abs((float)((double)inClose[num59] - (double)inOpen[num59]));
						}
						else
						{
							float num69;
							if (rangeType == RangeType.HighLow)
							{
								num69 = (float)((double)inHigh[num59] - (double)inLow[num59]);
							}
							else
							{
								float num74;
								if (rangeType == RangeType.Shadows)
								{
									float num70 = inClose[num59];
									float num71 = inOpen[num59];
									float num72 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
									float num73 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
									num74 = (float)((double)num73 - (double)inLow[num59] + ((double)inHigh[num59] - (double)num72));
								}
								else
								{
									num74 = 0f;
								}
								num69 = num74;
							}
							num68 = num69;
						}
						array[num58] += num61 - num68;
						num58--;
						num59++;
					}
					while (num58 >= 0);
					num25++;
					num2++;
				}
				while (num25 <= endIdx);
				outNBElement = num26;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3BlackCrows(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3BlackCrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				int num2 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num4;
						if (rangeType == RangeType.RealBody)
						{
							num4 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
						}
						else
						{
							double num5;
							if (rangeType == RangeType.HighLow)
							{
								num5 = inHigh[num3 - 1] - inLow[num3 - 1];
							}
							else
							{
								double num10;
								if (rangeType == RangeType.Shadows)
								{
									double num6 = inClose[num3 - 1];
									double num7 = inOpen[num3 - 1];
									double num8 = ((!(num6 >= num7)) ? num7 : num6);
									double num9 = ((!(num6 >= num7)) ? num6 : num7);
									num10 = num9 - inLow[num3 - 1] + (inHigh[num3 - 1] - num8);
								}
								else
								{
									num10 = 0.0;
								}
								num5 = num10;
							}
							num4 = num5;
						}
						array[2] += num4;
						rangeType = Globals.candleSettings[7].rangeType;
						double num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = Math.Abs(inClose[num3] - inOpen[num3]);
						}
						else
						{
							double num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = inHigh[num3] - inLow[num3];
							}
							else
							{
								double num17;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num3];
									double num14 = inOpen[num3];
									double num15 = ((!(num13 >= num14)) ? num14 : num13);
									double num16 = ((!(num13 >= num14)) ? num13 : num14);
									num17 = num16 - inLow[num3] + (inHigh[num3] - num15);
								}
								else
								{
									num17 = 0.0;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						array[1] += num11;
						rangeType = Globals.candleSettings[7].rangeType;
						double num18;
						if (rangeType == RangeType.RealBody)
						{
							num18 = Math.Abs(inClose[num3 + 1] - inOpen[num3 + 1]);
						}
						else
						{
							double num19;
							if (rangeType == RangeType.HighLow)
							{
								num19 = inHigh[num3 + 1] - inLow[num3 + 1];
							}
							else
							{
								double num24;
								if (rangeType == RangeType.Shadows)
								{
									double num20 = inClose[num3 + 1];
									double num21 = inOpen[num3 + 1];
									double num22 = ((!(num20 >= num21)) ? num21 : num20);
									double num23 = ((!(num20 >= num21)) ? num20 : num21);
									num24 = num23 - inLow[num3 + 1] + (inHigh[num3 + 1] - num22);
								}
								else
								{
									num24 = 0.0;
								}
								num19 = num24;
							}
							num18 = num19;
						}
						array[0] += num18;
						num3++;
					}
					while (num3 + 1 < startIdx);
				}
				int num25 = startIdx;
				int num26 = 0;
				do
				{
					if (inClose[num25 - 3] >= inOpen[num25 - 3])
					{
						double num27 = inClose[num25 - 2];
						double num28 = inOpen[num25 - 2];
						if (!(num27 >= num28))
						{
							double num29 = ((!(num27 >= num28)) ? num27 : num28);
							CandleSetting candleSetting = Globals.candleSettings[7];
							double num30 = candleSetting.avgPeriod;
							double num31;
							RangeType rangeType;
							if (num30 != 0.0)
							{
								num31 = array[2] / num30;
							}
							else
							{
								rangeType = candleSetting.rangeType;
								double num32;
								if (rangeType == RangeType.RealBody)
								{
									num32 = Math.Abs(num27 - num28);
								}
								else
								{
									double num33;
									if (rangeType == RangeType.HighLow)
									{
										num33 = inHigh[num25 - 2] - inLow[num25 - 2];
									}
									else
									{
										double num36;
										if (rangeType == RangeType.Shadows)
										{
											double num34 = ((!(num27 >= num28)) ? num28 : num27);
											double num35 = ((!(num27 >= num28)) ? num27 : num28);
											num36 = num35 - inLow[num25 - 2] + (inHigh[num25 - 2] - num34);
										}
										else
										{
											num36 = 0.0;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							CandleSetting candleSetting2 = Globals.candleSettings[7];
							rangeType = candleSetting2.rangeType;
							double num37 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num29 - inLow[num25 - 2] < candleSetting2.factor * num31 / num37)
							{
								double num38 = inClose[num25 - 1];
								double num39 = inOpen[num25 - 1];
								if (!(num38 >= num39))
								{
									double num40 = ((!(num38 >= num39)) ? num38 : num39);
									num30 = candleSetting2.avgPeriod;
									double num41;
									if (num30 != 0.0)
									{
										num41 = array[1] / num30;
									}
									else
									{
										double num42;
										if (rangeType == RangeType.RealBody)
										{
											num42 = Math.Abs(num38 - num39);
										}
										else
										{
											double num43;
											if (rangeType == RangeType.HighLow)
											{
												num43 = inHigh[num25 - 1] - inLow[num25 - 1];
											}
											else
											{
												double num46;
												if (rangeType == RangeType.Shadows)
												{
													double num44 = ((!(num38 >= num39)) ? num39 : num38);
													double num45 = ((!(num38 >= num39)) ? num38 : num39);
													num46 = num45 - inLow[num25 - 1] + (inHigh[num25 - 1] - num44);
												}
												else
												{
													num46 = 0.0;
												}
												num43 = num46;
											}
											num42 = num43;
										}
										num41 = num42;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[7];
									rangeType = candleSetting3.rangeType;
									double num47 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if (num40 - inLow[num25 - 1] < candleSetting3.factor * num41 / num47)
									{
										double num48 = inClose[num25];
										double num49 = inOpen[num25];
										if (!(num48 >= num49))
										{
											double num50 = ((!(num48 >= num49)) ? num48 : num49);
											num30 = candleSetting3.avgPeriod;
											double num51;
											if (num30 != 0.0)
											{
												num51 = array[0] / num30;
											}
											else
											{
												double num52;
												if (rangeType == RangeType.RealBody)
												{
													num52 = Math.Abs(num48 - num49);
												}
												else
												{
													double num53;
													if (rangeType == RangeType.HighLow)
													{
														num53 = inHigh[num25] - inLow[num25];
													}
													else
													{
														double num56;
														if (rangeType == RangeType.Shadows)
														{
															double num54 = ((!(num48 >= num49)) ? num49 : num48);
															double num55 = ((!(num48 >= num49)) ? num48 : num49);
															num56 = num55 - inLow[num25] + (inHigh[num25] - num54);
														}
														else
														{
															num56 = 0.0;
														}
														num53 = num56;
													}
													num52 = num53;
												}
												num51 = num52;
											}
											CandleSetting candleSetting4 = Globals.candleSettings[7];
											double num57 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if (num50 - inLow[num25] < candleSetting4.factor * num51 / num57)
											{
												num39 = inOpen[num25 - 1];
												if (num39 < inOpen[num25 - 2])
												{
													num27 = inClose[num25 - 2];
													if (num39 > num27)
													{
														num49 = inOpen[num25];
														if (num49 < num39)
														{
															num38 = inClose[num25 - 1];
															if (num49 > num38 && inHigh[num25 - 3] > num27 && num27 > num38 && num38 > inClose[num25])
															{
																outInteger[num26] = -100;
																num26++;
																goto IL_0668;
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num26] = 0;
					num26++;
					goto IL_0668;
					IL_0668:
					int num58 = 2;
					int num59 = num2 - 2;
					int num60 = num25 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num61;
						if (rangeType == RangeType.RealBody)
						{
							num61 = Math.Abs(inClose[num59 + num60] - inOpen[num59 + num60]);
						}
						else
						{
							double num62;
							if (rangeType == RangeType.HighLow)
							{
								num62 = inHigh[num59 + num60] - inLow[num59 + num60];
							}
							else
							{
								double num67;
								if (rangeType == RangeType.Shadows)
								{
									double num63 = inClose[num59 + num60];
									double num64 = inOpen[num59 + num60];
									double num65 = ((!(num63 >= num64)) ? num64 : num63);
									double num66 = ((!(num63 >= num64)) ? num63 : num64);
									num67 = num66 - inLow[num59 + num60] + (inHigh[num59 + num60] - num65);
								}
								else
								{
									num67 = 0.0;
								}
								num62 = num67;
							}
							num61 = num62;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num68;
						if (rangeType == RangeType.RealBody)
						{
							num68 = Math.Abs(inClose[num59] - inOpen[num59]);
						}
						else
						{
							double num69;
							if (rangeType == RangeType.HighLow)
							{
								num69 = inHigh[num59] - inLow[num59];
							}
							else
							{
								double num74;
								if (rangeType == RangeType.Shadows)
								{
									double num70 = inClose[num59];
									double num71 = inOpen[num59];
									double num72 = ((!(num70 >= num71)) ? num71 : num70);
									double num73 = ((!(num70 >= num71)) ? num70 : num71);
									num74 = num73 - inLow[num59] + (inHigh[num59] - num72);
								}
								else
								{
									num74 = 0.0;
								}
								num69 = num74;
							}
							num68 = num69;
						}
						array[num58] += num61 - num68;
						num58--;
						num59++;
					}
					while (num58 >= 0);
					num25++;
					num2++;
				}
				while (num25 <= endIdx);
				outNBElement = num26;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3InsideLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
	}

	public static RetCode Cdl3Inside(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3InsideLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod - 1;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx - 1);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					float num26;
					float num27;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = (float)(double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2]));
						}
						else
						{
							float num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
							}
							else
							{
								float num30;
								if (rangeType == RangeType.Shadows)
								{
									num26 = inClose[num20 - 2];
									num27 = inOpen[num20 - 2];
									float num28 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
									float num29 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
									num30 = (float)((double)num29 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num28));
								}
								else
								{
									num30 = 0f;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2])) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
							}
							else
							{
								float num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
								}
								else
								{
									float num40;
									if (rangeType2 == RangeType.Shadows)
									{
										float num36 = inClose[num20 - 1];
										float num37 = inOpen[num20 - 1];
										float num38 = ((!((double)num36 >= (double)num37)) ? num37 : num36);
										float num39 = ((!((double)num36 >= (double)num37)) ? num36 : num37);
										num40 = (float)((double)num39 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num38));
									}
									else
									{
										num40 = 0f;
									}
									num35 = num40;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1])) <= Globals.candleSettings[2].factor * num33 / num41)
						{
							float num36 = inClose[num20 - 1];
							float num37 = inOpen[num20 - 1];
							float num42 = ((!((double)num36 > (double)num37)) ? num37 : num36);
							num26 = inClose[num20 - 2];
							num27 = inOpen[num20 - 2];
							float num43 = ((!((double)num26 > (double)num27)) ? num27 : num26);
							if ((double)num42 < (double)num43)
							{
								float num44 = ((!((double)num36 < (double)num37)) ? num37 : num36);
								float num45 = ((!((double)num26 < (double)num27)) ? num27 : num26);
								if ((double)num44 > (double)num45)
								{
									if ((double)num26 >= (double)num27)
									{
										float num9 = inClose[num20];
										if (!((double)num9 >= (double)inOpen[num20]) && (double)num9 < (double)num27)
										{
											goto IL_0531;
										}
									}
									if (!((double)num26 >= (double)num27))
									{
										float num9 = inClose[num20];
										if ((double)num9 >= (double)inOpen[num20] && (double)num9 > (double)num27)
										{
											goto IL_0531;
										}
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_055d;
					IL_0531:
					int num46 = (((double)num26 >= (double)num27) ? 1 : (-1));
					outInteger[num21] = num46 * -100;
					num21++;
					goto IL_055d;
					IL_055d:
					rangeType = Globals.candleSettings[0].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num20 - 2];
								num27 = inOpen[num20 - 2];
								float num49 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num50 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num51 = (float)((double)num50 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num4];
								float num55 = inOpen[num4];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								float num36 = inClose[num20 - 1];
								float num37 = inOpen[num20 - 1];
								float num61 = ((!((double)num36 >= (double)num37)) ? num37 : num36);
								float num62 = ((!((double)num36 >= (double)num37)) ? num36 : num37);
								num63 = (float)((double)num62 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5];
								float num67 = inOpen[num5];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num3 = (double)(num59 - num64) + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3Inside(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3InsideLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod - 1;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx - 1);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					double num26;
					double num27;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]);
						}
						else
						{
							double num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = inHigh[num20 - 2] - inLow[num20 - 2];
							}
							else
							{
								double num30;
								if (rangeType == RangeType.Shadows)
								{
									num26 = inClose[num20 - 2];
									num27 = inOpen[num20 - 2];
									double num28 = ((!(num26 >= num27)) ? num27 : num26);
									double num29 = ((!(num26 >= num27)) ? num26 : num27);
									num30 = num29 - inLow[num20 - 2] + (inHigh[num20 - 2] - num28);
								}
								else
								{
									num30 = 0.0;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
							}
							else
							{
								double num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = inHigh[num20 - 1] - inLow[num20 - 1];
								}
								else
								{
									double num40;
									if (rangeType2 == RangeType.Shadows)
									{
										double num36 = inClose[num20 - 1];
										double num37 = inOpen[num20 - 1];
										double num38 = ((!(num36 >= num37)) ? num37 : num36);
										double num39 = ((!(num36 >= num37)) ? num36 : num37);
										num40 = num39 - inLow[num20 - 1] + (inHigh[num20 - 1] - num38);
									}
									else
									{
										num40 = 0.0;
									}
									num35 = num40;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]) <= Globals.candleSettings[2].factor * num33 / num41)
						{
							double num36 = inClose[num20 - 1];
							double num37 = inOpen[num20 - 1];
							double num42 = ((!(num36 > num37)) ? num37 : num36);
							num26 = inClose[num20 - 2];
							num27 = inOpen[num20 - 2];
							double num43 = ((!(num26 > num27)) ? num27 : num26);
							if (num42 < num43)
							{
								double num44 = ((!(num36 < num37)) ? num37 : num36);
								double num45 = ((!(num26 < num27)) ? num27 : num26);
								if (num44 > num45)
								{
									if (num26 >= num27)
									{
										double num9 = inClose[num20];
										if (!(num9 >= inOpen[num20]) && num9 < num27)
										{
											goto IL_04d3;
										}
									}
									if (!(num26 >= num27))
									{
										double num9 = inClose[num20];
										if (num9 >= inOpen[num20] && num9 > num27)
										{
											goto IL_04d3;
										}
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_04fd;
					IL_04d3:
					int num46 = ((num26 >= num27) ? 1 : (-1));
					outInteger[num21] = num46 * -100;
					num21++;
					goto IL_04fd;
					IL_04fd:
					rangeType = Globals.candleSettings[0].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num20 - 2] - inLow[num20 - 2];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num20 - 2];
								num27 = inOpen[num20 - 2];
								double num49 = ((!(num26 >= num27)) ? num27 : num26);
								double num50 = ((!(num26 >= num27)) ? num26 : num27);
								num51 = num50 - inLow[num20 - 2] + (inHigh[num20 - 2] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num58;
							if (rangeType == RangeType.Shadows)
							{
								double num54 = inClose[num4];
								double num55 = inOpen[num4];
								double num56 = ((!(num54 >= num55)) ? num55 : num54);
								double num57 = ((!(num54 >= num55)) ? num54 : num55);
								num58 = num57 - inLow[num4] + (inHigh[num4] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = num47 - num52 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num20 - 1] - inLow[num20 - 1];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								double num36 = inClose[num20 - 1];
								double num37 = inOpen[num20 - 1];
								double num61 = ((!(num36 >= num37)) ? num37 : num36);
								double num62 = ((!(num36 >= num37)) ? num36 : num37);
								num63 = num62 - inLow[num20 - 1] + (inHigh[num20 - 1] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType2 == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num3 = num59 - num64 + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3LineStrikeLookback()
	{
		return Globals.candleSettings[8].avgPeriod + 3;
	}

	public static RetCode Cdl3LineStrike(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[4];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3LineStrikeLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[3] = 0.0;
				array[2] = 0.0;
				int num2 = startIdx - Globals.candleSettings[8].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 2;
					int num4 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num3 - 1];
									float num8 = inOpen[num3 - 1];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[3] += num5;
						rangeType = Globals.candleSettings[8].rangeType;
						float num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
						}
						else
						{
							float num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = (float)((double)inHigh[num3] - (double)inLow[num3]);
							}
							else
							{
								float num18;
								if (rangeType == RangeType.Shadows)
								{
									float num14 = inClose[num3];
									float num15 = inOpen[num3];
									float num16 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num17 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num18 = (float)((double)num17 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num16));
								}
								else
								{
									num18 = 0f;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[2] += num12;
						num3++;
						num4--;
					}
					while (num4 != 0);
				}
				int num19 = startIdx;
				int num20 = 0;
				do
				{
					float num21 = inClose[num19 - 3];
					float num22 = inOpen[num19 - 3];
					int num23 = (((double)num21 >= (double)num22) ? 1 : (-1));
					float num24 = inClose[num19 - 2];
					float num25 = inOpen[num19 - 2];
					int num26 = (((double)num24 >= (double)num25) ? 1 : (-1));
					float num29;
					float num28;
					if (num23 == num26)
					{
						int num27 = (((double)num24 >= (double)num25) ? 1 : (-1));
						num28 = inClose[num19 - 1];
						num29 = inOpen[num19 - 1];
						int num30 = (((double)num28 >= (double)num29) ? 1 : (-1));
						if (num27 == num30)
						{
							int num31 = (((double)inClose[num19] >= (double)inOpen[num19]) ? 1 : (-1));
							int num32 = (((double)num28 >= (double)num29) ? 1 : (-1));
							if (num31 == -num32)
							{
								float num33 = ((!((double)num22 < (double)num21)) ? num21 : num22);
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num34 = candleSetting.avgPeriod;
								double num35;
								RangeType rangeType;
								if (num34 != 0.0)
								{
									num35 = array[3] / num34;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									float num36;
									if (rangeType == RangeType.RealBody)
									{
										num36 = (float)(double)Math.Abs((float)((double)num21 - (double)num22));
									}
									else
									{
										float num37;
										if (rangeType == RangeType.HighLow)
										{
											num37 = (float)((double)inHigh[num19 - 3] - (double)inLow[num19 - 3]);
										}
										else
										{
											float num40;
											if (rangeType == RangeType.Shadows)
											{
												float num38 = ((!((double)num21 >= (double)num22)) ? num22 : num21);
												float num39 = ((!((double)num21 >= (double)num22)) ? num21 : num22);
												num40 = (float)((double)num39 - (double)inLow[num19 - 3] + ((double)inHigh[num19 - 3] - (double)num38));
											}
											else
											{
												num40 = 0f;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								CandleSetting candleSetting2 = Globals.candleSettings[8];
								rangeType = candleSetting2.rangeType;
								double num41 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)inOpen[num19 - 2] >= (double)num33 - candleSetting2.factor * num35 / num41)
								{
									num22 = inOpen[num19 - 3];
									num21 = inClose[num19 - 3];
									float num42 = ((!((double)num22 > (double)num21)) ? num21 : num22);
									num34 = candleSetting2.avgPeriod;
									double num43;
									if (num34 != 0.0)
									{
										num43 = array[3] / num34;
									}
									else
									{
										float num44;
										if (rangeType == RangeType.RealBody)
										{
											num44 = (float)(double)Math.Abs((float)((double)num21 - (double)num22));
										}
										else
										{
											float num45;
											if (rangeType == RangeType.HighLow)
											{
												num45 = (float)((double)inHigh[num19 - 3] - (double)inLow[num19 - 3]);
											}
											else
											{
												float num48;
												if (rangeType == RangeType.Shadows)
												{
													float num46 = ((!((double)num21 >= (double)num22)) ? num22 : num21);
													float num47 = ((!((double)num21 >= (double)num22)) ? num21 : num22);
													num48 = (float)((double)num47 - (double)inLow[num19 - 3] + ((double)inHigh[num19 - 3] - (double)num46));
												}
												else
												{
													num48 = 0f;
												}
												num45 = num48;
											}
											num44 = num45;
										}
										num43 = num44;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[8];
									rangeType = candleSetting3.rangeType;
									double num49 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num25 = inOpen[num19 - 2];
									if ((double)num25 <= candleSetting3.factor * num43 / num49 + (double)num42)
									{
										num24 = inClose[num19 - 2];
										float num50 = ((!((double)num25 < (double)num24)) ? num24 : num25);
										num34 = candleSetting3.avgPeriod;
										double num51;
										if (num34 != 0.0)
										{
											num51 = array[2] / num34;
										}
										else
										{
											float num52;
											if (rangeType == RangeType.RealBody)
											{
												num52 = (float)(double)Math.Abs((float)((double)num24 - (double)num25));
											}
											else
											{
												float num53;
												if (rangeType == RangeType.HighLow)
												{
													num53 = (float)((double)inHigh[num19 - 2] - (double)inLow[num19 - 2]);
												}
												else
												{
													float num56;
													if (rangeType == RangeType.Shadows)
													{
														float num54 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
														float num55 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
														num56 = (float)((double)num55 - (double)inLow[num19 - 2] + ((double)inHigh[num19 - 2] - (double)num54));
													}
													else
													{
														num56 = 0f;
													}
													num53 = num56;
												}
												num52 = num53;
											}
											num51 = num52;
										}
										CandleSetting candleSetting4 = Globals.candleSettings[8];
										rangeType = candleSetting4.rangeType;
										double num57 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inOpen[num19 - 1] >= (double)num50 - candleSetting4.factor * num51 / num57)
										{
											num25 = inOpen[num19 - 2];
											num24 = inClose[num19 - 2];
											float num58 = ((!((double)num25 > (double)num24)) ? num24 : num25);
											num34 = candleSetting4.avgPeriod;
											double num59;
											if (num34 != 0.0)
											{
												num59 = array[2] / num34;
											}
											else
											{
												float num60;
												if (rangeType == RangeType.RealBody)
												{
													num60 = (float)(double)Math.Abs((float)((double)num24 - (double)num25));
												}
												else
												{
													float num61;
													if (rangeType == RangeType.HighLow)
													{
														num61 = (float)((double)inHigh[num19 - 2] - (double)inLow[num19 - 2]);
													}
													else
													{
														float num64;
														if (rangeType == RangeType.Shadows)
														{
															float num62 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
															float num63 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
															num64 = (float)((double)num63 - (double)inLow[num19 - 2] + ((double)inHigh[num19 - 2] - (double)num62));
														}
														else
														{
															num64 = 0f;
														}
														num61 = num64;
													}
													num60 = num61;
												}
												num59 = num60;
											}
											CandleSetting candleSetting5 = Globals.candleSettings[8];
											double num65 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											num29 = inOpen[num19 - 1];
											if ((double)num29 <= candleSetting5.factor * num59 / num65 + (double)num58)
											{
												num28 = inClose[num19 - 1];
												if ((double)num28 >= (double)num29)
												{
													num24 = inClose[num19 - 2];
													if ((double)num28 > (double)num24 && (double)num24 > (double)inClose[num19 - 3] && (double)inOpen[num19] > (double)num28 && (double)inClose[num19] < (double)inOpen[num19 - 3])
													{
														goto IL_07a2;
													}
												}
												if (!((double)num28 >= (double)num29))
												{
													num24 = inClose[num19 - 2];
													if ((double)num28 < (double)num24 && (double)num24 < (double)inClose[num19 - 3] && (double)inOpen[num19] < (double)num28 && (double)inClose[num19] > (double)inOpen[num19 - 3])
													{
														goto IL_07a2;
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_07d0;
					IL_07a2:
					int num66 = (((double)num28 >= (double)num29) ? 1 : (-1));
					outInteger[num20] = num66 * 100;
					num20++;
					goto IL_07d0;
					IL_07d0:
					int num67 = 3;
					int num68 = num2 - 3;
					int num69 = num19 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						float num70;
						if (rangeType == RangeType.RealBody)
						{
							num70 = (float)(double)Math.Abs((float)((double)inClose[num68 + num69] - (double)inOpen[num68 + num69]));
						}
						else
						{
							float num71;
							if (rangeType == RangeType.HighLow)
							{
								num71 = (float)((double)inHigh[num68 + num69] - (double)inLow[num68 + num69]);
							}
							else
							{
								float num76;
								if (rangeType == RangeType.Shadows)
								{
									float num72 = inClose[num68 + num69];
									float num73 = inOpen[num68 + num69];
									float num74 = ((!((double)num72 >= (double)num73)) ? num73 : num72);
									float num75 = ((!((double)num72 >= (double)num73)) ? num72 : num73);
									num76 = (float)((double)num75 - (double)inLow[num68 + num69] + ((double)inHigh[num68 + num69] - (double)num74));
								}
								else
								{
									num76 = 0f;
								}
								num71 = num76;
							}
							num70 = num71;
						}
						rangeType = Globals.candleSettings[8].rangeType;
						float num77;
						if (rangeType == RangeType.RealBody)
						{
							num77 = (float)(double)Math.Abs((float)((double)inClose[num68] - (double)inOpen[num68]));
						}
						else
						{
							float num78;
							if (rangeType == RangeType.HighLow)
							{
								num78 = (float)((double)inHigh[num68] - (double)inLow[num68]);
							}
							else
							{
								float num83;
								if (rangeType == RangeType.Shadows)
								{
									float num79 = inClose[num68];
									float num80 = inOpen[num68];
									float num81 = ((!((double)num79 >= (double)num80)) ? num80 : num79);
									float num82 = ((!((double)num79 >= (double)num80)) ? num79 : num80);
									num83 = (float)((double)num82 - (double)inLow[num68] + ((double)inHigh[num68] - (double)num81));
								}
								else
								{
									num83 = 0f;
								}
								num78 = num83;
							}
							num77 = num78;
						}
						array[num67] += num70 - num77;
						num67--;
						num68++;
					}
					while (num67 >= 2);
					num19++;
					num2++;
				}
				while (num19 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3LineStrike(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[4];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3LineStrikeLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[3] = 0.0;
				array[2] = 0.0;
				int num2 = startIdx - Globals.candleSettings[8].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 2;
					int num4 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num3 - 1] - inLow[num3 - 1];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num3 - 1];
									double num8 = inOpen[num3 - 1];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num3 - 1] + (inHigh[num3 - 1] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[3] += num5;
						rangeType = Globals.candleSettings[8].rangeType;
						double num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = Math.Abs(inClose[num3] - inOpen[num3]);
						}
						else
						{
							double num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = inHigh[num3] - inLow[num3];
							}
							else
							{
								double num18;
								if (rangeType == RangeType.Shadows)
								{
									double num14 = inClose[num3];
									double num15 = inOpen[num3];
									double num16 = ((!(num14 >= num15)) ? num15 : num14);
									double num17 = ((!(num14 >= num15)) ? num14 : num15);
									num18 = num17 - inLow[num3] + (inHigh[num3] - num16);
								}
								else
								{
									num18 = 0.0;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[2] += num12;
						num3++;
						num4--;
					}
					while (num4 != 0);
				}
				int num19 = startIdx;
				int num20 = 0;
				do
				{
					double num21 = inClose[num19 - 3];
					double num22 = inOpen[num19 - 3];
					int num23 = ((num21 >= num22) ? 1 : (-1));
					double num24 = inClose[num19 - 2];
					double num25 = inOpen[num19 - 2];
					int num26 = ((num24 >= num25) ? 1 : (-1));
					double num29;
					double num28;
					if (num23 == num26)
					{
						int num27 = ((num24 >= num25) ? 1 : (-1));
						num28 = inClose[num19 - 1];
						num29 = inOpen[num19 - 1];
						int num30 = ((num28 >= num29) ? 1 : (-1));
						if (num27 == num30)
						{
							int num31 = ((inClose[num19] >= inOpen[num19]) ? 1 : (-1));
							int num32 = ((num28 >= num29) ? 1 : (-1));
							if (num31 == -num32)
							{
								double num33 = ((!(num22 < num21)) ? num21 : num22);
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num34 = candleSetting.avgPeriod;
								double num35;
								RangeType rangeType;
								if (num34 != 0.0)
								{
									num35 = array[3] / num34;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									double num36;
									if (rangeType == RangeType.RealBody)
									{
										num36 = Math.Abs(num21 - num22);
									}
									else
									{
										double num37;
										if (rangeType == RangeType.HighLow)
										{
											num37 = inHigh[num19 - 3] - inLow[num19 - 3];
										}
										else
										{
											double num40;
											if (rangeType == RangeType.Shadows)
											{
												double num38 = ((!(num21 >= num22)) ? num22 : num21);
												double num39 = ((!(num21 >= num22)) ? num21 : num22);
												num40 = num39 - inLow[num19 - 3] + (inHigh[num19 - 3] - num38);
											}
											else
											{
												num40 = 0.0;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								CandleSetting candleSetting2 = Globals.candleSettings[8];
								rangeType = candleSetting2.rangeType;
								double num41 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (inOpen[num19 - 2] >= num33 - candleSetting2.factor * num35 / num41)
								{
									num22 = inOpen[num19 - 3];
									num21 = inClose[num19 - 3];
									double num42 = ((!(num22 > num21)) ? num21 : num22);
									num34 = candleSetting2.avgPeriod;
									double num43;
									if (num34 != 0.0)
									{
										num43 = array[3] / num34;
									}
									else
									{
										double num44;
										if (rangeType == RangeType.RealBody)
										{
											num44 = Math.Abs(num21 - num22);
										}
										else
										{
											double num45;
											if (rangeType == RangeType.HighLow)
											{
												num45 = inHigh[num19 - 3] - inLow[num19 - 3];
											}
											else
											{
												double num48;
												if (rangeType == RangeType.Shadows)
												{
													double num46 = ((!(num21 >= num22)) ? num22 : num21);
													double num47 = ((!(num21 >= num22)) ? num21 : num22);
													num48 = num47 - inLow[num19 - 3] + (inHigh[num19 - 3] - num46);
												}
												else
												{
													num48 = 0.0;
												}
												num45 = num48;
											}
											num44 = num45;
										}
										num43 = num44;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[8];
									rangeType = candleSetting3.rangeType;
									double num49 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num25 = inOpen[num19 - 2];
									if (num25 <= candleSetting3.factor * num43 / num49 + num42)
									{
										num24 = inClose[num19 - 2];
										double num50 = ((!(num25 < num24)) ? num24 : num25);
										num34 = candleSetting3.avgPeriod;
										double num51;
										if (num34 != 0.0)
										{
											num51 = array[2] / num34;
										}
										else
										{
											double num52;
											if (rangeType == RangeType.RealBody)
											{
												num52 = Math.Abs(num24 - num25);
											}
											else
											{
												double num53;
												if (rangeType == RangeType.HighLow)
												{
													num53 = inHigh[num19 - 2] - inLow[num19 - 2];
												}
												else
												{
													double num56;
													if (rangeType == RangeType.Shadows)
													{
														double num54 = ((!(num24 >= num25)) ? num25 : num24);
														double num55 = ((!(num24 >= num25)) ? num24 : num25);
														num56 = num55 - inLow[num19 - 2] + (inHigh[num19 - 2] - num54);
													}
													else
													{
														num56 = 0.0;
													}
													num53 = num56;
												}
												num52 = num53;
											}
											num51 = num52;
										}
										CandleSetting candleSetting4 = Globals.candleSettings[8];
										rangeType = candleSetting4.rangeType;
										double num57 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inOpen[num19 - 1] >= num50 - candleSetting4.factor * num51 / num57)
										{
											num25 = inOpen[num19 - 2];
											num24 = inClose[num19 - 2];
											double num58 = ((!(num25 > num24)) ? num24 : num25);
											num34 = candleSetting4.avgPeriod;
											double num59;
											if (num34 != 0.0)
											{
												num59 = array[2] / num34;
											}
											else
											{
												double num60;
												if (rangeType == RangeType.RealBody)
												{
													num60 = Math.Abs(num24 - num25);
												}
												else
												{
													double num61;
													if (rangeType == RangeType.HighLow)
													{
														num61 = inHigh[num19 - 2] - inLow[num19 - 2];
													}
													else
													{
														double num64;
														if (rangeType == RangeType.Shadows)
														{
															double num62 = ((!(num24 >= num25)) ? num25 : num24);
															double num63 = ((!(num24 >= num25)) ? num24 : num25);
															num64 = num63 - inLow[num19 - 2] + (inHigh[num19 - 2] - num62);
														}
														else
														{
															num64 = 0.0;
														}
														num61 = num64;
													}
													num60 = num61;
												}
												num59 = num60;
											}
											CandleSetting candleSetting5 = Globals.candleSettings[8];
											double num65 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											num29 = inOpen[num19 - 1];
											if (num29 <= candleSetting5.factor * num59 / num65 + num58)
											{
												num28 = inClose[num19 - 1];
												if (num28 >= num29)
												{
													num24 = inClose[num19 - 2];
													if (num28 > num24 && num24 > inClose[num19 - 3] && inOpen[num19] > num28 && inClose[num19] < inOpen[num19 - 3])
													{
														goto IL_0715;
													}
												}
												if (!(num28 >= num29))
												{
													num24 = inClose[num19 - 2];
													if (num28 < num24 && num24 < inClose[num19 - 3] && inOpen[num19] < num28 && inClose[num19] > inOpen[num19 - 3])
													{
														goto IL_0715;
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0741;
					IL_0715:
					int num66 = ((num28 >= num29) ? 1 : (-1));
					outInteger[num20] = num66 * 100;
					num20++;
					goto IL_0741;
					IL_0741:
					int num67 = 3;
					int num68 = num2 - 3;
					int num69 = num19 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						double num70;
						if (rangeType == RangeType.RealBody)
						{
							num70 = Math.Abs(inClose[num68 + num69] - inOpen[num68 + num69]);
						}
						else
						{
							double num71;
							if (rangeType == RangeType.HighLow)
							{
								num71 = inHigh[num68 + num69] - inLow[num68 + num69];
							}
							else
							{
								double num76;
								if (rangeType == RangeType.Shadows)
								{
									double num72 = inClose[num68 + num69];
									double num73 = inOpen[num68 + num69];
									double num74 = ((!(num72 >= num73)) ? num73 : num72);
									double num75 = ((!(num72 >= num73)) ? num72 : num73);
									num76 = num75 - inLow[num68 + num69] + (inHigh[num68 + num69] - num74);
								}
								else
								{
									num76 = 0.0;
								}
								num71 = num76;
							}
							num70 = num71;
						}
						rangeType = Globals.candleSettings[8].rangeType;
						double num77;
						if (rangeType == RangeType.RealBody)
						{
							num77 = Math.Abs(inClose[num68] - inOpen[num68]);
						}
						else
						{
							double num78;
							if (rangeType == RangeType.HighLow)
							{
								num78 = inHigh[num68] - inLow[num68];
							}
							else
							{
								double num83;
								if (rangeType == RangeType.Shadows)
								{
									double num79 = inClose[num68];
									double num80 = inOpen[num68];
									double num81 = ((!(num79 >= num80)) ? num80 : num79);
									double num82 = ((!(num79 >= num80)) ? num79 : num80);
									num83 = num82 - inLow[num68] + (inHigh[num68] - num81);
								}
								else
								{
									num83 = 0.0;
								}
								num78 = num83;
							}
							num77 = num78;
						}
						array[num67] += num70 - num77;
						num67--;
						num68++;
					}
					while (num67 >= 2);
					num19++;
					num2++;
				}
				while (num19 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3OutsideLookback()
	{
		return 3;
	}

	public static RetCode Cdl3Outside(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 3)
				{
					startIdx = 3;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - 1;
				do
				{
					float num3 = inClose[num2];
					float num4 = inOpen[num2];
					if ((double)num3 >= (double)num4)
					{
						float num5 = inClose[num2 - 1];
						float num6 = inOpen[num2 - 1];
						if (!((double)num5 >= (double)num6) && (double)num3 > (double)num6 && (double)num4 < (double)num5 && (double)inClose[num2 + 1] > (double)num3)
						{
							goto IL_00c8;
						}
					}
					if (!((double)num3 >= (double)num4))
					{
						float num5 = inClose[num2 - 1];
						float num6 = inOpen[num2 - 1];
						if ((double)num5 >= (double)num6 && (double)num4 > (double)num5 && (double)num3 < (double)num6 && (double)inClose[num2 + 1] < (double)num3)
						{
							goto IL_00c8;
						}
					}
					outInteger[num] = 0;
					num++;
					goto IL_00ef;
					IL_00c8:
					int num7 = (((double)num3 >= (double)num4) ? 1 : (-1));
					outInteger[num] = num7 * 100;
					num++;
					goto IL_00ef;
					IL_00ef:
					num2++;
				}
				while (num2 + 1 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3Outside(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 3)
				{
					startIdx = 3;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - 1;
				do
				{
					double num3 = inClose[num2];
					double num4 = inOpen[num2];
					if (num3 >= num4)
					{
						double num5 = inClose[num2 - 1];
						double num6 = inOpen[num2 - 1];
						if (!(num5 >= num6) && num3 > num6 && num4 < num5 && inClose[num2 + 1] > num3)
						{
							goto IL_00b4;
						}
					}
					if (!(num3 >= num4))
					{
						double num5 = inClose[num2 - 1];
						double num6 = inOpen[num2 - 1];
						if (num5 >= num6 && num4 > num5 && num3 < num6 && inClose[num2 + 1] < num3)
						{
							goto IL_00b4;
						}
					}
					outInteger[num] = 0;
					num++;
					goto IL_00d9;
					IL_00b4:
					int num7 = ((num3 >= num4) ? 1 : (-1));
					outInteger[num] = num7 * 100;
					num++;
					goto IL_00d9;
					IL_00d9:
					num2++;
				}
				while (num2 + 1 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3StarsInSouthLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[0].avgPeriod;
		int avgPeriod4 = candleSettings[2].avgPeriod;
		int num2 = ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3);
		int num3 = ((num <= num2) ? ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3) : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num3 + 2;
	}

	public static RetCode Cdl3StarsInSouth(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3StarsInSouthLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				array[1] = 0.0;
				array[0] = 0.0;
				int num6 = startIdx - candleSettings[7].avgPeriod;
				double num7 = 0.0;
				int num8 = startIdx - candleSettings[2].avgPeriod;
				if (num3 < startIdx)
				{
					int num9 = num3 - 2;
					int num10 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = (float)(double)Math.Abs((float)((double)inClose[num9] - (double)inOpen[num9]));
						}
						else
						{
							float num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = (float)((double)inHigh[num9] - (double)inLow[num9]);
							}
							else
							{
								float num17;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num9];
									float num14 = inOpen[num9];
									float num15 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num16 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num17 = (float)((double)num16 - (double)inLow[num9] + ((double)inHigh[num9] - (double)num15));
								}
								else
								{
									num17 = 0f;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = (double)num11 + num2;
						num9++;
						num10--;
					}
					while (num10 != 0);
				}
				if (num5 < startIdx)
				{
					int num18 = num5 - 2;
					int num19 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = (float)(double)Math.Abs((float)((double)inClose[num18] - (double)inOpen[num18]));
						}
						else
						{
							float num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = (float)((double)inHigh[num18] - (double)inLow[num18]);
							}
							else
							{
								float num26;
								if (rangeType2 == RangeType.Shadows)
								{
									float num22 = inClose[num18];
									float num23 = inOpen[num18];
									float num24 = ((!((double)num22 >= (double)num23)) ? num23 : num22);
									float num25 = ((!((double)num22 >= (double)num23)) ? num22 : num23);
									num26 = (float)((double)num25 - (double)inLow[num18] + ((double)inHigh[num18] - (double)num24));
								}
								else
								{
									num26 = 0f;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						num4 = (double)num20 + num4;
						num18++;
						num19--;
					}
					while (num19 != 0);
				}
				int num27 = num6;
				if (num6 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num28;
						if (rangeType3 == RangeType.RealBody)
						{
							num28 = (float)(double)Math.Abs((float)((double)inClose[num27 - 1] - (double)inOpen[num27 - 1]));
						}
						else
						{
							float num29;
							if (rangeType3 == RangeType.HighLow)
							{
								num29 = (float)((double)inHigh[num27 - 1] - (double)inLow[num27 - 1]);
							}
							else
							{
								float num34;
								if (rangeType3 == RangeType.Shadows)
								{
									float num30 = inClose[num27 - 1];
									float num31 = inOpen[num27 - 1];
									float num32 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
									float num33 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
									num34 = (float)((double)num33 - (double)inLow[num27 - 1] + ((double)inHigh[num27 - 1] - (double)num32));
								}
								else
								{
									num34 = 0f;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array[1] += num28;
						rangeType3 = Globals.candleSettings[7].rangeType;
						float num35;
						if (rangeType3 == RangeType.RealBody)
						{
							num35 = (float)(double)Math.Abs((float)((double)inClose[num27] - (double)inOpen[num27]));
						}
						else
						{
							float num36;
							if (rangeType3 == RangeType.HighLow)
							{
								num36 = (float)((double)inHigh[num27] - (double)inLow[num27]);
							}
							else
							{
								float num41;
								if (rangeType3 == RangeType.Shadows)
								{
									float num37 = inClose[num27];
									float num38 = inOpen[num27];
									float num39 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
									float num40 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
									num41 = (float)((double)num40 - (double)inLow[num27] + ((double)inHigh[num27] - (double)num39));
								}
								else
								{
									num41 = 0f;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array[0] += num35;
						num27++;
					}
					while (num27 < startIdx);
				}
				int num42 = num8;
				if (num8 < startIdx)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[2].rangeType;
						float num43;
						if (rangeType4 == RangeType.RealBody)
						{
							num43 = (float)(double)Math.Abs((float)((double)inClose[num42] - (double)inOpen[num42]));
						}
						else
						{
							float num44;
							if (rangeType4 == RangeType.HighLow)
							{
								num44 = (float)((double)inHigh[num42] - (double)inLow[num42]);
							}
							else
							{
								float num47;
								if (rangeType4 == RangeType.Shadows)
								{
									float num37 = inClose[num42];
									float num38 = inOpen[num42];
									float num45 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
									float num46 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
									num47 = (float)((double)num46 - (double)inLow[num42] + ((double)inHigh[num42] - (double)num45));
								}
								else
								{
									num47 = 0f;
								}
								num44 = num47;
							}
							num43 = num44;
						}
						num7 = (double)num43 + num7;
						num42++;
					}
					while (num42 < startIdx);
				}
				int num48 = startIdx;
				int num49 = 0;
				do
				{
					float num50 = inClose[num48 - 2];
					float num51 = inOpen[num48 - 2];
					RangeType rangeType;
					RangeType rangeType2;
					RangeType rangeType4;
					if (!((double)num50 >= (double)num51) && !((double)inClose[num48 - 1] >= (double)inOpen[num48 - 1]) && !((double)inClose[num48] >= (double)inOpen[num48]))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num52 = candleSetting.avgPeriod;
						double num53;
						if (num52 != 0.0)
						{
							num53 = num2 / num52;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num54;
							if (rangeType == RangeType.RealBody)
							{
								num54 = (float)(double)Math.Abs((float)((double)num50 - (double)num51));
							}
							else
							{
								float num55;
								if (rangeType == RangeType.HighLow)
								{
									num55 = (float)((double)inHigh[num48 - 2] - (double)inLow[num48 - 2]);
								}
								else
								{
									float num58;
									if (rangeType == RangeType.Shadows)
									{
										float num56 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
										float num57 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
										num58 = (float)((double)num57 - (double)inLow[num48 - 2] + ((double)inHigh[num48 - 2] - (double)num56));
									}
									else
									{
										num58 = 0f;
									}
									num55 = num58;
								}
								num54 = num55;
							}
							num53 = num54;
						}
						double num59 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num48 - 2] - (double)inOpen[num48 - 2])) > candleSettings[0].factor * num53 / num59)
						{
							num50 = inClose[num48 - 2];
							num51 = inOpen[num48 - 2];
							float num60 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
							CandleSetting candleSetting2 = candleSettings[4];
							double num61 = candleSetting2.avgPeriod;
							double num62;
							if (num61 != 0.0)
							{
								num62 = num4 / num61;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								float num63;
								if (rangeType2 == RangeType.RealBody)
								{
									num63 = (float)(double)Math.Abs((float)((double)num50 - (double)num51));
								}
								else
								{
									float num64;
									if (rangeType2 == RangeType.HighLow)
									{
										num64 = (float)((double)inHigh[num48 - 2] - (double)inLow[num48 - 2]);
									}
									else
									{
										float num67;
										if (rangeType2 == RangeType.Shadows)
										{
											float num65 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
											float num66 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
											num67 = (float)((double)num66 - (double)inLow[num48 - 2] + ((double)inHigh[num48 - 2] - (double)num65));
										}
										else
										{
											num67 = 0f;
										}
										num64 = num67;
									}
									num63 = num64;
								}
								num62 = num63;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[4];
							double num68 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num60 - (double)inLow[num48 - 2] > candleSetting3.factor * num62 / num68)
							{
								double num69 = Math.Abs((float)((double)inClose[num48 - 1] - (double)inOpen[num48 - 1]));
								if (num69 < (double)Math.Abs((float)((double)inClose[num48 - 2] - (double)inOpen[num48 - 2])))
								{
									float num31 = inOpen[num48 - 1];
									num50 = inClose[num48 - 2];
									if ((double)num31 > (double)num50 && (double)num31 <= (double)inHigh[num48 - 2])
									{
										float num70 = inLow[num48 - 1];
										if ((double)num70 < (double)num50 && (double)num70 >= (double)inLow[num48 - 2])
										{
											float num30 = inClose[num48 - 1];
											float num71 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
											CandleSetting candleSetting4 = Globals.candleSettings[7];
											double num72 = candleSetting4.avgPeriod;
											double num73;
											if (num72 != 0.0)
											{
												num73 = array[1] / num72;
											}
											else
											{
												RangeType rangeType3 = candleSetting4.rangeType;
												float num74;
												if (rangeType3 == RangeType.RealBody)
												{
													num74 = (float)(double)Math.Abs((float)((double)num30 - (double)num31));
												}
												else
												{
													float num75;
													if (rangeType3 == RangeType.HighLow)
													{
														num75 = (float)((double)inHigh[num48 - 1] - (double)num70);
													}
													else
													{
														float num78;
														if (rangeType3 == RangeType.Shadows)
														{
															float num76 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
															float num77 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
															num78 = (float)((double)inHigh[num48 - 1] - (double)num76 + ((double)num77 - (double)num70));
														}
														else
														{
															num78 = 0f;
														}
														num75 = num78;
													}
													num74 = num75;
												}
												num73 = num74;
											}
											candleSettings = Globals.candleSettings;
											CandleSetting candleSetting5 = candleSettings[7];
											double num79 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if ((double)num71 - (double)inLow[num48 - 1] > candleSetting5.factor * num73 / num79)
											{
												CandleSetting candleSetting6 = candleSettings[2];
												double num80 = candleSetting6.avgPeriod;
												double num81;
												if (num80 != 0.0)
												{
													num81 = num7 / num80;
												}
												else
												{
													rangeType4 = candleSetting6.rangeType;
													float num82;
													if (rangeType4 == RangeType.RealBody)
													{
														num82 = (float)(double)Math.Abs((float)((double)inClose[num48] - (double)inOpen[num48]));
													}
													else
													{
														float num83;
														if (rangeType4 == RangeType.HighLow)
														{
															num83 = (float)((double)inHigh[num48] - (double)inLow[num48]);
														}
														else
														{
															float num86;
															if (rangeType4 == RangeType.Shadows)
															{
																float num37 = inClose[num48];
																float num38 = inOpen[num48];
																float num84 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
																float num85 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
																num86 = (float)((double)num85 - (double)inLow[num48] + ((double)inHigh[num48] - (double)num84));
															}
															else
															{
																num86 = 0f;
															}
															num83 = num86;
														}
														num82 = num83;
													}
													num81 = num82;
												}
												double num87 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												candleSettings = Globals.candleSettings;
												if ((double)Math.Abs((float)((double)inClose[num48] - (double)inOpen[num48])) < candleSettings[2].factor * num81 / num87)
												{
													float num37 = inClose[num48];
													float num38 = inOpen[num48];
													float num88 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
													CandleSetting candleSetting7 = candleSettings[7];
													num72 = candleSetting7.avgPeriod;
													double num89;
													RangeType rangeType3;
													if (num72 != 0.0)
													{
														num89 = array[0] / num72;
													}
													else
													{
														rangeType3 = candleSetting7.rangeType;
														float num90;
														if (rangeType3 == RangeType.RealBody)
														{
															num90 = (float)(double)Math.Abs((float)((double)num37 - (double)num38));
														}
														else
														{
															float num91;
															if (rangeType3 == RangeType.HighLow)
															{
																num91 = (float)((double)inHigh[num48] - (double)inLow[num48]);
															}
															else
															{
																float num94;
																if (rangeType3 == RangeType.Shadows)
																{
																	float num92 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
																	float num93 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
																	num94 = (float)((double)num93 - (double)inLow[num48] + ((double)inHigh[num48] - (double)num92));
																}
																else
																{
																	num94 = 0f;
																}
																num91 = num94;
															}
															num90 = num91;
														}
														num89 = num90;
													}
													CandleSetting candleSetting8 = Globals.candleSettings[7];
													rangeType3 = candleSetting8.rangeType;
													double num95 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
													float num96 = inLow[num48];
													if ((double)num88 - (double)num96 < candleSetting8.factor * num89 / num95)
													{
														num37 = inClose[num48];
														num38 = inOpen[num48];
														float num97 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
														num72 = candleSetting8.avgPeriod;
														double num98;
														if (num72 != 0.0)
														{
															num98 = array[0] / num72;
														}
														else
														{
															float num99;
															if (rangeType3 == RangeType.RealBody)
															{
																num99 = (float)(double)Math.Abs((float)((double)num37 - (double)num38));
															}
															else
															{
																float num100;
																if (rangeType3 == RangeType.HighLow)
																{
																	num100 = (float)((double)inHigh[num48] - (double)num96);
																}
																else
																{
																	float num103;
																	if (rangeType3 == RangeType.Shadows)
																	{
																		float num101 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
																		float num102 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
																		num103 = (float)((double)inHigh[num48] - (double)num101 + ((double)num102 - (double)num96));
																	}
																	else
																	{
																		num103 = 0f;
																	}
																	num100 = num103;
																}
																num99 = num100;
															}
															num98 = num99;
														}
														CandleSetting candleSetting9 = Globals.candleSettings[7];
														double num104 = ((candleSetting9.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
														float num105 = inHigh[num48];
														if ((double)num105 - (double)num97 < candleSetting9.factor * num98 / num104 && (double)inLow[num48] > (double)inLow[num48 - 1] && (double)num105 < (double)inHigh[num48 - 1])
														{
															outInteger[num49] = 100;
															num49++;
															goto IL_0d6b;
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num49] = 0;
					num49++;
					goto IL_0d6b;
					IL_0d6b:
					rangeType = Globals.candleSettings[0].rangeType;
					float num106;
					if (rangeType == RangeType.RealBody)
					{
						num106 = (float)(double)Math.Abs((float)((double)inClose[num48 - 2] - (double)inOpen[num48 - 2]));
					}
					else
					{
						float num107;
						if (rangeType == RangeType.HighLow)
						{
							num107 = (float)((double)inHigh[num48 - 2] - (double)inLow[num48 - 2]);
						}
						else
						{
							float num110;
							if (rangeType == RangeType.Shadows)
							{
								num50 = inClose[num48 - 2];
								num51 = inOpen[num48 - 2];
								float num108 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
								float num109 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
								num110 = (float)((double)num109 - (double)inLow[num48 - 2] + ((double)inHigh[num48 - 2] - (double)num108));
							}
							else
							{
								num110 = 0f;
							}
							num107 = num110;
						}
						num106 = num107;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num111;
					if (rangeType == RangeType.RealBody)
					{
						num111 = (float)(double)Math.Abs((float)((double)inClose[num3 - 2] - (double)inOpen[num3 - 2]));
					}
					else
					{
						float num112;
						if (rangeType == RangeType.HighLow)
						{
							num112 = (float)((double)inHigh[num3 - 2] - (double)inLow[num3 - 2]);
						}
						else
						{
							float num117;
							if (rangeType == RangeType.Shadows)
							{
								float num113 = inClose[num3 - 2];
								float num114 = inOpen[num3 - 2];
								float num115 = ((!((double)num113 >= (double)num114)) ? num114 : num113);
								float num116 = ((!((double)num113 >= (double)num114)) ? num113 : num114);
								num117 = (float)((double)num116 - (double)inLow[num3 - 2] + ((double)inHigh[num3 - 2] - (double)num115));
							}
							else
							{
								num117 = 0f;
							}
							num112 = num117;
						}
						num111 = num112;
					}
					num2 = (double)(num106 - num111) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num118;
					if (rangeType2 == RangeType.RealBody)
					{
						num118 = (float)(double)Math.Abs((float)((double)inClose[num48 - 2] - (double)inOpen[num48 - 2]));
					}
					else
					{
						float num119;
						if (rangeType2 == RangeType.HighLow)
						{
							num119 = (float)((double)inHigh[num48 - 2] - (double)inLow[num48 - 2]);
						}
						else
						{
							float num122;
							if (rangeType2 == RangeType.Shadows)
							{
								num50 = inClose[num48 - 2];
								num51 = inOpen[num48 - 2];
								float num120 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
								float num121 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
								num122 = (float)((double)num121 - (double)inLow[num48 - 2] + ((double)inHigh[num48 - 2] - (double)num120));
							}
							else
							{
								num122 = 0f;
							}
							num119 = num122;
						}
						num118 = num119;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num123;
					if (rangeType2 == RangeType.RealBody)
					{
						num123 = (float)(double)Math.Abs((float)((double)inClose[num5 - 2] - (double)inOpen[num5 - 2]));
					}
					else
					{
						float num124;
						if (rangeType2 == RangeType.HighLow)
						{
							num124 = (float)((double)inHigh[num5 - 2] - (double)inLow[num5 - 2]);
						}
						else
						{
							float num129;
							if (rangeType2 == RangeType.Shadows)
							{
								float num125 = inClose[num5 - 2];
								float num126 = inOpen[num5 - 2];
								float num127 = ((!((double)num125 >= (double)num126)) ? num126 : num125);
								float num128 = ((!((double)num125 >= (double)num126)) ? num125 : num126);
								num129 = (float)((double)num128 - (double)inLow[num5 - 2] + ((double)inHigh[num5 - 2] - (double)num127));
							}
							else
							{
								num129 = 0f;
							}
							num124 = num129;
						}
						num123 = num124;
					}
					num4 = (double)(num118 - num123) + num4;
					int num130 = 1;
					int num131 = num6 - 1;
					int num132 = num48 - num6;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num133;
						if (rangeType3 == RangeType.RealBody)
						{
							num133 = (float)(double)Math.Abs((float)((double)inClose[num131 + num132] - (double)inOpen[num131 + num132]));
						}
						else
						{
							float num134;
							if (rangeType3 == RangeType.HighLow)
							{
								num134 = (float)((double)inHigh[num131 + num132] - (double)inLow[num131 + num132]);
							}
							else
							{
								float num139;
								if (rangeType3 == RangeType.Shadows)
								{
									float num135 = inClose[num131 + num132];
									float num136 = inOpen[num131 + num132];
									float num137 = ((!((double)num135 >= (double)num136)) ? num136 : num135);
									float num138 = ((!((double)num135 >= (double)num136)) ? num135 : num136);
									num139 = (float)((double)num138 - (double)inLow[num131 + num132] + ((double)inHigh[num131 + num132] - (double)num137));
								}
								else
								{
									num139 = 0f;
								}
								num134 = num139;
							}
							num133 = num134;
						}
						rangeType3 = Globals.candleSettings[7].rangeType;
						float num140;
						if (rangeType3 == RangeType.RealBody)
						{
							num140 = (float)(double)Math.Abs((float)((double)inClose[num131] - (double)inOpen[num131]));
						}
						else
						{
							float num141;
							if (rangeType3 == RangeType.HighLow)
							{
								num141 = (float)((double)inHigh[num131] - (double)inLow[num131]);
							}
							else
							{
								float num146;
								if (rangeType3 == RangeType.Shadows)
								{
									float num142 = inClose[num131];
									float num143 = inOpen[num131];
									float num144 = ((!((double)num142 >= (double)num143)) ? num143 : num142);
									float num145 = ((!((double)num142 >= (double)num143)) ? num142 : num143);
									num146 = (float)((double)num145 - (double)inLow[num131] + ((double)inHigh[num131] - (double)num144));
								}
								else
								{
									num146 = 0f;
								}
								num141 = num146;
							}
							num140 = num141;
						}
						array[num130] += num133 - num140;
						num130--;
						num131++;
					}
					while (num130 >= 0);
					rangeType4 = Globals.candleSettings[2].rangeType;
					float num147;
					if (rangeType4 == RangeType.RealBody)
					{
						num147 = (float)(double)Math.Abs((float)((double)inClose[num48] - (double)inOpen[num48]));
					}
					else
					{
						float num148;
						if (rangeType4 == RangeType.HighLow)
						{
							num148 = (float)((double)inHigh[num48] - (double)inLow[num48]);
						}
						else
						{
							float num151;
							if (rangeType4 == RangeType.Shadows)
							{
								float num37 = inClose[num48];
								float num38 = inOpen[num48];
								float num149 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
								float num150 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
								num151 = (float)((double)num150 - (double)inLow[num48] + ((double)inHigh[num48] - (double)num149));
							}
							else
							{
								num151 = 0f;
							}
							num148 = num151;
						}
						num147 = num148;
					}
					rangeType4 = Globals.candleSettings[2].rangeType;
					float num152;
					if (rangeType4 == RangeType.RealBody)
					{
						num152 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
					}
					else
					{
						float num153;
						if (rangeType4 == RangeType.HighLow)
						{
							num153 = (float)((double)inHigh[num8] - (double)inLow[num8]);
						}
						else
						{
							float num158;
							if (rangeType4 == RangeType.Shadows)
							{
								float num154 = inClose[num8];
								float num155 = inOpen[num8];
								float num156 = ((!((double)num154 >= (double)num155)) ? num155 : num154);
								float num157 = ((!((double)num154 >= (double)num155)) ? num154 : num155);
								num158 = (float)((double)num157 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num156));
							}
							else
							{
								num158 = 0f;
							}
							num153 = num158;
						}
						num152 = num153;
					}
					num7 = (double)(num147 - num152) + num7;
					num48++;
					num3++;
					num5++;
					num6++;
					num8++;
				}
				while (num48 <= endIdx);
				outNBElement = num49;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3StarsInSouth(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3StarsInSouthLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				array[1] = 0.0;
				array[0] = 0.0;
				int num6 = startIdx - candleSettings[7].avgPeriod;
				double num7 = 0.0;
				int num8 = startIdx - candleSettings[2].avgPeriod;
				if (num3 < startIdx)
				{
					int num9 = num3 - 2;
					int num10 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = Math.Abs(inClose[num9] - inOpen[num9]);
						}
						else
						{
							double num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = inHigh[num9] - inLow[num9];
							}
							else
							{
								double num17;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num9];
									double num14 = inOpen[num9];
									double num15 = ((!(num13 >= num14)) ? num14 : num13);
									double num16 = ((!(num13 >= num14)) ? num13 : num14);
									num17 = num16 - inLow[num9] + (inHigh[num9] - num15);
								}
								else
								{
									num17 = 0.0;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = num11 + num2;
						num9++;
						num10--;
					}
					while (num10 != 0);
				}
				if (num5 < startIdx)
				{
					int num18 = num5 - 2;
					int num19 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = Math.Abs(inClose[num18] - inOpen[num18]);
						}
						else
						{
							double num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = inHigh[num18] - inLow[num18];
							}
							else
							{
								double num26;
								if (rangeType2 == RangeType.Shadows)
								{
									double num22 = inClose[num18];
									double num23 = inOpen[num18];
									double num24 = ((!(num22 >= num23)) ? num23 : num22);
									double num25 = ((!(num22 >= num23)) ? num22 : num23);
									num26 = num25 - inLow[num18] + (inHigh[num18] - num24);
								}
								else
								{
									num26 = 0.0;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						num4 = num20 + num4;
						num18++;
						num19--;
					}
					while (num19 != 0);
				}
				int num27 = num6;
				if (num6 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num28;
						if (rangeType3 == RangeType.RealBody)
						{
							num28 = Math.Abs(inClose[num27 - 1] - inOpen[num27 - 1]);
						}
						else
						{
							double num29;
							if (rangeType3 == RangeType.HighLow)
							{
								num29 = inHigh[num27 - 1] - inLow[num27 - 1];
							}
							else
							{
								double num34;
								if (rangeType3 == RangeType.Shadows)
								{
									double num30 = inClose[num27 - 1];
									double num31 = inOpen[num27 - 1];
									double num32 = ((!(num30 >= num31)) ? num31 : num30);
									double num33 = ((!(num30 >= num31)) ? num30 : num31);
									num34 = num33 - inLow[num27 - 1] + (inHigh[num27 - 1] - num32);
								}
								else
								{
									num34 = 0.0;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array[1] += num28;
						rangeType3 = Globals.candleSettings[7].rangeType;
						double num35;
						if (rangeType3 == RangeType.RealBody)
						{
							num35 = Math.Abs(inClose[num27] - inOpen[num27]);
						}
						else
						{
							double num36;
							if (rangeType3 == RangeType.HighLow)
							{
								num36 = inHigh[num27] - inLow[num27];
							}
							else
							{
								double num41;
								if (rangeType3 == RangeType.Shadows)
								{
									double num37 = inClose[num27];
									double num38 = inOpen[num27];
									double num39 = ((!(num37 >= num38)) ? num38 : num37);
									double num40 = ((!(num37 >= num38)) ? num37 : num38);
									num41 = num40 - inLow[num27] + (inHigh[num27] - num39);
								}
								else
								{
									num41 = 0.0;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array[0] += num35;
						num27++;
					}
					while (num27 < startIdx);
				}
				int num42 = num8;
				if (num8 < startIdx)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[2].rangeType;
						double num43;
						if (rangeType4 == RangeType.RealBody)
						{
							num43 = Math.Abs(inClose[num42] - inOpen[num42]);
						}
						else
						{
							double num44;
							if (rangeType4 == RangeType.HighLow)
							{
								num44 = inHigh[num42] - inLow[num42];
							}
							else
							{
								double num47;
								if (rangeType4 == RangeType.Shadows)
								{
									double num37 = inClose[num42];
									double num38 = inOpen[num42];
									double num45 = ((!(num37 >= num38)) ? num38 : num37);
									double num46 = ((!(num37 >= num38)) ? num37 : num38);
									num47 = num46 - inLow[num42] + (inHigh[num42] - num45);
								}
								else
								{
									num47 = 0.0;
								}
								num44 = num47;
							}
							num43 = num44;
						}
						num7 = num43 + num7;
						num42++;
					}
					while (num42 < startIdx);
				}
				int num48 = startIdx;
				int num49 = 0;
				do
				{
					double num50 = inClose[num48 - 2];
					double num51 = inOpen[num48 - 2];
					RangeType rangeType;
					RangeType rangeType2;
					RangeType rangeType4;
					if (!(num50 >= num51) && !(inClose[num48 - 1] >= inOpen[num48 - 1]) && !(inClose[num48] >= inOpen[num48]))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num52 = candleSetting.avgPeriod;
						double num53;
						if (num52 != 0.0)
						{
							num53 = num2 / num52;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num54;
							if (rangeType == RangeType.RealBody)
							{
								num54 = Math.Abs(num50 - num51);
							}
							else
							{
								double num55;
								if (rangeType == RangeType.HighLow)
								{
									num55 = inHigh[num48 - 2] - inLow[num48 - 2];
								}
								else
								{
									double num58;
									if (rangeType == RangeType.Shadows)
									{
										double num56 = ((!(num50 >= num51)) ? num51 : num50);
										double num57 = ((!(num50 >= num51)) ? num50 : num51);
										num58 = num57 - inLow[num48 - 2] + (inHigh[num48 - 2] - num56);
									}
									else
									{
										num58 = 0.0;
									}
									num55 = num58;
								}
								num54 = num55;
							}
							num53 = num54;
						}
						double num59 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num48 - 2] - inOpen[num48 - 2]) > candleSettings[0].factor * num53 / num59)
						{
							num50 = inClose[num48 - 2];
							num51 = inOpen[num48 - 2];
							double num60 = ((!(num50 >= num51)) ? num50 : num51);
							CandleSetting candleSetting2 = candleSettings[4];
							double num61 = candleSetting2.avgPeriod;
							double num62;
							if (num61 != 0.0)
							{
								num62 = num4 / num61;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								double num63;
								if (rangeType2 == RangeType.RealBody)
								{
									num63 = Math.Abs(num50 - num51);
								}
								else
								{
									double num64;
									if (rangeType2 == RangeType.HighLow)
									{
										num64 = inHigh[num48 - 2] - inLow[num48 - 2];
									}
									else
									{
										double num67;
										if (rangeType2 == RangeType.Shadows)
										{
											double num65 = ((!(num50 >= num51)) ? num51 : num50);
											double num66 = ((!(num50 >= num51)) ? num50 : num51);
											num67 = num66 - inLow[num48 - 2] + (inHigh[num48 - 2] - num65);
										}
										else
										{
											num67 = 0.0;
										}
										num64 = num67;
									}
									num63 = num64;
								}
								num62 = num63;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[4];
							double num68 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num60 - inLow[num48 - 2] > candleSetting3.factor * num62 / num68)
							{
								double num69 = Math.Abs(inClose[num48 - 1] - inOpen[num48 - 1]);
								if (num69 < Math.Abs(inClose[num48 - 2] - inOpen[num48 - 2]))
								{
									double num31 = inOpen[num48 - 1];
									num50 = inClose[num48 - 2];
									if (num31 > num50 && num31 <= inHigh[num48 - 2])
									{
										double num70 = inLow[num48 - 1];
										if (num70 < num50 && num70 >= inLow[num48 - 2])
										{
											double num30 = inClose[num48 - 1];
											double num71 = ((!(num30 >= num31)) ? num30 : num31);
											CandleSetting candleSetting4 = Globals.candleSettings[7];
											double num72 = candleSetting4.avgPeriod;
											double num73;
											if (num72 != 0.0)
											{
												num73 = array[1] / num72;
											}
											else
											{
												RangeType rangeType3 = candleSetting4.rangeType;
												double num74;
												if (rangeType3 == RangeType.RealBody)
												{
													num74 = Math.Abs(num30 - num31);
												}
												else
												{
													double num75;
													if (rangeType3 == RangeType.HighLow)
													{
														num75 = inHigh[num48 - 1] - num70;
													}
													else
													{
														double num78;
														if (rangeType3 == RangeType.Shadows)
														{
															double num76 = ((!(num30 >= num31)) ? num31 : num30);
															double num77 = ((!(num30 >= num31)) ? num30 : num31);
															num78 = inHigh[num48 - 1] - num76 + (num77 - num70);
														}
														else
														{
															num78 = 0.0;
														}
														num75 = num78;
													}
													num74 = num75;
												}
												num73 = num74;
											}
											candleSettings = Globals.candleSettings;
											CandleSetting candleSetting5 = candleSettings[7];
											double num79 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if (num71 - inLow[num48 - 1] > candleSetting5.factor * num73 / num79)
											{
												CandleSetting candleSetting6 = candleSettings[2];
												double num80 = candleSetting6.avgPeriod;
												double num81;
												if (num80 != 0.0)
												{
													num81 = num7 / num80;
												}
												else
												{
													rangeType4 = candleSetting6.rangeType;
													double num82;
													if (rangeType4 == RangeType.RealBody)
													{
														num82 = Math.Abs(inClose[num48] - inOpen[num48]);
													}
													else
													{
														double num83;
														if (rangeType4 == RangeType.HighLow)
														{
															num83 = inHigh[num48] - inLow[num48];
														}
														else
														{
															double num86;
															if (rangeType4 == RangeType.Shadows)
															{
																double num37 = inClose[num48];
																double num38 = inOpen[num48];
																double num84 = ((!(num37 >= num38)) ? num38 : num37);
																double num85 = ((!(num37 >= num38)) ? num37 : num38);
																num86 = num85 - inLow[num48] + (inHigh[num48] - num84);
															}
															else
															{
																num86 = 0.0;
															}
															num83 = num86;
														}
														num82 = num83;
													}
													num81 = num82;
												}
												double num87 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												candleSettings = Globals.candleSettings;
												if (Math.Abs(inClose[num48] - inOpen[num48]) < candleSettings[2].factor * num81 / num87)
												{
													double num37 = inClose[num48];
													double num38 = inOpen[num48];
													double num88 = ((!(num37 >= num38)) ? num37 : num38);
													CandleSetting candleSetting7 = candleSettings[7];
													num72 = candleSetting7.avgPeriod;
													double num89;
													RangeType rangeType3;
													if (num72 != 0.0)
													{
														num89 = array[0] / num72;
													}
													else
													{
														rangeType3 = candleSetting7.rangeType;
														double num90;
														if (rangeType3 == RangeType.RealBody)
														{
															num90 = Math.Abs(num37 - num38);
														}
														else
														{
															double num91;
															if (rangeType3 == RangeType.HighLow)
															{
																num91 = inHigh[num48] - inLow[num48];
															}
															else
															{
																double num94;
																if (rangeType3 == RangeType.Shadows)
																{
																	double num92 = ((!(num37 >= num38)) ? num38 : num37);
																	double num93 = ((!(num37 >= num38)) ? num37 : num38);
																	num94 = num93 - inLow[num48] + (inHigh[num48] - num92);
																}
																else
																{
																	num94 = 0.0;
																}
																num91 = num94;
															}
															num90 = num91;
														}
														num89 = num90;
													}
													CandleSetting candleSetting8 = Globals.candleSettings[7];
													rangeType3 = candleSetting8.rangeType;
													double num95 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
													double num96 = inLow[num48];
													if (num88 - num96 < candleSetting8.factor * num89 / num95)
													{
														num37 = inClose[num48];
														num38 = inOpen[num48];
														double num97 = ((!(num37 >= num38)) ? num38 : num37);
														num72 = candleSetting8.avgPeriod;
														double num98;
														if (num72 != 0.0)
														{
															num98 = array[0] / num72;
														}
														else
														{
															double num99;
															if (rangeType3 == RangeType.RealBody)
															{
																num99 = Math.Abs(num37 - num38);
															}
															else
															{
																double num100;
																if (rangeType3 == RangeType.HighLow)
																{
																	num100 = inHigh[num48] - num96;
																}
																else
																{
																	double num103;
																	if (rangeType3 == RangeType.Shadows)
																	{
																		double num101 = ((!(num37 >= num38)) ? num38 : num37);
																		double num102 = ((!(num37 >= num38)) ? num37 : num38);
																		num103 = inHigh[num48] - num101 + (num102 - num96);
																	}
																	else
																	{
																		num103 = 0.0;
																	}
																	num100 = num103;
																}
																num99 = num100;
															}
															num98 = num99;
														}
														CandleSetting candleSetting9 = Globals.candleSettings[7];
														double num104 = ((candleSetting9.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
														double num105 = inHigh[num48];
														if (num105 - num97 < candleSetting9.factor * num98 / num104 && inLow[num48] > inLow[num48 - 1] && num105 < inHigh[num48 - 1])
														{
															outInteger[num49] = 100;
															num49++;
															goto IL_0c96;
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num49] = 0;
					num49++;
					goto IL_0c96;
					IL_0c96:
					rangeType = Globals.candleSettings[0].rangeType;
					double num106;
					if (rangeType == RangeType.RealBody)
					{
						num106 = Math.Abs(inClose[num48 - 2] - inOpen[num48 - 2]);
					}
					else
					{
						double num107;
						if (rangeType == RangeType.HighLow)
						{
							num107 = inHigh[num48 - 2] - inLow[num48 - 2];
						}
						else
						{
							double num110;
							if (rangeType == RangeType.Shadows)
							{
								num50 = inClose[num48 - 2];
								num51 = inOpen[num48 - 2];
								double num108 = ((!(num50 >= num51)) ? num51 : num50);
								double num109 = ((!(num50 >= num51)) ? num50 : num51);
								num110 = num109 - inLow[num48 - 2] + (inHigh[num48 - 2] - num108);
							}
							else
							{
								num110 = 0.0;
							}
							num107 = num110;
						}
						num106 = num107;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num111;
					if (rangeType == RangeType.RealBody)
					{
						num111 = Math.Abs(inClose[num3 - 2] - inOpen[num3 - 2]);
					}
					else
					{
						double num112;
						if (rangeType == RangeType.HighLow)
						{
							num112 = inHigh[num3 - 2] - inLow[num3 - 2];
						}
						else
						{
							double num117;
							if (rangeType == RangeType.Shadows)
							{
								double num113 = inClose[num3 - 2];
								double num114 = inOpen[num3 - 2];
								double num115 = ((!(num113 >= num114)) ? num114 : num113);
								double num116 = ((!(num113 >= num114)) ? num113 : num114);
								num117 = num116 - inLow[num3 - 2] + (inHigh[num3 - 2] - num115);
							}
							else
							{
								num117 = 0.0;
							}
							num112 = num117;
						}
						num111 = num112;
					}
					num2 = num106 - num111 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num118;
					if (rangeType2 == RangeType.RealBody)
					{
						num118 = Math.Abs(inClose[num48 - 2] - inOpen[num48 - 2]);
					}
					else
					{
						double num119;
						if (rangeType2 == RangeType.HighLow)
						{
							num119 = inHigh[num48 - 2] - inLow[num48 - 2];
						}
						else
						{
							double num122;
							if (rangeType2 == RangeType.Shadows)
							{
								num50 = inClose[num48 - 2];
								num51 = inOpen[num48 - 2];
								double num120 = ((!(num50 >= num51)) ? num51 : num50);
								double num121 = ((!(num50 >= num51)) ? num50 : num51);
								num122 = num121 - inLow[num48 - 2] + (inHigh[num48 - 2] - num120);
							}
							else
							{
								num122 = 0.0;
							}
							num119 = num122;
						}
						num118 = num119;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num123;
					if (rangeType2 == RangeType.RealBody)
					{
						num123 = Math.Abs(inClose[num5 - 2] - inOpen[num5 - 2]);
					}
					else
					{
						double num124;
						if (rangeType2 == RangeType.HighLow)
						{
							num124 = inHigh[num5 - 2] - inLow[num5 - 2];
						}
						else
						{
							double num129;
							if (rangeType2 == RangeType.Shadows)
							{
								double num125 = inClose[num5 - 2];
								double num126 = inOpen[num5 - 2];
								double num127 = ((!(num125 >= num126)) ? num126 : num125);
								double num128 = ((!(num125 >= num126)) ? num125 : num126);
								num129 = num128 - inLow[num5 - 2] + (inHigh[num5 - 2] - num127);
							}
							else
							{
								num129 = 0.0;
							}
							num124 = num129;
						}
						num123 = num124;
					}
					num4 = num118 - num123 + num4;
					int num130 = 1;
					int num131 = num6 - 1;
					int num132 = num48 - num6;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num133;
						if (rangeType3 == RangeType.RealBody)
						{
							num133 = Math.Abs(inClose[num131 + num132] - inOpen[num131 + num132]);
						}
						else
						{
							double num134;
							if (rangeType3 == RangeType.HighLow)
							{
								num134 = inHigh[num131 + num132] - inLow[num131 + num132];
							}
							else
							{
								double num139;
								if (rangeType3 == RangeType.Shadows)
								{
									double num135 = inClose[num131 + num132];
									double num136 = inOpen[num131 + num132];
									double num137 = ((!(num135 >= num136)) ? num136 : num135);
									double num138 = ((!(num135 >= num136)) ? num135 : num136);
									num139 = num138 - inLow[num131 + num132] + (inHigh[num131 + num132] - num137);
								}
								else
								{
									num139 = 0.0;
								}
								num134 = num139;
							}
							num133 = num134;
						}
						rangeType3 = Globals.candleSettings[7].rangeType;
						double num140;
						if (rangeType3 == RangeType.RealBody)
						{
							num140 = Math.Abs(inClose[num131] - inOpen[num131]);
						}
						else
						{
							double num141;
							if (rangeType3 == RangeType.HighLow)
							{
								num141 = inHigh[num131] - inLow[num131];
							}
							else
							{
								double num146;
								if (rangeType3 == RangeType.Shadows)
								{
									double num142 = inClose[num131];
									double num143 = inOpen[num131];
									double num144 = ((!(num142 >= num143)) ? num143 : num142);
									double num145 = ((!(num142 >= num143)) ? num142 : num143);
									num146 = num145 - inLow[num131] + (inHigh[num131] - num144);
								}
								else
								{
									num146 = 0.0;
								}
								num141 = num146;
							}
							num140 = num141;
						}
						array[num130] += num133 - num140;
						num130--;
						num131++;
					}
					while (num130 >= 0);
					rangeType4 = Globals.candleSettings[2].rangeType;
					double num147;
					if (rangeType4 == RangeType.RealBody)
					{
						num147 = Math.Abs(inClose[num48] - inOpen[num48]);
					}
					else
					{
						double num148;
						if (rangeType4 == RangeType.HighLow)
						{
							num148 = inHigh[num48] - inLow[num48];
						}
						else
						{
							double num151;
							if (rangeType4 == RangeType.Shadows)
							{
								double num37 = inClose[num48];
								double num38 = inOpen[num48];
								double num149 = ((!(num37 >= num38)) ? num38 : num37);
								double num150 = ((!(num37 >= num38)) ? num37 : num38);
								num151 = num150 - inLow[num48] + (inHigh[num48] - num149);
							}
							else
							{
								num151 = 0.0;
							}
							num148 = num151;
						}
						num147 = num148;
					}
					rangeType4 = Globals.candleSettings[2].rangeType;
					double num152;
					if (rangeType4 == RangeType.RealBody)
					{
						num152 = Math.Abs(inClose[num8] - inOpen[num8]);
					}
					else
					{
						double num153;
						if (rangeType4 == RangeType.HighLow)
						{
							num153 = inHigh[num8] - inLow[num8];
						}
						else
						{
							double num158;
							if (rangeType4 == RangeType.Shadows)
							{
								double num154 = inClose[num8];
								double num155 = inOpen[num8];
								double num156 = ((!(num154 >= num155)) ? num155 : num154);
								double num157 = ((!(num154 >= num155)) ? num154 : num155);
								num158 = num157 - inLow[num8] + (inHigh[num8] - num156);
							}
							else
							{
								num158 = 0.0;
							}
							num153 = num158;
						}
						num152 = num153;
					}
					num7 = num147 - num152 + num7;
					num48++;
					num3++;
					num5++;
					num6++;
					num8++;
				}
				while (num48 <= endIdx);
				outNBElement = num49;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Cdl3WhiteSoldiersLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[2].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[9].avgPeriod;
		int avgPeriod4 = candleSettings[8].avgPeriod;
		int num2 = ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3);
		int num3 = ((num <= num2) ? ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3) : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num3 + 2;
	}

	public static RetCode Cdl3WhiteSoldiers(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3WhiteSoldiersLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[8].avgPeriod;
				array3[2] = 0.0;
				array3[1] = 0.0;
				array3[0] = 0.0;
				int num4 = startIdx - candleSettings[9].avgPeriod;
				double num5 = 0.0;
				int num6 = startIdx - candleSettings[2].avgPeriod;
				if (num2 < startIdx)
				{
					int num7 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num7 - 1] - (double)inOpen[num7 - 1]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num7 - 1] - (double)inLow[num7 - 1]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num7 - 1];
									float num11 = inOpen[num7 - 1];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num7 - 1] + ((double)inHigh[num7 - 1] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						array[2] += num8;
						rangeType = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
						}
						else
						{
							float num16;
							if (rangeType == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num7] - (double)inLow[num7]);
							}
							else
							{
								float num21;
								if (rangeType == RangeType.Shadows)
								{
									float num17 = inClose[num7];
									float num18 = inOpen[num7];
									float num19 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
									float num20 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
									num21 = (float)((double)num20 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num16 = num21;
							}
							num15 = num16;
						}
						array[1] += num15;
						rangeType = Globals.candleSettings[7].rangeType;
						float num22;
						if (rangeType == RangeType.RealBody)
						{
							num22 = (float)(double)Math.Abs((float)((double)inClose[num7 + 1] - (double)inOpen[num7 + 1]));
						}
						else
						{
							float num23;
							if (rangeType == RangeType.HighLow)
							{
								num23 = (float)((double)inHigh[num7 + 1] - (double)inLow[num7 + 1]);
							}
							else
							{
								float num28;
								if (rangeType == RangeType.Shadows)
								{
									float num24 = inClose[num7 + 1];
									float num25 = inOpen[num7 + 1];
									float num26 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
									float num27 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
									num28 = (float)((double)num27 - (double)inLow[num7 + 1] + ((double)inHigh[num7 + 1] - (double)num26));
								}
								else
								{
									num28 = 0f;
								}
								num23 = num28;
							}
							num22 = num23;
						}
						array[0] += num22;
						num7++;
					}
					while (num7 + 1 < startIdx);
				}
				if (num3 < startIdx)
				{
					int num29 = num3 - 1;
					int num30 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[8].rangeType;
						float num31;
						if (rangeType2 == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num29 - 1] - (double)inOpen[num29 - 1]));
						}
						else
						{
							float num32;
							if (rangeType2 == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num29 - 1] - (double)inLow[num29 - 1]);
							}
							else
							{
								float num37;
								if (rangeType2 == RangeType.Shadows)
								{
									float num33 = inClose[num29 - 1];
									float num34 = inOpen[num29 - 1];
									float num35 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
									float num36 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
									num37 = (float)((double)num36 - (double)inLow[num29 - 1] + ((double)inHigh[num29 - 1] - (double)num35));
								}
								else
								{
									num37 = 0f;
								}
								num32 = num37;
							}
							num31 = num32;
						}
						array2[2] += num31;
						rangeType2 = Globals.candleSettings[8].rangeType;
						float num38;
						if (rangeType2 == RangeType.RealBody)
						{
							num38 = (float)(double)Math.Abs((float)((double)inClose[num29] - (double)inOpen[num29]));
						}
						else
						{
							float num39;
							if (rangeType2 == RangeType.HighLow)
							{
								num39 = (float)((double)inHigh[num29] - (double)inLow[num29]);
							}
							else
							{
								float num44;
								if (rangeType2 == RangeType.Shadows)
								{
									float num40 = inClose[num29];
									float num41 = inOpen[num29];
									float num42 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
									float num43 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
									num44 = (float)((double)num43 - (double)inLow[num29] + ((double)inHigh[num29] - (double)num42));
								}
								else
								{
									num44 = 0f;
								}
								num39 = num44;
							}
							num38 = num39;
						}
						array2[1] += num38;
						num29++;
						num30--;
					}
					while (num30 != 0);
				}
				if (num4 < startIdx)
				{
					int num45 = num4 - 1;
					int num46 = startIdx - num4;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[9].rangeType;
						float num47;
						if (rangeType3 == RangeType.RealBody)
						{
							num47 = (float)(double)Math.Abs((float)((double)inClose[num45 - 1] - (double)inOpen[num45 - 1]));
						}
						else
						{
							float num48;
							if (rangeType3 == RangeType.HighLow)
							{
								num48 = (float)((double)inHigh[num45 - 1] - (double)inLow[num45 - 1]);
							}
							else
							{
								float num53;
								if (rangeType3 == RangeType.Shadows)
								{
									float num49 = inClose[num45 - 1];
									float num50 = inOpen[num45 - 1];
									float num51 = ((!((double)num49 >= (double)num50)) ? num50 : num49);
									float num52 = ((!((double)num49 >= (double)num50)) ? num49 : num50);
									num53 = (float)((double)num52 - (double)inLow[num45 - 1] + ((double)inHigh[num45 - 1] - (double)num51));
								}
								else
								{
									num53 = 0f;
								}
								num48 = num53;
							}
							num47 = num48;
						}
						array3[2] += num47;
						rangeType3 = Globals.candleSettings[9].rangeType;
						float num54;
						if (rangeType3 == RangeType.RealBody)
						{
							num54 = (float)(double)Math.Abs((float)((double)inClose[num45] - (double)inOpen[num45]));
						}
						else
						{
							float num55;
							if (rangeType3 == RangeType.HighLow)
							{
								num55 = (float)((double)inHigh[num45] - (double)inLow[num45]);
							}
							else
							{
								float num60;
								if (rangeType3 == RangeType.Shadows)
								{
									float num56 = inClose[num45];
									float num57 = inOpen[num45];
									float num58 = ((!((double)num56 >= (double)num57)) ? num57 : num56);
									float num59 = ((!((double)num56 >= (double)num57)) ? num56 : num57);
									num60 = (float)((double)num59 - (double)inLow[num45] + ((double)inHigh[num45] - (double)num58));
								}
								else
								{
									num60 = 0f;
								}
								num55 = num60;
							}
							num54 = num55;
						}
						array3[1] += num54;
						num45++;
						num46--;
					}
					while (num46 != 0);
				}
				int num61 = num6;
				if (num6 < startIdx)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[2].rangeType;
						float num62;
						if (rangeType4 == RangeType.RealBody)
						{
							num62 = (float)(double)Math.Abs((float)((double)inClose[num61] - (double)inOpen[num61]));
						}
						else
						{
							float num63;
							if (rangeType4 == RangeType.HighLow)
							{
								num63 = (float)((double)inHigh[num61] - (double)inLow[num61]);
							}
							else
							{
								float num68;
								if (rangeType4 == RangeType.Shadows)
								{
									float num64 = inClose[num61];
									float num65 = inOpen[num61];
									float num66 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
									float num67 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
									num68 = (float)((double)num67 - (double)inLow[num61] + ((double)inHigh[num61] - (double)num66));
								}
								else
								{
									num68 = 0f;
								}
								num63 = num68;
							}
							num62 = num63;
						}
						num5 = (double)num62 + num5;
						num61++;
					}
					while (num61 < startIdx);
				}
				int num69 = startIdx;
				int num70 = 0;
				do
				{
					float num71 = inClose[num69 - 2];
					float num72 = inOpen[num69 - 2];
					RangeType rangeType4;
					if ((double)num71 >= (double)num72)
					{
						float num73 = ((!((double)num71 >= (double)num72)) ? num72 : num71);
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num74 = candleSetting.avgPeriod;
						double num75;
						RangeType rangeType;
						if (num74 != 0.0)
						{
							num75 = array[2] / num74;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num76;
							if (rangeType == RangeType.RealBody)
							{
								num76 = (float)(double)Math.Abs((float)((double)num71 - (double)num72));
							}
							else
							{
								float num77;
								if (rangeType == RangeType.HighLow)
								{
									num77 = (float)((double)inHigh[num69 - 2] - (double)inLow[num69 - 2]);
								}
								else
								{
									float num80;
									if (rangeType == RangeType.Shadows)
									{
										float num78 = ((!((double)num71 >= (double)num72)) ? num72 : num71);
										float num79 = ((!((double)num71 >= (double)num72)) ? num71 : num72);
										num80 = (float)((double)num79 - (double)inLow[num69 - 2] + ((double)inHigh[num69 - 2] - (double)num78));
									}
									else
									{
										num80 = 0f;
									}
									num77 = num80;
								}
								num76 = num77;
							}
							num75 = num76;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num81 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)inHigh[num69 - 2] - (double)num73 < candleSetting2.factor * num75 / num81)
						{
							float num82 = inClose[num69 - 1];
							float num83 = inOpen[num69 - 1];
							if ((double)num82 >= (double)num83)
							{
								float num84 = ((!((double)num82 >= (double)num83)) ? num83 : num82);
								num74 = candleSetting2.avgPeriod;
								double num85;
								if (num74 != 0.0)
								{
									num85 = array[1] / num74;
								}
								else
								{
									float num86;
									if (rangeType == RangeType.RealBody)
									{
										num86 = (float)(double)Math.Abs((float)((double)num82 - (double)num83));
									}
									else
									{
										float num87;
										if (rangeType == RangeType.HighLow)
										{
											num87 = (float)((double)inHigh[num69 - 1] - (double)inLow[num69 - 1]);
										}
										else
										{
											float num90;
											if (rangeType == RangeType.Shadows)
											{
												float num88 = ((!((double)num82 >= (double)num83)) ? num83 : num82);
												float num89 = ((!((double)num82 >= (double)num83)) ? num82 : num83);
												num90 = (float)((double)num89 - (double)inLow[num69 - 1] + ((double)inHigh[num69 - 1] - (double)num88));
											}
											else
											{
												num90 = 0f;
											}
											num87 = num90;
										}
										num86 = num87;
									}
									num85 = num86;
								}
								CandleSetting candleSetting3 = Globals.candleSettings[7];
								rangeType = candleSetting3.rangeType;
								double num91 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)inHigh[num69 - 1] - (double)num84 < candleSetting3.factor * num85 / num91)
								{
									float num64 = inClose[num69];
									float num65 = inOpen[num69];
									if ((double)num64 >= (double)num65)
									{
										float num92 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
										num74 = candleSetting3.avgPeriod;
										double num93;
										if (num74 != 0.0)
										{
											num93 = array[0] / num74;
										}
										else
										{
											float num94;
											if (rangeType == RangeType.RealBody)
											{
												num94 = (float)(double)Math.Abs((float)((double)num64 - (double)num65));
											}
											else
											{
												float num95;
												if (rangeType == RangeType.HighLow)
												{
													num95 = (float)((double)inHigh[num69] - (double)inLow[num69]);
												}
												else
												{
													float num98;
													if (rangeType == RangeType.Shadows)
													{
														float num96 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
														float num97 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
														num98 = (float)((double)num97 - (double)inLow[num69] + ((double)inHigh[num69] - (double)num96));
													}
													else
													{
														num98 = 0f;
													}
													num95 = num98;
												}
												num94 = num95;
											}
											num93 = num94;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num99 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inHigh[num69] - (double)num92 < candleSetting4.factor * num93 / num99)
										{
											num82 = inClose[num69 - 1];
											if ((double)inClose[num69] > (double)num82)
											{
												num71 = inClose[num69 - 2];
												if ((double)num82 > (double)num71)
												{
													num72 = inOpen[num69 - 2];
													if ((double)inOpen[num69 - 1] > (double)num72)
													{
														CandleSetting candleSetting5 = candleSettings[8];
														double num100 = candleSetting5.avgPeriod;
														double num101;
														RangeType rangeType2;
														if (num100 != 0.0)
														{
															num101 = array2[2] / num100;
														}
														else
														{
															rangeType2 = candleSetting5.rangeType;
															float num102;
															if (rangeType2 == RangeType.RealBody)
															{
																num102 = (float)(double)Math.Abs((float)((double)num71 - (double)num72));
															}
															else
															{
																float num103;
																if (rangeType2 == RangeType.HighLow)
																{
																	num103 = (float)((double)inHigh[num69 - 2] - (double)inLow[num69 - 2]);
																}
																else
																{
																	float num106;
																	if (rangeType2 == RangeType.Shadows)
																	{
																		float num104 = ((!((double)num71 >= (double)num72)) ? num72 : num71);
																		float num105 = ((!((double)num71 >= (double)num72)) ? num71 : num72);
																		num106 = (float)((double)num105 - (double)inLow[num69 - 2] + ((double)inHigh[num69 - 2] - (double)num104));
																	}
																	else
																	{
																		num106 = 0f;
																	}
																	num103 = num106;
																}
																num102 = num103;
															}
															num101 = num102;
														}
														CandleSetting candleSetting6 = Globals.candleSettings[8];
														rangeType2 = candleSetting6.rangeType;
														double num107 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
														num83 = inOpen[num69 - 1];
														if ((double)num83 <= candleSetting6.factor * num101 / num107 + (double)inClose[num69 - 2] && (double)inOpen[num69] > (double)num83)
														{
															num100 = candleSetting6.avgPeriod;
															double num108;
															if (num100 != 0.0)
															{
																num108 = array2[1] / num100;
															}
															else
															{
																float num109;
																if (rangeType2 == RangeType.RealBody)
																{
																	num109 = (float)(double)Math.Abs((float)((double)inClose[num69 - 1] - (double)num83));
																}
																else
																{
																	float num110;
																	if (rangeType2 == RangeType.HighLow)
																	{
																		num110 = (float)((double)inHigh[num69 - 1] - (double)inLow[num69 - 1]);
																	}
																	else
																	{
																		float num113;
																		if (rangeType2 == RangeType.Shadows)
																		{
																			num82 = inClose[num69 - 1];
																			float num111 = ((!((double)num82 >= (double)num83)) ? num83 : num82);
																			float num112 = ((!((double)num82 >= (double)num83)) ? num82 : num83);
																			num113 = (float)((double)num112 - (double)inLow[num69 - 1] + ((double)inHigh[num69 - 1] - (double)num111));
																		}
																		else
																		{
																			num113 = 0f;
																		}
																		num110 = num113;
																	}
																	num109 = num110;
																}
																num108 = num109;
															}
															candleSettings = Globals.candleSettings;
															CandleSetting candleSetting7 = candleSettings[8];
															double num114 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if ((double)inOpen[num69] <= candleSetting7.factor * num108 / num114 + (double)inClose[num69 - 1])
															{
																CandleSetting candleSetting8 = candleSettings[9];
																double num115 = candleSetting8.avgPeriod;
																double num116;
																if (num115 != 0.0)
																{
																	num116 = array3[2] / num115;
																}
																else
																{
																	RangeType rangeType3 = candleSetting8.rangeType;
																	float num117;
																	if (rangeType3 == RangeType.RealBody)
																	{
																		num117 = (float)(double)Math.Abs((float)((double)inClose[num69 - 2] - (double)inOpen[num69 - 2]));
																	}
																	else
																	{
																		float num118;
																		if (rangeType3 == RangeType.HighLow)
																		{
																			num118 = (float)((double)inHigh[num69 - 2] - (double)inLow[num69 - 2]);
																		}
																		else
																		{
																			float num121;
																			if (rangeType3 == RangeType.Shadows)
																			{
																				num71 = inClose[num69 - 2];
																				num72 = inOpen[num69 - 2];
																				float num119 = ((!((double)num71 >= (double)num72)) ? num72 : num71);
																				float num120 = ((!((double)num71 >= (double)num72)) ? num71 : num72);
																				num121 = (float)((double)num120 - (double)inLow[num69 - 2] + ((double)inHigh[num69 - 2] - (double)num119));
																			}
																			else
																			{
																				num121 = 0f;
																			}
																			num118 = num121;
																		}
																		num117 = num118;
																	}
																	num116 = num117;
																}
																double num122 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																double num123 = Math.Abs((float)((double)inClose[num69 - 1] - (double)inOpen[num69 - 1]));
																CandleSetting candleSetting9 = Globals.candleSettings[9];
																if (num123 > (double)Math.Abs((float)((double)inClose[num69 - 2] - (double)inOpen[num69 - 2])) - candleSetting9.factor * num116 / num122)
																{
																	num115 = candleSetting9.avgPeriod;
																	double num124;
																	if (num115 != 0.0)
																	{
																		num124 = array3[1] / num115;
																	}
																	else
																	{
																		RangeType rangeType3 = candleSetting9.rangeType;
																		float num125;
																		if (rangeType3 == RangeType.RealBody)
																		{
																			num125 = (float)(double)Math.Abs((float)((double)inClose[num69 - 1] - (double)inOpen[num69 - 1]));
																		}
																		else
																		{
																			float num126;
																			if (rangeType3 == RangeType.HighLow)
																			{
																				num126 = (float)((double)inHigh[num69 - 1] - (double)inLow[num69 - 1]);
																			}
																			else
																			{
																				float num129;
																				if (rangeType3 == RangeType.Shadows)
																				{
																					num82 = inClose[num69 - 1];
																					num83 = inOpen[num69 - 1];
																					float num127 = ((!((double)num82 >= (double)num83)) ? num83 : num82);
																					float num128 = ((!((double)num82 >= (double)num83)) ? num82 : num83);
																					num129 = (float)((double)num128 - (double)inLow[num69 - 1] + ((double)inHigh[num69 - 1] - (double)num127));
																				}
																				else
																				{
																					num129 = 0f;
																				}
																				num126 = num129;
																			}
																			num125 = num126;
																		}
																		num124 = num125;
																	}
																	double num130 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																	double num131 = Math.Abs((float)((double)inClose[num69] - (double)inOpen[num69]));
																	candleSettings = Globals.candleSettings;
																	if (num131 > (double)Math.Abs((float)((double)inClose[num69 - 1] - (double)inOpen[num69 - 1])) - candleSettings[9].factor * num124 / num130)
																	{
																		CandleSetting candleSetting10 = candleSettings[2];
																		double num132 = candleSetting10.avgPeriod;
																		double num133;
																		if (num132 != 0.0)
																		{
																			num133 = num5 / num132;
																		}
																		else
																		{
																			rangeType4 = candleSetting10.rangeType;
																			float num134;
																			if (rangeType4 == RangeType.RealBody)
																			{
																				num134 = (float)(double)Math.Abs((float)((double)inClose[num69] - (double)inOpen[num69]));
																			}
																			else
																			{
																				float num135;
																				if (rangeType4 == RangeType.HighLow)
																				{
																					num135 = (float)((double)inHigh[num69] - (double)inLow[num69]);
																				}
																				else
																				{
																					float num138;
																					if (rangeType4 == RangeType.Shadows)
																					{
																						num64 = inClose[num69];
																						num65 = inOpen[num69];
																						float num136 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
																						float num137 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
																						num138 = (float)((double)num137 - (double)inLow[num69] + ((double)inHigh[num69] - (double)num136));
																					}
																					else
																					{
																						num138 = 0f;
																					}
																					num135 = num138;
																				}
																				num134 = num135;
																			}
																			num133 = num134;
																		}
																		double num139 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																		if ((double)Math.Abs((float)((double)inClose[num69] - (double)inOpen[num69])) > Globals.candleSettings[2].factor * num133 / num139)
																		{
																			outInteger[num70] = 100;
																			num70++;
																			goto IL_1362;
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num70] = 0;
					num70++;
					goto IL_1362;
					IL_1362:
					int num140 = 2;
					int num141 = num2 - 2;
					int num142 = num69 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num143;
						if (rangeType == RangeType.RealBody)
						{
							num143 = (float)(double)Math.Abs((float)((double)inClose[num141 + num142] - (double)inOpen[num141 + num142]));
						}
						else
						{
							float num144;
							if (rangeType == RangeType.HighLow)
							{
								num144 = (float)((double)inHigh[num141 + num142] - (double)inLow[num141 + num142]);
							}
							else
							{
								float num149;
								if (rangeType == RangeType.Shadows)
								{
									float num145 = inClose[num141 + num142];
									float num146 = inOpen[num141 + num142];
									float num147 = ((!((double)num145 >= (double)num146)) ? num146 : num145);
									float num148 = ((!((double)num145 >= (double)num146)) ? num145 : num146);
									num149 = (float)((double)num148 - (double)inLow[num141 + num142] + ((double)inHigh[num141 + num142] - (double)num147));
								}
								else
								{
									num149 = 0f;
								}
								num144 = num149;
							}
							num143 = num144;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num150;
						if (rangeType == RangeType.RealBody)
						{
							num150 = (float)(double)Math.Abs((float)((double)inClose[num141] - (double)inOpen[num141]));
						}
						else
						{
							float num151;
							if (rangeType == RangeType.HighLow)
							{
								num151 = (float)((double)inHigh[num141] - (double)inLow[num141]);
							}
							else
							{
								float num156;
								if (rangeType == RangeType.Shadows)
								{
									float num152 = inClose[num141];
									float num153 = inOpen[num141];
									float num154 = ((!((double)num152 >= (double)num153)) ? num153 : num152);
									float num155 = ((!((double)num152 >= (double)num153)) ? num152 : num153);
									num156 = (float)((double)num155 - (double)inLow[num141] + ((double)inHigh[num141] - (double)num154));
								}
								else
								{
									num156 = 0f;
								}
								num151 = num156;
							}
							num150 = num151;
						}
						array[num140] += num143 - num150;
						num140--;
						num141++;
					}
					while (num140 >= 0);
					int num157 = 2;
					int num158 = num69 - 2;
					int num159 = num4 - num69;
					int num160 = num3 - num69;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[9].rangeType;
						float num161;
						if (rangeType3 == RangeType.RealBody)
						{
							num161 = (float)(double)Math.Abs((float)((double)inClose[num158] - (double)inOpen[num158]));
						}
						else
						{
							float num162;
							if (rangeType3 == RangeType.HighLow)
							{
								num162 = (float)((double)inHigh[num158] - (double)inLow[num158]);
							}
							else
							{
								float num167;
								if (rangeType3 == RangeType.Shadows)
								{
									float num163 = inClose[num158];
									float num164 = inOpen[num158];
									float num165 = ((!((double)num163 >= (double)num164)) ? num164 : num163);
									float num166 = ((!((double)num163 >= (double)num164)) ? num163 : num164);
									num167 = (float)((double)num166 - (double)inLow[num158] + ((double)inHigh[num158] - (double)num165));
								}
								else
								{
									num167 = 0f;
								}
								num162 = num167;
							}
							num161 = num162;
						}
						rangeType3 = Globals.candleSettings[9].rangeType;
						float num168;
						if (rangeType3 == RangeType.RealBody)
						{
							num168 = (float)(double)Math.Abs((float)((double)inClose[num158 + num159] - (double)inOpen[num158 + num159]));
						}
						else
						{
							float num169;
							if (rangeType3 == RangeType.HighLow)
							{
								num169 = (float)((double)inHigh[num158 + num159] - (double)inLow[num158 + num159]);
							}
							else
							{
								float num174;
								if (rangeType3 == RangeType.Shadows)
								{
									float num170 = inClose[num158 + num159];
									float num171 = inOpen[num158 + num159];
									float num172 = ((!((double)num170 >= (double)num171)) ? num171 : num170);
									float num173 = ((!((double)num170 >= (double)num171)) ? num170 : num171);
									num174 = (float)((double)num173 - (double)inLow[num158 + num159] + ((double)inHigh[num158 + num159] - (double)num172));
								}
								else
								{
									num174 = 0f;
								}
								num169 = num174;
							}
							num168 = num169;
						}
						array3[num157] += num161 - num168;
						RangeType rangeType2 = Globals.candleSettings[8].rangeType;
						float num175;
						if (rangeType2 == RangeType.RealBody)
						{
							num175 = (float)(double)Math.Abs((float)((double)inClose[num158] - (double)inOpen[num158]));
						}
						else
						{
							float num176;
							if (rangeType2 == RangeType.HighLow)
							{
								num176 = (float)((double)inHigh[num158] - (double)inLow[num158]);
							}
							else
							{
								float num179;
								if (rangeType2 == RangeType.Shadows)
								{
									float num163 = inClose[num158];
									float num164 = inOpen[num158];
									float num177 = ((!((double)num163 >= (double)num164)) ? num164 : num163);
									float num178 = ((!((double)num163 >= (double)num164)) ? num163 : num164);
									num179 = (float)((double)num178 - (double)inLow[num158] + ((double)inHigh[num158] - (double)num177));
								}
								else
								{
									num179 = 0f;
								}
								num176 = num179;
							}
							num175 = num176;
						}
						rangeType2 = Globals.candleSettings[8].rangeType;
						float num180;
						if (rangeType2 == RangeType.RealBody)
						{
							num180 = (float)(double)Math.Abs((float)((double)inClose[num158 + num160] - (double)inOpen[num158 + num160]));
						}
						else
						{
							float num181;
							if (rangeType2 == RangeType.HighLow)
							{
								num181 = (float)((double)inHigh[num158 + num160] - (double)inLow[num158 + num160]);
							}
							else
							{
								float num186;
								if (rangeType2 == RangeType.Shadows)
								{
									float num182 = inClose[num158 + num160];
									float num183 = inOpen[num158 + num160];
									float num184 = ((!((double)num182 >= (double)num183)) ? num183 : num182);
									float num185 = ((!((double)num182 >= (double)num183)) ? num182 : num183);
									num186 = (float)((double)num185 - (double)inLow[num158 + num160] + ((double)inHigh[num158 + num160] - (double)num184));
								}
								else
								{
									num186 = 0f;
								}
								num181 = num186;
							}
							num180 = num181;
						}
						array2[num157] += num175 - num180;
						num157--;
						num158++;
					}
					while (num157 >= 1);
					rangeType4 = Globals.candleSettings[2].rangeType;
					float num187;
					if (rangeType4 == RangeType.RealBody)
					{
						num187 = (float)(double)Math.Abs((float)((double)inClose[num69] - (double)inOpen[num69]));
					}
					else
					{
						float num188;
						if (rangeType4 == RangeType.HighLow)
						{
							num188 = (float)((double)inHigh[num69] - (double)inLow[num69]);
						}
						else
						{
							float num191;
							if (rangeType4 == RangeType.Shadows)
							{
								float num64 = inClose[num69];
								float num65 = inOpen[num69];
								float num189 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
								float num190 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
								num191 = (float)((double)num190 - (double)inLow[num69] + ((double)inHigh[num69] - (double)num189));
							}
							else
							{
								num191 = 0f;
							}
							num188 = num191;
						}
						num187 = num188;
					}
					rangeType4 = Globals.candleSettings[2].rangeType;
					float num192;
					if (rangeType4 == RangeType.RealBody)
					{
						num192 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num193;
						if (rangeType4 == RangeType.HighLow)
						{
							num193 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num198;
							if (rangeType4 == RangeType.Shadows)
							{
								float num194 = inClose[num6];
								float num195 = inOpen[num6];
								float num196 = ((!((double)num194 >= (double)num195)) ? num195 : num194);
								float num197 = ((!((double)num194 >= (double)num195)) ? num194 : num195);
								num198 = (float)((double)num197 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num196));
							}
							else
							{
								num198 = 0f;
							}
							num193 = num198;
						}
						num192 = num193;
					}
					num5 = (double)(num187 - num192) + num5;
					num69++;
					num2++;
					num3++;
					num4++;
					num6++;
				}
				while (num69 <= endIdx);
				outNBElement = num70;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cdl3WhiteSoldiers(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = Cdl3WhiteSoldiersLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[8].avgPeriod;
				array3[2] = 0.0;
				array3[1] = 0.0;
				array3[0] = 0.0;
				int num4 = startIdx - candleSettings[9].avgPeriod;
				double num5 = 0.0;
				int num6 = startIdx - candleSettings[2].avgPeriod;
				if (num2 < startIdx)
				{
					int num7 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num7 - 1] - inOpen[num7 - 1]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num7 - 1] - inLow[num7 - 1];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num7 - 1];
									double num11 = inOpen[num7 - 1];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num7 - 1] + (inHigh[num7 - 1] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						array[2] += num8;
						rangeType = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num7] - inOpen[num7]);
						}
						else
						{
							double num16;
							if (rangeType == RangeType.HighLow)
							{
								num16 = inHigh[num7] - inLow[num7];
							}
							else
							{
								double num21;
								if (rangeType == RangeType.Shadows)
								{
									double num17 = inClose[num7];
									double num18 = inOpen[num7];
									double num19 = ((!(num17 >= num18)) ? num18 : num17);
									double num20 = ((!(num17 >= num18)) ? num17 : num18);
									num21 = num20 - inLow[num7] + (inHigh[num7] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num16 = num21;
							}
							num15 = num16;
						}
						array[1] += num15;
						rangeType = Globals.candleSettings[7].rangeType;
						double num22;
						if (rangeType == RangeType.RealBody)
						{
							num22 = Math.Abs(inClose[num7 + 1] - inOpen[num7 + 1]);
						}
						else
						{
							double num23;
							if (rangeType == RangeType.HighLow)
							{
								num23 = inHigh[num7 + 1] - inLow[num7 + 1];
							}
							else
							{
								double num28;
								if (rangeType == RangeType.Shadows)
								{
									double num24 = inClose[num7 + 1];
									double num25 = inOpen[num7 + 1];
									double num26 = ((!(num24 >= num25)) ? num25 : num24);
									double num27 = ((!(num24 >= num25)) ? num24 : num25);
									num28 = num27 - inLow[num7 + 1] + (inHigh[num7 + 1] - num26);
								}
								else
								{
									num28 = 0.0;
								}
								num23 = num28;
							}
							num22 = num23;
						}
						array[0] += num22;
						num7++;
					}
					while (num7 + 1 < startIdx);
				}
				if (num3 < startIdx)
				{
					int num29 = num3 - 1;
					int num30 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[8].rangeType;
						double num31;
						if (rangeType2 == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num29 - 1] - inOpen[num29 - 1]);
						}
						else
						{
							double num32;
							if (rangeType2 == RangeType.HighLow)
							{
								num32 = inHigh[num29 - 1] - inLow[num29 - 1];
							}
							else
							{
								double num37;
								if (rangeType2 == RangeType.Shadows)
								{
									double num33 = inClose[num29 - 1];
									double num34 = inOpen[num29 - 1];
									double num35 = ((!(num33 >= num34)) ? num34 : num33);
									double num36 = ((!(num33 >= num34)) ? num33 : num34);
									num37 = num36 - inLow[num29 - 1] + (inHigh[num29 - 1] - num35);
								}
								else
								{
									num37 = 0.0;
								}
								num32 = num37;
							}
							num31 = num32;
						}
						array2[2] += num31;
						rangeType2 = Globals.candleSettings[8].rangeType;
						double num38;
						if (rangeType2 == RangeType.RealBody)
						{
							num38 = Math.Abs(inClose[num29] - inOpen[num29]);
						}
						else
						{
							double num39;
							if (rangeType2 == RangeType.HighLow)
							{
								num39 = inHigh[num29] - inLow[num29];
							}
							else
							{
								double num44;
								if (rangeType2 == RangeType.Shadows)
								{
									double num40 = inClose[num29];
									double num41 = inOpen[num29];
									double num42 = ((!(num40 >= num41)) ? num41 : num40);
									double num43 = ((!(num40 >= num41)) ? num40 : num41);
									num44 = num43 - inLow[num29] + (inHigh[num29] - num42);
								}
								else
								{
									num44 = 0.0;
								}
								num39 = num44;
							}
							num38 = num39;
						}
						array2[1] += num38;
						num29++;
						num30--;
					}
					while (num30 != 0);
				}
				if (num4 < startIdx)
				{
					int num45 = num4 - 1;
					int num46 = startIdx - num4;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[9].rangeType;
						double num47;
						if (rangeType3 == RangeType.RealBody)
						{
							num47 = Math.Abs(inClose[num45 - 1] - inOpen[num45 - 1]);
						}
						else
						{
							double num48;
							if (rangeType3 == RangeType.HighLow)
							{
								num48 = inHigh[num45 - 1] - inLow[num45 - 1];
							}
							else
							{
								double num53;
								if (rangeType3 == RangeType.Shadows)
								{
									double num49 = inClose[num45 - 1];
									double num50 = inOpen[num45 - 1];
									double num51 = ((!(num49 >= num50)) ? num50 : num49);
									double num52 = ((!(num49 >= num50)) ? num49 : num50);
									num53 = num52 - inLow[num45 - 1] + (inHigh[num45 - 1] - num51);
								}
								else
								{
									num53 = 0.0;
								}
								num48 = num53;
							}
							num47 = num48;
						}
						array3[2] += num47;
						rangeType3 = Globals.candleSettings[9].rangeType;
						double num54;
						if (rangeType3 == RangeType.RealBody)
						{
							num54 = Math.Abs(inClose[num45] - inOpen[num45]);
						}
						else
						{
							double num55;
							if (rangeType3 == RangeType.HighLow)
							{
								num55 = inHigh[num45] - inLow[num45];
							}
							else
							{
								double num60;
								if (rangeType3 == RangeType.Shadows)
								{
									double num56 = inClose[num45];
									double num57 = inOpen[num45];
									double num58 = ((!(num56 >= num57)) ? num57 : num56);
									double num59 = ((!(num56 >= num57)) ? num56 : num57);
									num60 = num59 - inLow[num45] + (inHigh[num45] - num58);
								}
								else
								{
									num60 = 0.0;
								}
								num55 = num60;
							}
							num54 = num55;
						}
						array3[1] += num54;
						num45++;
						num46--;
					}
					while (num46 != 0);
				}
				int num61 = num6;
				if (num6 < startIdx)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[2].rangeType;
						double num62;
						if (rangeType4 == RangeType.RealBody)
						{
							num62 = Math.Abs(inClose[num61] - inOpen[num61]);
						}
						else
						{
							double num63;
							if (rangeType4 == RangeType.HighLow)
							{
								num63 = inHigh[num61] - inLow[num61];
							}
							else
							{
								double num68;
								if (rangeType4 == RangeType.Shadows)
								{
									double num64 = inClose[num61];
									double num65 = inOpen[num61];
									double num66 = ((!(num64 >= num65)) ? num65 : num64);
									double num67 = ((!(num64 >= num65)) ? num64 : num65);
									num68 = num67 - inLow[num61] + (inHigh[num61] - num66);
								}
								else
								{
									num68 = 0.0;
								}
								num63 = num68;
							}
							num62 = num63;
						}
						num5 = num62 + num5;
						num61++;
					}
					while (num61 < startIdx);
				}
				int num69 = startIdx;
				int num70 = 0;
				do
				{
					double num71 = inClose[num69 - 2];
					double num72 = inOpen[num69 - 2];
					RangeType rangeType4;
					if (num71 >= num72)
					{
						double num73 = num71;
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num74 = candleSetting.avgPeriod;
						double num75;
						RangeType rangeType;
						if (num74 != 0.0)
						{
							num75 = array[2] / num74;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num76;
							if (rangeType == RangeType.RealBody)
							{
								num76 = Math.Abs(num71 - num72);
							}
							else
							{
								double num77;
								if (rangeType == RangeType.HighLow)
								{
									num77 = inHigh[num69 - 2] - inLow[num69 - 2];
								}
								else
								{
									double num80;
									if (rangeType == RangeType.Shadows)
									{
										double num78 = num71;
										double num79 = num72;
										num80 = num79 - inLow[num69 - 2] + (inHigh[num69 - 2] - num78);
									}
									else
									{
										num80 = 0.0;
									}
									num77 = num80;
								}
								num76 = num77;
							}
							num75 = num76;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num81 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (inHigh[num69 - 2] - num73 < candleSetting2.factor * num75 / num81)
						{
							double num82 = inClose[num69 - 1];
							double num83 = inOpen[num69 - 1];
							if (num82 >= num83)
							{
								double num84 = num82;
								num74 = candleSetting2.avgPeriod;
								double num85;
								if (num74 != 0.0)
								{
									num85 = array[1] / num74;
								}
								else
								{
									double num86;
									if (rangeType == RangeType.RealBody)
									{
										num86 = Math.Abs(num82 - num83);
									}
									else
									{
										double num87;
										if (rangeType == RangeType.HighLow)
										{
											num87 = inHigh[num69 - 1] - inLow[num69 - 1];
										}
										else
										{
											double num90;
											if (rangeType == RangeType.Shadows)
											{
												double num88 = num82;
												double num89 = num83;
												num90 = num89 - inLow[num69 - 1] + (inHigh[num69 - 1] - num88);
											}
											else
											{
												num90 = 0.0;
											}
											num87 = num90;
										}
										num86 = num87;
									}
									num85 = num86;
								}
								CandleSetting candleSetting3 = Globals.candleSettings[7];
								rangeType = candleSetting3.rangeType;
								double num91 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (inHigh[num69 - 1] - num84 < candleSetting3.factor * num85 / num91)
								{
									double num64 = inClose[num69];
									double num65 = inOpen[num69];
									if (num64 >= num65)
									{
										double num92 = num64;
										num74 = candleSetting3.avgPeriod;
										double num93;
										if (num74 != 0.0)
										{
											num93 = array[0] / num74;
										}
										else
										{
											double num94;
											if (rangeType == RangeType.RealBody)
											{
												num94 = Math.Abs(num64 - num65);
											}
											else
											{
												double num95;
												if (rangeType == RangeType.HighLow)
												{
													num95 = inHigh[num69] - inLow[num69];
												}
												else
												{
													double num98;
													if (rangeType == RangeType.Shadows)
													{
														double num96 = num64;
														double num97 = num65;
														num98 = num97 - inLow[num69] + (inHigh[num69] - num96);
													}
													else
													{
														num98 = 0.0;
													}
													num95 = num98;
												}
												num94 = num95;
											}
											num93 = num94;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num99 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inHigh[num69] - num92 < candleSetting4.factor * num93 / num99)
										{
											num82 = inClose[num69 - 1];
											if (inClose[num69] > num82)
											{
												num71 = inClose[num69 - 2];
												if (num82 > num71)
												{
													num72 = inOpen[num69 - 2];
													if (inOpen[num69 - 1] > num72)
													{
														CandleSetting candleSetting5 = candleSettings[8];
														double num100 = candleSetting5.avgPeriod;
														double num101;
														RangeType rangeType2;
														if (num100 != 0.0)
														{
															num101 = array2[2] / num100;
														}
														else
														{
															rangeType2 = candleSetting5.rangeType;
															double num102;
															if (rangeType2 == RangeType.RealBody)
															{
																num102 = Math.Abs(num71 - num72);
															}
															else
															{
																double num103;
																if (rangeType2 == RangeType.HighLow)
																{
																	num103 = inHigh[num69 - 2] - inLow[num69 - 2];
																}
																else
																{
																	double num106;
																	if (rangeType2 == RangeType.Shadows)
																	{
																		double num104 = ((!(num71 >= num72)) ? num72 : num71);
																		double num105 = ((!(num71 >= num72)) ? num71 : num72);
																		num106 = num105 - inLow[num69 - 2] + (inHigh[num69 - 2] - num104);
																	}
																	else
																	{
																		num106 = 0.0;
																	}
																	num103 = num106;
																}
																num102 = num103;
															}
															num101 = num102;
														}
														CandleSetting candleSetting6 = Globals.candleSettings[8];
														rangeType2 = candleSetting6.rangeType;
														double num107 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
														num83 = inOpen[num69 - 1];
														if (num83 <= candleSetting6.factor * num101 / num107 + inClose[num69 - 2] && inOpen[num69] > num83)
														{
															num100 = candleSetting6.avgPeriod;
															double num108;
															if (num100 != 0.0)
															{
																num108 = array2[1] / num100;
															}
															else
															{
																double num109;
																if (rangeType2 == RangeType.RealBody)
																{
																	num109 = Math.Abs(inClose[num69 - 1] - num83);
																}
																else
																{
																	double num110;
																	if (rangeType2 == RangeType.HighLow)
																	{
																		num110 = inHigh[num69 - 1] - inLow[num69 - 1];
																	}
																	else
																	{
																		double num113;
																		if (rangeType2 == RangeType.Shadows)
																		{
																			num82 = inClose[num69 - 1];
																			double num111 = ((!(num82 >= num83)) ? num83 : num82);
																			double num112 = ((!(num82 >= num83)) ? num82 : num83);
																			num113 = num112 - inLow[num69 - 1] + (inHigh[num69 - 1] - num111);
																		}
																		else
																		{
																			num113 = 0.0;
																		}
																		num110 = num113;
																	}
																	num109 = num110;
																}
																num108 = num109;
															}
															candleSettings = Globals.candleSettings;
															CandleSetting candleSetting7 = candleSettings[8];
															double num114 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if (inOpen[num69] <= candleSetting7.factor * num108 / num114 + inClose[num69 - 1])
															{
																CandleSetting candleSetting8 = candleSettings[9];
																double num115 = candleSetting8.avgPeriod;
																double num116;
																if (num115 != 0.0)
																{
																	num116 = array3[2] / num115;
																}
																else
																{
																	RangeType rangeType3 = candleSetting8.rangeType;
																	double num117;
																	if (rangeType3 == RangeType.RealBody)
																	{
																		num117 = Math.Abs(inClose[num69 - 2] - inOpen[num69 - 2]);
																	}
																	else
																	{
																		double num118;
																		if (rangeType3 == RangeType.HighLow)
																		{
																			num118 = inHigh[num69 - 2] - inLow[num69 - 2];
																		}
																		else
																		{
																			double num121;
																			if (rangeType3 == RangeType.Shadows)
																			{
																				num71 = inClose[num69 - 2];
																				num72 = inOpen[num69 - 2];
																				double num119 = ((!(num71 >= num72)) ? num72 : num71);
																				double num120 = ((!(num71 >= num72)) ? num71 : num72);
																				num121 = num120 - inLow[num69 - 2] + (inHigh[num69 - 2] - num119);
																			}
																			else
																			{
																				num121 = 0.0;
																			}
																			num118 = num121;
																		}
																		num117 = num118;
																	}
																	num116 = num117;
																}
																double num122 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																double num123 = Math.Abs(inClose[num69 - 1] - inOpen[num69 - 1]);
																CandleSetting candleSetting9 = Globals.candleSettings[9];
																if (num123 > Math.Abs(inClose[num69 - 2] - inOpen[num69 - 2]) - candleSetting9.factor * num116 / num122)
																{
																	num115 = candleSetting9.avgPeriod;
																	double num124;
																	if (num115 != 0.0)
																	{
																		num124 = array3[1] / num115;
																	}
																	else
																	{
																		RangeType rangeType3 = candleSetting9.rangeType;
																		double num125;
																		if (rangeType3 == RangeType.RealBody)
																		{
																			num125 = Math.Abs(inClose[num69 - 1] - inOpen[num69 - 1]);
																		}
																		else
																		{
																			double num126;
																			if (rangeType3 == RangeType.HighLow)
																			{
																				num126 = inHigh[num69 - 1] - inLow[num69 - 1];
																			}
																			else
																			{
																				double num129;
																				if (rangeType3 == RangeType.Shadows)
																				{
																					num82 = inClose[num69 - 1];
																					num83 = inOpen[num69 - 1];
																					double num127 = ((!(num82 >= num83)) ? num83 : num82);
																					double num128 = ((!(num82 >= num83)) ? num82 : num83);
																					num129 = num128 - inLow[num69 - 1] + (inHigh[num69 - 1] - num127);
																				}
																				else
																				{
																					num129 = 0.0;
																				}
																				num126 = num129;
																			}
																			num125 = num126;
																		}
																		num124 = num125;
																	}
																	double num130 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																	double num131 = Math.Abs(inClose[num69] - inOpen[num69]);
																	candleSettings = Globals.candleSettings;
																	if (num131 > Math.Abs(inClose[num69 - 1] - inOpen[num69 - 1]) - candleSettings[9].factor * num124 / num130)
																	{
																		CandleSetting candleSetting10 = candleSettings[2];
																		double num132 = candleSetting10.avgPeriod;
																		double num133;
																		if (num132 != 0.0)
																		{
																			num133 = num5 / num132;
																		}
																		else
																		{
																			rangeType4 = candleSetting10.rangeType;
																			double num134;
																			if (rangeType4 == RangeType.RealBody)
																			{
																				num134 = Math.Abs(inClose[num69] - inOpen[num69]);
																			}
																			else
																			{
																				double num135;
																				if (rangeType4 == RangeType.HighLow)
																				{
																					num135 = inHigh[num69] - inLow[num69];
																				}
																				else
																				{
																					double num138;
																					if (rangeType4 == RangeType.Shadows)
																					{
																						num64 = inClose[num69];
																						num65 = inOpen[num69];
																						double num136 = ((!(num64 >= num65)) ? num65 : num64);
																						double num137 = ((!(num64 >= num65)) ? num64 : num65);
																						num138 = num137 - inLow[num69] + (inHigh[num69] - num136);
																					}
																					else
																					{
																						num138 = 0.0;
																					}
																					num135 = num138;
																				}
																				num134 = num135;
																			}
																			num133 = num134;
																		}
																		double num139 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																		if (Math.Abs(inClose[num69] - inOpen[num69]) > Globals.candleSettings[2].factor * num133 / num139)
																		{
																			outInteger[num70] = 100;
																			num70++;
																			goto IL_11c1;
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num70] = 0;
					num70++;
					goto IL_11c1;
					IL_11c1:
					int num140 = 2;
					int num141 = num2 - 2;
					int num142 = num69 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num143;
						if (rangeType == RangeType.RealBody)
						{
							num143 = Math.Abs(inClose[num141 + num142] - inOpen[num141 + num142]);
						}
						else
						{
							double num144;
							if (rangeType == RangeType.HighLow)
							{
								num144 = inHigh[num141 + num142] - inLow[num141 + num142];
							}
							else
							{
								double num149;
								if (rangeType == RangeType.Shadows)
								{
									double num145 = inClose[num141 + num142];
									double num146 = inOpen[num141 + num142];
									double num147 = ((!(num145 >= num146)) ? num146 : num145);
									double num148 = ((!(num145 >= num146)) ? num145 : num146);
									num149 = num148 - inLow[num141 + num142] + (inHigh[num141 + num142] - num147);
								}
								else
								{
									num149 = 0.0;
								}
								num144 = num149;
							}
							num143 = num144;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num150;
						if (rangeType == RangeType.RealBody)
						{
							num150 = Math.Abs(inClose[num141] - inOpen[num141]);
						}
						else
						{
							double num151;
							if (rangeType == RangeType.HighLow)
							{
								num151 = inHigh[num141] - inLow[num141];
							}
							else
							{
								double num156;
								if (rangeType == RangeType.Shadows)
								{
									double num152 = inClose[num141];
									double num153 = inOpen[num141];
									double num154 = ((!(num152 >= num153)) ? num153 : num152);
									double num155 = ((!(num152 >= num153)) ? num152 : num153);
									num156 = num155 - inLow[num141] + (inHigh[num141] - num154);
								}
								else
								{
									num156 = 0.0;
								}
								num151 = num156;
							}
							num150 = num151;
						}
						array[num140] += num143 - num150;
						num140--;
						num141++;
					}
					while (num140 >= 0);
					int num157 = 2;
					int num158 = num69 - 2;
					int num159 = num4 - num69;
					int num160 = num3 - num69;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[9].rangeType;
						double num161;
						if (rangeType3 == RangeType.RealBody)
						{
							num161 = Math.Abs(inClose[num158] - inOpen[num158]);
						}
						else
						{
							double num162;
							if (rangeType3 == RangeType.HighLow)
							{
								num162 = inHigh[num158] - inLow[num158];
							}
							else
							{
								double num167;
								if (rangeType3 == RangeType.Shadows)
								{
									double num163 = inClose[num158];
									double num164 = inOpen[num158];
									double num165 = ((!(num163 >= num164)) ? num164 : num163);
									double num166 = ((!(num163 >= num164)) ? num163 : num164);
									num167 = num166 - inLow[num158] + (inHigh[num158] - num165);
								}
								else
								{
									num167 = 0.0;
								}
								num162 = num167;
							}
							num161 = num162;
						}
						rangeType3 = Globals.candleSettings[9].rangeType;
						double num168;
						if (rangeType3 == RangeType.RealBody)
						{
							num168 = Math.Abs(inClose[num158 + num159] - inOpen[num158 + num159]);
						}
						else
						{
							double num169;
							if (rangeType3 == RangeType.HighLow)
							{
								num169 = inHigh[num158 + num159] - inLow[num158 + num159];
							}
							else
							{
								double num174;
								if (rangeType3 == RangeType.Shadows)
								{
									double num170 = inClose[num158 + num159];
									double num171 = inOpen[num158 + num159];
									double num172 = ((!(num170 >= num171)) ? num171 : num170);
									double num173 = ((!(num170 >= num171)) ? num170 : num171);
									num174 = num173 - inLow[num158 + num159] + (inHigh[num158 + num159] - num172);
								}
								else
								{
									num174 = 0.0;
								}
								num169 = num174;
							}
							num168 = num169;
						}
						array3[num157] += num161 - num168;
						RangeType rangeType2 = Globals.candleSettings[8].rangeType;
						double num175;
						if (rangeType2 == RangeType.RealBody)
						{
							num175 = Math.Abs(inClose[num158] - inOpen[num158]);
						}
						else
						{
							double num176;
							if (rangeType2 == RangeType.HighLow)
							{
								num176 = inHigh[num158] - inLow[num158];
							}
							else
							{
								double num179;
								if (rangeType2 == RangeType.Shadows)
								{
									double num163 = inClose[num158];
									double num164 = inOpen[num158];
									double num177 = ((!(num163 >= num164)) ? num164 : num163);
									double num178 = ((!(num163 >= num164)) ? num163 : num164);
									num179 = num178 - inLow[num158] + (inHigh[num158] - num177);
								}
								else
								{
									num179 = 0.0;
								}
								num176 = num179;
							}
							num175 = num176;
						}
						rangeType2 = Globals.candleSettings[8].rangeType;
						double num180;
						if (rangeType2 == RangeType.RealBody)
						{
							num180 = Math.Abs(inClose[num158 + num160] - inOpen[num158 + num160]);
						}
						else
						{
							double num181;
							if (rangeType2 == RangeType.HighLow)
							{
								num181 = inHigh[num158 + num160] - inLow[num158 + num160];
							}
							else
							{
								double num186;
								if (rangeType2 == RangeType.Shadows)
								{
									double num182 = inClose[num158 + num160];
									double num183 = inOpen[num158 + num160];
									double num184 = ((!(num182 >= num183)) ? num183 : num182);
									double num185 = ((!(num182 >= num183)) ? num182 : num183);
									num186 = num185 - inLow[num158 + num160] + (inHigh[num158 + num160] - num184);
								}
								else
								{
									num186 = 0.0;
								}
								num181 = num186;
							}
							num180 = num181;
						}
						array2[num157] += num175 - num180;
						num157--;
						num158++;
					}
					while (num157 >= 1);
					rangeType4 = Globals.candleSettings[2].rangeType;
					double num187;
					if (rangeType4 == RangeType.RealBody)
					{
						num187 = Math.Abs(inClose[num69] - inOpen[num69]);
					}
					else
					{
						double num188;
						if (rangeType4 == RangeType.HighLow)
						{
							num188 = inHigh[num69] - inLow[num69];
						}
						else
						{
							double num191;
							if (rangeType4 == RangeType.Shadows)
							{
								double num64 = inClose[num69];
								double num65 = inOpen[num69];
								double num189 = ((!(num64 >= num65)) ? num65 : num64);
								double num190 = ((!(num64 >= num65)) ? num64 : num65);
								num191 = num190 - inLow[num69] + (inHigh[num69] - num189);
							}
							else
							{
								num191 = 0.0;
							}
							num188 = num191;
						}
						num187 = num188;
					}
					rangeType4 = Globals.candleSettings[2].rangeType;
					double num192;
					if (rangeType4 == RangeType.RealBody)
					{
						num192 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num193;
						if (rangeType4 == RangeType.HighLow)
						{
							num193 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num198;
							if (rangeType4 == RangeType.Shadows)
							{
								double num194 = inClose[num6];
								double num195 = inOpen[num6];
								double num196 = ((!(num194 >= num195)) ? num195 : num194);
								double num197 = ((!(num194 >= num195)) ? num194 : num195);
								num198 = num197 - inLow[num6] + (inHigh[num6] - num196);
							}
							else
							{
								num198 = 0.0;
							}
							num193 = num198;
						}
						num192 = num193;
					}
					num5 = num187 - num192 + num5;
					num69++;
					num2++;
					num3++;
					num4++;
					num6++;
				}
				while (num69 <= endIdx);
				outNBElement = num70;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlAbandonedBabyLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[3].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
			int avgPeriod3 = candleSettings[2].avgPeriod;
			int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			return num2 + 2;
		}
		return -1;
	}

	public static RetCode CdlAbandonedBaby(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlAbandonedBabyLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = (double)num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = (double)num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
						}
						else
						{
							float num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
							}
							else
							{
								float num38;
								if (rangeType == RangeType.Shadows)
								{
									float num34 = inClose[num28 - 2];
									float num35 = inOpen[num28 - 2];
									float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
									float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
									num38 = (float)((double)num37 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num36));
								}
								else
								{
									num38 = 0f;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) > candleSettings[0].factor * num31 / num39)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
							}
							else
							{
								float num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
								}
								else
								{
									float num48;
									if (rangeType2 == RangeType.Shadows)
									{
										float num44 = inClose[num28 - 1];
										float num45 = inOpen[num28 - 1];
										float num46 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num47 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num48 = (float)((double)num47 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num46));
									}
									else
									{
										num48 = 0f;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1])) <= candleSettings[3].factor * num41 / num49)
						{
							CandleSetting candleSetting3 = candleSettings[2];
							double num50 = candleSetting3.avgPeriod;
							double num51;
							if (num50 != 0.0)
							{
								num51 = num4 / num50;
							}
							else
							{
								rangeType3 = candleSetting3.rangeType;
								float num52;
								if (rangeType3 == RangeType.RealBody)
								{
									num52 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
								}
								else
								{
									float num53;
									if (rangeType3 == RangeType.HighLow)
									{
										num53 = (float)((double)inHigh[num28] - (double)inLow[num28]);
									}
									else
									{
										float num56;
										if (rangeType3 == RangeType.Shadows)
										{
											float num11 = inClose[num28];
											float num12 = inOpen[num28];
											float num54 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
											float num55 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
											num56 = (float)((double)num55 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num54));
										}
										else
										{
											num56 = 0f;
										}
										num53 = num56;
									}
									num52 = num53;
								}
								num51 = num52;
							}
							double num57 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28])) > Globals.candleSettings[2].factor * num51 / num57)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								if ((double)num34 >= (double)num35)
								{
									float num11 = inClose[num28];
									if (!((double)num11 >= (double)inOpen[num28]))
									{
										double num58 = num34;
										if ((double)num11 < num58 - (double)Math.Abs((float)(num58 - (double)num35)) * optInPenetration)
										{
											float num59 = inLow[num28 - 1];
											if ((double)num59 > (double)inHigh[num28 - 2] && (double)inHigh[num28] < (double)num59)
											{
												goto IL_0765;
											}
										}
									}
								}
								num34 = inClose[num28 - 2];
								num35 = inOpen[num28 - 2];
								if (!((double)num34 >= (double)num35))
								{
									float num11 = inClose[num28];
									if ((double)num11 >= (double)inOpen[num28] && (double)num11 > (double)Math.Abs((float)((double)num34 - (double)num35)) * optInPenetration + (double)inClose[num28 - 2])
									{
										float num60 = inHigh[num28 - 1];
										if ((double)num60 < (double)inLow[num28 - 2] && (double)inLow[num28] > (double)num60)
										{
											goto IL_0765;
										}
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0796;
					IL_0796:
					rangeType = Globals.candleSettings[0].rangeType;
					float num61;
					if (rangeType == RangeType.RealBody)
					{
						num61 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
					}
					else
					{
						float num62;
						if (rangeType == RangeType.HighLow)
						{
							num62 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
						}
						else
						{
							float num65;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								float num63 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num64 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num65 = (float)((double)num64 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num63));
							}
							else
							{
								num65 = 0f;
							}
							num62 = num65;
						}
						num61 = num62;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num66;
					if (rangeType == RangeType.RealBody)
					{
						num66 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num67;
						if (rangeType == RangeType.HighLow)
						{
							num67 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num72;
							if (rangeType == RangeType.Shadows)
							{
								float num68 = inClose[num5];
								float num69 = inOpen[num5];
								float num70 = ((!((double)num68 >= (double)num69)) ? num69 : num68);
								float num71 = ((!((double)num68 >= (double)num69)) ? num68 : num69);
								num72 = (float)((double)num71 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num70));
							}
							else
							{
								num72 = 0f;
							}
							num67 = num72;
						}
						num66 = num67;
					}
					num2 = (double)(num61 - num66) + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num73;
					if (rangeType2 == RangeType.RealBody)
					{
						num73 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
					}
					else
					{
						float num74;
						if (rangeType2 == RangeType.HighLow)
						{
							num74 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
						}
						else
						{
							float num77;
							if (rangeType2 == RangeType.Shadows)
							{
								float num44 = inClose[num28 - 1];
								float num45 = inOpen[num28 - 1];
								float num75 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
								float num76 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
								num77 = (float)((double)num76 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num75));
							}
							else
							{
								num77 = 0f;
							}
							num74 = num77;
						}
						num73 = num74;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num78;
					if (rangeType2 == RangeType.RealBody)
					{
						num78 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num79;
						if (rangeType2 == RangeType.HighLow)
						{
							num79 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num84;
							if (rangeType2 == RangeType.Shadows)
							{
								float num80 = inClose[num6];
								float num81 = inOpen[num6];
								float num82 = ((!((double)num80 >= (double)num81)) ? num81 : num80);
								float num83 = ((!((double)num80 >= (double)num81)) ? num80 : num81);
								num84 = (float)((double)num83 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num82));
							}
							else
							{
								num84 = 0f;
							}
							num79 = num84;
						}
						num78 = num79;
					}
					num3 = (double)(num73 - num78) + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num85;
					if (rangeType3 == RangeType.RealBody)
					{
						num85 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
					}
					else
					{
						float num86;
						if (rangeType3 == RangeType.HighLow)
						{
							num86 = (float)((double)inHigh[num28] - (double)inLow[num28]);
						}
						else
						{
							float num89;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num28];
								float num12 = inOpen[num28];
								float num87 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num88 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num89 = (float)((double)num88 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num87));
							}
							else
							{
								num89 = 0f;
							}
							num86 = num89;
						}
						num85 = num86;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num90;
					if (rangeType3 == RangeType.RealBody)
					{
						num90 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num91;
						if (rangeType3 == RangeType.HighLow)
						{
							num91 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num96;
							if (rangeType3 == RangeType.Shadows)
							{
								float num92 = inClose[num7];
								float num93 = inOpen[num7];
								float num94 = ((!((double)num92 >= (double)num93)) ? num93 : num92);
								float num95 = ((!((double)num92 >= (double)num93)) ? num92 : num93);
								num96 = (float)((double)num95 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num94));
							}
							else
							{
								num96 = 0f;
							}
							num91 = num96;
						}
						num90 = num91;
					}
					num4 = (double)(num85 - num90) + num4;
					num28++;
					num5++;
					num6++;
					num7++;
					continue;
					IL_0765:
					int num97 = (((double)inClose[num28] >= (double)inOpen[num28]) ? 1 : (-1));
					outInteger[num29] = num97 * 100;
					num29++;
					goto IL_0796;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlAbandonedBaby(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlAbandonedBabyLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
						}
						else
						{
							double num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = inHigh[num28 - 2] - inLow[num28 - 2];
							}
							else
							{
								double num38;
								if (rangeType == RangeType.Shadows)
								{
									double num34 = inClose[num28 - 2];
									double num35 = inOpen[num28 - 2];
									double num36 = ((!(num34 >= num35)) ? num35 : num34);
									double num37 = ((!(num34 >= num35)) ? num34 : num35);
									num38 = num37 - inLow[num28 - 2] + (inHigh[num28 - 2] - num36);
								}
								else
								{
									num38 = 0.0;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					double num11;
					RangeType rangeType3;
					if (Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) > candleSettings[0].factor * num31 / num39)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
							}
							else
							{
								double num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = inHigh[num28 - 1] - inLow[num28 - 1];
								}
								else
								{
									double num48;
									if (rangeType2 == RangeType.Shadows)
									{
										double num44 = inClose[num28 - 1];
										double num45 = inOpen[num28 - 1];
										double num46 = ((!(num44 >= num45)) ? num45 : num44);
										double num47 = ((!(num44 >= num45)) ? num44 : num45);
										num48 = num47 - inLow[num28 - 1] + (inHigh[num28 - 1] - num46);
									}
									else
									{
										num48 = 0.0;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]) <= candleSettings[3].factor * num41 / num49)
						{
							CandleSetting candleSetting3 = candleSettings[2];
							double num50 = candleSetting3.avgPeriod;
							double num51;
							if (num50 != 0.0)
							{
								num51 = num4 / num50;
							}
							else
							{
								rangeType3 = candleSetting3.rangeType;
								double num52;
								if (rangeType3 == RangeType.RealBody)
								{
									num52 = Math.Abs(inClose[num28] - inOpen[num28]);
								}
								else
								{
									double num53;
									if (rangeType3 == RangeType.HighLow)
									{
										num53 = inHigh[num28] - inLow[num28];
									}
									else
									{
										double num56;
										if (rangeType3 == RangeType.Shadows)
										{
											num11 = inClose[num28];
											double num12 = inOpen[num28];
											double num54 = ((!(num11 >= num12)) ? num12 : num11);
											double num55 = ((!(num11 >= num12)) ? num11 : num12);
											num56 = num55 - inLow[num28] + (inHigh[num28] - num54);
										}
										else
										{
											num56 = 0.0;
										}
										num53 = num56;
									}
									num52 = num53;
								}
								num51 = num52;
							}
							double num57 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (Math.Abs(inClose[num28] - inOpen[num28]) > Globals.candleSettings[2].factor * num51 / num57)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								if (num34 >= num35 && !(inClose[num28] >= inOpen[num28]))
								{
									double num58 = Math.Abs(num34 - num35) * optInPenetration;
									num34 = inClose[num28 - 2];
									num11 = inClose[num28];
									if (num11 < num34 - num58)
									{
										double num59 = inLow[num28 - 1];
										if (num59 > inHigh[num28 - 2] && inHigh[num28] < num59)
										{
											goto IL_06ed;
										}
									}
								}
								num35 = inOpen[num28 - 2];
								if (!(num34 >= num35) && inClose[num28] >= inOpen[num28])
								{
									num11 = inClose[num28];
									if (num11 > Math.Abs(num34 - num35) * optInPenetration + inClose[num28 - 2])
									{
										double num60 = inHigh[num28 - 1];
										if (num60 < inLow[num28 - 2] && inLow[num28] > num60)
										{
											goto IL_06ed;
										}
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0719;
					IL_0719:
					rangeType = Globals.candleSettings[0].rangeType;
					double num61;
					if (rangeType == RangeType.RealBody)
					{
						num61 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
					}
					else
					{
						double num62;
						if (rangeType == RangeType.HighLow)
						{
							num62 = inHigh[num28 - 2] - inLow[num28 - 2];
						}
						else
						{
							double num65;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								double num63 = ((!(num34 >= num35)) ? num35 : num34);
								double num64 = ((!(num34 >= num35)) ? num34 : num35);
								num65 = num64 - inLow[num28 - 2] + (inHigh[num28 - 2] - num63);
							}
							else
							{
								num65 = 0.0;
							}
							num62 = num65;
						}
						num61 = num62;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num66;
					if (rangeType == RangeType.RealBody)
					{
						num66 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num67;
						if (rangeType == RangeType.HighLow)
						{
							num67 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num72;
							if (rangeType == RangeType.Shadows)
							{
								double num68 = inClose[num5];
								double num69 = inOpen[num5];
								double num70 = ((!(num68 >= num69)) ? num69 : num68);
								double num71 = ((!(num68 >= num69)) ? num68 : num69);
								num72 = num71 - inLow[num5] + (inHigh[num5] - num70);
							}
							else
							{
								num72 = 0.0;
							}
							num67 = num72;
						}
						num66 = num67;
					}
					num2 = num61 - num66 + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num73;
					if (rangeType2 == RangeType.RealBody)
					{
						num73 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
					}
					else
					{
						double num74;
						if (rangeType2 == RangeType.HighLow)
						{
							num74 = inHigh[num28 - 1] - inLow[num28 - 1];
						}
						else
						{
							double num77;
							if (rangeType2 == RangeType.Shadows)
							{
								double num44 = inClose[num28 - 1];
								double num45 = inOpen[num28 - 1];
								double num75 = ((!(num44 >= num45)) ? num45 : num44);
								double num76 = ((!(num44 >= num45)) ? num44 : num45);
								num77 = num76 - inLow[num28 - 1] + (inHigh[num28 - 1] - num75);
							}
							else
							{
								num77 = 0.0;
							}
							num74 = num77;
						}
						num73 = num74;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num78;
					if (rangeType2 == RangeType.RealBody)
					{
						num78 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num79;
						if (rangeType2 == RangeType.HighLow)
						{
							num79 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num84;
							if (rangeType2 == RangeType.Shadows)
							{
								double num80 = inClose[num6];
								double num81 = inOpen[num6];
								double num82 = ((!(num80 >= num81)) ? num81 : num80);
								double num83 = ((!(num80 >= num81)) ? num80 : num81);
								num84 = num83 - inLow[num6] + (inHigh[num6] - num82);
							}
							else
							{
								num84 = 0.0;
							}
							num79 = num84;
						}
						num78 = num79;
					}
					num3 = num73 - num78 + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num85;
					if (rangeType3 == RangeType.RealBody)
					{
						num85 = Math.Abs(inClose[num28] - inOpen[num28]);
					}
					else
					{
						double num86;
						if (rangeType3 == RangeType.HighLow)
						{
							num86 = inHigh[num28] - inLow[num28];
						}
						else
						{
							double num89;
							if (rangeType3 == RangeType.Shadows)
							{
								num11 = inClose[num28];
								double num12 = inOpen[num28];
								double num87 = ((!(num11 >= num12)) ? num12 : num11);
								double num88 = ((!(num11 >= num12)) ? num11 : num12);
								num89 = num88 - inLow[num28] + (inHigh[num28] - num87);
							}
							else
							{
								num89 = 0.0;
							}
							num86 = num89;
						}
						num85 = num86;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num90;
					if (rangeType3 == RangeType.RealBody)
					{
						num90 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num91;
						if (rangeType3 == RangeType.HighLow)
						{
							num91 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num96;
							if (rangeType3 == RangeType.Shadows)
							{
								double num92 = inClose[num7];
								double num93 = inOpen[num7];
								double num94 = ((!(num92 >= num93)) ? num93 : num92);
								double num95 = ((!(num92 >= num93)) ? num92 : num93);
								num96 = num95 - inLow[num7] + (inHigh[num7] - num94);
							}
							else
							{
								num96 = 0.0;
							}
							num91 = num96;
						}
						num90 = num91;
					}
					num4 = num85 - num90 + num4;
					num28++;
					num5++;
					num6++;
					num7++;
					continue;
					IL_06ed:
					int num97 = ((num11 >= inOpen[num28]) ? 1 : (-1));
					outInteger[num29] = num97 * 100;
					num29++;
					goto IL_0719;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlAdvanceBlockLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[4].avgPeriod;
		int avgPeriod2 = candleSettings[6].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[9].avgPeriod;
		int avgPeriod4 = candleSettings[8].avgPeriod;
		int num2 = ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3);
		int num3 = ((num <= num2) ? ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3) : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		int avgPeriod5 = candleSettings[0].avgPeriod;
		int num7;
		if (num3 > avgPeriod5)
		{
			int num4 = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
			int num5 = ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3);
			int num6 = ((num4 <= num5) ? ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3) : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			num7 = num6;
		}
		else
		{
			num7 = avgPeriod5;
		}
		return num7 + 2;
	}

	public static RetCode CdlAdvanceBlock(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[2];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlAdvanceBlockLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[6].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[4].avgPeriod;
				array3[2] = 0.0;
				array3[1] = 0.0;
				array3[0] = 0.0;
				int num4 = startIdx - candleSettings[8].avgPeriod;
				array4[2] = 0.0;
				array4[1] = 0.0;
				array4[0] = 0.0;
				int num5 = startIdx - candleSettings[9].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num8 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[6].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8 - 1] - (double)inOpen[num8 - 1]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8 - 1] - (double)inLow[num8 - 1]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8 - 1];
									float num12 = inOpen[num8 - 1];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8 - 1] + ((double)inHigh[num8 - 1] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						array[2] += num9;
						rangeType = Globals.candleSettings[6].rangeType;
						float num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num22;
								if (rangeType == RangeType.Shadows)
								{
									float num18 = inClose[num8];
									float num19 = inOpen[num8];
									float num20 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
									float num21 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
									num22 = (float)((double)num21 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num20));
								}
								else
								{
									num22 = 0f;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						array[1] += num16;
						rangeType = Globals.candleSettings[6].rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num8 + 1] - (double)inOpen[num8 + 1]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num8 + 1] - (double)inLow[num8 + 1]);
							}
							else
							{
								float num29;
								if (rangeType == RangeType.Shadows)
								{
									float num25 = inClose[num8 + 1];
									float num26 = inOpen[num8 + 1];
									float num27 = ((!((double)num25 >= (double)num26)) ? num26 : num25);
									float num28 = ((!((double)num25 >= (double)num26)) ? num25 : num26);
									num29 = (float)((double)num28 - (double)inLow[num8 + 1] + ((double)inHigh[num8 + 1] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num24 = num29;
							}
							num23 = num24;
						}
						array[0] += num23;
						num8++;
					}
					while (num8 + 1 < startIdx);
				}
				int num30 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num31;
						if (rangeType2 == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num30 - 1] - (double)inOpen[num30 - 1]));
						}
						else
						{
							float num32;
							if (rangeType2 == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num30 - 1] - (double)inLow[num30 - 1]);
							}
							else
							{
								float num37;
								if (rangeType2 == RangeType.Shadows)
								{
									float num33 = inClose[num30 - 1];
									float num34 = inOpen[num30 - 1];
									float num35 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
									float num36 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
									num37 = (float)((double)num36 - (double)inLow[num30 - 1] + ((double)inHigh[num30 - 1] - (double)num35));
								}
								else
								{
									num37 = 0f;
								}
								num32 = num37;
							}
							num31 = num32;
						}
						array2[1] += num31;
						rangeType2 = Globals.candleSettings[4].rangeType;
						float num38;
						if (rangeType2 == RangeType.RealBody)
						{
							num38 = (float)(double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
						}
						else
						{
							float num39;
							if (rangeType2 == RangeType.HighLow)
							{
								num39 = (float)((double)inHigh[num30] - (double)inLow[num30]);
							}
							else
							{
								float num44;
								if (rangeType2 == RangeType.Shadows)
								{
									float num40 = inClose[num30];
									float num41 = inOpen[num30];
									float num42 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
									float num43 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
									num44 = (float)((double)num43 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num42));
								}
								else
								{
									num44 = 0f;
								}
								num39 = num44;
							}
							num38 = num39;
						}
						array2[0] += num38;
						num30++;
					}
					while (num30 < startIdx);
				}
				if (num4 < startIdx)
				{
					int num45 = num4 - 1;
					int num46 = startIdx - num4;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						float num47;
						if (rangeType3 == RangeType.RealBody)
						{
							num47 = (float)(double)Math.Abs((float)((double)inClose[num45 - 1] - (double)inOpen[num45 - 1]));
						}
						else
						{
							float num48;
							if (rangeType3 == RangeType.HighLow)
							{
								num48 = (float)((double)inHigh[num45 - 1] - (double)inLow[num45 - 1]);
							}
							else
							{
								float num53;
								if (rangeType3 == RangeType.Shadows)
								{
									float num49 = inClose[num45 - 1];
									float num50 = inOpen[num45 - 1];
									float num51 = ((!((double)num49 >= (double)num50)) ? num50 : num49);
									float num52 = ((!((double)num49 >= (double)num50)) ? num49 : num50);
									num53 = (float)((double)num52 - (double)inLow[num45 - 1] + ((double)inHigh[num45 - 1] - (double)num51));
								}
								else
								{
									num53 = 0f;
								}
								num48 = num53;
							}
							num47 = num48;
						}
						array3[2] += num47;
						rangeType3 = Globals.candleSettings[8].rangeType;
						float num54;
						if (rangeType3 == RangeType.RealBody)
						{
							num54 = (float)(double)Math.Abs((float)((double)inClose[num45] - (double)inOpen[num45]));
						}
						else
						{
							float num55;
							if (rangeType3 == RangeType.HighLow)
							{
								num55 = (float)((double)inHigh[num45] - (double)inLow[num45]);
							}
							else
							{
								float num60;
								if (rangeType3 == RangeType.Shadows)
								{
									float num56 = inClose[num45];
									float num57 = inOpen[num45];
									float num58 = ((!((double)num56 >= (double)num57)) ? num57 : num56);
									float num59 = ((!((double)num56 >= (double)num57)) ? num56 : num57);
									num60 = (float)((double)num59 - (double)inLow[num45] + ((double)inHigh[num45] - (double)num58));
								}
								else
								{
									num60 = 0f;
								}
								num55 = num60;
							}
							num54 = num55;
						}
						array3[1] += num54;
						num45++;
						num46--;
					}
					while (num46 != 0);
				}
				if (num5 < startIdx)
				{
					int num61 = num5 - 1;
					int num62 = startIdx - num5;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[9].rangeType;
						float num63;
						if (rangeType4 == RangeType.RealBody)
						{
							num63 = (float)(double)Math.Abs((float)((double)inClose[num61 - 1] - (double)inOpen[num61 - 1]));
						}
						else
						{
							float num64;
							if (rangeType4 == RangeType.HighLow)
							{
								num64 = (float)((double)inHigh[num61 - 1] - (double)inLow[num61 - 1]);
							}
							else
							{
								float num69;
								if (rangeType4 == RangeType.Shadows)
								{
									float num65 = inClose[num61 - 1];
									float num66 = inOpen[num61 - 1];
									float num67 = ((!((double)num65 >= (double)num66)) ? num66 : num65);
									float num68 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
									num69 = (float)((double)num68 - (double)inLow[num61 - 1] + ((double)inHigh[num61 - 1] - (double)num67));
								}
								else
								{
									num69 = 0f;
								}
								num64 = num69;
							}
							num63 = num64;
						}
						array4[2] += num63;
						rangeType4 = Globals.candleSettings[9].rangeType;
						float num70;
						if (rangeType4 == RangeType.RealBody)
						{
							num70 = (float)(double)Math.Abs((float)((double)inClose[num61] - (double)inOpen[num61]));
						}
						else
						{
							float num71;
							if (rangeType4 == RangeType.HighLow)
							{
								num71 = (float)((double)inHigh[num61] - (double)inLow[num61]);
							}
							else
							{
								float num76;
								if (rangeType4 == RangeType.Shadows)
								{
									float num72 = inClose[num61];
									float num73 = inOpen[num61];
									float num74 = ((!((double)num72 >= (double)num73)) ? num73 : num72);
									float num75 = ((!((double)num72 >= (double)num73)) ? num72 : num73);
									num76 = (float)((double)num75 - (double)inLow[num61] + ((double)inHigh[num61] - (double)num74));
								}
								else
								{
									num76 = 0f;
								}
								num71 = num76;
							}
							num70 = num71;
						}
						array4[1] += num70;
						num61++;
						num62--;
					}
					while (num62 != 0);
				}
				if (num7 < startIdx)
				{
					int num77 = num7 - 2;
					int num78 = startIdx - num7;
					do
					{
						RangeType rangeType5 = Globals.candleSettings[0].rangeType;
						float num79;
						if (rangeType5 == RangeType.RealBody)
						{
							num79 = (float)(double)Math.Abs((float)((double)inClose[num77] - (double)inOpen[num77]));
						}
						else
						{
							float num80;
							if (rangeType5 == RangeType.HighLow)
							{
								num80 = (float)((double)inHigh[num77] - (double)inLow[num77]);
							}
							else
							{
								float num85;
								if (rangeType5 == RangeType.Shadows)
								{
									float num81 = inClose[num77];
									float num82 = inOpen[num77];
									float num83 = ((!((double)num81 >= (double)num82)) ? num82 : num81);
									float num84 = ((!((double)num81 >= (double)num82)) ? num81 : num82);
									num85 = (float)((double)num84 - (double)inLow[num77] + ((double)inHigh[num77] - (double)num83));
								}
								else
								{
									num85 = 0f;
								}
								num80 = num85;
							}
							num79 = num80;
						}
						num6 = (double)num79 + num6;
						num77++;
						num78--;
					}
					while (num78 != 0);
				}
				int num86 = startIdx;
				int num87 = 0;
				do
				{
					float num88 = inClose[num86 - 2];
					float num89 = inOpen[num86 - 2];
					RangeType rangeType5;
					if ((double)num88 >= (double)num89)
					{
						float num33 = inClose[num86 - 1];
						float num34 = inOpen[num86 - 1];
						if ((double)num33 >= (double)num34)
						{
							float num40 = inClose[num86];
							if ((double)num40 >= (double)inOpen[num86] && (double)num40 > (double)num33 && (double)num33 > (double)num88 && (double)num34 > (double)num89)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num90 = candleSetting.avgPeriod;
								double num91;
								RangeType rangeType3;
								if (num90 != 0.0)
								{
									num91 = array3[2] / num90;
								}
								else
								{
									rangeType3 = candleSetting.rangeType;
									float num92;
									if (rangeType3 == RangeType.RealBody)
									{
										num92 = (float)(double)Math.Abs((float)((double)num88 - (double)num89));
									}
									else
									{
										float num93;
										if (rangeType3 == RangeType.HighLow)
										{
											num93 = (float)((double)inHigh[num86 - 2] - (double)inLow[num86 - 2]);
										}
										else
										{
											float num96;
											if (rangeType3 == RangeType.Shadows)
											{
												float num94 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
												float num95 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
												num96 = (float)((double)num95 - (double)inLow[num86 - 2] + ((double)inHigh[num86 - 2] - (double)num94));
											}
											else
											{
												num96 = 0f;
											}
											num93 = num96;
										}
										num92 = num93;
									}
									num91 = num92;
								}
								CandleSetting candleSetting2 = Globals.candleSettings[8];
								rangeType3 = candleSetting2.rangeType;
								double num97 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
								num34 = inOpen[num86 - 1];
								if ((double)num34 <= candleSetting2.factor * num91 / num97 + (double)inClose[num86 - 2] && (double)inOpen[num86] > (double)num34)
								{
									num90 = candleSetting2.avgPeriod;
									double num98;
									if (num90 != 0.0)
									{
										num98 = array3[1] / num90;
									}
									else
									{
										float num99;
										if (rangeType3 == RangeType.RealBody)
										{
											num99 = (float)(double)Math.Abs((float)((double)inClose[num86 - 1] - (double)num34));
										}
										else
										{
											float num100;
											if (rangeType3 == RangeType.HighLow)
											{
												num100 = (float)((double)inHigh[num86 - 1] - (double)inLow[num86 - 1]);
											}
											else
											{
												float num103;
												if (rangeType3 == RangeType.Shadows)
												{
													num33 = inClose[num86 - 1];
													float num101 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
													float num102 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
													num103 = (float)((double)num102 - (double)inLow[num86 - 1] + ((double)inHigh[num86 - 1] - (double)num101));
												}
												else
												{
													num103 = 0f;
												}
												num100 = num103;
											}
											num99 = num100;
										}
										num98 = num99;
									}
									candleSettings = Globals.candleSettings;
									CandleSetting candleSetting3 = candleSettings[8];
									double num104 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if ((double)inOpen[num86] <= candleSetting3.factor * num98 / num104 + (double)inClose[num86 - 1])
									{
										CandleSetting candleSetting4 = candleSettings[0];
										double num105 = candleSetting4.avgPeriod;
										double num106;
										if (num105 != 0.0)
										{
											num106 = num6 / num105;
										}
										else
										{
											rangeType5 = candleSetting4.rangeType;
											float num107;
											if (rangeType5 == RangeType.RealBody)
											{
												num107 = (float)(double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2]));
											}
											else
											{
												float num108;
												if (rangeType5 == RangeType.HighLow)
												{
													num108 = (float)((double)inHigh[num86 - 2] - (double)inLow[num86 - 2]);
												}
												else
												{
													float num111;
													if (rangeType5 == RangeType.Shadows)
													{
														num88 = inClose[num86 - 2];
														num89 = inOpen[num86 - 2];
														float num109 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
														float num110 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
														num111 = (float)((double)num110 - (double)inLow[num86 - 2] + ((double)inHigh[num86 - 2] - (double)num109));
													}
													else
													{
														num111 = 0f;
													}
													num108 = num111;
												}
												num107 = num108;
											}
											num106 = num107;
										}
										double num112 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										candleSettings = Globals.candleSettings;
										if ((double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2])) > candleSettings[0].factor * num106 / num112)
										{
											num88 = inClose[num86 - 2];
											num89 = inOpen[num86 - 2];
											float num113 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
											CandleSetting candleSetting5 = candleSettings[6];
											double num114 = candleSetting5.avgPeriod;
											double num115;
											if (num114 != 0.0)
											{
												num115 = array[2] / num114;
											}
											else
											{
												RangeType rangeType = candleSetting5.rangeType;
												float num116;
												if (rangeType == RangeType.RealBody)
												{
													num116 = (float)(double)Math.Abs((float)((double)num88 - (double)num89));
												}
												else
												{
													float num117;
													if (rangeType == RangeType.HighLow)
													{
														num117 = (float)((double)inHigh[num86 - 2] - (double)inLow[num86 - 2]);
													}
													else
													{
														float num120;
														if (rangeType == RangeType.Shadows)
														{
															float num118 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
															float num119 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
															num120 = (float)((double)num119 - (double)inLow[num86 - 2] + ((double)inHigh[num86 - 2] - (double)num118));
														}
														else
														{
															num120 = 0f;
														}
														num117 = num120;
													}
													num116 = num117;
												}
												num115 = num116;
											}
											candleSettings = Globals.candleSettings;
											CandleSetting candleSetting6 = candleSettings[6];
											double num121 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											float num122 = inHigh[num86 - 2];
											if ((double)num122 - (double)num113 < candleSetting6.factor * num115 / num121)
											{
												CandleSetting candleSetting7 = candleSettings[9];
												double num123 = candleSetting7.avgPeriod;
												double num124;
												if (num123 != 0.0)
												{
													num124 = array4[2] / num123;
												}
												else
												{
													RangeType rangeType4 = candleSetting7.rangeType;
													float num125;
													if (rangeType4 == RangeType.RealBody)
													{
														num125 = (float)(double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2]));
													}
													else
													{
														float num126;
														if (rangeType4 == RangeType.HighLow)
														{
															num126 = (float)((double)num122 - (double)inLow[num86 - 2]);
														}
														else
														{
															float num129;
															if (rangeType4 == RangeType.Shadows)
															{
																num88 = inClose[num86 - 2];
																num89 = inOpen[num86 - 2];
																float num127 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
																float num128 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
																num129 = (float)((double)num128 - (double)inLow[num86 - 2] + ((double)num122 - (double)num127));
															}
															else
															{
																num129 = 0f;
															}
															num126 = num129;
														}
														num125 = num126;
													}
													num124 = num125;
												}
												double num130 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												double num131 = Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1]));
												candleSettings = Globals.candleSettings;
												if (num131 < (double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2])) - candleSettings[9].factor * num124 / num130)
												{
													candleSetting3 = candleSettings[8];
													num90 = candleSetting3.avgPeriod;
													double num132;
													if (num90 != 0.0)
													{
														num132 = array3[1] / num90;
													}
													else
													{
														rangeType3 = candleSetting3.rangeType;
														float num133;
														if (rangeType3 == RangeType.RealBody)
														{
															num133 = (float)(double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1]));
														}
														else
														{
															float num134;
															if (rangeType3 == RangeType.HighLow)
															{
																num134 = (float)((double)inHigh[num86 - 1] - (double)inLow[num86 - 1]);
															}
															else
															{
																float num137;
																if (rangeType3 == RangeType.Shadows)
																{
																	num33 = inClose[num86 - 1];
																	num34 = inOpen[num86 - 1];
																	float num135 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
																	float num136 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
																	num137 = (float)((double)num136 - (double)inLow[num86 - 1] + ((double)inHigh[num86 - 1] - (double)num135));
																}
																else
																{
																	num137 = 0f;
																}
																num134 = num137;
															}
															num133 = num134;
														}
														num132 = num133;
													}
													double num138 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
													double num139 = Math.Abs((float)((double)inClose[num86] - (double)inOpen[num86]));
													candleSettings = Globals.candleSettings;
													if (num139 < (double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1])) + candleSettings[8].factor * num132 / num138)
													{
														goto IL_1970;
													}
												}
												candleSetting7 = candleSettings[9];
												num123 = candleSetting7.avgPeriod;
												double num140;
												if (num123 != 0.0)
												{
													num140 = array4[1] / num123;
												}
												else
												{
													RangeType rangeType4 = candleSetting7.rangeType;
													float num141;
													if (rangeType4 == RangeType.RealBody)
													{
														num141 = (float)(double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1]));
													}
													else
													{
														float num142;
														if (rangeType4 == RangeType.HighLow)
														{
															num142 = (float)((double)inHigh[num86 - 1] - (double)inLow[num86 - 1]);
														}
														else
														{
															float num145;
															if (rangeType4 == RangeType.Shadows)
															{
																num33 = inClose[num86 - 1];
																num34 = inOpen[num86 - 1];
																float num143 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
																float num144 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
																num145 = (float)((double)num144 - (double)inLow[num86 - 1] + ((double)inHigh[num86 - 1] - (double)num143));
															}
															else
															{
																num145 = 0f;
															}
															num142 = num145;
														}
														num141 = num142;
													}
													num140 = num141;
												}
												double num146 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												double num147 = Math.Abs((float)((double)inClose[num86] - (double)inOpen[num86]));
												if (!(num147 < (double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1])) - Globals.candleSettings[9].factor * num140 / num146))
												{
													double num148 = Math.Abs((float)((double)inClose[num86] - (double)inOpen[num86]));
													if (num148 < (double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1])))
													{
														double num149 = Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1]));
														if (num149 < (double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2])))
														{
															num40 = inClose[num86];
															float num41 = inOpen[num86];
															float num150 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
															CandleSetting candleSetting8 = Globals.candleSettings[6];
															num114 = candleSetting8.avgPeriod;
															double num151;
															RangeType rangeType;
															if (num114 != 0.0)
															{
																num151 = array[0] / num114;
															}
															else
															{
																rangeType = candleSetting8.rangeType;
																float num152;
																if (rangeType == RangeType.RealBody)
																{
																	num152 = (float)(double)Math.Abs((float)((double)num40 - (double)num41));
																}
																else
																{
																	float num153;
																	if (rangeType == RangeType.HighLow)
																	{
																		num153 = (float)((double)inHigh[num86] - (double)inLow[num86]);
																	}
																	else
																	{
																		float num156;
																		if (rangeType == RangeType.Shadows)
																		{
																			float num154 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
																			float num155 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
																			num156 = (float)((double)num155 - (double)inLow[num86] + ((double)inHigh[num86] - (double)num154));
																		}
																		else
																		{
																			num156 = 0f;
																		}
																		num153 = num156;
																	}
																	num152 = num153;
																}
																num151 = num152;
															}
															candleSetting6 = Globals.candleSettings[6];
															rangeType = candleSetting6.rangeType;
															double num157 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if (!((double)inHigh[num86] - (double)num150 > candleSetting6.factor * num151 / num157))
															{
																num33 = inClose[num86 - 1];
																num34 = inOpen[num86 - 1];
																float num158 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
																num114 = candleSetting6.avgPeriod;
																double num159;
																if (num114 != 0.0)
																{
																	num159 = array[1] / num114;
																}
																else
																{
																	float num160;
																	if (rangeType == RangeType.RealBody)
																	{
																		num160 = (float)(double)Math.Abs((float)((double)num33 - (double)num34));
																	}
																	else
																	{
																		float num161;
																		if (rangeType == RangeType.HighLow)
																		{
																			num161 = (float)((double)inHigh[num86 - 1] - (double)inLow[num86 - 1]);
																		}
																		else
																		{
																			float num164;
																			if (rangeType == RangeType.Shadows)
																			{
																				float num162 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
																				float num163 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
																				num164 = (float)((double)num163 - (double)inLow[num86 - 1] + ((double)inHigh[num86 - 1] - (double)num162));
																			}
																			else
																			{
																				num164 = 0f;
																			}
																			num161 = num164;
																		}
																		num160 = num161;
																	}
																	num159 = num160;
																}
																candleSetting6 = Globals.candleSettings[6];
																double num165 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																if (!((double)inHigh[num86 - 1] - (double)num158 > candleSetting6.factor * num159 / num165))
																{
																	goto IL_17d6;
																}
															}
															goto IL_1970;
														}
													}
													goto IL_17d6;
												}
												goto IL_1970;
											}
										}
									}
								}
							}
						}
					}
					goto IL_197f;
					IL_1970:
					outInteger[num87] = -100;
					num87++;
					goto IL_198b;
					IL_17d6:
					double num166 = Math.Abs((float)((double)inClose[num86] - (double)inOpen[num86]));
					if (num166 < (double)Math.Abs((float)((double)inClose[num86 - 1] - (double)inOpen[num86 - 1])))
					{
						float num40 = inClose[num86];
						float num41 = inOpen[num86];
						float num167 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
						CandleSetting candleSetting9 = Globals.candleSettings[4];
						double num168 = candleSetting9.avgPeriod;
						double num169;
						if (num168 != 0.0)
						{
							num169 = array2[0] / num168;
						}
						else
						{
							RangeType rangeType2 = candleSetting9.rangeType;
							float num170;
							if (rangeType2 == RangeType.RealBody)
							{
								num170 = (float)(double)Math.Abs((float)((double)num40 - (double)num41));
							}
							else
							{
								float num171;
								if (rangeType2 == RangeType.HighLow)
								{
									num171 = (float)((double)inHigh[num86] - (double)inLow[num86]);
								}
								else
								{
									float num174;
									if (rangeType2 == RangeType.Shadows)
									{
										float num172 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
										float num173 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
										num174 = (float)((double)num173 - (double)inLow[num86] + ((double)inHigh[num86] - (double)num172));
									}
									else
									{
										num174 = 0f;
									}
									num171 = num174;
								}
								num170 = num171;
							}
							num169 = num170;
						}
						CandleSetting candleSetting10 = Globals.candleSettings[4];
						double num175 = ((candleSetting10.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)inHigh[num86] - (double)num167 > candleSetting10.factor * num169 / num175)
						{
							goto IL_1970;
						}
					}
					goto IL_197f;
					IL_197f:
					outInteger[num87] = 0;
					num87++;
					goto IL_198b;
					IL_198b:
					int num176 = 2;
					int num177 = num2 - 2;
					int num178 = num86 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[6].rangeType;
						float num179;
						if (rangeType == RangeType.RealBody)
						{
							num179 = (float)(double)Math.Abs((float)((double)inClose[num177 + num178] - (double)inOpen[num177 + num178]));
						}
						else
						{
							float num180;
							if (rangeType == RangeType.HighLow)
							{
								num180 = (float)((double)inHigh[num177 + num178] - (double)inLow[num177 + num178]);
							}
							else
							{
								float num185;
								if (rangeType == RangeType.Shadows)
								{
									float num181 = inClose[num177 + num178];
									float num182 = inOpen[num177 + num178];
									float num183 = ((!((double)num181 >= (double)num182)) ? num182 : num181);
									float num184 = ((!((double)num181 >= (double)num182)) ? num181 : num182);
									num185 = (float)((double)num184 - (double)inLow[num177 + num178] + ((double)inHigh[num177 + num178] - (double)num183));
								}
								else
								{
									num185 = 0f;
								}
								num180 = num185;
							}
							num179 = num180;
						}
						rangeType = Globals.candleSettings[6].rangeType;
						float num186;
						if (rangeType == RangeType.RealBody)
						{
							num186 = (float)(double)Math.Abs((float)((double)inClose[num177] - (double)inOpen[num177]));
						}
						else
						{
							float num187;
							if (rangeType == RangeType.HighLow)
							{
								num187 = (float)((double)inHigh[num177] - (double)inLow[num177]);
							}
							else
							{
								float num192;
								if (rangeType == RangeType.Shadows)
								{
									float num188 = inClose[num177];
									float num189 = inOpen[num177];
									float num190 = ((!((double)num188 >= (double)num189)) ? num189 : num188);
									float num191 = ((!((double)num188 >= (double)num189)) ? num188 : num189);
									num192 = (float)((double)num191 - (double)inLow[num177] + ((double)inHigh[num177] - (double)num190));
								}
								else
								{
									num192 = 0f;
								}
								num187 = num192;
							}
							num186 = num187;
						}
						array[num176] += num179 - num186;
						num176--;
						num177++;
					}
					while (num176 >= 0);
					int num193 = 1;
					int num194 = num3 - 1;
					int num195 = num86 - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num196;
						if (rangeType2 == RangeType.RealBody)
						{
							num196 = (float)(double)Math.Abs((float)((double)inClose[num194 + num195] - (double)inOpen[num194 + num195]));
						}
						else
						{
							float num197;
							if (rangeType2 == RangeType.HighLow)
							{
								num197 = (float)((double)inHigh[num194 + num195] - (double)inLow[num194 + num195]);
							}
							else
							{
								float num202;
								if (rangeType2 == RangeType.Shadows)
								{
									float num198 = inClose[num194 + num195];
									float num199 = inOpen[num194 + num195];
									float num200 = ((!((double)num198 >= (double)num199)) ? num199 : num198);
									float num201 = ((!((double)num198 >= (double)num199)) ? num198 : num199);
									num202 = (float)((double)num201 - (double)inLow[num194 + num195] + ((double)inHigh[num194 + num195] - (double)num200));
								}
								else
								{
									num202 = 0f;
								}
								num197 = num202;
							}
							num196 = num197;
						}
						rangeType2 = Globals.candleSettings[4].rangeType;
						float num203;
						if (rangeType2 == RangeType.RealBody)
						{
							num203 = (float)(double)Math.Abs((float)((double)inClose[num194] - (double)inOpen[num194]));
						}
						else
						{
							float num204;
							if (rangeType2 == RangeType.HighLow)
							{
								num204 = (float)((double)inHigh[num194] - (double)inLow[num194]);
							}
							else
							{
								float num209;
								if (rangeType2 == RangeType.Shadows)
								{
									float num205 = inClose[num194];
									float num206 = inOpen[num194];
									float num207 = ((!((double)num205 >= (double)num206)) ? num206 : num205);
									float num208 = ((!((double)num205 >= (double)num206)) ? num205 : num206);
									num209 = (float)((double)num208 - (double)inLow[num194] + ((double)inHigh[num194] - (double)num207));
								}
								else
								{
									num209 = 0f;
								}
								num204 = num209;
							}
							num203 = num204;
						}
						array2[num193] += num196 - num203;
						num193--;
						num194++;
					}
					while (num193 >= 0);
					int num210 = 2;
					int num211 = num86 - 2;
					int num212 = num5 - num86;
					int num213 = num4 - num86;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[9].rangeType;
						float num214;
						if (rangeType4 == RangeType.RealBody)
						{
							num214 = (float)(double)Math.Abs((float)((double)inClose[num211] - (double)inOpen[num211]));
						}
						else
						{
							float num215;
							if (rangeType4 == RangeType.HighLow)
							{
								num215 = (float)((double)inHigh[num211] - (double)inLow[num211]);
							}
							else
							{
								float num220;
								if (rangeType4 == RangeType.Shadows)
								{
									float num216 = inClose[num211];
									float num217 = inOpen[num211];
									float num218 = ((!((double)num216 >= (double)num217)) ? num217 : num216);
									float num219 = ((!((double)num216 >= (double)num217)) ? num216 : num217);
									num220 = (float)((double)num219 - (double)inLow[num211] + ((double)inHigh[num211] - (double)num218));
								}
								else
								{
									num220 = 0f;
								}
								num215 = num220;
							}
							num214 = num215;
						}
						rangeType4 = Globals.candleSettings[9].rangeType;
						float num221;
						if (rangeType4 == RangeType.RealBody)
						{
							num221 = (float)(double)Math.Abs((float)((double)inClose[num212 + num211] - (double)inOpen[num212 + num211]));
						}
						else
						{
							float num222;
							if (rangeType4 == RangeType.HighLow)
							{
								num222 = (float)((double)inHigh[num212 + num211] - (double)inLow[num212 + num211]);
							}
							else
							{
								float num227;
								if (rangeType4 == RangeType.Shadows)
								{
									float num223 = inClose[num212 + num211];
									float num224 = inOpen[num212 + num211];
									float num225 = ((!((double)num223 >= (double)num224)) ? num224 : num223);
									float num226 = ((!((double)num223 >= (double)num224)) ? num223 : num224);
									num227 = (float)((double)num226 - (double)inLow[num212 + num211] + ((double)inHigh[num212 + num211] - (double)num225));
								}
								else
								{
									num227 = 0f;
								}
								num222 = num227;
							}
							num221 = num222;
						}
						array4[num210] += num214 - num221;
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						float num228;
						if (rangeType3 == RangeType.RealBody)
						{
							num228 = (float)(double)Math.Abs((float)((double)inClose[num211] - (double)inOpen[num211]));
						}
						else
						{
							float num229;
							if (rangeType3 == RangeType.HighLow)
							{
								num229 = (float)((double)inHigh[num211] - (double)inLow[num211]);
							}
							else
							{
								float num232;
								if (rangeType3 == RangeType.Shadows)
								{
									float num216 = inClose[num211];
									float num217 = inOpen[num211];
									float num230 = ((!((double)num216 >= (double)num217)) ? num217 : num216);
									float num231 = ((!((double)num216 >= (double)num217)) ? num216 : num217);
									num232 = (float)((double)num231 - (double)inLow[num211] + ((double)inHigh[num211] - (double)num230));
								}
								else
								{
									num232 = 0f;
								}
								num229 = num232;
							}
							num228 = num229;
						}
						rangeType3 = Globals.candleSettings[8].rangeType;
						float num233;
						if (rangeType3 == RangeType.RealBody)
						{
							num233 = (float)(double)Math.Abs((float)((double)inClose[num213 + num211] - (double)inOpen[num213 + num211]));
						}
						else
						{
							float num234;
							if (rangeType3 == RangeType.HighLow)
							{
								num234 = (float)((double)inHigh[num213 + num211] - (double)inLow[num213 + num211]);
							}
							else
							{
								float num239;
								if (rangeType3 == RangeType.Shadows)
								{
									float num235 = inClose[num213 + num211];
									float num236 = inOpen[num213 + num211];
									float num237 = ((!((double)num235 >= (double)num236)) ? num236 : num235);
									float num238 = ((!((double)num235 >= (double)num236)) ? num235 : num236);
									num239 = (float)((double)num238 - (double)inLow[num213 + num211] + ((double)inHigh[num213 + num211] - (double)num237));
								}
								else
								{
									num239 = 0f;
								}
								num234 = num239;
							}
							num233 = num234;
						}
						array3[num210] += num228 - num233;
						num210--;
						num211++;
					}
					while (num210 >= 1);
					rangeType5 = Globals.candleSettings[0].rangeType;
					float num240;
					if (rangeType5 == RangeType.RealBody)
					{
						num240 = (float)(double)Math.Abs((float)((double)inClose[num86 - 2] - (double)inOpen[num86 - 2]));
					}
					else
					{
						float num241;
						if (rangeType5 == RangeType.HighLow)
						{
							num241 = (float)((double)inHigh[num86 - 2] - (double)inLow[num86 - 2]);
						}
						else
						{
							float num244;
							if (rangeType5 == RangeType.Shadows)
							{
								num88 = inClose[num86 - 2];
								num89 = inOpen[num86 - 2];
								float num242 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
								float num243 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
								num244 = (float)((double)num243 - (double)inLow[num86 - 2] + ((double)inHigh[num86 - 2] - (double)num242));
							}
							else
							{
								num244 = 0f;
							}
							num241 = num244;
						}
						num240 = num241;
					}
					rangeType5 = Globals.candleSettings[0].rangeType;
					float num245;
					if (rangeType5 == RangeType.RealBody)
					{
						num245 = (float)(double)Math.Abs((float)((double)inClose[num7 - 2] - (double)inOpen[num7 - 2]));
					}
					else
					{
						float num246;
						if (rangeType5 == RangeType.HighLow)
						{
							num246 = (float)((double)inHigh[num7 - 2] - (double)inLow[num7 - 2]);
						}
						else
						{
							float num251;
							if (rangeType5 == RangeType.Shadows)
							{
								float num247 = inClose[num7 - 2];
								float num248 = inOpen[num7 - 2];
								float num249 = ((!((double)num247 >= (double)num248)) ? num248 : num247);
								float num250 = ((!((double)num247 >= (double)num248)) ? num247 : num248);
								num251 = (float)((double)num250 - (double)inLow[num7 - 2] + ((double)inHigh[num7 - 2] - (double)num249));
							}
							else
							{
								num251 = 0f;
							}
							num246 = num251;
						}
						num245 = num246;
					}
					num6 = (double)(num240 - num245) + num6;
					num86++;
					num2++;
					num3++;
					num4++;
					num5++;
					num7++;
				}
				while (num86 <= endIdx);
				outNBElement = num87;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlAdvanceBlock(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[2];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlAdvanceBlockLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[6].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[4].avgPeriod;
				array3[2] = 0.0;
				array3[1] = 0.0;
				array3[0] = 0.0;
				int num4 = startIdx - candleSettings[8].avgPeriod;
				array4[2] = 0.0;
				array4[1] = 0.0;
				array4[0] = 0.0;
				int num5 = startIdx - candleSettings[9].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num8 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[6].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8 - 1] - inOpen[num8 - 1]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8 - 1] - inLow[num8 - 1];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8 - 1];
									double num12 = inOpen[num8 - 1];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8 - 1] + (inHigh[num8 - 1] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						array[2] += num9;
						rangeType = Globals.candleSettings[6].rangeType;
						double num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num22;
								if (rangeType == RangeType.Shadows)
								{
									double num18 = inClose[num8];
									double num19 = inOpen[num8];
									double num20 = ((!(num18 >= num19)) ? num19 : num18);
									double num21 = ((!(num18 >= num19)) ? num18 : num19);
									num22 = num21 - inLow[num8] + (inHigh[num8] - num20);
								}
								else
								{
									num22 = 0.0;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						array[1] += num16;
						rangeType = Globals.candleSettings[6].rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num8 + 1] - inOpen[num8 + 1]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num8 + 1] - inLow[num8 + 1];
							}
							else
							{
								double num29;
								if (rangeType == RangeType.Shadows)
								{
									double num25 = inClose[num8 + 1];
									double num26 = inOpen[num8 + 1];
									double num27 = ((!(num25 >= num26)) ? num26 : num25);
									double num28 = ((!(num25 >= num26)) ? num25 : num26);
									num29 = num28 - inLow[num8 + 1] + (inHigh[num8 + 1] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num24 = num29;
							}
							num23 = num24;
						}
						array[0] += num23;
						num8++;
					}
					while (num8 + 1 < startIdx);
				}
				int num30 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num31;
						if (rangeType2 == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num30 - 1] - inOpen[num30 - 1]);
						}
						else
						{
							double num32;
							if (rangeType2 == RangeType.HighLow)
							{
								num32 = inHigh[num30 - 1] - inLow[num30 - 1];
							}
							else
							{
								double num37;
								if (rangeType2 == RangeType.Shadows)
								{
									double num33 = inClose[num30 - 1];
									double num34 = inOpen[num30 - 1];
									double num35 = ((!(num33 >= num34)) ? num34 : num33);
									double num36 = ((!(num33 >= num34)) ? num33 : num34);
									num37 = num36 - inLow[num30 - 1] + (inHigh[num30 - 1] - num35);
								}
								else
								{
									num37 = 0.0;
								}
								num32 = num37;
							}
							num31 = num32;
						}
						array2[1] += num31;
						rangeType2 = Globals.candleSettings[4].rangeType;
						double num38;
						if (rangeType2 == RangeType.RealBody)
						{
							num38 = Math.Abs(inClose[num30] - inOpen[num30]);
						}
						else
						{
							double num39;
							if (rangeType2 == RangeType.HighLow)
							{
								num39 = inHigh[num30] - inLow[num30];
							}
							else
							{
								double num44;
								if (rangeType2 == RangeType.Shadows)
								{
									double num40 = inClose[num30];
									double num41 = inOpen[num30];
									double num42 = ((!(num40 >= num41)) ? num41 : num40);
									double num43 = ((!(num40 >= num41)) ? num40 : num41);
									num44 = num43 - inLow[num30] + (inHigh[num30] - num42);
								}
								else
								{
									num44 = 0.0;
								}
								num39 = num44;
							}
							num38 = num39;
						}
						array2[0] += num38;
						num30++;
					}
					while (num30 < startIdx);
				}
				if (num4 < startIdx)
				{
					int num45 = num4 - 1;
					int num46 = startIdx - num4;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						double num47;
						if (rangeType3 == RangeType.RealBody)
						{
							num47 = Math.Abs(inClose[num45 - 1] - inOpen[num45 - 1]);
						}
						else
						{
							double num48;
							if (rangeType3 == RangeType.HighLow)
							{
								num48 = inHigh[num45 - 1] - inLow[num45 - 1];
							}
							else
							{
								double num53;
								if (rangeType3 == RangeType.Shadows)
								{
									double num49 = inClose[num45 - 1];
									double num50 = inOpen[num45 - 1];
									double num51 = ((!(num49 >= num50)) ? num50 : num49);
									double num52 = ((!(num49 >= num50)) ? num49 : num50);
									num53 = num52 - inLow[num45 - 1] + (inHigh[num45 - 1] - num51);
								}
								else
								{
									num53 = 0.0;
								}
								num48 = num53;
							}
							num47 = num48;
						}
						array3[2] += num47;
						rangeType3 = Globals.candleSettings[8].rangeType;
						double num54;
						if (rangeType3 == RangeType.RealBody)
						{
							num54 = Math.Abs(inClose[num45] - inOpen[num45]);
						}
						else
						{
							double num55;
							if (rangeType3 == RangeType.HighLow)
							{
								num55 = inHigh[num45] - inLow[num45];
							}
							else
							{
								double num60;
								if (rangeType3 == RangeType.Shadows)
								{
									double num56 = inClose[num45];
									double num57 = inOpen[num45];
									double num58 = ((!(num56 >= num57)) ? num57 : num56);
									double num59 = ((!(num56 >= num57)) ? num56 : num57);
									num60 = num59 - inLow[num45] + (inHigh[num45] - num58);
								}
								else
								{
									num60 = 0.0;
								}
								num55 = num60;
							}
							num54 = num55;
						}
						array3[1] += num54;
						num45++;
						num46--;
					}
					while (num46 != 0);
				}
				if (num5 < startIdx)
				{
					int num61 = num5 - 1;
					int num62 = startIdx - num5;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[9].rangeType;
						double num63;
						if (rangeType4 == RangeType.RealBody)
						{
							num63 = Math.Abs(inClose[num61 - 1] - inOpen[num61 - 1]);
						}
						else
						{
							double num64;
							if (rangeType4 == RangeType.HighLow)
							{
								num64 = inHigh[num61 - 1] - inLow[num61 - 1];
							}
							else
							{
								double num69;
								if (rangeType4 == RangeType.Shadows)
								{
									double num65 = inClose[num61 - 1];
									double num66 = inOpen[num61 - 1];
									double num67 = ((!(num65 >= num66)) ? num66 : num65);
									double num68 = ((!(num65 >= num66)) ? num65 : num66);
									num69 = num68 - inLow[num61 - 1] + (inHigh[num61 - 1] - num67);
								}
								else
								{
									num69 = 0.0;
								}
								num64 = num69;
							}
							num63 = num64;
						}
						array4[2] += num63;
						rangeType4 = Globals.candleSettings[9].rangeType;
						double num70;
						if (rangeType4 == RangeType.RealBody)
						{
							num70 = Math.Abs(inClose[num61] - inOpen[num61]);
						}
						else
						{
							double num71;
							if (rangeType4 == RangeType.HighLow)
							{
								num71 = inHigh[num61] - inLow[num61];
							}
							else
							{
								double num76;
								if (rangeType4 == RangeType.Shadows)
								{
									double num72 = inClose[num61];
									double num73 = inOpen[num61];
									double num74 = ((!(num72 >= num73)) ? num73 : num72);
									double num75 = ((!(num72 >= num73)) ? num72 : num73);
									num76 = num75 - inLow[num61] + (inHigh[num61] - num74);
								}
								else
								{
									num76 = 0.0;
								}
								num71 = num76;
							}
							num70 = num71;
						}
						array4[1] += num70;
						num61++;
						num62--;
					}
					while (num62 != 0);
				}
				if (num7 < startIdx)
				{
					int num77 = num7 - 2;
					int num78 = startIdx - num7;
					do
					{
						RangeType rangeType5 = Globals.candleSettings[0].rangeType;
						double num79;
						if (rangeType5 == RangeType.RealBody)
						{
							num79 = Math.Abs(inClose[num77] - inOpen[num77]);
						}
						else
						{
							double num80;
							if (rangeType5 == RangeType.HighLow)
							{
								num80 = inHigh[num77] - inLow[num77];
							}
							else
							{
								double num85;
								if (rangeType5 == RangeType.Shadows)
								{
									double num81 = inClose[num77];
									double num82 = inOpen[num77];
									double num83 = ((!(num81 >= num82)) ? num82 : num81);
									double num84 = ((!(num81 >= num82)) ? num81 : num82);
									num85 = num84 - inLow[num77] + (inHigh[num77] - num83);
								}
								else
								{
									num85 = 0.0;
								}
								num80 = num85;
							}
							num79 = num80;
						}
						num6 = num79 + num6;
						num77++;
						num78--;
					}
					while (num78 != 0);
				}
				int num86 = startIdx;
				int num87 = 0;
				do
				{
					double num88 = inClose[num86 - 2];
					double num89 = inOpen[num86 - 2];
					RangeType rangeType5;
					if (num88 >= num89)
					{
						double num33 = inClose[num86 - 1];
						double num34 = inOpen[num86 - 1];
						if (num33 >= num34)
						{
							double num40 = inClose[num86];
							if (num40 >= inOpen[num86] && num40 > num33 && num33 > num88 && num34 > num89)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num90 = candleSetting.avgPeriod;
								double num91;
								RangeType rangeType3;
								if (num90 != 0.0)
								{
									num91 = array3[2] / num90;
								}
								else
								{
									rangeType3 = candleSetting.rangeType;
									double num92;
									if (rangeType3 == RangeType.RealBody)
									{
										num92 = Math.Abs(num88 - num89);
									}
									else
									{
										double num93;
										if (rangeType3 == RangeType.HighLow)
										{
											num93 = inHigh[num86 - 2] - inLow[num86 - 2];
										}
										else
										{
											double num96;
											if (rangeType3 == RangeType.Shadows)
											{
												double num94 = num88;
												double num95 = num89;
												num96 = num95 - inLow[num86 - 2] + (inHigh[num86 - 2] - num94);
											}
											else
											{
												num96 = 0.0;
											}
											num93 = num96;
										}
										num92 = num93;
									}
									num91 = num92;
								}
								CandleSetting candleSetting2 = Globals.candleSettings[8];
								rangeType3 = candleSetting2.rangeType;
								double num97 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
								num34 = inOpen[num86 - 1];
								if (num34 <= candleSetting2.factor * num91 / num97 + inClose[num86 - 2] && inOpen[num86] > num34)
								{
									num90 = candleSetting2.avgPeriod;
									double num98;
									if (num90 != 0.0)
									{
										num98 = array3[1] / num90;
									}
									else
									{
										double num99;
										if (rangeType3 == RangeType.RealBody)
										{
											num99 = Math.Abs(inClose[num86 - 1] - num34);
										}
										else
										{
											double num100;
											if (rangeType3 == RangeType.HighLow)
											{
												num100 = inHigh[num86 - 1] - inLow[num86 - 1];
											}
											else
											{
												double num103;
												if (rangeType3 == RangeType.Shadows)
												{
													num33 = inClose[num86 - 1];
													double num101 = ((!(num33 >= num34)) ? num34 : num33);
													double num102 = ((!(num33 >= num34)) ? num33 : num34);
													num103 = num102 - inLow[num86 - 1] + (inHigh[num86 - 1] - num101);
												}
												else
												{
													num103 = 0.0;
												}
												num100 = num103;
											}
											num99 = num100;
										}
										num98 = num99;
									}
									candleSettings = Globals.candleSettings;
									CandleSetting candleSetting3 = candleSettings[8];
									double num104 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if (inOpen[num86] <= candleSetting3.factor * num98 / num104 + inClose[num86 - 1])
									{
										CandleSetting candleSetting4 = candleSettings[0];
										double num105 = candleSetting4.avgPeriod;
										double num106;
										if (num105 != 0.0)
										{
											num106 = num6 / num105;
										}
										else
										{
											rangeType5 = candleSetting4.rangeType;
											double num107;
											if (rangeType5 == RangeType.RealBody)
											{
												num107 = Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]);
											}
											else
											{
												double num108;
												if (rangeType5 == RangeType.HighLow)
												{
													num108 = inHigh[num86 - 2] - inLow[num86 - 2];
												}
												else
												{
													double num111;
													if (rangeType5 == RangeType.Shadows)
													{
														num88 = inClose[num86 - 2];
														num89 = inOpen[num86 - 2];
														double num109 = ((!(num88 >= num89)) ? num89 : num88);
														double num110 = ((!(num88 >= num89)) ? num88 : num89);
														num111 = num110 - inLow[num86 - 2] + (inHigh[num86 - 2] - num109);
													}
													else
													{
														num111 = 0.0;
													}
													num108 = num111;
												}
												num107 = num108;
											}
											num106 = num107;
										}
										double num112 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										candleSettings = Globals.candleSettings;
										if (Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]) > candleSettings[0].factor * num106 / num112)
										{
											num88 = inClose[num86 - 2];
											num89 = inOpen[num86 - 2];
											double num113 = ((!(num88 >= num89)) ? num89 : num88);
											CandleSetting candleSetting5 = candleSettings[6];
											double num114 = candleSetting5.avgPeriod;
											double num115;
											if (num114 != 0.0)
											{
												num115 = array[2] / num114;
											}
											else
											{
												RangeType rangeType = candleSetting5.rangeType;
												double num116;
												if (rangeType == RangeType.RealBody)
												{
													num116 = Math.Abs(num88 - num89);
												}
												else
												{
													double num117;
													if (rangeType == RangeType.HighLow)
													{
														num117 = inHigh[num86 - 2] - inLow[num86 - 2];
													}
													else
													{
														double num120;
														if (rangeType == RangeType.Shadows)
														{
															double num118 = ((!(num88 >= num89)) ? num89 : num88);
															double num119 = ((!(num88 >= num89)) ? num88 : num89);
															num120 = num119 - inLow[num86 - 2] + (inHigh[num86 - 2] - num118);
														}
														else
														{
															num120 = 0.0;
														}
														num117 = num120;
													}
													num116 = num117;
												}
												num115 = num116;
											}
											candleSettings = Globals.candleSettings;
											CandleSetting candleSetting6 = candleSettings[6];
											double num121 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											double num122 = inHigh[num86 - 2];
											if (num122 - num113 < candleSetting6.factor * num115 / num121)
											{
												CandleSetting candleSetting7 = candleSettings[9];
												double num123 = candleSetting7.avgPeriod;
												double num124;
												if (num123 != 0.0)
												{
													num124 = array4[2] / num123;
												}
												else
												{
													RangeType rangeType4 = candleSetting7.rangeType;
													double num125;
													if (rangeType4 == RangeType.RealBody)
													{
														num125 = Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]);
													}
													else
													{
														double num126;
														if (rangeType4 == RangeType.HighLow)
														{
															num126 = num122 - inLow[num86 - 2];
														}
														else
														{
															double num129;
															if (rangeType4 == RangeType.Shadows)
															{
																num88 = inClose[num86 - 2];
																num89 = inOpen[num86 - 2];
																double num127 = ((!(num88 >= num89)) ? num89 : num88);
																double num128 = ((!(num88 >= num89)) ? num88 : num89);
																num129 = num128 - inLow[num86 - 2] + (num122 - num127);
															}
															else
															{
																num129 = 0.0;
															}
															num126 = num129;
														}
														num125 = num126;
													}
													num124 = num125;
												}
												double num130 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												double num131 = Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]);
												candleSettings = Globals.candleSettings;
												if (num131 < Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]) - candleSettings[9].factor * num124 / num130)
												{
													candleSetting3 = candleSettings[8];
													num90 = candleSetting3.avgPeriod;
													double num132;
													if (num90 != 0.0)
													{
														num132 = array3[1] / num90;
													}
													else
													{
														rangeType3 = candleSetting3.rangeType;
														double num133;
														if (rangeType3 == RangeType.RealBody)
														{
															num133 = Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]);
														}
														else
														{
															double num134;
															if (rangeType3 == RangeType.HighLow)
															{
																num134 = inHigh[num86 - 1] - inLow[num86 - 1];
															}
															else
															{
																double num137;
																if (rangeType3 == RangeType.Shadows)
																{
																	num33 = inClose[num86 - 1];
																	num34 = inOpen[num86 - 1];
																	double num135 = ((!(num33 >= num34)) ? num34 : num33);
																	double num136 = ((!(num33 >= num34)) ? num33 : num34);
																	num137 = num136 - inLow[num86 - 1] + (inHigh[num86 - 1] - num135);
																}
																else
																{
																	num137 = 0.0;
																}
																num134 = num137;
															}
															num133 = num134;
														}
														num132 = num133;
													}
													double num138 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
													double num139 = Math.Abs(inClose[num86] - inOpen[num86]);
													candleSettings = Globals.candleSettings;
													if (num139 < Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]) + candleSettings[8].factor * num132 / num138)
													{
														goto IL_17d4;
													}
												}
												candleSetting7 = candleSettings[9];
												num123 = candleSetting7.avgPeriod;
												double num140;
												if (num123 != 0.0)
												{
													num140 = array4[1] / num123;
												}
												else
												{
													RangeType rangeType4 = candleSetting7.rangeType;
													double num141;
													if (rangeType4 == RangeType.RealBody)
													{
														num141 = Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]);
													}
													else
													{
														double num142;
														if (rangeType4 == RangeType.HighLow)
														{
															num142 = inHigh[num86 - 1] - inLow[num86 - 1];
														}
														else
														{
															double num145;
															if (rangeType4 == RangeType.Shadows)
															{
																num33 = inClose[num86 - 1];
																num34 = inOpen[num86 - 1];
																double num143 = ((!(num33 >= num34)) ? num34 : num33);
																double num144 = ((!(num33 >= num34)) ? num33 : num34);
																num145 = num144 - inLow[num86 - 1] + (inHigh[num86 - 1] - num143);
															}
															else
															{
																num145 = 0.0;
															}
															num142 = num145;
														}
														num141 = num142;
													}
													num140 = num141;
												}
												double num146 = ((Globals.candleSettings[9].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												double num147 = Math.Abs(inClose[num86] - inOpen[num86]);
												if (!(num147 < Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]) - Globals.candleSettings[9].factor * num140 / num146))
												{
													double num148 = Math.Abs(inClose[num86] - inOpen[num86]);
													if (num148 < Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]))
													{
														double num149 = Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]);
														if (num149 < Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]))
														{
															num40 = inClose[num86];
															double num41 = inOpen[num86];
															double num150 = ((!(num40 >= num41)) ? num41 : num40);
															CandleSetting candleSetting8 = Globals.candleSettings[6];
															num114 = candleSetting8.avgPeriod;
															double num151;
															RangeType rangeType;
															if (num114 != 0.0)
															{
																num151 = array[0] / num114;
															}
															else
															{
																rangeType = candleSetting8.rangeType;
																double num152;
																if (rangeType == RangeType.RealBody)
																{
																	num152 = Math.Abs(num40 - num41);
																}
																else
																{
																	double num153;
																	if (rangeType == RangeType.HighLow)
																	{
																		num153 = inHigh[num86] - inLow[num86];
																	}
																	else
																	{
																		double num156;
																		if (rangeType == RangeType.Shadows)
																		{
																			double num154 = ((!(num40 >= num41)) ? num41 : num40);
																			double num155 = ((!(num40 >= num41)) ? num40 : num41);
																			num156 = num155 - inLow[num86] + (inHigh[num86] - num154);
																		}
																		else
																		{
																			num156 = 0.0;
																		}
																		num153 = num156;
																	}
																	num152 = num153;
																}
																num151 = num152;
															}
															candleSetting6 = Globals.candleSettings[6];
															rangeType = candleSetting6.rangeType;
															double num157 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if (!(inHigh[num86] - num150 > candleSetting6.factor * num151 / num157))
															{
																num33 = inClose[num86 - 1];
																num34 = inOpen[num86 - 1];
																double num158 = ((!(num33 >= num34)) ? num34 : num33);
																num114 = candleSetting6.avgPeriod;
																double num159;
																if (num114 != 0.0)
																{
																	num159 = array[1] / num114;
																}
																else
																{
																	double num160;
																	if (rangeType == RangeType.RealBody)
																	{
																		num160 = Math.Abs(num33 - num34);
																	}
																	else
																	{
																		double num161;
																		if (rangeType == RangeType.HighLow)
																		{
																			num161 = inHigh[num86 - 1] - inLow[num86 - 1];
																		}
																		else
																		{
																			double num164;
																			if (rangeType == RangeType.Shadows)
																			{
																				double num162 = ((!(num33 >= num34)) ? num34 : num33);
																				double num163 = ((!(num33 >= num34)) ? num33 : num34);
																				num164 = num163 - inLow[num86 - 1] + (inHigh[num86 - 1] - num162);
																			}
																			else
																			{
																				num164 = 0.0;
																			}
																			num161 = num164;
																		}
																		num160 = num161;
																	}
																	num159 = num160;
																}
																candleSetting6 = Globals.candleSettings[6];
																double num165 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
																if (!(inHigh[num86 - 1] - num158 > candleSetting6.factor * num159 / num165))
																{
																	goto IL_1654;
																}
															}
															goto IL_17d4;
														}
													}
													goto IL_1654;
												}
												goto IL_17d4;
											}
										}
									}
								}
							}
						}
					}
					goto IL_17e3;
					IL_17e3:
					outInteger[num87] = 0;
					num87++;
					goto IL_17ef;
					IL_1654:
					double num166 = Math.Abs(inClose[num86] - inOpen[num86]);
					if (num166 < Math.Abs(inClose[num86 - 1] - inOpen[num86 - 1]))
					{
						double num40 = inClose[num86];
						double num41 = inOpen[num86];
						double num167 = ((!(num40 >= num41)) ? num41 : num40);
						CandleSetting candleSetting9 = Globals.candleSettings[4];
						double num168 = candleSetting9.avgPeriod;
						double num169;
						if (num168 != 0.0)
						{
							num169 = array2[0] / num168;
						}
						else
						{
							RangeType rangeType2 = candleSetting9.rangeType;
							double num170;
							if (rangeType2 == RangeType.RealBody)
							{
								num170 = Math.Abs(num40 - num41);
							}
							else
							{
								double num171;
								if (rangeType2 == RangeType.HighLow)
								{
									num171 = inHigh[num86] - inLow[num86];
								}
								else
								{
									double num174;
									if (rangeType2 == RangeType.Shadows)
									{
										double num172 = ((!(num40 >= num41)) ? num41 : num40);
										double num173 = ((!(num40 >= num41)) ? num40 : num41);
										num174 = num173 - inLow[num86] + (inHigh[num86] - num172);
									}
									else
									{
										num174 = 0.0;
									}
									num171 = num174;
								}
								num170 = num171;
							}
							num169 = num170;
						}
						CandleSetting candleSetting10 = Globals.candleSettings[4];
						double num175 = ((candleSetting10.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (inHigh[num86] - num167 > candleSetting10.factor * num169 / num175)
						{
							goto IL_17d4;
						}
					}
					goto IL_17e3;
					IL_17d4:
					outInteger[num87] = -100;
					num87++;
					goto IL_17ef;
					IL_17ef:
					int num176 = 2;
					int num177 = num2 - 2;
					int num178 = num86 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[6].rangeType;
						double num179;
						if (rangeType == RangeType.RealBody)
						{
							num179 = Math.Abs(inClose[num178 + num177] - inOpen[num178 + num177]);
						}
						else
						{
							double num180;
							if (rangeType == RangeType.HighLow)
							{
								num180 = inHigh[num178 + num177] - inLow[num178 + num177];
							}
							else
							{
								double num185;
								if (rangeType == RangeType.Shadows)
								{
									double num181 = inClose[num178 + num177];
									double num182 = inOpen[num178 + num177];
									double num183 = ((!(num181 >= num182)) ? num182 : num181);
									double num184 = ((!(num181 >= num182)) ? num181 : num182);
									num185 = num184 - inLow[num178 + num177] + (inHigh[num178 + num177] - num183);
								}
								else
								{
									num185 = 0.0;
								}
								num180 = num185;
							}
							num179 = num180;
						}
						rangeType = Globals.candleSettings[6].rangeType;
						double num186;
						if (rangeType == RangeType.RealBody)
						{
							num186 = Math.Abs(inClose[num177] - inOpen[num177]);
						}
						else
						{
							double num187;
							if (rangeType == RangeType.HighLow)
							{
								num187 = inHigh[num177] - inLow[num177];
							}
							else
							{
								double num192;
								if (rangeType == RangeType.Shadows)
								{
									double num188 = inClose[num177];
									double num189 = inOpen[num177];
									double num190 = ((!(num188 >= num189)) ? num189 : num188);
									double num191 = ((!(num188 >= num189)) ? num188 : num189);
									num192 = num191 - inLow[num177] + (inHigh[num177] - num190);
								}
								else
								{
									num192 = 0.0;
								}
								num187 = num192;
							}
							num186 = num187;
						}
						array[num176] += num179 - num186;
						num176--;
						num177++;
					}
					while (num176 >= 0);
					int num193 = 1;
					int num194 = num3 - 1;
					int num195 = num86 - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num196;
						if (rangeType2 == RangeType.RealBody)
						{
							num196 = Math.Abs(inClose[num194 + num195] - inOpen[num194 + num195]);
						}
						else
						{
							double num197;
							if (rangeType2 == RangeType.HighLow)
							{
								num197 = inHigh[num194 + num195] - inLow[num194 + num195];
							}
							else
							{
								double num202;
								if (rangeType2 == RangeType.Shadows)
								{
									double num198 = inClose[num194 + num195];
									double num199 = inOpen[num194 + num195];
									double num200 = ((!(num198 >= num199)) ? num199 : num198);
									double num201 = ((!(num198 >= num199)) ? num198 : num199);
									num202 = num201 - inLow[num194 + num195] + (inHigh[num194 + num195] - num200);
								}
								else
								{
									num202 = 0.0;
								}
								num197 = num202;
							}
							num196 = num197;
						}
						rangeType2 = Globals.candleSettings[4].rangeType;
						double num203;
						if (rangeType2 == RangeType.RealBody)
						{
							num203 = Math.Abs(inClose[num194] - inOpen[num194]);
						}
						else
						{
							double num204;
							if (rangeType2 == RangeType.HighLow)
							{
								num204 = inHigh[num194] - inLow[num194];
							}
							else
							{
								double num209;
								if (rangeType2 == RangeType.Shadows)
								{
									double num205 = inClose[num194];
									double num206 = inOpen[num194];
									double num207 = ((!(num205 >= num206)) ? num206 : num205);
									double num208 = ((!(num205 >= num206)) ? num205 : num206);
									num209 = num208 - inLow[num194] + (inHigh[num194] - num207);
								}
								else
								{
									num209 = 0.0;
								}
								num204 = num209;
							}
							num203 = num204;
						}
						array2[num193] += num196 - num203;
						num193--;
						num194++;
					}
					while (num193 >= 0);
					int num210 = 2;
					int num211 = num86 - 2;
					int num212 = num5 - num86;
					int num213 = num4 - num86;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[9].rangeType;
						double num214;
						if (rangeType4 == RangeType.RealBody)
						{
							num214 = Math.Abs(inClose[num211] - inOpen[num211]);
						}
						else
						{
							double num215;
							if (rangeType4 == RangeType.HighLow)
							{
								num215 = inHigh[num211] - inLow[num211];
							}
							else
							{
								double num220;
								if (rangeType4 == RangeType.Shadows)
								{
									double num216 = inClose[num211];
									double num217 = inOpen[num211];
									double num218 = ((!(num216 >= num217)) ? num217 : num216);
									double num219 = ((!(num216 >= num217)) ? num216 : num217);
									num220 = num219 - inLow[num211] + (inHigh[num211] - num218);
								}
								else
								{
									num220 = 0.0;
								}
								num215 = num220;
							}
							num214 = num215;
						}
						rangeType4 = Globals.candleSettings[9].rangeType;
						double num221;
						if (rangeType4 == RangeType.RealBody)
						{
							num221 = Math.Abs(inClose[num211 + num212] - inOpen[num211 + num212]);
						}
						else
						{
							double num222;
							if (rangeType4 == RangeType.HighLow)
							{
								num222 = inHigh[num211 + num212] - inLow[num211 + num212];
							}
							else
							{
								double num227;
								if (rangeType4 == RangeType.Shadows)
								{
									double num223 = inClose[num211 + num212];
									double num224 = inOpen[num211 + num212];
									double num225 = ((!(num223 >= num224)) ? num224 : num223);
									double num226 = ((!(num223 >= num224)) ? num223 : num224);
									num227 = num226 - inLow[num211 + num212] + (inHigh[num211 + num212] - num225);
								}
								else
								{
									num227 = 0.0;
								}
								num222 = num227;
							}
							num221 = num222;
						}
						array4[num210] += num214 - num221;
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						double num228;
						if (rangeType3 == RangeType.RealBody)
						{
							num228 = Math.Abs(inClose[num211] - inOpen[num211]);
						}
						else
						{
							double num229;
							if (rangeType3 == RangeType.HighLow)
							{
								num229 = inHigh[num211] - inLow[num211];
							}
							else
							{
								double num232;
								if (rangeType3 == RangeType.Shadows)
								{
									double num216 = inClose[num211];
									double num217 = inOpen[num211];
									double num230 = ((!(num216 >= num217)) ? num217 : num216);
									double num231 = ((!(num216 >= num217)) ? num216 : num217);
									num232 = num231 - inLow[num211] + (inHigh[num211] - num230);
								}
								else
								{
									num232 = 0.0;
								}
								num229 = num232;
							}
							num228 = num229;
						}
						rangeType3 = Globals.candleSettings[8].rangeType;
						double num233;
						if (rangeType3 == RangeType.RealBody)
						{
							num233 = Math.Abs(inClose[num211 + num213] - inOpen[num211 + num213]);
						}
						else
						{
							double num234;
							if (rangeType3 == RangeType.HighLow)
							{
								num234 = inHigh[num211 + num213] - inLow[num211 + num213];
							}
							else
							{
								double num239;
								if (rangeType3 == RangeType.Shadows)
								{
									double num235 = inClose[num211 + num213];
									double num236 = inOpen[num211 + num213];
									double num237 = ((!(num235 >= num236)) ? num236 : num235);
									double num238 = ((!(num235 >= num236)) ? num235 : num236);
									num239 = num238 - inLow[num211 + num213] + (inHigh[num211 + num213] - num237);
								}
								else
								{
									num239 = 0.0;
								}
								num234 = num239;
							}
							num233 = num234;
						}
						array3[num210] += num228 - num233;
						num210--;
						num211++;
					}
					while (num210 >= 1);
					rangeType5 = Globals.candleSettings[0].rangeType;
					double num240;
					if (rangeType5 == RangeType.RealBody)
					{
						num240 = Math.Abs(inClose[num86 - 2] - inOpen[num86 - 2]);
					}
					else
					{
						double num241;
						if (rangeType5 == RangeType.HighLow)
						{
							num241 = inHigh[num86 - 2] - inLow[num86 - 2];
						}
						else
						{
							double num244;
							if (rangeType5 == RangeType.Shadows)
							{
								num88 = inClose[num86 - 2];
								num89 = inOpen[num86 - 2];
								double num242 = ((!(num88 >= num89)) ? num89 : num88);
								double num243 = ((!(num88 >= num89)) ? num88 : num89);
								num244 = num243 - inLow[num86 - 2] + (inHigh[num86 - 2] - num242);
							}
							else
							{
								num244 = 0.0;
							}
							num241 = num244;
						}
						num240 = num241;
					}
					rangeType5 = Globals.candleSettings[0].rangeType;
					double num245;
					if (rangeType5 == RangeType.RealBody)
					{
						num245 = Math.Abs(inClose[num7 - 2] - inOpen[num7 - 2]);
					}
					else
					{
						double num246;
						if (rangeType5 == RangeType.HighLow)
						{
							num246 = inHigh[num7 - 2] - inLow[num7 - 2];
						}
						else
						{
							double num251;
							if (rangeType5 == RangeType.Shadows)
							{
								double num247 = inClose[num7 - 2];
								double num248 = inOpen[num7 - 2];
								double num249 = ((!(num247 >= num248)) ? num248 : num247);
								double num250 = ((!(num247 >= num248)) ? num247 : num248);
								num251 = num250 - inLow[num7 - 2] + (inHigh[num7 - 2] - num249);
							}
							else
							{
								num251 = 0.0;
							}
							num246 = num251;
						}
						num245 = num246;
					}
					num6 = num240 - num245 + num6;
					num86++;
					num2++;
					num3++;
					num4++;
					num5++;
					num7++;
				}
				while (num86 <= endIdx);
				outNBElement = num87;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlBeltHoldLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[0].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlBeltHold(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlBeltHoldLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > candleSettings[0].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						if ((double)num9 >= (double)num10)
						{
							float num29 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							CandleSetting candleSetting2 = candleSettings[7];
							double num30 = candleSetting2.avgPeriod;
							double num31;
							if (num30 != 0.0)
							{
								num31 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								float num32;
								if (rangeType2 == RangeType.RealBody)
								{
									num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num33;
									if (rangeType2 == RangeType.HighLow)
									{
										num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num36;
										if (rangeType2 == RangeType.Shadows)
										{
											float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
										}
										else
										{
											num36 = 0f;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[7];
							double num37 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num29 - (double)inLow[num14] < candleSetting3.factor * num31 / num37)
							{
								goto IL_0548;
							}
						}
						num9 = inClose[num14];
						num10 = inOpen[num14];
						if (!((double)num9 >= (double)num10))
						{
							float num38 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
							CandleSetting candleSetting4 = candleSettings[7];
							double num30 = candleSetting4.avgPeriod;
							double num39;
							if (num30 != 0.0)
							{
								num39 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting4.rangeType;
								float num40;
								if (rangeType2 == RangeType.RealBody)
								{
									num40 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num41;
									if (rangeType2 == RangeType.HighLow)
									{
										num41 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num44;
										if (rangeType2 == RangeType.Shadows)
										{
											float num42 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num43 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num44 = (float)((double)num43 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num42));
										}
										else
										{
											num44 = 0f;
										}
										num41 = num44;
									}
									num40 = num41;
								}
								num39 = num40;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num14] - (double)num38 < candleSetting3.factor * num39 / num45)
							{
								goto IL_0548;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0579;
					IL_0579:
					rangeType = Globals.candleSettings[0].rangeType;
					float num46;
					if (rangeType == RangeType.RealBody)
					{
						num46 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num47;
						if (rangeType == RangeType.HighLow)
						{
							num47 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num50;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num48 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num49 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num50 = (float)((double)num49 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num48));
							}
							else
							{
								num50 = 0f;
							}
							num47 = num50;
						}
						num46 = num47;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num51;
					if (rangeType == RangeType.RealBody)
					{
						num51 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num52;
						if (rangeType == RangeType.HighLow)
						{
							num52 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num57;
							if (rangeType == RangeType.Shadows)
							{
								float num53 = inClose[num3];
								float num54 = inOpen[num3];
								float num55 = ((!((double)num53 >= (double)num54)) ? num54 : num53);
								float num56 = ((!((double)num53 >= (double)num54)) ? num53 : num54);
								num57 = (float)((double)num56 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num55));
							}
							else
							{
								num57 = 0f;
							}
							num52 = num57;
						}
						num51 = num52;
					}
					num2 = (double)(num46 - num51) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num58;
					if (rangeType2 == RangeType.RealBody)
					{
						num58 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num59;
						if (rangeType2 == RangeType.HighLow)
						{
							num59 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num62;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num60 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num61 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num62 = (float)((double)num61 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num60));
							}
							else
							{
								num62 = 0f;
							}
							num59 = num62;
						}
						num58 = num59;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num63;
					if (rangeType2 == RangeType.RealBody)
					{
						num63 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num64;
						if (rangeType2 == RangeType.HighLow)
						{
							num64 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num69;
							if (rangeType2 == RangeType.Shadows)
							{
								float num65 = inClose[num5];
								float num66 = inOpen[num5];
								float num67 = ((!((double)num65 >= (double)num66)) ? num66 : num65);
								float num68 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
								num69 = (float)((double)num68 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num67));
							}
							else
							{
								num69 = 0f;
							}
							num64 = num69;
						}
						num63 = num64;
					}
					num4 = (double)(num58 - num63) + num4;
					num14++;
					num3++;
					num5++;
					continue;
					IL_0548:
					int num70 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
					outInteger[num20] = num70 * 100;
					num20++;
					goto IL_0579;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlBeltHold(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlBeltHoldLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) > candleSettings[0].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						if (num9 >= num10)
						{
							double num29 = num10;
							CandleSetting candleSetting2 = candleSettings[7];
							double num30 = candleSetting2.avgPeriod;
							double num31;
							if (num30 != 0.0)
							{
								num31 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								double num32;
								if (rangeType2 == RangeType.RealBody)
								{
									num32 = Math.Abs(num9 - num10);
								}
								else
								{
									double num33;
									if (rangeType2 == RangeType.HighLow)
									{
										num33 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num36;
										if (rangeType2 == RangeType.Shadows)
										{
											double num34 = num9;
											double num35 = num10;
											num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
										}
										else
										{
											num36 = 0.0;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[7];
							double num37 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num29 - inLow[num14] < candleSetting3.factor * num31 / num37)
							{
								goto IL_04d1;
							}
						}
						num9 = inClose[num14];
						num10 = inOpen[num14];
						if (!(num9 >= num10))
						{
							double num38 = ((!(num9 >= num10)) ? num10 : num9);
							CandleSetting candleSetting4 = candleSettings[7];
							double num30 = candleSetting4.avgPeriod;
							double num39;
							if (num30 != 0.0)
							{
								num39 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting4.rangeType;
								double num40;
								if (rangeType2 == RangeType.RealBody)
								{
									num40 = Math.Abs(num9 - num10);
								}
								else
								{
									double num41;
									if (rangeType2 == RangeType.HighLow)
									{
										num41 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num44;
										if (rangeType2 == RangeType.Shadows)
										{
											double num42 = ((!(num9 >= num10)) ? num10 : num9);
											double num43 = ((!(num9 >= num10)) ? num9 : num10);
											num44 = num43 - inLow[num14] + (inHigh[num14] - num42);
										}
										else
										{
											num44 = 0.0;
										}
										num41 = num44;
									}
									num40 = num41;
								}
								num39 = num40;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num14] - num38 < candleSetting3.factor * num39 / num45)
							{
								goto IL_04d1;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0500;
					IL_0500:
					rangeType = Globals.candleSettings[0].rangeType;
					double num46;
					if (rangeType == RangeType.RealBody)
					{
						num46 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num47;
						if (rangeType == RangeType.HighLow)
						{
							num47 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num50;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num48 = ((!(num9 >= num10)) ? num10 : num9);
								double num49 = ((!(num9 >= num10)) ? num9 : num10);
								num50 = num49 - inLow[num14] + (inHigh[num14] - num48);
							}
							else
							{
								num50 = 0.0;
							}
							num47 = num50;
						}
						num46 = num47;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num51;
					if (rangeType == RangeType.RealBody)
					{
						num51 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num52;
						if (rangeType == RangeType.HighLow)
						{
							num52 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num57;
							if (rangeType == RangeType.Shadows)
							{
								double num53 = inClose[num3];
								double num54 = inOpen[num3];
								double num55 = ((!(num53 >= num54)) ? num54 : num53);
								double num56 = ((!(num53 >= num54)) ? num53 : num54);
								num57 = num56 - inLow[num3] + (inHigh[num3] - num55);
							}
							else
							{
								num57 = 0.0;
							}
							num52 = num57;
						}
						num51 = num52;
					}
					num2 = num46 - num51 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num58;
					if (rangeType2 == RangeType.RealBody)
					{
						num58 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num59;
						if (rangeType2 == RangeType.HighLow)
						{
							num59 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num62;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num60 = ((!(num9 >= num10)) ? num10 : num9);
								double num61 = ((!(num9 >= num10)) ? num9 : num10);
								num62 = num61 - inLow[num14] + (inHigh[num14] - num60);
							}
							else
							{
								num62 = 0.0;
							}
							num59 = num62;
						}
						num58 = num59;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num63;
					if (rangeType2 == RangeType.RealBody)
					{
						num63 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num64;
						if (rangeType2 == RangeType.HighLow)
						{
							num64 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num69;
							if (rangeType2 == RangeType.Shadows)
							{
								double num65 = inClose[num5];
								double num66 = inOpen[num5];
								double num67 = ((!(num65 >= num66)) ? num66 : num65);
								double num68 = ((!(num65 >= num66)) ? num65 : num66);
								num69 = num68 - inLow[num5] + (inHigh[num5] - num67);
							}
							else
							{
								num69 = 0.0;
							}
							num64 = num69;
						}
						num63 = num64;
					}
					num4 = num58 - num63 + num4;
					num14++;
					num3++;
					num5++;
					continue;
					IL_04d1:
					int num70 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
					outInteger[num20] = num70 * 100;
					num20++;
					goto IL_0500;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlBreakawayLookback()
	{
		return Globals.candleSettings[0].avgPeriod + 4;
	}

	public static RetCode CdlBreakaway(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlBreakawayLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 4;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = startIdx;
				int num14 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num15 = candleSetting.avgPeriod;
					double num16;
					RangeType rangeType;
					if (num15 != 0.0)
					{
						num16 = num2 / num15;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num17;
						if (rangeType == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num13 - 4] - (double)inOpen[num13 - 4]));
						}
						else
						{
							float num18;
							if (rangeType == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num13 - 4] - (double)inLow[num13 - 4]);
							}
							else
							{
								float num23;
								if (rangeType == RangeType.Shadows)
								{
									float num19 = inClose[num13 - 4];
									float num20 = inOpen[num13 - 4];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num13 - 4] + ((double)inHigh[num13 - 4] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num16 = num17;
					}
					double num24 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					float num34;
					float num35;
					if ((double)Math.Abs((float)((double)inClose[num13 - 4] - (double)inOpen[num13 - 4])) > Globals.candleSettings[0].factor * num16 / num24)
					{
						float num19 = inClose[num13 - 4];
						float num20 = inOpen[num13 - 4];
						int num25 = (((double)num19 >= (double)num20) ? 1 : (-1));
						float num26 = inClose[num13 - 3];
						float num27 = inOpen[num13 - 3];
						int num28 = (((double)num26 >= (double)num27) ? 1 : (-1));
						if (num25 == num28)
						{
							int num29 = (((double)num26 >= (double)num27) ? 1 : (-1));
							float num30 = inClose[num13 - 1];
							float num31 = inOpen[num13 - 1];
							int num32 = (((double)num30 >= (double)num31) ? 1 : (-1));
							if (num29 == num32)
							{
								int num33 = (((double)num30 >= (double)num31) ? 1 : (-1));
								num34 = inClose[num13];
								num35 = inOpen[num13];
								int num36 = (((double)num34 >= (double)num35) ? 1 : (-1));
								if (num33 == -num36)
								{
									if (!((double)num19 >= (double)num20))
									{
										float num37 = ((!((double)num27 > (double)num26)) ? num26 : num27);
										float num38 = ((!((double)num20 < (double)num19)) ? num19 : num20);
										if ((double)num37 < (double)num38)
										{
											float num39 = inHigh[num13 - 2];
											if ((double)num39 < (double)inHigh[num13 - 3])
											{
												float num40 = inLow[num13 - 2];
												if ((double)num40 < (double)inLow[num13 - 3] && (double)inHigh[num13 - 1] < (double)num39 && (double)inLow[num13 - 1] < (double)num40 && (double)num34 > (double)num27 && (double)num34 < (double)num19)
												{
													goto IL_041a;
												}
											}
										}
									}
									if ((double)num19 >= (double)num20)
									{
										float num41 = ((!((double)num27 < (double)num26)) ? num26 : num27);
										float num42 = ((!((double)num20 > (double)num19)) ? num19 : num20);
										if ((double)num41 > (double)num42)
										{
											float num39 = inHigh[num13 - 2];
											if ((double)num39 > (double)inHigh[num13 - 3])
											{
												float num40 = inLow[num13 - 2];
												if ((double)num40 > (double)inLow[num13 - 3] && (double)inHigh[num13 - 1] > (double)num39 && (double)inLow[num13 - 1] > (double)num40 && (double)num34 < (double)num27 && (double)num34 > (double)num19)
												{
													goto IL_041a;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num14] = 0;
					num14++;
					goto IL_0448;
					IL_0448:
					rangeType = Globals.candleSettings[0].rangeType;
					float num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = (float)(double)Math.Abs((float)((double)inClose[num13 - 4] - (double)inOpen[num13 - 4]));
					}
					else
					{
						float num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = (float)((double)inHigh[num13 - 4] - (double)inLow[num13 - 4]);
						}
						else
						{
							float num47;
							if (rangeType == RangeType.Shadows)
							{
								float num19 = inClose[num13 - 4];
								float num20 = inOpen[num13 - 4];
								float num45 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
								float num46 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
								num47 = (float)((double)num46 - (double)inLow[num13 - 4] + ((double)inHigh[num13 - 4] - (double)num45));
							}
							else
							{
								num47 = 0f;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num3 - 4] - (double)inOpen[num3 - 4]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num3 - 4] - (double)inLow[num3 - 4]);
						}
						else
						{
							float num54;
							if (rangeType == RangeType.Shadows)
							{
								float num50 = inClose[num3 - 4];
								float num51 = inOpen[num3 - 4];
								float num52 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
								float num53 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
								num54 = (float)((double)num53 - (double)inLow[num3 - 4] + ((double)inHigh[num3 - 4] - (double)num52));
							}
							else
							{
								num54 = 0f;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = (double)(num43 - num48) + num2;
					num13++;
					num3++;
					continue;
					IL_041a:
					int num55 = (((double)num34 >= (double)num35) ? 1 : (-1));
					outInteger[num14] = num55 * 100;
					num14++;
					goto IL_0448;
				}
				while (num13 <= endIdx);
				outNBElement = num14;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlBreakaway(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlBreakawayLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 4;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = startIdx;
				int num14 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num15 = candleSetting.avgPeriod;
					double num16;
					RangeType rangeType;
					if (num15 != 0.0)
					{
						num16 = num2 / num15;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num17;
						if (rangeType == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num13 - 4] - inOpen[num13 - 4]);
						}
						else
						{
							double num18;
							if (rangeType == RangeType.HighLow)
							{
								num18 = inHigh[num13 - 4] - inLow[num13 - 4];
							}
							else
							{
								double num23;
								if (rangeType == RangeType.Shadows)
								{
									double num19 = inClose[num13 - 4];
									double num20 = inOpen[num13 - 4];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num13 - 4] + (inHigh[num13 - 4] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num16 = num17;
					}
					double num24 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					double num34;
					double num35;
					if (Math.Abs(inClose[num13 - 4] - inOpen[num13 - 4]) > Globals.candleSettings[0].factor * num16 / num24)
					{
						double num19 = inClose[num13 - 4];
						double num20 = inOpen[num13 - 4];
						int num25 = ((num19 >= num20) ? 1 : (-1));
						double num26 = inClose[num13 - 3];
						double num27 = inOpen[num13 - 3];
						int num28 = ((num26 >= num27) ? 1 : (-1));
						if (num25 == num28)
						{
							int num29 = ((num26 >= num27) ? 1 : (-1));
							double num30 = inClose[num13 - 1];
							double num31 = inOpen[num13 - 1];
							int num32 = ((num30 >= num31) ? 1 : (-1));
							if (num29 == num32)
							{
								int num33 = ((num30 >= num31) ? 1 : (-1));
								num34 = inClose[num13];
								num35 = inOpen[num13];
								int num36 = ((num34 >= num35) ? 1 : (-1));
								if (num33 == -num36)
								{
									if (!(num19 >= num20))
									{
										double num37 = ((!(num27 > num26)) ? num26 : num27);
										double num38 = ((!(num20 < num19)) ? num19 : num20);
										if (num37 < num38)
										{
											double num39 = inHigh[num13 - 2];
											if (num39 < inHigh[num13 - 3])
											{
												double num40 = inLow[num13 - 2];
												if (num40 < inLow[num13 - 3] && inHigh[num13 - 1] < num39 && inLow[num13 - 1] < num40 && num34 > num27 && num34 < num19)
												{
													goto IL_03ba;
												}
											}
										}
									}
									if (num19 >= num20)
									{
										double num41 = ((!(num27 < num26)) ? num26 : num27);
										double num42 = ((!(num20 > num19)) ? num19 : num20);
										if (num41 > num42)
										{
											double num39 = inHigh[num13 - 2];
											if (num39 > inHigh[num13 - 3])
											{
												double num40 = inLow[num13 - 2];
												if (num40 > inLow[num13 - 3] && inHigh[num13 - 1] > num39 && inLow[num13 - 1] > num40 && num34 < num27 && num34 > num19)
												{
													goto IL_03ba;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num14] = 0;
					num14++;
					goto IL_03e6;
					IL_03e6:
					rangeType = Globals.candleSettings[0].rangeType;
					double num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = Math.Abs(inClose[num13 - 4] - inOpen[num13 - 4]);
					}
					else
					{
						double num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = inHigh[num13 - 4] - inLow[num13 - 4];
						}
						else
						{
							double num47;
							if (rangeType == RangeType.Shadows)
							{
								double num19 = inClose[num13 - 4];
								double num20 = inOpen[num13 - 4];
								double num45 = ((!(num19 >= num20)) ? num20 : num19);
								double num46 = ((!(num19 >= num20)) ? num19 : num20);
								num47 = num46 - inLow[num13 - 4] + (inHigh[num13 - 4] - num45);
							}
							else
							{
								num47 = 0.0;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num3 - 4] - inOpen[num3 - 4]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num3 - 4] - inLow[num3 - 4];
						}
						else
						{
							double num54;
							if (rangeType == RangeType.Shadows)
							{
								double num50 = inClose[num3 - 4];
								double num51 = inOpen[num3 - 4];
								double num52 = ((!(num50 >= num51)) ? num51 : num50);
								double num53 = ((!(num50 >= num51)) ? num50 : num51);
								num54 = num53 - inLow[num3 - 4] + (inHigh[num3 - 4] - num52);
							}
							else
							{
								num54 = 0.0;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = num43 - num48 + num2;
					num13++;
					num3++;
					continue;
					IL_03ba:
					int num55 = ((num34 >= num35) ? 1 : (-1));
					outInteger[num14] = num55 * 100;
					num14++;
					goto IL_03e6;
				}
				while (num13 <= endIdx);
				outNBElement = num14;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlClosingMarubozuLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[0].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlClosingMarubozu(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlClosingMarubozuLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > candleSettings[0].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						if ((double)num9 >= (double)num10)
						{
							float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
							CandleSetting candleSetting2 = candleSettings[7];
							double num30 = candleSetting2.avgPeriod;
							double num31;
							if (num30 != 0.0)
							{
								num31 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								float num32;
								if (rangeType2 == RangeType.RealBody)
								{
									num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num33;
									if (rangeType2 == RangeType.HighLow)
									{
										num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num36;
										if (rangeType2 == RangeType.Shadows)
										{
											float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
										}
										else
										{
											num36 = 0f;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[7];
							double num37 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num14] - (double)num29 < candleSetting3.factor * num31 / num37)
							{
								goto IL_0548;
							}
						}
						num9 = inClose[num14];
						num10 = inOpen[num14];
						if (!((double)num9 >= (double)num10))
						{
							float num38 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							CandleSetting candleSetting4 = candleSettings[7];
							double num30 = candleSetting4.avgPeriod;
							double num39;
							if (num30 != 0.0)
							{
								num39 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting4.rangeType;
								float num40;
								if (rangeType2 == RangeType.RealBody)
								{
									num40 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num41;
									if (rangeType2 == RangeType.HighLow)
									{
										num41 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num44;
										if (rangeType2 == RangeType.Shadows)
										{
											float num42 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num43 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num44 = (float)((double)num43 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num42));
										}
										else
										{
											num44 = 0f;
										}
										num41 = num44;
									}
									num40 = num41;
								}
								num39 = num40;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num38 - (double)inLow[num14] < candleSetting3.factor * num39 / num45)
							{
								goto IL_0548;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0579;
					IL_0579:
					rangeType = Globals.candleSettings[0].rangeType;
					float num46;
					if (rangeType == RangeType.RealBody)
					{
						num46 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num47;
						if (rangeType == RangeType.HighLow)
						{
							num47 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num50;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num48 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num49 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num50 = (float)((double)num49 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num48));
							}
							else
							{
								num50 = 0f;
							}
							num47 = num50;
						}
						num46 = num47;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num51;
					if (rangeType == RangeType.RealBody)
					{
						num51 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num52;
						if (rangeType == RangeType.HighLow)
						{
							num52 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num57;
							if (rangeType == RangeType.Shadows)
							{
								float num53 = inClose[num3];
								float num54 = inOpen[num3];
								float num55 = ((!((double)num53 >= (double)num54)) ? num54 : num53);
								float num56 = ((!((double)num53 >= (double)num54)) ? num53 : num54);
								num57 = (float)((double)num56 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num55));
							}
							else
							{
								num57 = 0f;
							}
							num52 = num57;
						}
						num51 = num52;
					}
					num2 = (double)(num46 - num51) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num58;
					if (rangeType2 == RangeType.RealBody)
					{
						num58 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num59;
						if (rangeType2 == RangeType.HighLow)
						{
							num59 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num62;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num60 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num61 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num62 = (float)((double)num61 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num60));
							}
							else
							{
								num62 = 0f;
							}
							num59 = num62;
						}
						num58 = num59;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num63;
					if (rangeType2 == RangeType.RealBody)
					{
						num63 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num64;
						if (rangeType2 == RangeType.HighLow)
						{
							num64 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num69;
							if (rangeType2 == RangeType.Shadows)
							{
								float num65 = inClose[num5];
								float num66 = inOpen[num5];
								float num67 = ((!((double)num65 >= (double)num66)) ? num66 : num65);
								float num68 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
								num69 = (float)((double)num68 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num67));
							}
							else
							{
								num69 = 0f;
							}
							num64 = num69;
						}
						num63 = num64;
					}
					num4 = (double)(num58 - num63) + num4;
					num14++;
					num3++;
					num5++;
					continue;
					IL_0548:
					int num70 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
					outInteger[num20] = num70 * 100;
					num20++;
					goto IL_0579;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlClosingMarubozu(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlClosingMarubozuLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) > candleSettings[0].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						if (num9 >= num10)
						{
							double num29 = num9;
							CandleSetting candleSetting2 = candleSettings[7];
							double num30 = candleSetting2.avgPeriod;
							double num31;
							if (num30 != 0.0)
							{
								num31 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								double num32;
								if (rangeType2 == RangeType.RealBody)
								{
									num32 = Math.Abs(num9 - num10);
								}
								else
								{
									double num33;
									if (rangeType2 == RangeType.HighLow)
									{
										num33 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num36;
										if (rangeType2 == RangeType.Shadows)
										{
											double num34 = num9;
											double num35 = num10;
											num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
										}
										else
										{
											num36 = 0.0;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[7];
							double num37 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num14] - num29 < candleSetting3.factor * num31 / num37)
							{
								goto IL_04d1;
							}
						}
						num9 = inClose[num14];
						num10 = inOpen[num14];
						if (!(num9 >= num10))
						{
							double num38 = ((!(num9 >= num10)) ? num9 : num10);
							CandleSetting candleSetting4 = candleSettings[7];
							double num30 = candleSetting4.avgPeriod;
							double num39;
							if (num30 != 0.0)
							{
								num39 = num4 / num30;
							}
							else
							{
								rangeType2 = candleSetting4.rangeType;
								double num40;
								if (rangeType2 == RangeType.RealBody)
								{
									num40 = Math.Abs(num9 - num10);
								}
								else
								{
									double num41;
									if (rangeType2 == RangeType.HighLow)
									{
										num41 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num44;
										if (rangeType2 == RangeType.Shadows)
										{
											double num42 = ((!(num9 >= num10)) ? num10 : num9);
											double num43 = ((!(num9 >= num10)) ? num9 : num10);
											num44 = num43 - inLow[num14] + (inHigh[num14] - num42);
										}
										else
										{
											num44 = 0.0;
										}
										num41 = num44;
									}
									num40 = num41;
								}
								num39 = num40;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num38 - inLow[num14] < candleSetting3.factor * num39 / num45)
							{
								goto IL_04d1;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0500;
					IL_0500:
					rangeType = Globals.candleSettings[0].rangeType;
					double num46;
					if (rangeType == RangeType.RealBody)
					{
						num46 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num47;
						if (rangeType == RangeType.HighLow)
						{
							num47 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num50;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num48 = ((!(num9 >= num10)) ? num10 : num9);
								double num49 = ((!(num9 >= num10)) ? num9 : num10);
								num50 = num49 - inLow[num14] + (inHigh[num14] - num48);
							}
							else
							{
								num50 = 0.0;
							}
							num47 = num50;
						}
						num46 = num47;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num51;
					if (rangeType == RangeType.RealBody)
					{
						num51 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num52;
						if (rangeType == RangeType.HighLow)
						{
							num52 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num57;
							if (rangeType == RangeType.Shadows)
							{
								double num53 = inClose[num3];
								double num54 = inOpen[num3];
								double num55 = ((!(num53 >= num54)) ? num54 : num53);
								double num56 = ((!(num53 >= num54)) ? num53 : num54);
								num57 = num56 - inLow[num3] + (inHigh[num3] - num55);
							}
							else
							{
								num57 = 0.0;
							}
							num52 = num57;
						}
						num51 = num52;
					}
					num2 = num46 - num51 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num58;
					if (rangeType2 == RangeType.RealBody)
					{
						num58 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num59;
						if (rangeType2 == RangeType.HighLow)
						{
							num59 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num62;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num60 = ((!(num9 >= num10)) ? num10 : num9);
								double num61 = ((!(num9 >= num10)) ? num9 : num10);
								num62 = num61 - inLow[num14] + (inHigh[num14] - num60);
							}
							else
							{
								num62 = 0.0;
							}
							num59 = num62;
						}
						num58 = num59;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num63;
					if (rangeType2 == RangeType.RealBody)
					{
						num63 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num64;
						if (rangeType2 == RangeType.HighLow)
						{
							num64 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num69;
							if (rangeType2 == RangeType.Shadows)
							{
								double num65 = inClose[num5];
								double num66 = inOpen[num5];
								double num67 = ((!(num65 >= num66)) ? num66 : num65);
								double num68 = ((!(num65 >= num66)) ? num65 : num66);
								num69 = num68 - inLow[num5] + (inHigh[num5] - num67);
							}
							else
							{
								num69 = 0.0;
							}
							num64 = num69;
						}
						num63 = num64;
					}
					num4 = num58 - num63 + num4;
					num14++;
					num3++;
					num5++;
					continue;
					IL_04d1:
					int num70 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
					outInteger[num20] = num70 * 100;
					num20++;
					goto IL_0500;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlConcealBabysWallLookback()
	{
		return Globals.candleSettings[7].avgPeriod + 3;
	}

	public static RetCode CdlConcealBabysWall(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[4];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlConcealBabysWallLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				int num2 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 2;
					int num4 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num3 - 1];
									float num8 = inOpen[num3 - 1];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[3] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						float num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
						}
						else
						{
							float num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = (float)((double)inHigh[num3] - (double)inLow[num3]);
							}
							else
							{
								float num18;
								if (rangeType == RangeType.Shadows)
								{
									float num14 = inClose[num3];
									float num15 = inOpen[num3];
									float num16 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num17 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num18 = (float)((double)num17 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num16));
								}
								else
								{
									num18 = 0f;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[2] += num12;
						rangeType = Globals.candleSettings[7].rangeType;
						float num19;
						if (rangeType == RangeType.RealBody)
						{
							num19 = (float)(double)Math.Abs((float)((double)inClose[num3 + 1] - (double)inOpen[num3 + 1]));
						}
						else
						{
							float num20;
							if (rangeType == RangeType.HighLow)
							{
								num20 = (float)((double)inHigh[num3 + 1] - (double)inLow[num3 + 1]);
							}
							else
							{
								float num25;
								if (rangeType == RangeType.Shadows)
								{
									float num21 = inClose[num3 + 1];
									float num22 = inOpen[num3 + 1];
									float num23 = ((!((double)num21 >= (double)num22)) ? num22 : num21);
									float num24 = ((!((double)num21 >= (double)num22)) ? num21 : num22);
									num25 = (float)((double)num24 - (double)inLow[num3 + 1] + ((double)inHigh[num3 + 1] - (double)num23));
								}
								else
								{
									num25 = 0f;
								}
								num20 = num25;
							}
							num19 = num20;
						}
						array[1] += num19;
						num3++;
						num4--;
					}
					while (num4 != 0);
				}
				int num26 = startIdx;
				int num27 = 0;
				do
				{
					float num28 = inClose[num26 - 3];
					float num29 = inOpen[num26 - 3];
					if (!((double)num28 >= (double)num29) && !((double)inClose[num26 - 2] >= (double)inOpen[num26 - 2]) && !((double)inClose[num26 - 1] >= (double)inOpen[num26 - 1]) && !((double)inClose[num26] >= (double)inOpen[num26]))
					{
						float num30 = ((!((double)num28 >= (double)num29)) ? num28 : num29);
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num31 = candleSetting.avgPeriod;
						double num32;
						RangeType rangeType;
						if (num31 != 0.0)
						{
							num32 = array[3] / num31;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num33;
							if (rangeType == RangeType.RealBody)
							{
								num33 = (float)(double)Math.Abs((float)((double)num28 - (double)num29));
							}
							else
							{
								float num34;
								if (rangeType == RangeType.HighLow)
								{
									num34 = (float)((double)inHigh[num26 - 3] - (double)inLow[num26 - 3]);
								}
								else
								{
									float num37;
									if (rangeType == RangeType.Shadows)
									{
										float num35 = ((!((double)num28 >= (double)num29)) ? num29 : num28);
										float num36 = ((!((double)num28 >= (double)num29)) ? num28 : num29);
										num37 = (float)((double)num36 - (double)inLow[num26 - 3] + ((double)inHigh[num26 - 3] - (double)num35));
									}
									else
									{
										num37 = 0f;
									}
									num34 = num37;
								}
								num33 = num34;
							}
							num32 = num33;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num38 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num39 = inLow[num26 - 3];
						if ((double)num30 - (double)num39 < candleSetting2.factor * num32 / num38)
						{
							num28 = inClose[num26 - 3];
							num29 = inOpen[num26 - 3];
							float num40 = ((!((double)num28 >= (double)num29)) ? num29 : num28);
							num31 = candleSetting2.avgPeriod;
							double num41;
							if (num31 != 0.0)
							{
								num41 = array[3] / num31;
							}
							else
							{
								float num42;
								if (rangeType == RangeType.RealBody)
								{
									num42 = (float)(double)Math.Abs((float)((double)num28 - (double)num29));
								}
								else
								{
									float num43;
									if (rangeType == RangeType.HighLow)
									{
										num43 = (float)((double)inHigh[num26 - 3] - (double)num39);
									}
									else
									{
										float num46;
										if (rangeType == RangeType.Shadows)
										{
											float num44 = ((!((double)num28 >= (double)num29)) ? num29 : num28);
											float num45 = ((!((double)num28 >= (double)num29)) ? num28 : num29);
											num46 = (float)((double)inHigh[num26 - 3] - (double)num44 + ((double)num45 - (double)num39));
										}
										else
										{
											num46 = 0f;
										}
										num43 = num46;
									}
									num42 = num43;
								}
								num41 = num42;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num47 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num26 - 3] - (double)num40 < candleSetting3.factor * num41 / num47)
							{
								float num48 = inClose[num26 - 2];
								float num49 = inOpen[num26 - 2];
								float num50 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
								num31 = candleSetting3.avgPeriod;
								double num51;
								if (num31 != 0.0)
								{
									num51 = array[2] / num31;
								}
								else
								{
									float num52;
									if (rangeType == RangeType.RealBody)
									{
										num52 = (float)(double)Math.Abs((float)((double)num48 - (double)num49));
									}
									else
									{
										float num53;
										if (rangeType == RangeType.HighLow)
										{
											num53 = (float)((double)inHigh[num26 - 2] - (double)inLow[num26 - 2]);
										}
										else
										{
											float num56;
											if (rangeType == RangeType.Shadows)
											{
												float num54 = ((!((double)num48 >= (double)num49)) ? num49 : num48);
												float num55 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
												num56 = (float)((double)num55 - (double)inLow[num26 - 2] + ((double)inHigh[num26 - 2] - (double)num54));
											}
											else
											{
												num56 = 0f;
											}
											num53 = num56;
										}
										num52 = num53;
									}
									num51 = num52;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[7];
								rangeType = candleSetting4.rangeType;
								double num57 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								float num58 = inLow[num26 - 2];
								if ((double)num50 - (double)num58 < candleSetting4.factor * num51 / num57)
								{
									num48 = inClose[num26 - 2];
									num49 = inOpen[num26 - 2];
									float num59 = ((!((double)num48 >= (double)num49)) ? num49 : num48);
									num31 = candleSetting4.avgPeriod;
									double num60;
									if (num31 != 0.0)
									{
										num60 = array[2] / num31;
									}
									else
									{
										float num61;
										if (rangeType == RangeType.RealBody)
										{
											num61 = (float)(double)Math.Abs((float)((double)num48 - (double)num49));
										}
										else
										{
											float num62;
											if (rangeType == RangeType.HighLow)
											{
												num62 = (float)((double)inHigh[num26 - 2] - (double)num58);
											}
											else
											{
												float num65;
												if (rangeType == RangeType.Shadows)
												{
													float num63 = ((!((double)num48 >= (double)num49)) ? num49 : num48);
													float num64 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
													num65 = (float)((double)inHigh[num26 - 2] - (double)num63 + ((double)num64 - (double)num58));
												}
												else
												{
													num65 = 0f;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[7];
									rangeType = candleSetting5.rangeType;
									double num66 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if ((double)inHigh[num26 - 2] - (double)num59 < candleSetting5.factor * num60 / num66)
									{
										float num67 = inOpen[num26 - 1];
										float num68 = inClose[num26 - 1];
										float num69 = ((!((double)num67 > (double)num68)) ? num68 : num67);
										num49 = inOpen[num26 - 2];
										num48 = inClose[num26 - 2];
										float num70 = ((!((double)num49 < (double)num48)) ? num48 : num49);
										if ((double)num69 < (double)num70)
										{
											float num71 = ((!((double)num68 >= (double)num67)) ? num67 : num68);
											num31 = candleSetting5.avgPeriod;
											double num72;
											if (num31 != 0.0)
											{
												num72 = array[1] / num31;
											}
											else
											{
												float num73;
												if (rangeType == RangeType.RealBody)
												{
													num73 = (float)(double)Math.Abs((float)((double)num68 - (double)num67));
												}
												else
												{
													float num74;
													if (rangeType == RangeType.HighLow)
													{
														num74 = (float)((double)inHigh[num26 - 1] - (double)inLow[num26 - 1]);
													}
													else
													{
														float num77;
														if (rangeType == RangeType.Shadows)
														{
															float num75 = ((!((double)num68 >= (double)num67)) ? num67 : num68);
															float num76 = ((!((double)num68 >= (double)num67)) ? num68 : num67);
															num77 = (float)((double)num76 - (double)inLow[num26 - 1] + ((double)inHigh[num26 - 1] - (double)num75));
														}
														else
														{
															num77 = 0f;
														}
														num74 = num77;
													}
													num73 = num74;
												}
												num72 = num73;
											}
											CandleSetting candleSetting6 = Globals.candleSettings[7];
											double num78 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											float num79 = inHigh[num26 - 1];
											if ((double)num79 - (double)num71 > candleSetting6.factor * num72 / num78 && (double)num79 > (double)inClose[num26 - 2] && (double)inHigh[num26] > (double)num79 && (double)inLow[num26] < (double)inLow[num26 - 1])
											{
												outInteger[num27] = 100;
												num27++;
												goto IL_093d;
											}
										}
									}
								}
							}
						}
					}
					outInteger[num27] = 0;
					num27++;
					goto IL_093d;
					IL_093d:
					int num80 = 3;
					int num81 = num2 - 3;
					int num82 = num26 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num83;
						if (rangeType == RangeType.RealBody)
						{
							num83 = (float)(double)Math.Abs((float)((double)inClose[num81 + num82] - (double)inOpen[num81 + num82]));
						}
						else
						{
							float num84;
							if (rangeType == RangeType.HighLow)
							{
								num84 = (float)((double)inHigh[num81 + num82] - (double)inLow[num81 + num82]);
							}
							else
							{
								float num89;
								if (rangeType == RangeType.Shadows)
								{
									float num85 = inClose[num81 + num82];
									float num86 = inOpen[num81 + num82];
									float num87 = ((!((double)num85 >= (double)num86)) ? num86 : num85);
									float num88 = ((!((double)num85 >= (double)num86)) ? num85 : num86);
									num89 = (float)((double)num88 - (double)inLow[num81 + num82] + ((double)inHigh[num81 + num82] - (double)num87));
								}
								else
								{
									num89 = 0f;
								}
								num84 = num89;
							}
							num83 = num84;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num90;
						if (rangeType == RangeType.RealBody)
						{
							num90 = (float)(double)Math.Abs((float)((double)inClose[num81] - (double)inOpen[num81]));
						}
						else
						{
							float num91;
							if (rangeType == RangeType.HighLow)
							{
								num91 = (float)((double)inHigh[num81] - (double)inLow[num81]);
							}
							else
							{
								float num96;
								if (rangeType == RangeType.Shadows)
								{
									float num92 = inClose[num81];
									float num93 = inOpen[num81];
									float num94 = ((!((double)num92 >= (double)num93)) ? num93 : num92);
									float num95 = ((!((double)num92 >= (double)num93)) ? num92 : num93);
									num96 = (float)((double)num95 - (double)inLow[num81] + ((double)inHigh[num81] - (double)num94));
								}
								else
								{
									num96 = 0f;
								}
								num91 = num96;
							}
							num90 = num91;
						}
						array[num80] += num83 - num90;
						num80--;
						num81++;
					}
					while (num80 >= 1);
					num26++;
					num2++;
				}
				while (num26 <= endIdx);
				outNBElement = num27;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlConcealBabysWall(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[4];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlConcealBabysWallLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				int num2 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num2 < startIdx)
				{
					int num3 = num2 - 2;
					int num4 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num3 - 1] - inLow[num3 - 1];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num3 - 1];
									double num8 = inOpen[num3 - 1];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num3 - 1] + (inHigh[num3 - 1] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[3] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						double num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = Math.Abs(inClose[num3] - inOpen[num3]);
						}
						else
						{
							double num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = inHigh[num3] - inLow[num3];
							}
							else
							{
								double num18;
								if (rangeType == RangeType.Shadows)
								{
									double num14 = inClose[num3];
									double num15 = inOpen[num3];
									double num16 = ((!(num14 >= num15)) ? num15 : num14);
									double num17 = ((!(num14 >= num15)) ? num14 : num15);
									num18 = num17 - inLow[num3] + (inHigh[num3] - num16);
								}
								else
								{
									num18 = 0.0;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[2] += num12;
						rangeType = Globals.candleSettings[7].rangeType;
						double num19;
						if (rangeType == RangeType.RealBody)
						{
							num19 = Math.Abs(inClose[num3 + 1] - inOpen[num3 + 1]);
						}
						else
						{
							double num20;
							if (rangeType == RangeType.HighLow)
							{
								num20 = inHigh[num3 + 1] - inLow[num3 + 1];
							}
							else
							{
								double num25;
								if (rangeType == RangeType.Shadows)
								{
									double num21 = inClose[num3 + 1];
									double num22 = inOpen[num3 + 1];
									double num23 = ((!(num21 >= num22)) ? num22 : num21);
									double num24 = ((!(num21 >= num22)) ? num21 : num22);
									num25 = num24 - inLow[num3 + 1] + (inHigh[num3 + 1] - num23);
								}
								else
								{
									num25 = 0.0;
								}
								num20 = num25;
							}
							num19 = num20;
						}
						array[1] += num19;
						num3++;
						num4--;
					}
					while (num4 != 0);
				}
				int num26 = startIdx;
				int num27 = 0;
				do
				{
					double num28 = inClose[num26 - 3];
					double num29 = inOpen[num26 - 3];
					if (!(num28 >= num29) && !(inClose[num26 - 2] >= inOpen[num26 - 2]) && !(inClose[num26 - 1] >= inOpen[num26 - 1]) && !(inClose[num26] >= inOpen[num26]))
					{
						double num30 = ((!(num28 >= num29)) ? num28 : num29);
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num31 = candleSetting.avgPeriod;
						double num32;
						RangeType rangeType;
						if (num31 != 0.0)
						{
							num32 = array[3] / num31;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num33;
							if (rangeType == RangeType.RealBody)
							{
								num33 = Math.Abs(num28 - num29);
							}
							else
							{
								double num34;
								if (rangeType == RangeType.HighLow)
								{
									num34 = inHigh[num26 - 3] - inLow[num26 - 3];
								}
								else
								{
									double num37;
									if (rangeType == RangeType.Shadows)
									{
										double num35 = ((!(num28 >= num29)) ? num29 : num28);
										double num36 = ((!(num28 >= num29)) ? num28 : num29);
										num37 = num36 - inLow[num26 - 3] + (inHigh[num26 - 3] - num35);
									}
									else
									{
										num37 = 0.0;
									}
									num34 = num37;
								}
								num33 = num34;
							}
							num32 = num33;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num38 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num39 = inLow[num26 - 3];
						if (num30 - num39 < candleSetting2.factor * num32 / num38)
						{
							num28 = inClose[num26 - 3];
							num29 = inOpen[num26 - 3];
							double num40 = ((!(num28 >= num29)) ? num29 : num28);
							num31 = candleSetting2.avgPeriod;
							double num41;
							if (num31 != 0.0)
							{
								num41 = array[3] / num31;
							}
							else
							{
								double num42;
								if (rangeType == RangeType.RealBody)
								{
									num42 = Math.Abs(num28 - num29);
								}
								else
								{
									double num43;
									if (rangeType == RangeType.HighLow)
									{
										num43 = inHigh[num26 - 3] - num39;
									}
									else
									{
										double num46;
										if (rangeType == RangeType.Shadows)
										{
											double num44 = ((!(num28 >= num29)) ? num29 : num28);
											double num45 = ((!(num28 >= num29)) ? num28 : num29);
											num46 = inHigh[num26 - 3] - num44 + (num45 - num39);
										}
										else
										{
											num46 = 0.0;
										}
										num43 = num46;
									}
									num42 = num43;
								}
								num41 = num42;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num47 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num26 - 3] - num40 < candleSetting3.factor * num41 / num47)
							{
								double num48 = inClose[num26 - 2];
								double num49 = inOpen[num26 - 2];
								double num50 = ((!(num48 >= num49)) ? num48 : num49);
								num31 = candleSetting3.avgPeriod;
								double num51;
								if (num31 != 0.0)
								{
									num51 = array[2] / num31;
								}
								else
								{
									double num52;
									if (rangeType == RangeType.RealBody)
									{
										num52 = Math.Abs(num48 - num49);
									}
									else
									{
										double num53;
										if (rangeType == RangeType.HighLow)
										{
											num53 = inHigh[num26 - 2] - inLow[num26 - 2];
										}
										else
										{
											double num56;
											if (rangeType == RangeType.Shadows)
											{
												double num54 = ((!(num48 >= num49)) ? num49 : num48);
												double num55 = ((!(num48 >= num49)) ? num48 : num49);
												num56 = num55 - inLow[num26 - 2] + (inHigh[num26 - 2] - num54);
											}
											else
											{
												num56 = 0.0;
											}
											num53 = num56;
										}
										num52 = num53;
									}
									num51 = num52;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[7];
								rangeType = candleSetting4.rangeType;
								double num57 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								double num58 = inLow[num26 - 2];
								if (num50 - num58 < candleSetting4.factor * num51 / num57)
								{
									num48 = inClose[num26 - 2];
									num49 = inOpen[num26 - 2];
									double num59 = ((!(num48 >= num49)) ? num49 : num48);
									num31 = candleSetting4.avgPeriod;
									double num60;
									if (num31 != 0.0)
									{
										num60 = array[2] / num31;
									}
									else
									{
										double num61;
										if (rangeType == RangeType.RealBody)
										{
											num61 = Math.Abs(num48 - num49);
										}
										else
										{
											double num62;
											if (rangeType == RangeType.HighLow)
											{
												num62 = inHigh[num26 - 2] - num58;
											}
											else
											{
												double num65;
												if (rangeType == RangeType.Shadows)
												{
													double num63 = ((!(num48 >= num49)) ? num49 : num48);
													double num64 = ((!(num48 >= num49)) ? num48 : num49);
													num65 = inHigh[num26 - 2] - num63 + (num64 - num58);
												}
												else
												{
													num65 = 0.0;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[7];
									rangeType = candleSetting5.rangeType;
									double num66 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if (inHigh[num26 - 2] - num59 < candleSetting5.factor * num60 / num66)
									{
										double num67 = inOpen[num26 - 1];
										double num68 = inClose[num26 - 1];
										double num69 = ((!(num67 > num68)) ? num68 : num67);
										num49 = inOpen[num26 - 2];
										num48 = inClose[num26 - 2];
										double num70 = ((!(num49 < num48)) ? num48 : num49);
										if (num69 < num70)
										{
											double num71 = ((!(num68 >= num67)) ? num67 : num68);
											num31 = candleSetting5.avgPeriod;
											double num72;
											if (num31 != 0.0)
											{
												num72 = array[1] / num31;
											}
											else
											{
												double num73;
												if (rangeType == RangeType.RealBody)
												{
													num73 = Math.Abs(num68 - num67);
												}
												else
												{
													double num74;
													if (rangeType == RangeType.HighLow)
													{
														num74 = inHigh[num26 - 1] - inLow[num26 - 1];
													}
													else
													{
														double num77;
														if (rangeType == RangeType.Shadows)
														{
															double num75 = ((!(num68 >= num67)) ? num67 : num68);
															double num76 = ((!(num68 >= num67)) ? num68 : num67);
															num77 = num76 - inLow[num26 - 1] + (inHigh[num26 - 1] - num75);
														}
														else
														{
															num77 = 0.0;
														}
														num74 = num77;
													}
													num73 = num74;
												}
												num72 = num73;
											}
											CandleSetting candleSetting6 = Globals.candleSettings[7];
											double num78 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											double num79 = inHigh[num26 - 1];
											if (num79 - num71 > candleSetting6.factor * num72 / num78 && num79 > inClose[num26 - 2] && inHigh[num26] > num79 && inLow[num26] < inLow[num26 - 1])
											{
												outInteger[num27] = 100;
												num27++;
												goto IL_08a2;
											}
										}
									}
								}
							}
						}
					}
					outInteger[num27] = 0;
					num27++;
					goto IL_08a2;
					IL_08a2:
					int num80 = 3;
					int num81 = num2 - 3;
					int num82 = num26 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num83;
						if (rangeType == RangeType.RealBody)
						{
							num83 = Math.Abs(inClose[num81 + num82] - inOpen[num81 + num82]);
						}
						else
						{
							double num84;
							if (rangeType == RangeType.HighLow)
							{
								num84 = inHigh[num81 + num82] - inLow[num81 + num82];
							}
							else
							{
								double num89;
								if (rangeType == RangeType.Shadows)
								{
									double num85 = inClose[num81 + num82];
									double num86 = inOpen[num81 + num82];
									double num87 = ((!(num85 >= num86)) ? num86 : num85);
									double num88 = ((!(num85 >= num86)) ? num85 : num86);
									num89 = num88 - inLow[num81 + num82] + (inHigh[num81 + num82] - num87);
								}
								else
								{
									num89 = 0.0;
								}
								num84 = num89;
							}
							num83 = num84;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num90;
						if (rangeType == RangeType.RealBody)
						{
							num90 = Math.Abs(inClose[num81] - inOpen[num81]);
						}
						else
						{
							double num91;
							if (rangeType == RangeType.HighLow)
							{
								num91 = inHigh[num81] - inLow[num81];
							}
							else
							{
								double num96;
								if (rangeType == RangeType.Shadows)
								{
									double num92 = inClose[num81];
									double num93 = inOpen[num81];
									double num94 = ((!(num92 >= num93)) ? num93 : num92);
									double num95 = ((!(num92 >= num93)) ? num92 : num93);
									num96 = num95 - inLow[num81] + (inHigh[num81] - num94);
								}
								else
								{
									num96 = 0.0;
								}
								num91 = num96;
							}
							num90 = num91;
						}
						array[num80] += num83 - num90;
						num80--;
						num81++;
					}
					while (num80 >= 1);
					num26++;
					num2++;
				}
				while (num26 <= endIdx);
				outNBElement = num27;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlCounterAttackLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[10].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlCounterAttack(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlCounterAttackLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				array[1] = 0.0;
				array[0] = 0.0;
				int num4 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num5 = num3 - 1;
					int num6 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num5] - (double)inLow[num5]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num5];
									float num10 = inOpen[num5];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num5++;
						num6--;
					}
					while (num6 != 0);
				}
				int num14 = num4;
				if (num4 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14 - 1] - (double)inOpen[num14 - 1]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14 - 1] - (double)inLow[num14 - 1]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num17 = inClose[num14 - 1];
									float num18 = inOpen[num14 - 1];
									float num19 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
									float num20 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
									num21 = (float)((double)num20 - (double)inLow[num14 - 1] + ((double)inHigh[num14 - 1] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num16 = num21;
							}
							num15 = num16;
						}
						array[1] += num15;
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num22;
						if (rangeType2 == RangeType.RealBody)
						{
							num22 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num23;
							if (rangeType2 == RangeType.HighLow)
							{
								num23 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num28;
								if (rangeType2 == RangeType.Shadows)
								{
									float num24 = inClose[num14];
									float num25 = inOpen[num14];
									float num26 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
									float num27 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
									num28 = (float)((double)num27 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num26));
								}
								else
								{
									num28 = 0f;
								}
								num23 = num28;
							}
							num22 = num23;
						}
						array[0] += num22;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num29 = startIdx;
				int num30 = 0;
				do
				{
					float num17 = inClose[num29 - 1];
					float num18 = inOpen[num29 - 1];
					int num31 = (((double)num17 >= (double)num18) ? 1 : (-1));
					int num32 = (((double)inClose[num29] >= (double)inOpen[num29]) ? 1 : (-1));
					RangeType rangeType;
					if (num31 == -num32)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num33 = candleSetting.avgPeriod;
						double num34;
						if (num33 != 0.0)
						{
							num34 = array[1] / num33;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							float num35;
							if (rangeType2 == RangeType.RealBody)
							{
								num35 = (float)(double)Math.Abs((float)((double)num17 - (double)num18));
							}
							else
							{
								float num36;
								if (rangeType2 == RangeType.HighLow)
								{
									num36 = (float)((double)inHigh[num29 - 1] - (double)inLow[num29 - 1]);
								}
								else
								{
									float num39;
									if (rangeType2 == RangeType.Shadows)
									{
										float num37 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
										float num38 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
										num39 = (float)((double)num38 - (double)inLow[num29 - 1] + ((double)inHigh[num29 - 1] - (double)num37));
									}
									else
									{
										num39 = 0f;
									}
									num36 = num39;
								}
								num35 = num36;
							}
							num34 = num35;
						}
						double num40 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting2 = Globals.candleSettings[0];
						if ((double)Math.Abs((float)((double)inClose[num29 - 1] - (double)inOpen[num29 - 1])) > candleSetting2.factor * num34 / num40)
						{
							num33 = candleSetting2.avgPeriod;
							double num41;
							if (num33 != 0.0)
							{
								num41 = array[0] / num33;
							}
							else
							{
								RangeType rangeType2 = candleSetting2.rangeType;
								float num42;
								if (rangeType2 == RangeType.RealBody)
								{
									num42 = (float)(double)Math.Abs((float)((double)inClose[num29] - (double)inOpen[num29]));
								}
								else
								{
									float num43;
									if (rangeType2 == RangeType.HighLow)
									{
										num43 = (float)((double)inHigh[num29] - (double)inLow[num29]);
									}
									else
									{
										float num46;
										if (rangeType2 == RangeType.Shadows)
										{
											float num24 = inClose[num29];
											float num25 = inOpen[num29];
											float num44 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
											float num45 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
											num46 = (float)((double)num45 - (double)inLow[num29] + ((double)inHigh[num29] - (double)num44));
										}
										else
										{
											num46 = 0f;
										}
										num43 = num46;
									}
									num42 = num43;
								}
								num41 = num42;
							}
							double num47 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							candleSettings = Globals.candleSettings;
							if ((double)Math.Abs((float)((double)inClose[num29] - (double)inOpen[num29])) > candleSettings[0].factor * num41 / num47)
							{
								CandleSetting candleSetting3 = candleSettings[10];
								double num48 = candleSetting3.avgPeriod;
								double num49;
								if (num48 != 0.0)
								{
									num49 = num2 / num48;
								}
								else
								{
									rangeType = candleSetting3.rangeType;
									float num50;
									if (rangeType == RangeType.RealBody)
									{
										num50 = (float)(double)Math.Abs((float)((double)inClose[num29 - 1] - (double)inOpen[num29 - 1]));
									}
									else
									{
										float num51;
										if (rangeType == RangeType.HighLow)
										{
											num51 = (float)((double)inHigh[num29 - 1] - (double)inLow[num29 - 1]);
										}
										else
										{
											float num54;
											if (rangeType == RangeType.Shadows)
											{
												num17 = inClose[num29 - 1];
												num18 = inOpen[num29 - 1];
												float num52 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
												float num53 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
												num54 = (float)((double)num53 - (double)inLow[num29 - 1] + ((double)inHigh[num29 - 1] - (double)num52));
											}
											else
											{
												num54 = 0f;
											}
											num51 = num54;
										}
										num50 = num51;
									}
									num49 = num50;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[10];
								rangeType = candleSetting4.rangeType;
								double num55 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								num17 = inClose[num29 - 1];
								if ((double)inClose[num29] <= candleSetting4.factor * num49 / num55 + (double)num17)
								{
									num48 = candleSetting4.avgPeriod;
									double num56;
									if (num48 != 0.0)
									{
										num56 = num2 / num48;
									}
									else
									{
										float num57;
										if (rangeType == RangeType.RealBody)
										{
											num57 = (float)(double)Math.Abs((float)((double)num17 - (double)inOpen[num29 - 1]));
										}
										else
										{
											float num58;
											if (rangeType == RangeType.HighLow)
											{
												num58 = (float)((double)inHigh[num29 - 1] - (double)inLow[num29 - 1]);
											}
											else
											{
												float num61;
												if (rangeType == RangeType.Shadows)
												{
													num18 = inOpen[num29 - 1];
													float num59 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
													float num60 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
													num61 = (float)((double)num60 - (double)inLow[num29 - 1] + ((double)inHigh[num29 - 1] - (double)num59));
												}
												else
												{
													num61 = 0f;
												}
												num58 = num61;
											}
											num57 = num58;
										}
										num56 = num57;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[10];
									double num62 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									float num24 = inClose[num29];
									if ((double)num24 >= (double)inClose[num29 - 1] - candleSetting5.factor * num56 / num62)
									{
										int num63 = (((double)num24 >= (double)inOpen[num29]) ? 1 : (-1));
										outInteger[num30] = num63 * 100;
										num30++;
										goto IL_07b3;
									}
								}
							}
						}
					}
					outInteger[num30] = 0;
					num30++;
					goto IL_07b3;
					IL_07b3:
					rangeType = Globals.candleSettings[10].rangeType;
					float num64;
					if (rangeType == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num29 - 1] - (double)inOpen[num29 - 1]));
					}
					else
					{
						float num65;
						if (rangeType == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num29 - 1] - (double)inLow[num29 - 1]);
						}
						else
						{
							float num68;
							if (rangeType == RangeType.Shadows)
							{
								num17 = inClose[num29 - 1];
								num18 = inOpen[num29 - 1];
								float num66 = ((!((double)num17 >= (double)num18)) ? num18 : num17);
								float num67 = ((!((double)num17 >= (double)num18)) ? num17 : num18);
								num68 = (float)((double)num67 - (double)inLow[num29 - 1] + ((double)inHigh[num29 - 1] - (double)num66));
							}
							else
							{
								num68 = 0f;
							}
							num65 = num68;
						}
						num64 = num65;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num69;
					if (rangeType == RangeType.RealBody)
					{
						num69 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
					}
					else
					{
						float num70;
						if (rangeType == RangeType.HighLow)
						{
							num70 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
						}
						else
						{
							float num75;
							if (rangeType == RangeType.Shadows)
							{
								float num71 = inClose[num3 - 1];
								float num72 = inOpen[num3 - 1];
								float num73 = ((!((double)num71 >= (double)num72)) ? num72 : num71);
								float num74 = ((!((double)num71 >= (double)num72)) ? num71 : num72);
								num75 = (float)((double)num74 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num73));
							}
							else
							{
								num75 = 0f;
							}
							num70 = num75;
						}
						num69 = num70;
					}
					num2 = (double)(num64 - num69) + num2;
					int num76 = 1;
					int num77 = num4 - 1;
					int num78 = num29 - num4;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num79;
						if (rangeType2 == RangeType.RealBody)
						{
							num79 = (float)(double)Math.Abs((float)((double)inClose[num77 + num78] - (double)inOpen[num77 + num78]));
						}
						else
						{
							float num80;
							if (rangeType2 == RangeType.HighLow)
							{
								num80 = (float)((double)inHigh[num77 + num78] - (double)inLow[num77 + num78]);
							}
							else
							{
								float num85;
								if (rangeType2 == RangeType.Shadows)
								{
									float num81 = inClose[num77 + num78];
									float num82 = inOpen[num77 + num78];
									float num83 = ((!((double)num81 >= (double)num82)) ? num82 : num81);
									float num84 = ((!((double)num81 >= (double)num82)) ? num81 : num82);
									num85 = (float)((double)num84 - (double)inLow[num77 + num78] + ((double)inHigh[num77 + num78] - (double)num83));
								}
								else
								{
									num85 = 0f;
								}
								num80 = num85;
							}
							num79 = num80;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num86;
						if (rangeType2 == RangeType.RealBody)
						{
							num86 = (float)(double)Math.Abs((float)((double)inClose[num77] - (double)inOpen[num77]));
						}
						else
						{
							float num87;
							if (rangeType2 == RangeType.HighLow)
							{
								num87 = (float)((double)inHigh[num77] - (double)inLow[num77]);
							}
							else
							{
								float num92;
								if (rangeType2 == RangeType.Shadows)
								{
									float num88 = inClose[num77];
									float num89 = inOpen[num77];
									float num90 = ((!((double)num88 >= (double)num89)) ? num89 : num88);
									float num91 = ((!((double)num88 >= (double)num89)) ? num88 : num89);
									num92 = (float)((double)num91 - (double)inLow[num77] + ((double)inHigh[num77] - (double)num90));
								}
								else
								{
									num92 = 0f;
								}
								num87 = num92;
							}
							num86 = num87;
						}
						array[num76] += num79 - num86;
						num76--;
						num77++;
					}
					while (num76 >= 0);
					num29++;
					num3++;
					num4++;
				}
				while (num29 <= endIdx);
				outNBElement = num30;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlCounterAttack(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlCounterAttackLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				array[1] = 0.0;
				array[0] = 0.0;
				int num4 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num5 = num3 - 1;
					int num6 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num5] - inOpen[num5]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num5] - inLow[num5];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num5];
									double num10 = inOpen[num5];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num5] + (inHigh[num5] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num5++;
						num6--;
					}
					while (num6 != 0);
				}
				int num14 = num4;
				if (num4 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14 - 1] - inOpen[num14 - 1]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14 - 1] - inLow[num14 - 1];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num17 = inClose[num14 - 1];
									double num18 = inOpen[num14 - 1];
									double num19 = ((!(num17 >= num18)) ? num18 : num17);
									double num20 = ((!(num17 >= num18)) ? num17 : num18);
									num21 = num20 - inLow[num14 - 1] + (inHigh[num14 - 1] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num16 = num21;
							}
							num15 = num16;
						}
						array[1] += num15;
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num22;
						if (rangeType2 == RangeType.RealBody)
						{
							num22 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num23;
							if (rangeType2 == RangeType.HighLow)
							{
								num23 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num28;
								if (rangeType2 == RangeType.Shadows)
								{
									double num24 = inClose[num14];
									double num25 = inOpen[num14];
									double num26 = ((!(num24 >= num25)) ? num25 : num24);
									double num27 = ((!(num24 >= num25)) ? num24 : num25);
									num28 = num27 - inLow[num14] + (inHigh[num14] - num26);
								}
								else
								{
									num28 = 0.0;
								}
								num23 = num28;
							}
							num22 = num23;
						}
						array[0] += num22;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num29 = startIdx;
				int num30 = 0;
				do
				{
					double num17 = inClose[num29 - 1];
					double num18 = inOpen[num29 - 1];
					int num31 = ((num17 >= num18) ? 1 : (-1));
					int num32 = ((inClose[num29] >= inOpen[num29]) ? 1 : (-1));
					RangeType rangeType;
					if (num31 == -num32)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num33 = candleSetting.avgPeriod;
						double num34;
						if (num33 != 0.0)
						{
							num34 = array[1] / num33;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							double num35;
							if (rangeType2 == RangeType.RealBody)
							{
								num35 = Math.Abs(num17 - num18);
							}
							else
							{
								double num36;
								if (rangeType2 == RangeType.HighLow)
								{
									num36 = inHigh[num29 - 1] - inLow[num29 - 1];
								}
								else
								{
									double num39;
									if (rangeType2 == RangeType.Shadows)
									{
										double num37 = ((!(num17 >= num18)) ? num18 : num17);
										double num38 = ((!(num17 >= num18)) ? num17 : num18);
										num39 = num38 - inLow[num29 - 1] + (inHigh[num29 - 1] - num37);
									}
									else
									{
										num39 = 0.0;
									}
									num36 = num39;
								}
								num35 = num36;
							}
							num34 = num35;
						}
						double num40 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting2 = Globals.candleSettings[0];
						if (Math.Abs(inClose[num29 - 1] - inOpen[num29 - 1]) > candleSetting2.factor * num34 / num40)
						{
							num33 = candleSetting2.avgPeriod;
							double num41;
							if (num33 != 0.0)
							{
								num41 = array[0] / num33;
							}
							else
							{
								RangeType rangeType2 = candleSetting2.rangeType;
								double num42;
								if (rangeType2 == RangeType.RealBody)
								{
									num42 = Math.Abs(inClose[num29] - inOpen[num29]);
								}
								else
								{
									double num43;
									if (rangeType2 == RangeType.HighLow)
									{
										num43 = inHigh[num29] - inLow[num29];
									}
									else
									{
										double num46;
										if (rangeType2 == RangeType.Shadows)
										{
											double num24 = inClose[num29];
											double num25 = inOpen[num29];
											double num44 = ((!(num24 >= num25)) ? num25 : num24);
											double num45 = ((!(num24 >= num25)) ? num24 : num25);
											num46 = num45 - inLow[num29] + (inHigh[num29] - num44);
										}
										else
										{
											num46 = 0.0;
										}
										num43 = num46;
									}
									num42 = num43;
								}
								num41 = num42;
							}
							double num47 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							candleSettings = Globals.candleSettings;
							if (Math.Abs(inClose[num29] - inOpen[num29]) > candleSettings[0].factor * num41 / num47)
							{
								CandleSetting candleSetting3 = candleSettings[10];
								double num48 = candleSetting3.avgPeriod;
								double num49;
								if (num48 != 0.0)
								{
									num49 = num2 / num48;
								}
								else
								{
									rangeType = candleSetting3.rangeType;
									double num50;
									if (rangeType == RangeType.RealBody)
									{
										num50 = Math.Abs(inClose[num29 - 1] - inOpen[num29 - 1]);
									}
									else
									{
										double num51;
										if (rangeType == RangeType.HighLow)
										{
											num51 = inHigh[num29 - 1] - inLow[num29 - 1];
										}
										else
										{
											double num54;
											if (rangeType == RangeType.Shadows)
											{
												num17 = inClose[num29 - 1];
												num18 = inOpen[num29 - 1];
												double num52 = ((!(num17 >= num18)) ? num18 : num17);
												double num53 = ((!(num17 >= num18)) ? num17 : num18);
												num54 = num53 - inLow[num29 - 1] + (inHigh[num29 - 1] - num52);
											}
											else
											{
												num54 = 0.0;
											}
											num51 = num54;
										}
										num50 = num51;
									}
									num49 = num50;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[10];
								rangeType = candleSetting4.rangeType;
								double num55 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								num17 = inClose[num29 - 1];
								if (inClose[num29] <= candleSetting4.factor * num49 / num55 + num17)
								{
									num48 = candleSetting4.avgPeriod;
									double num56;
									if (num48 != 0.0)
									{
										num56 = num2 / num48;
									}
									else
									{
										double num57;
										if (rangeType == RangeType.RealBody)
										{
											num57 = Math.Abs(num17 - inOpen[num29 - 1]);
										}
										else
										{
											double num58;
											if (rangeType == RangeType.HighLow)
											{
												num58 = inHigh[num29 - 1] - inLow[num29 - 1];
											}
											else
											{
												double num61;
												if (rangeType == RangeType.Shadows)
												{
													num18 = inOpen[num29 - 1];
													double num59 = ((!(num17 >= num18)) ? num18 : num17);
													double num60 = ((!(num17 >= num18)) ? num17 : num18);
													num61 = num60 - inLow[num29 - 1] + (inHigh[num29 - 1] - num59);
												}
												else
												{
													num61 = 0.0;
												}
												num58 = num61;
											}
											num57 = num58;
										}
										num56 = num57;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[10];
									double num62 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									double num24 = inClose[num29];
									if (num24 >= inClose[num29 - 1] - candleSetting5.factor * num56 / num62)
									{
										int num63 = ((num24 >= inOpen[num29]) ? 1 : (-1));
										outInteger[num30] = num63 * 100;
										num30++;
										goto IL_0736;
									}
								}
							}
						}
					}
					outInteger[num30] = 0;
					num30++;
					goto IL_0736;
					IL_0736:
					rangeType = Globals.candleSettings[10].rangeType;
					double num64;
					if (rangeType == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num29 - 1] - inOpen[num29 - 1]);
					}
					else
					{
						double num65;
						if (rangeType == RangeType.HighLow)
						{
							num65 = inHigh[num29 - 1] - inLow[num29 - 1];
						}
						else
						{
							double num68;
							if (rangeType == RangeType.Shadows)
							{
								num17 = inClose[num29 - 1];
								num18 = inOpen[num29 - 1];
								double num66 = ((!(num17 >= num18)) ? num18 : num17);
								double num67 = ((!(num17 >= num18)) ? num17 : num18);
								num68 = num67 - inLow[num29 - 1] + (inHigh[num29 - 1] - num66);
							}
							else
							{
								num68 = 0.0;
							}
							num65 = num68;
						}
						num64 = num65;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num69;
					if (rangeType == RangeType.RealBody)
					{
						num69 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
					}
					else
					{
						double num70;
						if (rangeType == RangeType.HighLow)
						{
							num70 = inHigh[num3 - 1] - inLow[num3 - 1];
						}
						else
						{
							double num75;
							if (rangeType == RangeType.Shadows)
							{
								double num71 = inClose[num3 - 1];
								double num72 = inOpen[num3 - 1];
								double num73 = ((!(num71 >= num72)) ? num72 : num71);
								double num74 = ((!(num71 >= num72)) ? num71 : num72);
								num75 = num74 - inLow[num3 - 1] + (inHigh[num3 - 1] - num73);
							}
							else
							{
								num75 = 0.0;
							}
							num70 = num75;
						}
						num69 = num70;
					}
					num2 = num64 - num69 + num2;
					int num76 = 1;
					int num77 = num4 - 1;
					int num78 = num29 - num4;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num79;
						if (rangeType2 == RangeType.RealBody)
						{
							num79 = Math.Abs(inClose[num78 + num77] - inOpen[num78 + num77]);
						}
						else
						{
							double num80;
							if (rangeType2 == RangeType.HighLow)
							{
								num80 = inHigh[num78 + num77] - inLow[num78 + num77];
							}
							else
							{
								double num85;
								if (rangeType2 == RangeType.Shadows)
								{
									double num81 = inClose[num78 + num77];
									double num82 = inOpen[num78 + num77];
									double num83 = ((!(num81 >= num82)) ? num82 : num81);
									double num84 = ((!(num81 >= num82)) ? num81 : num82);
									num85 = num84 - inLow[num78 + num77] + (inHigh[num78 + num77] - num83);
								}
								else
								{
									num85 = 0.0;
								}
								num80 = num85;
							}
							num79 = num80;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num86;
						if (rangeType2 == RangeType.RealBody)
						{
							num86 = Math.Abs(inClose[num77] - inOpen[num77]);
						}
						else
						{
							double num87;
							if (rangeType2 == RangeType.HighLow)
							{
								num87 = inHigh[num77] - inLow[num77];
							}
							else
							{
								double num92;
								if (rangeType2 == RangeType.Shadows)
								{
									double num88 = inClose[num77];
									double num89 = inOpen[num77];
									double num90 = ((!(num88 >= num89)) ? num89 : num88);
									double num91 = ((!(num88 >= num89)) ? num88 : num89);
									num92 = num91 - inLow[num77] + (inHigh[num77] - num90);
								}
								else
								{
									num92 = 0.0;
								}
								num87 = num92;
							}
							num86 = num87;
						}
						array[num76] += num79 - num86;
						num76--;
						num77++;
					}
					while (num76 >= 0);
					num29++;
					num3++;
					num4++;
				}
				while (num29 <= endIdx);
				outNBElement = num30;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlDarkCloudCoverLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			return Globals.candleSettings[0].avgPeriod + 1;
		}
		return -1;
	}

	public static RetCode CdlDarkCloudCover(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.5;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDarkCloudCoverLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					float num16 = inClose[num14];
					float num17 = inOpen[num14];
					RangeType rangeType;
					if ((double)num16 >= (double)num17)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = (float)(double)Math.Abs((float)((double)num16 - (double)num17));
							}
							else
							{
								float num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num24;
									if (rangeType == RangeType.Shadows)
									{
										float num22 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
										float num23 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
										num24 = (float)((double)num23 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num22));
									}
									else
									{
										num24 = 0f;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						double num25 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > Globals.candleSettings[0].factor * num19 / num25)
						{
							float num26 = inClose[num14 + 1];
							float num27 = inOpen[num14 + 1];
							if (!((double)num26 >= (double)num27) && (double)num27 > (double)inHigh[num14])
							{
								num17 = inOpen[num14];
								if ((double)num26 > (double)num17)
								{
									double num28 = inClose[num14];
									if ((double)num26 < num28 - (double)Math.Abs((float)(num28 - (double)num17)) * optInPenetration)
									{
										outInteger[num13] = -100;
										num13++;
										goto IL_0313;
									}
								}
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0313;
					IL_0313:
					rangeType = Globals.candleSettings[0].rangeType;
					float num29;
					if (rangeType == RangeType.RealBody)
					{
						num29 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num30;
						if (rangeType == RangeType.HighLow)
						{
							num30 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num33;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								float num31 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
								float num32 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
								num33 = (float)((double)num32 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num31));
							}
							else
							{
								num33 = 0f;
							}
							num30 = num33;
						}
						num29 = num30;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num34;
					if (rangeType == RangeType.RealBody)
					{
						num34 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
					}
					else
					{
						float num35;
						if (rangeType == RangeType.HighLow)
						{
							num35 = (float)((double)inHigh[num15] - (double)inLow[num15]);
						}
						else
						{
							float num40;
							if (rangeType == RangeType.Shadows)
							{
								float num36 = inClose[num15];
								float num37 = inOpen[num15];
								float num38 = ((!((double)num36 >= (double)num37)) ? num37 : num36);
								float num39 = ((!((double)num36 >= (double)num37)) ? num36 : num37);
								num40 = (float)((double)num39 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num38));
							}
							else
							{
								num40 = 0f;
							}
							num35 = num40;
						}
						num34 = num35;
					}
					num2 = (double)(num29 - num34) + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlDarkCloudCover(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.5;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDarkCloudCoverLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					double num16 = inClose[num14];
					double num17 = inOpen[num14];
					RangeType rangeType;
					if (num16 >= num17)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = Math.Abs(num16 - num17);
							}
							else
							{
								double num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num24;
									if (rangeType == RangeType.Shadows)
									{
										double num22 = num16;
										double num23 = num17;
										num24 = num23 - inLow[num14] + (inHigh[num14] - num22);
									}
									else
									{
										num24 = 0.0;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						double num25 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num14] - inOpen[num14]) > Globals.candleSettings[0].factor * num19 / num25)
						{
							double num26 = inClose[num14 + 1];
							double num27 = inOpen[num14 + 1];
							if (!(num26 >= num27) && num27 > inHigh[num14])
							{
								num17 = inOpen[num14];
								if (num26 > num17 && inClose[num14 + 1] < inClose[num14] - Math.Abs(inClose[num14] - num17) * optInPenetration)
								{
									outInteger[num13] = -100;
									num13++;
									goto IL_02ca;
								}
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_02ca;
					IL_02ca:
					rangeType = Globals.candleSettings[0].rangeType;
					double num28;
					if (rangeType == RangeType.RealBody)
					{
						num28 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num29;
						if (rangeType == RangeType.HighLow)
						{
							num29 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num32;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								double num30 = ((!(num16 >= num17)) ? num17 : num16);
								double num31 = ((!(num16 >= num17)) ? num16 : num17);
								num32 = num31 - inLow[num14] + (inHigh[num14] - num30);
							}
							else
							{
								num32 = 0.0;
							}
							num29 = num32;
						}
						num28 = num29;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num33;
					if (rangeType == RangeType.RealBody)
					{
						num33 = Math.Abs(inClose[num15] - inOpen[num15]);
					}
					else
					{
						double num34;
						if (rangeType == RangeType.HighLow)
						{
							num34 = inHigh[num15] - inLow[num15];
						}
						else
						{
							double num39;
							if (rangeType == RangeType.Shadows)
							{
								double num35 = inClose[num15];
								double num36 = inOpen[num15];
								double num37 = ((!(num35 >= num36)) ? num36 : num35);
								double num38 = ((!(num35 >= num36)) ? num35 : num36);
								num39 = num38 - inLow[num15] + (inHigh[num15] - num37);
							}
							else
							{
								num39 = 0.0;
							}
							num34 = num39;
						}
						num33 = num34;
					}
					num2 = num28 - num33 + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlDojiLookback()
	{
		return Globals.candleSettings[3].avgPeriod;
	}

	public static RetCode CdlDoji(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[3].avgPeriod;
				int num4 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = (double)num5 + num2;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num12 = 0;
				int num13 = num3;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num20;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num18 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num19 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num20 = (float)((double)num19 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num18));
								}
								else
								{
									num20 = 0f;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num21 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					if ((double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4])) <= Globals.candleSettings[3].factor * num15 / num21)
					{
						outInteger[num12] = 100;
						num12++;
					}
					else
					{
						outInteger[num12] = 0;
						num12++;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num22;
					if (rangeType == RangeType.RealBody)
					{
						num22 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num23;
						if (rangeType == RangeType.HighLow)
						{
							num23 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num26;
							if (rangeType == RangeType.Shadows)
							{
								float num7 = inClose[num4];
								float num8 = inOpen[num4];
								float num24 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
								float num25 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
								num26 = (float)((double)num25 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num24));
							}
							else
							{
								num26 = 0f;
							}
							num23 = num26;
						}
						num22 = num23;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num27;
					if (rangeType == RangeType.RealBody)
					{
						num27 = (float)(double)Math.Abs((float)((double)inClose[num13] - (double)inOpen[num13]));
					}
					else
					{
						float num28;
						if (rangeType == RangeType.HighLow)
						{
							num28 = (float)((double)inHigh[num13] - (double)inLow[num13]);
						}
						else
						{
							float num33;
							if (rangeType == RangeType.Shadows)
							{
								float num29 = inClose[num13];
								float num30 = inOpen[num13];
								float num31 = ((!((double)num29 >= (double)num30)) ? num30 : num29);
								float num32 = ((!((double)num29 >= (double)num30)) ? num29 : num30);
								num33 = (float)((double)num32 - (double)inLow[num13] + ((double)inHigh[num13] - (double)num31));
							}
							else
							{
								num33 = 0f;
							}
							num28 = num33;
						}
						num27 = num28;
					}
					num2 = (double)(num22 - num27) + num2;
					num4++;
					num13++;
				}
				while (num4 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlDoji(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[3].avgPeriod;
				int num4 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4] + (inHigh[num4] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = num5 + num2;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num12 = 0;
				int num13 = num3;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num20;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num18 = ((!(num7 >= num8)) ? num8 : num7);
									double num19 = ((!(num7 >= num8)) ? num7 : num8);
									num20 = num19 - inLow[num4] + (inHigh[num4] - num18);
								}
								else
								{
									num20 = 0.0;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num21 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					if (Math.Abs(inClose[num4] - inOpen[num4]) <= Globals.candleSettings[3].factor * num15 / num21)
					{
						outInteger[num12] = 100;
						num12++;
					}
					else
					{
						outInteger[num12] = 0;
						num12++;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num22;
					if (rangeType == RangeType.RealBody)
					{
						num22 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num23;
						if (rangeType == RangeType.HighLow)
						{
							num23 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num26;
							if (rangeType == RangeType.Shadows)
							{
								double num7 = inClose[num4];
								double num8 = inOpen[num4];
								double num24 = ((!(num7 >= num8)) ? num8 : num7);
								double num25 = ((!(num7 >= num8)) ? num7 : num8);
								num26 = num25 - inLow[num4] + (inHigh[num4] - num24);
							}
							else
							{
								num26 = 0.0;
							}
							num23 = num26;
						}
						num22 = num23;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num27;
					if (rangeType == RangeType.RealBody)
					{
						num27 = Math.Abs(inClose[num13] - inOpen[num13]);
					}
					else
					{
						double num28;
						if (rangeType == RangeType.HighLow)
						{
							num28 = inHigh[num13] - inLow[num13];
						}
						else
						{
							double num33;
							if (rangeType == RangeType.Shadows)
							{
								double num29 = inClose[num13];
								double num30 = inOpen[num13];
								double num31 = ((!(num29 >= num30)) ? num30 : num29);
								double num32 = ((!(num29 >= num30)) ? num29 : num30);
								num33 = num32 - inLow[num13] + (inHigh[num13] - num31);
							}
							else
							{
								num33 = 0.0;
							}
							num28 = num33;
						}
						num27 = num28;
					}
					num2 = num22 - num27 + num2;
					num4++;
					num13++;
				}
				while (num4 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlDojiStarLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlDojiStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDojiStarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[3].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					float num25;
					float num26;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14 - 1] - (double)inOpen[num14 - 1]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14 - 1] - (double)inLow[num14 - 1]);
							}
							else
							{
								float num29;
								if (rangeType == RangeType.Shadows)
								{
									num25 = inClose[num14 - 1];
									num26 = inOpen[num14 - 1];
									float num27 = ((!((double)num25 >= (double)num26)) ? num26 : num25);
									float num28 = ((!((double)num25 >= (double)num26)) ? num25 : num26);
									num29 = (float)((double)num28 - (double)inLow[num14 - 1] + ((double)inHigh[num14 - 1] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num24 = num29;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num30 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14 - 1] - (double)inOpen[num14 - 1])) > candleSettings[0].factor * num22 / num30)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num31 = candleSetting2.avgPeriod;
						double num32;
						if (num31 != 0.0)
						{
							num32 = num3 / num31;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num33;
							if (rangeType2 == RangeType.RealBody)
							{
								num33 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
							}
							else
							{
								float num34;
								if (rangeType2 == RangeType.HighLow)
								{
									num34 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num37;
									if (rangeType2 == RangeType.Shadows)
									{
										float num9 = inClose[num14];
										float num10 = inOpen[num14];
										float num35 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num36 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num37 = (float)((double)num36 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num35));
									}
									else
									{
										num37 = 0f;
									}
									num34 = num37;
								}
								num33 = num34;
							}
							num32 = num33;
						}
						double num38 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) <= Globals.candleSettings[3].factor * num32 / num38)
						{
							num25 = inClose[num14 - 1];
							num26 = inOpen[num14 - 1];
							if ((double)num25 >= (double)num26)
							{
								float num10 = inOpen[num14];
								float num9 = inClose[num14];
								float num39 = ((!((double)num10 < (double)num9)) ? num9 : num10);
								float num40 = ((!((double)num26 > (double)num25)) ? num25 : num26);
								if ((double)num39 > (double)num40)
								{
									goto IL_04ce;
								}
							}
							if (!((double)num25 >= (double)num26))
							{
								float num10 = inOpen[num14];
								float num9 = inClose[num14];
								float num41 = ((!((double)num10 > (double)num9)) ? num9 : num10);
								float num42 = ((!((double)num26 < (double)num25)) ? num25 : num26);
								if ((double)num41 < (double)num42)
								{
									goto IL_04ce;
								}
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04fb;
					IL_04fb:
					rangeType = Globals.candleSettings[0].rangeType;
					float num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = (float)(double)Math.Abs((float)((double)inClose[num14 - 1] - (double)inOpen[num14 - 1]));
					}
					else
					{
						float num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = (float)((double)inHigh[num14 - 1] - (double)inLow[num14 - 1]);
						}
						else
						{
							float num47;
							if (rangeType == RangeType.Shadows)
							{
								num25 = inClose[num14 - 1];
								num26 = inOpen[num14 - 1];
								float num45 = ((!((double)num25 >= (double)num26)) ? num26 : num25);
								float num46 = ((!((double)num25 >= (double)num26)) ? num25 : num26);
								num47 = (float)((double)num46 - (double)inLow[num14 - 1] + ((double)inHigh[num14 - 1] - (double)num45));
							}
							else
							{
								num47 = 0f;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num54;
							if (rangeType == RangeType.Shadows)
							{
								float num50 = inClose[num4];
								float num51 = inOpen[num4];
								float num52 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
								float num53 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
								num54 = (float)((double)num53 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num52));
							}
							else
							{
								num54 = 0f;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = (double)(num43 - num48) + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num55;
					if (rangeType2 == RangeType.RealBody)
					{
						num55 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num56;
						if (rangeType2 == RangeType.HighLow)
						{
							num56 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num59;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num57 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num58 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num59 = (float)((double)num58 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num56 = num59;
						}
						num55 = num56;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num66;
							if (rangeType2 == RangeType.Shadows)
							{
								float num62 = inClose[num5];
								float num63 = inOpen[num5];
								float num64 = ((!((double)num62 >= (double)num63)) ? num63 : num62);
								float num65 = ((!((double)num62 >= (double)num63)) ? num62 : num63);
								num66 = (float)((double)num65 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num64));
							}
							else
							{
								num66 = 0f;
							}
							num61 = num66;
						}
						num60 = num61;
					}
					num3 = (double)(num55 - num60) + num3;
					num14++;
					num4++;
					num5++;
					continue;
					IL_04ce:
					int num67 = (((double)num25 >= (double)num26) ? 1 : (-1));
					outInteger[num20] = num67 * -100;
					num20++;
					goto IL_04fb;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlDojiStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDojiStarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[3].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					double num25;
					double num26;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14 - 1] - inOpen[num14 - 1]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14 - 1] - inLow[num14 - 1];
							}
							else
							{
								double num29;
								if (rangeType == RangeType.Shadows)
								{
									num25 = inClose[num14 - 1];
									num26 = inOpen[num14 - 1];
									double num27 = ((!(num25 >= num26)) ? num26 : num25);
									double num28 = ((!(num25 >= num26)) ? num25 : num26);
									num29 = num28 - inLow[num14 - 1] + (inHigh[num14 - 1] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num24 = num29;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num30 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14 - 1] - inOpen[num14 - 1]) > candleSettings[0].factor * num22 / num30)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num31 = candleSetting2.avgPeriod;
						double num32;
						if (num31 != 0.0)
						{
							num32 = num3 / num31;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num33;
							if (rangeType2 == RangeType.RealBody)
							{
								num33 = Math.Abs(inClose[num14] - inOpen[num14]);
							}
							else
							{
								double num34;
								if (rangeType2 == RangeType.HighLow)
								{
									num34 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num37;
									if (rangeType2 == RangeType.Shadows)
									{
										double num9 = inClose[num14];
										double num10 = inOpen[num14];
										double num35 = ((!(num9 >= num10)) ? num10 : num9);
										double num36 = ((!(num9 >= num10)) ? num9 : num10);
										num37 = num36 - inLow[num14] + (inHigh[num14] - num35);
									}
									else
									{
										num37 = 0.0;
									}
									num34 = num37;
								}
								num33 = num34;
							}
							num32 = num33;
						}
						double num38 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num14] - inOpen[num14]) <= Globals.candleSettings[3].factor * num32 / num38)
						{
							num25 = inClose[num14 - 1];
							num26 = inOpen[num14 - 1];
							if (num25 >= num26)
							{
								double num10 = inOpen[num14];
								double num9 = inClose[num14];
								double num39 = ((!(num10 < num9)) ? num9 : num10);
								double num40 = ((!(num26 > num25)) ? num25 : num26);
								if (num39 > num40)
								{
									goto IL_047b;
								}
							}
							if (!(num25 >= num26))
							{
								double num10 = inOpen[num14];
								double num9 = inClose[num14];
								double num41 = ((!(num10 > num9)) ? num9 : num10);
								double num42 = ((!(num26 < num25)) ? num25 : num26);
								if (num41 < num42)
								{
									goto IL_047b;
								}
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04a6;
					IL_04a6:
					rangeType = Globals.candleSettings[0].rangeType;
					double num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = Math.Abs(inClose[num14 - 1] - inOpen[num14 - 1]);
					}
					else
					{
						double num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = inHigh[num14 - 1] - inLow[num14 - 1];
						}
						else
						{
							double num47;
							if (rangeType == RangeType.Shadows)
							{
								num25 = inClose[num14 - 1];
								num26 = inOpen[num14 - 1];
								double num45 = ((!(num25 >= num26)) ? num26 : num25);
								double num46 = ((!(num25 >= num26)) ? num25 : num26);
								num47 = num46 - inLow[num14 - 1] + (inHigh[num14 - 1] - num45);
							}
							else
							{
								num47 = 0.0;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num54;
							if (rangeType == RangeType.Shadows)
							{
								double num50 = inClose[num4];
								double num51 = inOpen[num4];
								double num52 = ((!(num50 >= num51)) ? num51 : num50);
								double num53 = ((!(num50 >= num51)) ? num50 : num51);
								num54 = num53 - inLow[num4] + (inHigh[num4] - num52);
							}
							else
							{
								num54 = 0.0;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = num43 - num48 + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num55;
					if (rangeType2 == RangeType.RealBody)
					{
						num55 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num56;
						if (rangeType2 == RangeType.HighLow)
						{
							num56 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num59;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num57 = ((!(num9 >= num10)) ? num10 : num9);
								double num58 = ((!(num9 >= num10)) ? num9 : num10);
								num59 = num58 - inLow[num14] + (inHigh[num14] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num56 = num59;
						}
						num55 = num56;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num66;
							if (rangeType2 == RangeType.Shadows)
							{
								double num62 = inClose[num5];
								double num63 = inOpen[num5];
								double num64 = ((!(num62 >= num63)) ? num63 : num62);
								double num65 = ((!(num62 >= num63)) ? num62 : num63);
								num66 = num65 - inLow[num5] + (inHigh[num5] - num64);
							}
							else
							{
								num66 = 0.0;
							}
							num61 = num66;
						}
						num60 = num61;
					}
					num3 = num55 - num60 + num3;
					num14++;
					num4++;
					num5++;
					continue;
					IL_047b:
					int num67 = ((num25 >= num26) ? 1 : (-1));
					outInteger[num20] = num67 * -100;
					num20++;
					goto IL_04a6;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlDragonflyDojiLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlDragonflyDoji(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDragonflyDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) <= candleSettings[3].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inHigh[num14];
						if ((double)num38 - (double)num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)num38 - (double)inLow[num14]);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)num44 - (double)inLow[num14] + ((double)num38 - (double)num43));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num39 - (double)inLow[num14] > candleSetting4.factor * num40 / num46)
							{
								outInteger[num20] = 100;
								num20++;
								goto IL_0543;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0543;
					IL_0543:
					rangeType = Globals.candleSettings[3].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num49 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num50 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num51 = (float)((double)num50 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num3];
								float num55 = inOpen[num3];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num61 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num62 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num63 = (float)((double)num62 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5];
								float num67 = inOpen[num5];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = (double)(num59 - num64) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlDragonflyDoji(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlDragonflyDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) <= candleSettings[3].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inHigh[num14];
						if (num38 - num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = num38 - inLow[num14];
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = num44 - inLow[num14] + (num38 - num43);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num39 - inLow[num14] > candleSetting4.factor * num40 / num46)
							{
								outInteger[num20] = 100;
								num20++;
								goto IL_04eb;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04eb;
					IL_04eb:
					rangeType = Globals.candleSettings[3].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num49 = ((!(num9 >= num10)) ? num10 : num9);
								double num50 = ((!(num9 >= num10)) ? num9 : num10);
								num51 = num50 - inLow[num14] + (inHigh[num14] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num58;
							if (rangeType == RangeType.Shadows)
							{
								double num54 = inClose[num3];
								double num55 = inOpen[num3];
								double num56 = ((!(num54 >= num55)) ? num55 : num54);
								double num57 = ((!(num54 >= num55)) ? num54 : num55);
								num58 = num57 - inLow[num3] + (inHigh[num3] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = num47 - num52 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num61 = ((!(num9 >= num10)) ? num10 : num9);
								double num62 = ((!(num9 >= num10)) ? num9 : num10);
								num63 = num62 - inLow[num14] + (inHigh[num14] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType2 == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = num59 - num64 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlEngulfingLookback()
	{
		return 2;
	}

	public static RetCode CdlEngulfing(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 2)
				{
					startIdx = 2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = startIdx;
				int num2 = 0;
				do
				{
					float num3 = inClose[num];
					float num4 = inOpen[num];
					if ((double)num3 >= (double)num4)
					{
						float num5 = inClose[num - 1];
						float num6 = inOpen[num - 1];
						if (!((double)num5 >= (double)num6) && (double)num3 > (double)num6 && (double)num4 < (double)num5)
						{
							goto IL_00af;
						}
					}
					if (!((double)num3 >= (double)num4))
					{
						float num5 = inClose[num - 1];
						float num6 = inOpen[num - 1];
						if ((double)num5 >= (double)num6 && (double)num4 > (double)num5 && (double)num3 < (double)num6)
						{
							goto IL_00af;
						}
					}
					outInteger[num2] = 0;
					num2++;
					goto IL_00d7;
					IL_00d7:
					num++;
					continue;
					IL_00af:
					int num7 = (((double)num3 >= (double)num4) ? 1 : (-1));
					outInteger[num2] = num7 * 100;
					num2++;
					goto IL_00d7;
				}
				while (num <= endIdx);
				outNBElement = num2;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlEngulfing(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 2)
				{
					startIdx = 2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = startIdx;
				int num2 = 0;
				do
				{
					double num3 = inClose[num];
					double num4 = inOpen[num];
					if (num3 >= num4)
					{
						double num5 = inClose[num - 1];
						double num6 = inOpen[num - 1];
						if (!(num5 >= num6) && num3 > num6 && num4 < num5)
						{
							goto IL_009f;
						}
					}
					if (!(num3 >= num4))
					{
						double num5 = inClose[num - 1];
						double num6 = inOpen[num - 1];
						if (num5 >= num6 && num4 > num5 && num3 < num6)
						{
							goto IL_009f;
						}
					}
					outInteger[num2] = 0;
					num2++;
					goto IL_00c5;
					IL_00c5:
					num++;
					continue;
					IL_009f:
					int num7 = ((num3 >= num4) ? 1 : (-1));
					outInteger[num2] = num7 * 100;
					num2++;
					goto IL_00c5;
				}
				while (num <= endIdx);
				outNBElement = num2;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlEveningDojiStarLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[3].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
			int avgPeriod3 = candleSettings[2].avgPeriod;
			int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			return num2 + 2;
		}
		return -1;
	}

	public static RetCode CdlEveningDojiStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlEveningDojiStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = (double)num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = (double)num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
						}
						else
						{
							float num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
							}
							else
							{
								float num38;
								if (rangeType == RangeType.Shadows)
								{
									float num34 = inClose[num28 - 2];
									float num35 = inOpen[num28 - 2];
									float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
									float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
									num38 = (float)((double)num37 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num36));
								}
								else
								{
									num38 = 0f;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) > candleSettings[0].factor * num31 / num39 && (double)inClose[num28 - 2] >= (double)inOpen[num28 - 2])
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
							}
							else
							{
								float num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
								}
								else
								{
									float num48;
									if (rangeType2 == RangeType.Shadows)
									{
										float num44 = inClose[num28 - 1];
										float num45 = inOpen[num28 - 1];
										float num46 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num47 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num48 = (float)((double)num47 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num46));
									}
									else
									{
										num48 = 0f;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1])) <= candleSettings[3].factor * num41 / num49)
						{
							float num45 = inOpen[num28 - 1];
							float num44 = inClose[num28 - 1];
							float num50 = ((!((double)num45 < (double)num44)) ? num44 : num45);
							float num35 = inOpen[num28 - 2];
							float num34 = inClose[num28 - 2];
							float num51 = ((!((double)num35 > (double)num34)) ? num34 : num35);
							if ((double)num50 > (double)num51)
							{
								CandleSetting candleSetting3 = candleSettings[2];
								double num52 = candleSetting3.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType3 = candleSetting3.rangeType;
									float num54;
									if (rangeType3 == RangeType.RealBody)
									{
										num54 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
									}
									else
									{
										float num55;
										if (rangeType3 == RangeType.HighLow)
										{
											num55 = (float)((double)inHigh[num28] - (double)inLow[num28]);
										}
										else
										{
											float num58;
											if (rangeType3 == RangeType.Shadows)
											{
												float num11 = inClose[num28];
												float num12 = inOpen[num28];
												float num56 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
												float num57 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
												num58 = (float)((double)num57 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num56));
											}
											else
											{
												num58 = 0f;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28])) > Globals.candleSettings[2].factor * num53 / num59)
								{
									float num11 = inClose[num28];
									if (!((double)num11 >= (double)inOpen[num28]))
									{
										double num60 = inClose[num28 - 2];
										if ((double)num11 < num60 - (double)Math.Abs((float)(num60 - (double)inOpen[num28 - 2])) * optInPenetration)
										{
											outInteger[num29] = -100;
											num29++;
											goto IL_0753;
										}
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0753;
					IL_0753:
					rangeType = Globals.candleSettings[0].rangeType;
					float num61;
					if (rangeType == RangeType.RealBody)
					{
						num61 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
					}
					else
					{
						float num62;
						if (rangeType == RangeType.HighLow)
						{
							num62 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
						}
						else
						{
							float num65;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								float num63 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num64 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num65 = (float)((double)num64 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num63));
							}
							else
							{
								num65 = 0f;
							}
							num62 = num65;
						}
						num61 = num62;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num66;
					if (rangeType == RangeType.RealBody)
					{
						num66 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num67;
						if (rangeType == RangeType.HighLow)
						{
							num67 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num72;
							if (rangeType == RangeType.Shadows)
							{
								float num68 = inClose[num5];
								float num69 = inOpen[num5];
								float num70 = ((!((double)num68 >= (double)num69)) ? num69 : num68);
								float num71 = ((!((double)num68 >= (double)num69)) ? num68 : num69);
								num72 = (float)((double)num71 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num70));
							}
							else
							{
								num72 = 0f;
							}
							num67 = num72;
						}
						num66 = num67;
					}
					num2 = (double)(num61 - num66) + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num73;
					if (rangeType2 == RangeType.RealBody)
					{
						num73 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
					}
					else
					{
						float num74;
						if (rangeType2 == RangeType.HighLow)
						{
							num74 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
						}
						else
						{
							float num77;
							if (rangeType2 == RangeType.Shadows)
							{
								float num44 = inClose[num28 - 1];
								float num45 = inOpen[num28 - 1];
								float num75 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
								float num76 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
								num77 = (float)((double)num76 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num75));
							}
							else
							{
								num77 = 0f;
							}
							num74 = num77;
						}
						num73 = num74;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num78;
					if (rangeType2 == RangeType.RealBody)
					{
						num78 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num79;
						if (rangeType2 == RangeType.HighLow)
						{
							num79 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num84;
							if (rangeType2 == RangeType.Shadows)
							{
								float num80 = inClose[num6];
								float num81 = inOpen[num6];
								float num82 = ((!((double)num80 >= (double)num81)) ? num81 : num80);
								float num83 = ((!((double)num80 >= (double)num81)) ? num80 : num81);
								num84 = (float)((double)num83 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num82));
							}
							else
							{
								num84 = 0f;
							}
							num79 = num84;
						}
						num78 = num79;
					}
					num3 = (double)(num73 - num78) + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num85;
					if (rangeType3 == RangeType.RealBody)
					{
						num85 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
					}
					else
					{
						float num86;
						if (rangeType3 == RangeType.HighLow)
						{
							num86 = (float)((double)inHigh[num28] - (double)inLow[num28]);
						}
						else
						{
							float num89;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num28];
								float num12 = inOpen[num28];
								float num87 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num88 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num89 = (float)((double)num88 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num87));
							}
							else
							{
								num89 = 0f;
							}
							num86 = num89;
						}
						num85 = num86;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num90;
					if (rangeType3 == RangeType.RealBody)
					{
						num90 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num91;
						if (rangeType3 == RangeType.HighLow)
						{
							num91 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num96;
							if (rangeType3 == RangeType.Shadows)
							{
								float num92 = inClose[num7];
								float num93 = inOpen[num7];
								float num94 = ((!((double)num92 >= (double)num93)) ? num93 : num92);
								float num95 = ((!((double)num92 >= (double)num93)) ? num92 : num93);
								num96 = (float)((double)num95 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num94));
							}
							else
							{
								num96 = 0f;
							}
							num91 = num96;
						}
						num90 = num91;
					}
					num4 = (double)(num85 - num90) + num4;
					num28++;
					num5++;
					num6++;
					num7++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlEveningDojiStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlEveningDojiStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
						}
						else
						{
							double num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = inHigh[num28 - 2] - inLow[num28 - 2];
							}
							else
							{
								double num38;
								if (rangeType == RangeType.Shadows)
								{
									double num34 = inClose[num28 - 2];
									double num35 = inOpen[num28 - 2];
									double num36 = ((!(num34 >= num35)) ? num35 : num34);
									double num37 = ((!(num34 >= num35)) ? num34 : num35);
									num38 = num37 - inLow[num28 - 2] + (inHigh[num28 - 2] - num36);
								}
								else
								{
									num38 = 0.0;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) > candleSettings[0].factor * num31 / num39 && inClose[num28 - 2] >= inOpen[num28 - 2])
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
							}
							else
							{
								double num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = inHigh[num28 - 1] - inLow[num28 - 1];
								}
								else
								{
									double num48;
									if (rangeType2 == RangeType.Shadows)
									{
										double num44 = inClose[num28 - 1];
										double num45 = inOpen[num28 - 1];
										double num46 = ((!(num44 >= num45)) ? num45 : num44);
										double num47 = ((!(num44 >= num45)) ? num44 : num45);
										num48 = num47 - inLow[num28 - 1] + (inHigh[num28 - 1] - num46);
									}
									else
									{
										num48 = 0.0;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]) <= candleSettings[3].factor * num41 / num49)
						{
							double num45 = inOpen[num28 - 1];
							double num44 = inClose[num28 - 1];
							double num50 = ((!(num45 < num44)) ? num44 : num45);
							double num35 = inOpen[num28 - 2];
							double num34 = inClose[num28 - 2];
							double num51 = ((!(num35 > num34)) ? num34 : num35);
							if (num50 > num51)
							{
								CandleSetting candleSetting3 = candleSettings[2];
								double num52 = candleSetting3.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType3 = candleSetting3.rangeType;
									double num54;
									if (rangeType3 == RangeType.RealBody)
									{
										num54 = Math.Abs(inClose[num28] - inOpen[num28]);
									}
									else
									{
										double num55;
										if (rangeType3 == RangeType.HighLow)
										{
											num55 = inHigh[num28] - inLow[num28];
										}
										else
										{
											double num58;
											if (rangeType3 == RangeType.Shadows)
											{
												double num11 = inClose[num28];
												double num12 = inOpen[num28];
												double num56 = ((!(num11 >= num12)) ? num12 : num11);
												double num57 = ((!(num11 >= num12)) ? num11 : num12);
												num58 = num57 - inLow[num28] + (inHigh[num28] - num56);
											}
											else
											{
												num58 = 0.0;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num28] - inOpen[num28]) > Globals.candleSettings[2].factor * num53 / num59 && !(inClose[num28] >= inOpen[num28]) && inClose[num28] < inClose[num28 - 2] - Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) * optInPenetration)
								{
									outInteger[num29] = -100;
									num29++;
									goto IL_06e3;
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_06e3;
					IL_06e3:
					rangeType = Globals.candleSettings[0].rangeType;
					double num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
					}
					else
					{
						double num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = inHigh[num28 - 2] - inLow[num28 - 2];
						}
						else
						{
							double num64;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								double num62 = ((!(num34 >= num35)) ? num35 : num34);
								double num63 = ((!(num34 >= num35)) ? num34 : num35);
								num64 = num63 - inLow[num28 - 2] + (inHigh[num28 - 2] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = num60 - num65 + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
					}
					else
					{
						double num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = inHigh[num28 - 1] - inLow[num28 - 1];
						}
						else
						{
							double num76;
							if (rangeType2 == RangeType.Shadows)
							{
								double num44 = inClose[num28 - 1];
								double num45 = inOpen[num28 - 1];
								double num74 = ((!(num44 >= num45)) ? num45 : num44);
								double num75 = ((!(num44 >= num45)) ? num44 : num45);
								num76 = num75 - inLow[num28 - 1] + (inHigh[num28 - 1] - num74);
							}
							else
							{
								num76 = 0.0;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num83;
							if (rangeType2 == RangeType.Shadows)
							{
								double num79 = inClose[num6];
								double num80 = inOpen[num6];
								double num81 = ((!(num79 >= num80)) ? num80 : num79);
								double num82 = ((!(num79 >= num80)) ? num79 : num80);
								num83 = num82 - inLow[num6] + (inHigh[num6] - num81);
							}
							else
							{
								num83 = 0.0;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num3 = num72 - num77 + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = Math.Abs(inClose[num28] - inOpen[num28]);
					}
					else
					{
						double num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = inHigh[num28] - inLow[num28];
						}
						else
						{
							double num88;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num28];
								double num12 = inOpen[num28];
								double num86 = ((!(num11 >= num12)) ? num12 : num11);
								double num87 = ((!(num11 >= num12)) ? num11 : num12);
								num88 = num87 - inLow[num28] + (inHigh[num28] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num95;
							if (rangeType3 == RangeType.Shadows)
							{
								double num91 = inClose[num7];
								double num92 = inOpen[num7];
								double num93 = ((!(num91 >= num92)) ? num92 : num91);
								double num94 = ((!(num91 >= num92)) ? num91 : num92);
								num95 = num94 - inLow[num7] + (inHigh[num7] - num93);
							}
							else
							{
								num95 = 0.0;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num4 = num84 - num89 + num4;
					num28++;
					num5++;
					num6++;
					num7++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlEveningStarLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[2].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
		}
		return -1;
	}

	public static RetCode CdlEveningStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlEveningStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[2].avgPeriod - 1;
				int num7 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num7] - (double)inLow[num7]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num7];
									float num11 = inOpen[num7];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num7++;
					}
					while (num7 < startIdx - 2);
				}
				int num15 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num20;
								if (rangeType2 == RangeType.Shadows)
								{
									float num10 = inClose[num15];
									float num11 = inOpen[num15];
									float num18 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num19 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num20 = (float)((double)num19 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num18));
								}
								else
								{
									num20 = 0f;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num3 = (double)num16 + num3;
						rangeType2 = Globals.candleSettings[2].rangeType;
						float num21;
						if (rangeType2 == RangeType.RealBody)
						{
							num21 = (float)(double)Math.Abs((float)((double)inClose[num15 + 1] - (double)inOpen[num15 + 1]));
						}
						else
						{
							float num22;
							if (rangeType2 == RangeType.HighLow)
							{
								num22 = (float)((double)inHigh[num15 + 1] - (double)inLow[num15 + 1]);
							}
							else
							{
								float num27;
								if (rangeType2 == RangeType.Shadows)
								{
									float num23 = inClose[num15 + 1];
									float num24 = inOpen[num15 + 1];
									float num25 = ((!((double)num23 >= (double)num24)) ? num24 : num23);
									float num26 = ((!((double)num23 >= (double)num24)) ? num23 : num24);
									num27 = (float)((double)num26 - (double)inLow[num15 + 1] + ((double)inHigh[num15 + 1] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num22 = num27;
							}
							num21 = num22;
						}
						num4 = (double)num21 + num4;
						num15++;
					}
					while (num15 < startIdx - 1);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
						}
						else
						{
							float num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
							}
							else
							{
								float num38;
								if (rangeType == RangeType.Shadows)
								{
									float num34 = inClose[num28 - 2];
									float num35 = inOpen[num28 - 2];
									float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
									float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
									num38 = (float)((double)num37 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num36));
								}
								else
								{
									num38 = 0f;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) > candleSettings[0].factor * num31 / num39 && (double)inClose[num28 - 2] >= (double)inOpen[num28 - 2])
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
							}
							else
							{
								float num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
								}
								else
								{
									float num48;
									if (rangeType2 == RangeType.Shadows)
									{
										float num44 = inClose[num28 - 1];
										float num45 = inOpen[num28 - 1];
										float num46 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num47 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num48 = (float)((double)num47 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num46));
									}
									else
									{
										num48 = 0f;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if ((double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1])) <= candleSetting3.factor * num41 / num49)
						{
							float num45 = inOpen[num28 - 1];
							float num44 = inClose[num28 - 1];
							float num50 = ((!((double)num45 < (double)num44)) ? num44 : num45);
							float num35 = inOpen[num28 - 2];
							float num34 = inClose[num28 - 2];
							float num51 = ((!((double)num35 > (double)num34)) ? num34 : num35);
							if ((double)num50 > (double)num51)
							{
								num40 = candleSetting3.avgPeriod;
								double num52;
								if (num40 != 0.0)
								{
									num52 = num4 / num40;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									float num53;
									if (rangeType2 == RangeType.RealBody)
									{
										num53 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
									}
									else
									{
										float num54;
										if (rangeType2 == RangeType.HighLow)
										{
											num54 = (float)((double)inHigh[num28] - (double)inLow[num28]);
										}
										else
										{
											float num57;
											if (rangeType2 == RangeType.Shadows)
											{
												float num10 = inClose[num28];
												float num11 = inOpen[num28];
												float num55 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
												float num56 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
												num57 = (float)((double)num56 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num55));
											}
											else
											{
												num57 = 0f;
											}
											num54 = num57;
										}
										num53 = num54;
									}
									num52 = num53;
								}
								double num58 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28])) > Globals.candleSettings[2].factor * num52 / num58)
								{
									float num10 = inClose[num28];
									if (!((double)num10 >= (double)inOpen[num28]))
									{
										double num59 = inClose[num28 - 2];
										if ((double)num10 < num59 - (double)Math.Abs((float)(num59 - (double)inOpen[num28 - 2])) * optInPenetration)
										{
											outInteger[num29] = -100;
											num29++;
											goto IL_0743;
										}
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0743;
					IL_0743:
					rangeType = Globals.candleSettings[0].rangeType;
					float num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
					}
					else
					{
						float num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
						}
						else
						{
							float num64;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								float num62 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num63 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num64 = (float)((double)num63 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = (double)(num60 - num65) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
					}
					else
					{
						float num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
						}
						else
						{
							float num76;
							if (rangeType2 == RangeType.Shadows)
							{
								float num44 = inClose[num28 - 1];
								float num45 = inOpen[num28 - 1];
								float num74 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
								float num75 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
								num76 = (float)((double)num75 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num74));
							}
							else
							{
								num76 = 0f;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num83;
							if (rangeType2 == RangeType.Shadows)
							{
								float num79 = inClose[num6];
								float num80 = inOpen[num6];
								float num81 = ((!((double)num79 >= (double)num80)) ? num80 : num79);
								float num82 = ((!((double)num79 >= (double)num80)) ? num79 : num80);
								num83 = (float)((double)num82 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num81));
							}
							else
							{
								num83 = 0f;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num3 = (double)(num72 - num77) + num3;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num84;
					if (rangeType2 == RangeType.RealBody)
					{
						num84 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
					}
					else
					{
						float num85;
						if (rangeType2 == RangeType.HighLow)
						{
							num85 = (float)((double)inHigh[num28] - (double)inLow[num28]);
						}
						else
						{
							float num88;
							if (rangeType2 == RangeType.Shadows)
							{
								float num10 = inClose[num28];
								float num11 = inOpen[num28];
								float num86 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
								float num87 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
								num88 = (float)((double)num87 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num89;
					if (rangeType2 == RangeType.RealBody)
					{
						num89 = (float)(double)Math.Abs((float)((double)inClose[num6 + 1] - (double)inOpen[num6 + 1]));
					}
					else
					{
						float num90;
						if (rangeType2 == RangeType.HighLow)
						{
							num90 = (float)((double)inHigh[num6 + 1] - (double)inLow[num6 + 1]);
						}
						else
						{
							float num95;
							if (rangeType2 == RangeType.Shadows)
							{
								float num91 = inClose[num6 + 1];
								float num92 = inOpen[num6 + 1];
								float num93 = ((!((double)num91 >= (double)num92)) ? num92 : num91);
								float num94 = ((!((double)num91 >= (double)num92)) ? num91 : num92);
								num95 = (float)((double)num94 - (double)inLow[num6 + 1] + ((double)inHigh[num6 + 1] - (double)num93));
							}
							else
							{
								num95 = 0f;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num4 = (double)(num84 - num89) + num4;
					num28++;
					num5++;
					num6++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlEveningStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlEveningStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[2].avgPeriod - 1;
				int num7 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num7] - inOpen[num7]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num7] - inLow[num7];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num7];
									double num11 = inOpen[num7];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num7] + (inHigh[num7] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num7++;
					}
					while (num7 < startIdx - 2);
				}
				int num15 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num20;
								if (rangeType2 == RangeType.Shadows)
								{
									double num10 = inClose[num15];
									double num11 = inOpen[num15];
									double num18 = ((!(num10 >= num11)) ? num11 : num10);
									double num19 = ((!(num10 >= num11)) ? num10 : num11);
									num20 = num19 - inLow[num15] + (inHigh[num15] - num18);
								}
								else
								{
									num20 = 0.0;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num3 = num16 + num3;
						rangeType2 = Globals.candleSettings[2].rangeType;
						double num21;
						if (rangeType2 == RangeType.RealBody)
						{
							num21 = Math.Abs(inClose[num15 + 1] - inOpen[num15 + 1]);
						}
						else
						{
							double num22;
							if (rangeType2 == RangeType.HighLow)
							{
								num22 = inHigh[num15 + 1] - inLow[num15 + 1];
							}
							else
							{
								double num27;
								if (rangeType2 == RangeType.Shadows)
								{
									double num23 = inClose[num15 + 1];
									double num24 = inOpen[num15 + 1];
									double num25 = ((!(num23 >= num24)) ? num24 : num23);
									double num26 = ((!(num23 >= num24)) ? num23 : num24);
									num27 = num26 - inLow[num15 + 1] + (inHigh[num15 + 1] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num22 = num27;
							}
							num21 = num22;
						}
						num4 = num21 + num4;
						num15++;
					}
					while (num15 < startIdx - 1);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
						}
						else
						{
							double num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = inHigh[num28 - 2] - inLow[num28 - 2];
							}
							else
							{
								double num38;
								if (rangeType == RangeType.Shadows)
								{
									double num34 = inClose[num28 - 2];
									double num35 = inOpen[num28 - 2];
									double num36 = ((!(num34 >= num35)) ? num35 : num34);
									double num37 = ((!(num34 >= num35)) ? num34 : num35);
									num38 = num37 - inLow[num28 - 2] + (inHigh[num28 - 2] - num36);
								}
								else
								{
									num38 = 0.0;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) > candleSettings[0].factor * num31 / num39 && inClose[num28 - 2] >= inOpen[num28 - 2])
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
							}
							else
							{
								double num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = inHigh[num28 - 1] - inLow[num28 - 1];
								}
								else
								{
									double num48;
									if (rangeType2 == RangeType.Shadows)
									{
										double num44 = inClose[num28 - 1];
										double num45 = inOpen[num28 - 1];
										double num46 = ((!(num44 >= num45)) ? num45 : num44);
										double num47 = ((!(num44 >= num45)) ? num44 : num45);
										num48 = num47 - inLow[num28 - 1] + (inHigh[num28 - 1] - num46);
									}
									else
									{
										num48 = 0.0;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if (Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]) <= candleSetting3.factor * num41 / num49)
						{
							double num45 = inOpen[num28 - 1];
							double num44 = inClose[num28 - 1];
							double num50 = ((!(num45 < num44)) ? num44 : num45);
							double num35 = inOpen[num28 - 2];
							double num34 = inClose[num28 - 2];
							double num51 = ((!(num35 > num34)) ? num34 : num35);
							if (num50 > num51)
							{
								num40 = candleSetting3.avgPeriod;
								double num52;
								if (num40 != 0.0)
								{
									num52 = num4 / num40;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									double num53;
									if (rangeType2 == RangeType.RealBody)
									{
										num53 = Math.Abs(inClose[num28] - inOpen[num28]);
									}
									else
									{
										double num54;
										if (rangeType2 == RangeType.HighLow)
										{
											num54 = inHigh[num28] - inLow[num28];
										}
										else
										{
											double num57;
											if (rangeType2 == RangeType.Shadows)
											{
												double num10 = inClose[num28];
												double num11 = inOpen[num28];
												double num55 = ((!(num10 >= num11)) ? num11 : num10);
												double num56 = ((!(num10 >= num11)) ? num10 : num11);
												num57 = num56 - inLow[num28] + (inHigh[num28] - num55);
											}
											else
											{
												num57 = 0.0;
											}
											num54 = num57;
										}
										num53 = num54;
									}
									num52 = num53;
								}
								double num58 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num28] - inOpen[num28]) > Globals.candleSettings[2].factor * num52 / num58 && !(inClose[num28] >= inOpen[num28]) && inClose[num28] < inClose[num28 - 2] - Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) * optInPenetration)
								{
									outInteger[num29] = -100;
									num29++;
									goto IL_06d6;
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_06d6;
					IL_06d6:
					rangeType = Globals.candleSettings[0].rangeType;
					double num59;
					if (rangeType == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
					}
					else
					{
						double num60;
						if (rangeType == RangeType.HighLow)
						{
							num60 = inHigh[num28 - 2] - inLow[num28 - 2];
						}
						else
						{
							double num63;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								double num61 = ((!(num34 >= num35)) ? num35 : num34);
								double num62 = ((!(num34 >= num35)) ? num34 : num35);
								num63 = num62 - inLow[num28 - 2] + (inHigh[num28 - 2] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num64;
					if (rangeType == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num2 = num59 - num64 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num71;
					if (rangeType2 == RangeType.RealBody)
					{
						num71 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
					}
					else
					{
						double num72;
						if (rangeType2 == RangeType.HighLow)
						{
							num72 = inHigh[num28 - 1] - inLow[num28 - 1];
						}
						else
						{
							double num75;
							if (rangeType2 == RangeType.Shadows)
							{
								double num44 = inClose[num28 - 1];
								double num45 = inOpen[num28 - 1];
								double num73 = ((!(num44 >= num45)) ? num45 : num44);
								double num74 = ((!(num44 >= num45)) ? num44 : num45);
								num75 = num74 - inLow[num28 - 1] + (inHigh[num28 - 1] - num73);
							}
							else
							{
								num75 = 0.0;
							}
							num72 = num75;
						}
						num71 = num72;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num76;
					if (rangeType2 == RangeType.RealBody)
					{
						num76 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num77;
						if (rangeType2 == RangeType.HighLow)
						{
							num77 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num82;
							if (rangeType2 == RangeType.Shadows)
							{
								double num78 = inClose[num6];
								double num79 = inOpen[num6];
								double num80 = ((!(num78 >= num79)) ? num79 : num78);
								double num81 = ((!(num78 >= num79)) ? num78 : num79);
								num82 = num81 - inLow[num6] + (inHigh[num6] - num80);
							}
							else
							{
								num82 = 0.0;
							}
							num77 = num82;
						}
						num76 = num77;
					}
					num3 = num71 - num76 + num3;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num83;
					if (rangeType2 == RangeType.RealBody)
					{
						num83 = Math.Abs(inClose[num28] - inOpen[num28]);
					}
					else
					{
						double num84;
						if (rangeType2 == RangeType.HighLow)
						{
							num84 = inHigh[num28] - inLow[num28];
						}
						else
						{
							double num87;
							if (rangeType2 == RangeType.Shadows)
							{
								double num10 = inClose[num28];
								double num11 = inOpen[num28];
								double num85 = ((!(num10 >= num11)) ? num11 : num10);
								double num86 = ((!(num10 >= num11)) ? num10 : num11);
								num87 = num86 - inLow[num28] + (inHigh[num28] - num85);
							}
							else
							{
								num87 = 0.0;
							}
							num84 = num87;
						}
						num83 = num84;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = Math.Abs(inClose[num6 + 1] - inOpen[num6 + 1]);
					}
					else
					{
						double num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = inHigh[num6 + 1] - inLow[num6 + 1];
						}
						else
						{
							double num94;
							if (rangeType2 == RangeType.Shadows)
							{
								double num90 = inClose[num6 + 1];
								double num91 = inOpen[num6 + 1];
								double num92 = ((!(num90 >= num91)) ? num91 : num90);
								double num93 = ((!(num90 >= num91)) ? num90 : num91);
								num94 = num93 - inLow[num6 + 1] + (inHigh[num6 + 1] - num92);
							}
							else
							{
								num94 = 0.0;
							}
							num89 = num94;
						}
						num88 = num89;
					}
					num4 = num83 - num88 + num4;
					num28++;
					num5++;
					num6++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlGapSideSideWhiteLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[8].avgPeriod;
		int avgPeriod2 = candleSettings[10].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
	}

	public static RetCode CdlGapSideSideWhite(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlGapSideSideWhiteLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[8].avgPeriod;
				int num5 = startIdx - candleSettings[10].avgPeriod;
				if (num4 < startIdx)
				{
					int num6 = num4 - 1;
					int num7 = startIdx - num4;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num6];
									float num11 = inOpen[num6];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num19 = inClose[num15];
									float num20 = inOpen[num15];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num3 = (double)num17 + num3;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					float num26 = inOpen[num24 - 1];
					float num27 = inClose[num24 - 1];
					float num28 = ((!((double)num26 < (double)num27)) ? num27 : num26);
					float num29 = inOpen[num24 - 2];
					float num30 = inClose[num24 - 2];
					float num31 = ((!((double)num29 > (double)num30)) ? num30 : num29);
					float num32;
					float num33;
					if ((double)num28 > (double)num31)
					{
						num32 = inOpen[num24];
						num33 = inClose[num24];
						float num34 = ((!((double)num32 < (double)num33)) ? num33 : num32);
						float num35 = ((!((double)num29 > (double)num30)) ? num30 : num29);
						if ((double)num34 > (double)num35)
						{
							goto IL_0324;
						}
					}
					float num36 = ((!((double)num26 > (double)num27)) ? num27 : num26);
					float num37 = ((!((double)num29 < (double)num30)) ? num30 : num29);
					if ((double)num36 < (double)num37)
					{
						num32 = inOpen[num24];
						num33 = inClose[num24];
						float num38 = ((!((double)num32 > (double)num33)) ? num33 : num32);
						float num39 = ((!((double)num29 < (double)num30)) ? num30 : num29);
						if ((double)num38 < (double)num39)
						{
							goto IL_0324;
						}
					}
					goto IL_0819;
					IL_0825:
					RangeType rangeType = Globals.candleSettings[8].rangeType;
					float num40;
					if (rangeType == RangeType.RealBody)
					{
						num40 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num41;
						if (rangeType == RangeType.HighLow)
						{
							num41 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num44;
							if (rangeType == RangeType.Shadows)
							{
								num27 = inClose[num24 - 1];
								num26 = inOpen[num24 - 1];
								float num42 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
								float num43 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
								num44 = (float)((double)num43 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num42));
							}
							else
							{
								num44 = 0f;
							}
							num41 = num44;
						}
						num40 = num41;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					float num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
					}
					else
					{
						float num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								float num47 = inClose[num4 - 1];
								float num48 = inOpen[num4 - 1];
								float num49 = ((!((double)num47 >= (double)num48)) ? num48 : num47);
								float num50 = ((!((double)num47 >= (double)num48)) ? num47 : num48);
								num51 = (float)((double)num50 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num46 = num51;
						}
						num45 = num46;
					}
					num2 = (double)(num40 - num45) + num2;
					RangeType rangeType2 = Globals.candleSettings[10].rangeType;
					float num52;
					if (rangeType2 == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num53;
						if (rangeType2 == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num56;
							if (rangeType2 == RangeType.Shadows)
							{
								num27 = inClose[num24 - 1];
								num26 = inOpen[num24 - 1];
								float num54 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
								float num55 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
								num56 = (float)((double)num55 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num54));
							}
							else
							{
								num56 = 0f;
							}
							num53 = num56;
						}
						num52 = num53;
					}
					rangeType2 = Globals.candleSettings[10].rangeType;
					float num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = (float)(double)Math.Abs((float)((double)inClose[num5 - 1] - (double)inOpen[num5 - 1]));
					}
					else
					{
						float num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = (float)((double)inHigh[num5 - 1] - (double)inLow[num5 - 1]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								float num59 = inClose[num5 - 1];
								float num60 = inOpen[num5 - 1];
								float num61 = ((!((double)num59 >= (double)num60)) ? num60 : num59);
								float num62 = ((!((double)num59 >= (double)num60)) ? num59 : num60);
								num63 = (float)((double)num62 - (double)inLow[num5 - 1] + ((double)inHigh[num5 - 1] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num58 = num63;
						}
						num57 = num58;
					}
					num3 = (double)(num52 - num57) + num3;
					num24++;
					num4++;
					num5++;
					continue;
					IL_0819:
					outInteger[num25] = 0;
					num25++;
					goto IL_0825;
					IL_0324:
					if ((double)num27 >= (double)num26 && (double)num33 >= (double)num32)
					{
						CandleSetting candleSetting = Globals.candleSettings[8];
						double num64 = candleSetting.avgPeriod;
						double num65;
						if (num64 != 0.0)
						{
							num65 = num2 / num64;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num66;
							if (rangeType == RangeType.RealBody)
							{
								num66 = (float)(double)Math.Abs((float)((double)num27 - (double)num26));
							}
							else
							{
								float num67;
								if (rangeType == RangeType.HighLow)
								{
									num67 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
								}
								else
								{
									float num70;
									if (rangeType == RangeType.Shadows)
									{
										float num68 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
										float num69 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
										num70 = (float)((double)num69 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num68));
									}
									else
									{
										num70 = 0f;
									}
									num67 = num70;
								}
								num66 = num67;
							}
							num65 = num66;
						}
						double num71 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num72 = Math.Abs((float)((double)inClose[num24] - (double)inOpen[num24]));
						CandleSetting candleSetting2 = Globals.candleSettings[8];
						if (num72 >= (double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1])) - candleSetting2.factor * num65 / num71)
						{
							num64 = candleSetting2.avgPeriod;
							double num73;
							if (num64 != 0.0)
							{
								num73 = num2 / num64;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								float num74;
								if (rangeType == RangeType.RealBody)
								{
									num74 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
								}
								else
								{
									float num75;
									if (rangeType == RangeType.HighLow)
									{
										num75 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
									}
									else
									{
										float num78;
										if (rangeType == RangeType.Shadows)
										{
											num27 = inClose[num24 - 1];
											num26 = inOpen[num24 - 1];
											float num76 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
											float num77 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
											num78 = (float)((double)num77 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num76));
										}
										else
										{
											num78 = 0f;
										}
										num75 = num78;
									}
									num74 = num75;
								}
								num73 = num74;
							}
							double num79 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num80 = Math.Abs((float)((double)inClose[num24] - (double)inOpen[num24]));
							candleSettings = Globals.candleSettings;
							if (num80 <= (double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1])) + candleSettings[8].factor * num73 / num79)
							{
								CandleSetting candleSetting3 = candleSettings[10];
								double num81 = candleSetting3.avgPeriod;
								double num82;
								if (num81 != 0.0)
								{
									num82 = num3 / num81;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									float num83;
									if (rangeType2 == RangeType.RealBody)
									{
										num83 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
									}
									else
									{
										float num84;
										if (rangeType2 == RangeType.HighLow)
										{
											num84 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
										}
										else
										{
											float num87;
											if (rangeType2 == RangeType.Shadows)
											{
												num27 = inClose[num24 - 1];
												num26 = inOpen[num24 - 1];
												float num85 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
												float num86 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
												num87 = (float)((double)num86 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num85));
											}
											else
											{
												num87 = 0f;
											}
											num84 = num87;
										}
										num83 = num84;
									}
									num82 = num83;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[10];
								rangeType2 = candleSetting4.rangeType;
								double num88 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
								num26 = inOpen[num24 - 1];
								if ((double)inOpen[num24] >= (double)num26 - candleSetting4.factor * num82 / num88)
								{
									num81 = candleSetting4.avgPeriod;
									double num89;
									if (num81 != 0.0)
									{
										num89 = num3 / num81;
									}
									else
									{
										float num90;
										if (rangeType2 == RangeType.RealBody)
										{
											num90 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)num26));
										}
										else
										{
											float num91;
											if (rangeType2 == RangeType.HighLow)
											{
												num91 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
											}
											else
											{
												float num94;
												if (rangeType2 == RangeType.Shadows)
												{
													num27 = inClose[num24 - 1];
													float num92 = ((!((double)num27 >= (double)num26)) ? num26 : num27);
													float num93 = ((!((double)num27 >= (double)num26)) ? num27 : num26);
													num94 = (float)((double)num93 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num92));
												}
												else
												{
													num94 = 0f;
												}
												num91 = num94;
											}
											num90 = num91;
										}
										num89 = num90;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[10];
									double num95 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num26 = inOpen[num24 - 1];
									if ((double)inOpen[num24] <= candleSetting5.factor * num89 / num95 + (double)num26)
									{
										num27 = inClose[num24 - 1];
										float num96 = ((!((double)num26 < (double)num27)) ? num27 : num26);
										num29 = inOpen[num24 - 2];
										num30 = inClose[num24 - 2];
										float num97 = ((!((double)num29 > (double)num30)) ? num30 : num29);
										int num98 = ((!((double)num96 > (double)num97)) ? (-100) : 100);
										outInteger[num25] = num98;
										num25++;
										goto IL_0825;
									}
								}
							}
						}
					}
					goto IL_0819;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlGapSideSideWhite(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlGapSideSideWhiteLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[8].avgPeriod;
				int num5 = startIdx - candleSettings[10].avgPeriod;
				if (num4 < startIdx)
				{
					int num6 = num4 - 1;
					int num7 = startIdx - num4;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num6];
									double num11 = inOpen[num6];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num6] + (inHigh[num6] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num19 = inClose[num15];
									double num20 = inOpen[num15];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num15] + (inHigh[num15] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num3 = num17 + num3;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					double num26 = inOpen[num24 - 1];
					double num27 = inClose[num24 - 1];
					double num28 = ((!(num26 < num27)) ? num27 : num26);
					double num29 = inOpen[num24 - 2];
					double num30 = inClose[num24 - 2];
					double num31 = ((!(num29 > num30)) ? num30 : num29);
					double num32;
					double num33;
					if (num28 > num31)
					{
						num32 = inOpen[num24];
						num33 = inClose[num24];
						double num34 = ((!(num32 < num33)) ? num33 : num32);
						double num35 = ((!(num29 > num30)) ? num30 : num29);
						if (num34 > num35)
						{
							goto IL_02ea;
						}
					}
					double num36 = ((!(num26 > num27)) ? num27 : num26);
					double num37 = ((!(num29 < num30)) ? num30 : num29);
					if (num36 < num37)
					{
						num32 = inOpen[num24];
						num33 = inClose[num24];
						double num38 = ((!(num32 > num33)) ? num33 : num32);
						double num39 = ((!(num29 < num30)) ? num30 : num29);
						if (num38 < num39)
						{
							goto IL_02ea;
						}
					}
					goto IL_076e;
					IL_076e:
					outInteger[num25] = 0;
					num25++;
					goto IL_077a;
					IL_077a:
					RangeType rangeType = Globals.candleSettings[8].rangeType;
					double num40;
					if (rangeType == RangeType.RealBody)
					{
						num40 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num41;
						if (rangeType == RangeType.HighLow)
						{
							num41 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num44;
							if (rangeType == RangeType.Shadows)
							{
								num27 = inClose[num24 - 1];
								num26 = inOpen[num24 - 1];
								double num42 = ((!(num27 >= num26)) ? num26 : num27);
								double num43 = ((!(num27 >= num26)) ? num27 : num26);
								num44 = num43 - inLow[num24 - 1] + (inHigh[num24 - 1] - num42);
							}
							else
							{
								num44 = 0.0;
							}
							num41 = num44;
						}
						num40 = num41;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					double num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
					}
					else
					{
						double num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = inHigh[num4 - 1] - inLow[num4 - 1];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								double num47 = inClose[num4 - 1];
								double num48 = inOpen[num4 - 1];
								double num49 = ((!(num47 >= num48)) ? num48 : num47);
								double num50 = ((!(num47 >= num48)) ? num47 : num48);
								num51 = num50 - inLow[num4 - 1] + (inHigh[num4 - 1] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num46 = num51;
						}
						num45 = num46;
					}
					num2 = num40 - num45 + num2;
					RangeType rangeType2 = Globals.candleSettings[10].rangeType;
					double num52;
					if (rangeType2 == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num53;
						if (rangeType2 == RangeType.HighLow)
						{
							num53 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num56;
							if (rangeType2 == RangeType.Shadows)
							{
								num27 = inClose[num24 - 1];
								num26 = inOpen[num24 - 1];
								double num54 = ((!(num27 >= num26)) ? num26 : num27);
								double num55 = ((!(num27 >= num26)) ? num27 : num26);
								num56 = num55 - inLow[num24 - 1] + (inHigh[num24 - 1] - num54);
							}
							else
							{
								num56 = 0.0;
							}
							num53 = num56;
						}
						num52 = num53;
					}
					rangeType2 = Globals.candleSettings[10].rangeType;
					double num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = Math.Abs(inClose[num5 - 1] - inOpen[num5 - 1]);
					}
					else
					{
						double num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = inHigh[num5 - 1] - inLow[num5 - 1];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								double num59 = inClose[num5 - 1];
								double num60 = inOpen[num5 - 1];
								double num61 = ((!(num59 >= num60)) ? num60 : num59);
								double num62 = ((!(num59 >= num60)) ? num59 : num60);
								num63 = num62 - inLow[num5 - 1] + (inHigh[num5 - 1] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num58 = num63;
						}
						num57 = num58;
					}
					num3 = num52 - num57 + num3;
					num24++;
					num4++;
					num5++;
					continue;
					IL_02ea:
					if (num27 >= num26 && num33 >= num32)
					{
						CandleSetting candleSetting = Globals.candleSettings[8];
						double num64 = candleSetting.avgPeriod;
						double num65;
						if (num64 != 0.0)
						{
							num65 = num2 / num64;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num66;
							if (rangeType == RangeType.RealBody)
							{
								num66 = Math.Abs(num27 - num26);
							}
							else
							{
								double num67;
								if (rangeType == RangeType.HighLow)
								{
									num67 = inHigh[num24 - 1] - inLow[num24 - 1];
								}
								else
								{
									double num70;
									if (rangeType == RangeType.Shadows)
									{
										double num68 = num27;
										double num69 = num26;
										num70 = num69 - inLow[num24 - 1] + (inHigh[num24 - 1] - num68);
									}
									else
									{
										num70 = 0.0;
									}
									num67 = num70;
								}
								num66 = num67;
							}
							num65 = num66;
						}
						double num71 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num72 = Math.Abs(inClose[num24] - inOpen[num24]);
						CandleSetting candleSetting2 = Globals.candleSettings[8];
						if (num72 >= Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]) - candleSetting2.factor * num65 / num71)
						{
							num64 = candleSetting2.avgPeriod;
							double num73;
							if (num64 != 0.0)
							{
								num73 = num2 / num64;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								double num74;
								if (rangeType == RangeType.RealBody)
								{
									num74 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
								}
								else
								{
									double num75;
									if (rangeType == RangeType.HighLow)
									{
										num75 = inHigh[num24 - 1] - inLow[num24 - 1];
									}
									else
									{
										double num78;
										if (rangeType == RangeType.Shadows)
										{
											num27 = inClose[num24 - 1];
											num26 = inOpen[num24 - 1];
											double num76 = ((!(num27 >= num26)) ? num26 : num27);
											double num77 = ((!(num27 >= num26)) ? num27 : num26);
											num78 = num77 - inLow[num24 - 1] + (inHigh[num24 - 1] - num76);
										}
										else
										{
											num78 = 0.0;
										}
										num75 = num78;
									}
									num74 = num75;
								}
								num73 = num74;
							}
							double num79 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num80 = Math.Abs(inClose[num24] - inOpen[num24]);
							candleSettings = Globals.candleSettings;
							if (num80 <= Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]) + candleSettings[8].factor * num73 / num79)
							{
								CandleSetting candleSetting3 = candleSettings[10];
								double num81 = candleSetting3.avgPeriod;
								double num82;
								if (num81 != 0.0)
								{
									num82 = num3 / num81;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									double num83;
									if (rangeType2 == RangeType.RealBody)
									{
										num83 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
									}
									else
									{
										double num84;
										if (rangeType2 == RangeType.HighLow)
										{
											num84 = inHigh[num24 - 1] - inLow[num24 - 1];
										}
										else
										{
											double num87;
											if (rangeType2 == RangeType.Shadows)
											{
												num27 = inClose[num24 - 1];
												num26 = inOpen[num24 - 1];
												double num85 = ((!(num27 >= num26)) ? num26 : num27);
												double num86 = ((!(num27 >= num26)) ? num27 : num26);
												num87 = num86 - inLow[num24 - 1] + (inHigh[num24 - 1] - num85);
											}
											else
											{
												num87 = 0.0;
											}
											num84 = num87;
										}
										num83 = num84;
									}
									num82 = num83;
								}
								CandleSetting candleSetting4 = Globals.candleSettings[10];
								rangeType2 = candleSetting4.rangeType;
								double num88 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
								num26 = inOpen[num24 - 1];
								if (inOpen[num24] >= num26 - candleSetting4.factor * num82 / num88)
								{
									num81 = candleSetting4.avgPeriod;
									double num89;
									if (num81 != 0.0)
									{
										num89 = num3 / num81;
									}
									else
									{
										double num90;
										if (rangeType2 == RangeType.RealBody)
										{
											num90 = Math.Abs(inClose[num24 - 1] - num26);
										}
										else
										{
											double num91;
											if (rangeType2 == RangeType.HighLow)
											{
												num91 = inHigh[num24 - 1] - inLow[num24 - 1];
											}
											else
											{
												double num94;
												if (rangeType2 == RangeType.Shadows)
												{
													num27 = inClose[num24 - 1];
													double num92 = ((!(num27 >= num26)) ? num26 : num27);
													double num93 = ((!(num27 >= num26)) ? num27 : num26);
													num94 = num93 - inLow[num24 - 1] + (inHigh[num24 - 1] - num92);
												}
												else
												{
													num94 = 0.0;
												}
												num91 = num94;
											}
											num90 = num91;
										}
										num89 = num90;
									}
									CandleSetting candleSetting5 = Globals.candleSettings[10];
									double num95 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num26 = inOpen[num24 - 1];
									if (inOpen[num24] <= candleSetting5.factor * num89 / num95 + num26)
									{
										num27 = inClose[num24 - 1];
										double num96 = ((!(num26 < num27)) ? num27 : num26);
										num29 = inOpen[num24 - 2];
										num30 = inClose[num24 - 2];
										double num97 = ((!(num29 > num30)) ? num30 : num29);
										int num98 = ((!(num96 > num97)) ? (-100) : 100);
										outInteger[num25] = num98;
										num25++;
										goto IL_077a;
									}
								}
							}
						}
					}
					goto IL_076e;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlGravestoneDojiLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlGravestoneDoji(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlGravestoneDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) <= candleSettings[3].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inLow[num14];
						if ((double)num29 - (double)num38 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)inHigh[num14] - (double)num38);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)inHigh[num14] - (double)num43 + ((double)num44 - (double)num38));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num14] - (double)num39 > candleSetting4.factor * num40 / num46)
							{
								outInteger[num20] = 100;
								num20++;
								goto IL_0541;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0541;
					IL_0541:
					rangeType = Globals.candleSettings[3].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num49 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num50 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num51 = (float)((double)num50 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num3];
								float num55 = inOpen[num3];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num61 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num62 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num63 = (float)((double)num62 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5];
								float num67 = inOpen[num5];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = (double)(num59 - num64) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlGravestoneDoji(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlGravestoneDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) <= candleSettings[3].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num9 : num10);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inLow[num14];
						if (num29 - num38 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num10 : num9);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = inHigh[num14] - num38;
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = inHigh[num14] - num43 + (num44 - num38);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num14] - num39 > candleSetting4.factor * num40 / num46)
							{
								outInteger[num20] = 100;
								num20++;
								goto IL_04e9;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04e9;
					IL_04e9:
					rangeType = Globals.candleSettings[3].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num49 = ((!(num9 >= num10)) ? num10 : num9);
								double num50 = ((!(num9 >= num10)) ? num9 : num10);
								num51 = num50 - inLow[num14] + (inHigh[num14] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num58;
							if (rangeType == RangeType.Shadows)
							{
								double num54 = inClose[num3];
								double num55 = inOpen[num3];
								double num56 = ((!(num54 >= num55)) ? num55 : num54);
								double num57 = ((!(num54 >= num55)) ? num54 : num55);
								num58 = num57 - inLow[num3] + (inHigh[num3] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = num47 - num52 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num61 = ((!(num9 >= num10)) ? num10 : num9);
								double num62 = ((!(num9 >= num10)) ? num9 : num10);
								num63 = num62 - inLow[num14] + (inHigh[num14] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType2 == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = num59 - num64 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHammerLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[7].avgPeriod;
		int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		int avgPeriod4 = candleSettings[8].avgPeriod;
		int num4;
		if (num2 > avgPeriod4)
		{
			int num3 = ((((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			num4 = num3;
		}
		else
		{
			num4 = avgPeriod4;
		}
		return num4 + 1;
	}

	public static RetCode CdlHammer(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHammerLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				double num8 = 0.0;
				int num9 = startIdx - candleSettings[8].avgPeriod - 1;
				int num10 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = (float)(double)Math.Abs((float)((double)inClose[num10] - (double)inOpen[num10]));
						}
						else
						{
							float num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = (float)((double)inHigh[num10] - (double)inLow[num10]);
							}
							else
							{
								float num17;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num10];
									float num14 = inOpen[num10];
									float num15 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num16 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num17 = (float)((double)num16 - (double)inLow[num10] + ((double)inHigh[num10] - (double)num15));
								}
								else
								{
									num17 = 0f;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = (double)num11 + num2;
						num10++;
					}
					while (num10 < startIdx);
				}
				int num18 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num19;
						if (rangeType2 == RangeType.RealBody)
						{
							num19 = (float)(double)Math.Abs((float)((double)inClose[num18] - (double)inOpen[num18]));
						}
						else
						{
							float num20;
							if (rangeType2 == RangeType.HighLow)
							{
								num20 = (float)((double)inHigh[num18] - (double)inLow[num18]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num13 = inClose[num18];
									float num14 = inOpen[num18];
									float num21 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num22 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num23 = (float)((double)num22 - (double)inLow[num18] + ((double)inHigh[num18] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num20 = num23;
							}
							num19 = num20;
						}
						num4 = (double)num19 + num4;
						num18++;
					}
					while (num18 < startIdx);
				}
				int num24 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num25;
						if (rangeType3 == RangeType.RealBody)
						{
							num25 = (float)(double)Math.Abs((float)((double)inClose[num24] - (double)inOpen[num24]));
						}
						else
						{
							float num26;
							if (rangeType3 == RangeType.HighLow)
							{
								num26 = (float)((double)inHigh[num24] - (double)inLow[num24]);
							}
							else
							{
								float num29;
								if (rangeType3 == RangeType.Shadows)
								{
									float num13 = inClose[num24];
									float num14 = inOpen[num24];
									float num27 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num28 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num29 = (float)((double)num28 - (double)inLow[num24] + ((double)inHigh[num24] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						num6 = (double)num25 + num6;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num30 = num9;
				if (num9 < startIdx - 1)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						float num31;
						if (rangeType4 == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
						}
						else
						{
							float num32;
							if (rangeType4 == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num30] - (double)inLow[num30]);
							}
							else
							{
								float num35;
								if (rangeType4 == RangeType.Shadows)
								{
									float num13 = inClose[num30];
									float num14 = inOpen[num30];
									float num33 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num34 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num35 = (float)((double)num34 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num8 = (double)num31 + num8;
						num30++;
					}
					while (num30 < startIdx - 1);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType;
					if (num38 != 0.0)
					{
						num39 = num2 / num38;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
						}
						else
						{
							float num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = (float)((double)inHigh[num36] - (double)inLow[num36]);
							}
							else
							{
								float num44;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num36];
									float num14 = inOpen[num36];
									float num42 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num43 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num44 = (float)((double)num43 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num42));
								}
								else
								{
									num44 = 0f;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num45 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					RangeType rangeType4;
					if ((double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36])) < candleSettings[2].factor * num39 / num45)
					{
						float num13 = inClose[num36];
						float num14 = inOpen[num36];
						float num46 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
						CandleSetting candleSetting2 = candleSettings[4];
						double num47 = candleSetting2.avgPeriod;
						double num48;
						if (num47 != 0.0)
						{
							num48 = num4 / num47;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num49;
							if (rangeType2 == RangeType.RealBody)
							{
								num49 = (float)(double)Math.Abs((float)((double)num13 - (double)num14));
							}
							else
							{
								float num50;
								if (rangeType2 == RangeType.HighLow)
								{
									num50 = (float)((double)inHigh[num36] - (double)inLow[num36]);
								}
								else
								{
									float num53;
									if (rangeType2 == RangeType.Shadows)
									{
										float num51 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
										float num52 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
										num53 = (float)((double)num52 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num51));
									}
									else
									{
										num53 = 0f;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num54 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num55 = inLow[num36];
						if ((double)num46 - (double)num55 > candleSetting3.factor * num48 / num54)
						{
							num13 = inClose[num36];
							num14 = inOpen[num36];
							float num56 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
							CandleSetting candleSetting4 = candleSettings[7];
							double num57 = candleSetting4.avgPeriod;
							double num58;
							if (num57 != 0.0)
							{
								num58 = num6 / num57;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								float num59;
								if (rangeType3 == RangeType.RealBody)
								{
									num59 = (float)(double)Math.Abs((float)((double)num13 - (double)num14));
								}
								else
								{
									float num60;
									if (rangeType3 == RangeType.HighLow)
									{
										num60 = (float)((double)inHigh[num36] - (double)num55);
									}
									else
									{
										float num63;
										if (rangeType3 == RangeType.Shadows)
										{
											float num61 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
											float num62 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
											num63 = (float)((double)inHigh[num36] - (double)num61 + ((double)num62 - (double)num55));
										}
										else
										{
											num63 = 0f;
										}
										num60 = num63;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting5 = candleSettings[7];
							double num64 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num36] - (double)num56 < candleSetting5.factor * num58 / num64)
							{
								num13 = inClose[num36];
								num14 = inOpen[num36];
								float num65 = ((!((double)num13 < (double)num14)) ? num14 : num13);
								CandleSetting candleSetting6 = candleSettings[8];
								double num66 = candleSetting6.avgPeriod;
								double num67;
								if (num66 != 0.0)
								{
									num67 = num8 / num66;
								}
								else
								{
									rangeType4 = candleSetting6.rangeType;
									float num68;
									if (rangeType4 == RangeType.RealBody)
									{
										num68 = (float)(double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1]));
									}
									else
									{
										float num69;
										if (rangeType4 == RangeType.HighLow)
										{
											num69 = (float)((double)inHigh[num36 - 1] - (double)inLow[num36 - 1]);
										}
										else
										{
											float num74;
											if (rangeType4 == RangeType.Shadows)
											{
												float num70 = inClose[num36 - 1];
												float num71 = inOpen[num36 - 1];
												float num72 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
												float num73 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
												num74 = (float)((double)num73 - (double)inLow[num36 - 1] + ((double)inHigh[num36 - 1] - (double)num72));
											}
											else
											{
												num74 = 0f;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								CandleSetting candleSetting7 = Globals.candleSettings[8];
								double num75 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)num65 <= (double)inLow[num36 - 1] + candleSetting7.factor * num67 / num75)
								{
									outInteger[num37] = 100;
									num37++;
									goto IL_086e;
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_086e;
					IL_086e:
					rangeType = Globals.candleSettings[2].rangeType;
					float num76;
					if (rangeType == RangeType.RealBody)
					{
						num76 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num77;
						if (rangeType == RangeType.HighLow)
						{
							num77 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num80;
							if (rangeType == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num78 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num79 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num80 = (float)((double)num79 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num78));
							}
							else
							{
								num80 = 0f;
							}
							num77 = num80;
						}
						num76 = num77;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num81;
					if (rangeType == RangeType.RealBody)
					{
						num81 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num82;
						if (rangeType == RangeType.HighLow)
						{
							num82 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num87;
							if (rangeType == RangeType.Shadows)
							{
								float num83 = inClose[num3];
								float num84 = inOpen[num3];
								float num85 = ((!((double)num83 >= (double)num84)) ? num84 : num83);
								float num86 = ((!((double)num83 >= (double)num84)) ? num83 : num84);
								num87 = (float)((double)num86 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num85));
							}
							else
							{
								num87 = 0f;
							}
							num82 = num87;
						}
						num81 = num82;
					}
					num2 = (double)(num76 - num81) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num92;
							if (rangeType2 == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num90 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num91 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num92 = (float)((double)num91 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num90));
							}
							else
							{
								num92 = 0f;
							}
							num89 = num92;
						}
						num88 = num89;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num93;
					if (rangeType2 == RangeType.RealBody)
					{
						num93 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num94;
						if (rangeType2 == RangeType.HighLow)
						{
							num94 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num99;
							if (rangeType2 == RangeType.Shadows)
							{
								float num95 = inClose[num5];
								float num96 = inOpen[num5];
								float num97 = ((!((double)num95 >= (double)num96)) ? num96 : num95);
								float num98 = ((!((double)num95 >= (double)num96)) ? num95 : num96);
								num99 = (float)((double)num98 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num97));
							}
							else
							{
								num99 = 0f;
							}
							num94 = num99;
						}
						num93 = num94;
					}
					num4 = (double)(num88 - num93) + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num100;
					if (rangeType3 == RangeType.RealBody)
					{
						num100 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num101;
						if (rangeType3 == RangeType.HighLow)
						{
							num101 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num104;
							if (rangeType3 == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num102 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num103 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num104 = (float)((double)num103 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num102));
							}
							else
							{
								num104 = 0f;
							}
							num101 = num104;
						}
						num100 = num101;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num105;
					if (rangeType3 == RangeType.RealBody)
					{
						num105 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num106;
						if (rangeType3 == RangeType.HighLow)
						{
							num106 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num111;
							if (rangeType3 == RangeType.Shadows)
							{
								float num107 = inClose[num7];
								float num108 = inOpen[num7];
								float num109 = ((!((double)num107 >= (double)num108)) ? num108 : num107);
								float num110 = ((!((double)num107 >= (double)num108)) ? num107 : num108);
								num111 = (float)((double)num110 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num109));
							}
							else
							{
								num111 = 0f;
							}
							num106 = num111;
						}
						num105 = num106;
					}
					num6 = (double)(num100 - num105) + num6;
					rangeType4 = Globals.candleSettings[8].rangeType;
					float num112;
					if (rangeType4 == RangeType.RealBody)
					{
						num112 = (float)(double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1]));
					}
					else
					{
						float num113;
						if (rangeType4 == RangeType.HighLow)
						{
							num113 = (float)((double)inHigh[num36 - 1] - (double)inLow[num36 - 1]);
						}
						else
						{
							float num116;
							if (rangeType4 == RangeType.Shadows)
							{
								float num70 = inClose[num36 - 1];
								float num71 = inOpen[num36 - 1];
								float num114 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
								float num115 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
								num116 = (float)((double)num115 - (double)inLow[num36 - 1] + ((double)inHigh[num36 - 1] - (double)num114));
							}
							else
							{
								num116 = 0f;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType4 = Globals.candleSettings[8].rangeType;
					float num117;
					if (rangeType4 == RangeType.RealBody)
					{
						num117 = (float)(double)Math.Abs((float)((double)inClose[num9] - (double)inOpen[num9]));
					}
					else
					{
						float num118;
						if (rangeType4 == RangeType.HighLow)
						{
							num118 = (float)((double)inHigh[num9] - (double)inLow[num9]);
						}
						else
						{
							float num123;
							if (rangeType4 == RangeType.Shadows)
							{
								float num119 = inClose[num9];
								float num120 = inOpen[num9];
								float num121 = ((!((double)num119 >= (double)num120)) ? num120 : num119);
								float num122 = ((!((double)num119 >= (double)num120)) ? num119 : num120);
								num123 = (float)((double)num122 - (double)inLow[num9] + ((double)inHigh[num9] - (double)num121));
							}
							else
							{
								num123 = 0f;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					num8 = (double)(num112 - num117) + num8;
					num36++;
					num3++;
					num5++;
					num7++;
					num9++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHammer(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHammerLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				double num8 = 0.0;
				int num9 = startIdx - candleSettings[8].avgPeriod - 1;
				int num10 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = Math.Abs(inClose[num10] - inOpen[num10]);
						}
						else
						{
							double num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = inHigh[num10] - inLow[num10];
							}
							else
							{
								double num17;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num10];
									double num14 = inOpen[num10];
									double num15 = ((!(num13 >= num14)) ? num14 : num13);
									double num16 = ((!(num13 >= num14)) ? num13 : num14);
									num17 = num16 - inLow[num10] + (inHigh[num10] - num15);
								}
								else
								{
									num17 = 0.0;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = num11 + num2;
						num10++;
					}
					while (num10 < startIdx);
				}
				int num18 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num19;
						if (rangeType2 == RangeType.RealBody)
						{
							num19 = Math.Abs(inClose[num18] - inOpen[num18]);
						}
						else
						{
							double num20;
							if (rangeType2 == RangeType.HighLow)
							{
								num20 = inHigh[num18] - inLow[num18];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num13 = inClose[num18];
									double num14 = inOpen[num18];
									double num21 = ((!(num13 >= num14)) ? num14 : num13);
									double num22 = ((!(num13 >= num14)) ? num13 : num14);
									num23 = num22 - inLow[num18] + (inHigh[num18] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num20 = num23;
							}
							num19 = num20;
						}
						num4 = num19 + num4;
						num18++;
					}
					while (num18 < startIdx);
				}
				int num24 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num25;
						if (rangeType3 == RangeType.RealBody)
						{
							num25 = Math.Abs(inClose[num24] - inOpen[num24]);
						}
						else
						{
							double num26;
							if (rangeType3 == RangeType.HighLow)
							{
								num26 = inHigh[num24] - inLow[num24];
							}
							else
							{
								double num29;
								if (rangeType3 == RangeType.Shadows)
								{
									double num13 = inClose[num24];
									double num14 = inOpen[num24];
									double num27 = ((!(num13 >= num14)) ? num14 : num13);
									double num28 = ((!(num13 >= num14)) ? num13 : num14);
									num29 = num28 - inLow[num24] + (inHigh[num24] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						num6 = num25 + num6;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num30 = num9;
				if (num9 < startIdx - 1)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						double num31;
						if (rangeType4 == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num30] - inOpen[num30]);
						}
						else
						{
							double num32;
							if (rangeType4 == RangeType.HighLow)
							{
								num32 = inHigh[num30] - inLow[num30];
							}
							else
							{
								double num35;
								if (rangeType4 == RangeType.Shadows)
								{
									double num13 = inClose[num30];
									double num14 = inOpen[num30];
									double num33 = ((!(num13 >= num14)) ? num14 : num13);
									double num34 = ((!(num13 >= num14)) ? num13 : num14);
									num35 = num34 - inLow[num30] + (inHigh[num30] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num8 = num31 + num8;
						num30++;
					}
					while (num30 < startIdx - 1);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType;
					if (num38 != 0.0)
					{
						num39 = num2 / num38;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = Math.Abs(inClose[num36] - inOpen[num36]);
						}
						else
						{
							double num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = inHigh[num36] - inLow[num36];
							}
							else
							{
								double num44;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num36];
									double num14 = inOpen[num36];
									double num42 = ((!(num13 >= num14)) ? num14 : num13);
									double num43 = ((!(num13 >= num14)) ? num13 : num14);
									num44 = num43 - inLow[num36] + (inHigh[num36] - num42);
								}
								else
								{
									num44 = 0.0;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num45 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					RangeType rangeType4;
					if (Math.Abs(inClose[num36] - inOpen[num36]) < candleSettings[2].factor * num39 / num45)
					{
						double num13 = inClose[num36];
						double num14 = inOpen[num36];
						double num46 = ((!(num13 >= num14)) ? num13 : num14);
						CandleSetting candleSetting2 = candleSettings[4];
						double num47 = candleSetting2.avgPeriod;
						double num48;
						if (num47 != 0.0)
						{
							num48 = num4 / num47;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num49;
							if (rangeType2 == RangeType.RealBody)
							{
								num49 = Math.Abs(num13 - num14);
							}
							else
							{
								double num50;
								if (rangeType2 == RangeType.HighLow)
								{
									num50 = inHigh[num36] - inLow[num36];
								}
								else
								{
									double num53;
									if (rangeType2 == RangeType.Shadows)
									{
										double num51 = ((!(num13 >= num14)) ? num14 : num13);
										double num52 = ((!(num13 >= num14)) ? num13 : num14);
										num53 = num52 - inLow[num36] + (inHigh[num36] - num51);
									}
									else
									{
										num53 = 0.0;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num54 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num55 = inLow[num36];
						if (num46 - num55 > candleSetting3.factor * num48 / num54)
						{
							num13 = inClose[num36];
							num14 = inOpen[num36];
							double num56 = ((!(num13 >= num14)) ? num14 : num13);
							CandleSetting candleSetting4 = candleSettings[7];
							double num57 = candleSetting4.avgPeriod;
							double num58;
							if (num57 != 0.0)
							{
								num58 = num6 / num57;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								double num59;
								if (rangeType3 == RangeType.RealBody)
								{
									num59 = Math.Abs(num13 - num14);
								}
								else
								{
									double num60;
									if (rangeType3 == RangeType.HighLow)
									{
										num60 = inHigh[num36] - num55;
									}
									else
									{
										double num63;
										if (rangeType3 == RangeType.Shadows)
										{
											double num61 = ((!(num13 >= num14)) ? num14 : num13);
											double num62 = ((!(num13 >= num14)) ? num13 : num14);
											num63 = inHigh[num36] - num61 + (num62 - num55);
										}
										else
										{
											num63 = 0.0;
										}
										num60 = num63;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting5 = candleSettings[7];
							double num64 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num36] - num56 < candleSetting5.factor * num58 / num64)
							{
								num13 = inClose[num36];
								num14 = inOpen[num36];
								double num65 = ((!(num13 < num14)) ? num14 : num13);
								CandleSetting candleSetting6 = candleSettings[8];
								double num66 = candleSetting6.avgPeriod;
								double num67;
								if (num66 != 0.0)
								{
									num67 = num8 / num66;
								}
								else
								{
									rangeType4 = candleSetting6.rangeType;
									double num68;
									if (rangeType4 == RangeType.RealBody)
									{
										num68 = Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]);
									}
									else
									{
										double num69;
										if (rangeType4 == RangeType.HighLow)
										{
											num69 = inHigh[num36 - 1] - inLow[num36 - 1];
										}
										else
										{
											double num74;
											if (rangeType4 == RangeType.Shadows)
											{
												double num70 = inClose[num36 - 1];
												double num71 = inOpen[num36 - 1];
												double num72 = ((!(num70 >= num71)) ? num71 : num70);
												double num73 = ((!(num70 >= num71)) ? num70 : num71);
												num74 = num73 - inLow[num36 - 1] + (inHigh[num36 - 1] - num72);
											}
											else
											{
												num74 = 0.0;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								CandleSetting candleSetting7 = Globals.candleSettings[8];
								double num75 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (num65 <= inLow[num36 - 1] + candleSetting7.factor * num67 / num75)
								{
									outInteger[num37] = 100;
									num37++;
									goto IL_07e8;
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_07e8;
					IL_07e8:
					rangeType = Globals.candleSettings[2].rangeType;
					double num76;
					if (rangeType == RangeType.RealBody)
					{
						num76 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num77;
						if (rangeType == RangeType.HighLow)
						{
							num77 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num80;
							if (rangeType == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num78 = ((!(num13 >= num14)) ? num14 : num13);
								double num79 = ((!(num13 >= num14)) ? num13 : num14);
								num80 = num79 - inLow[num36] + (inHigh[num36] - num78);
							}
							else
							{
								num80 = 0.0;
							}
							num77 = num80;
						}
						num76 = num77;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num81;
					if (rangeType == RangeType.RealBody)
					{
						num81 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num82;
						if (rangeType == RangeType.HighLow)
						{
							num82 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num87;
							if (rangeType == RangeType.Shadows)
							{
								double num83 = inClose[num3];
								double num84 = inOpen[num3];
								double num85 = ((!(num83 >= num84)) ? num84 : num83);
								double num86 = ((!(num83 >= num84)) ? num83 : num84);
								num87 = num86 - inLow[num3] + (inHigh[num3] - num85);
							}
							else
							{
								num87 = 0.0;
							}
							num82 = num87;
						}
						num81 = num82;
					}
					num2 = num76 - num81 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num92;
							if (rangeType2 == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num90 = ((!(num13 >= num14)) ? num14 : num13);
								double num91 = ((!(num13 >= num14)) ? num13 : num14);
								num92 = num91 - inLow[num36] + (inHigh[num36] - num90);
							}
							else
							{
								num92 = 0.0;
							}
							num89 = num92;
						}
						num88 = num89;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num93;
					if (rangeType2 == RangeType.RealBody)
					{
						num93 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num94;
						if (rangeType2 == RangeType.HighLow)
						{
							num94 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num99;
							if (rangeType2 == RangeType.Shadows)
							{
								double num95 = inClose[num5];
								double num96 = inOpen[num5];
								double num97 = ((!(num95 >= num96)) ? num96 : num95);
								double num98 = ((!(num95 >= num96)) ? num95 : num96);
								num99 = num98 - inLow[num5] + (inHigh[num5] - num97);
							}
							else
							{
								num99 = 0.0;
							}
							num94 = num99;
						}
						num93 = num94;
					}
					num4 = num88 - num93 + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num100;
					if (rangeType3 == RangeType.RealBody)
					{
						num100 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num101;
						if (rangeType3 == RangeType.HighLow)
						{
							num101 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num104;
							if (rangeType3 == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num102 = ((!(num13 >= num14)) ? num14 : num13);
								double num103 = ((!(num13 >= num14)) ? num13 : num14);
								num104 = num103 - inLow[num36] + (inHigh[num36] - num102);
							}
							else
							{
								num104 = 0.0;
							}
							num101 = num104;
						}
						num100 = num101;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num105;
					if (rangeType3 == RangeType.RealBody)
					{
						num105 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num106;
						if (rangeType3 == RangeType.HighLow)
						{
							num106 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num111;
							if (rangeType3 == RangeType.Shadows)
							{
								double num107 = inClose[num7];
								double num108 = inOpen[num7];
								double num109 = ((!(num107 >= num108)) ? num108 : num107);
								double num110 = ((!(num107 >= num108)) ? num107 : num108);
								num111 = num110 - inLow[num7] + (inHigh[num7] - num109);
							}
							else
							{
								num111 = 0.0;
							}
							num106 = num111;
						}
						num105 = num106;
					}
					num6 = num100 - num105 + num6;
					rangeType4 = Globals.candleSettings[8].rangeType;
					double num112;
					if (rangeType4 == RangeType.RealBody)
					{
						num112 = Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]);
					}
					else
					{
						double num113;
						if (rangeType4 == RangeType.HighLow)
						{
							num113 = inHigh[num36 - 1] - inLow[num36 - 1];
						}
						else
						{
							double num116;
							if (rangeType4 == RangeType.Shadows)
							{
								double num70 = inClose[num36 - 1];
								double num71 = inOpen[num36 - 1];
								double num114 = ((!(num70 >= num71)) ? num71 : num70);
								double num115 = ((!(num70 >= num71)) ? num70 : num71);
								num116 = num115 - inLow[num36 - 1] + (inHigh[num36 - 1] - num114);
							}
							else
							{
								num116 = 0.0;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType4 = Globals.candleSettings[8].rangeType;
					double num117;
					if (rangeType4 == RangeType.RealBody)
					{
						num117 = Math.Abs(inClose[num9] - inOpen[num9]);
					}
					else
					{
						double num118;
						if (rangeType4 == RangeType.HighLow)
						{
							num118 = inHigh[num9] - inLow[num9];
						}
						else
						{
							double num123;
							if (rangeType4 == RangeType.Shadows)
							{
								double num119 = inClose[num9];
								double num120 = inOpen[num9];
								double num121 = ((!(num119 >= num120)) ? num120 : num119);
								double num122 = ((!(num119 >= num120)) ? num119 : num120);
								num123 = num122 - inLow[num9] + (inHigh[num9] - num121);
							}
							else
							{
								num123 = 0.0;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					num8 = num112 - num117 + num8;
					num36++;
					num3++;
					num5++;
					num7++;
					num9++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHangingManLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[7].avgPeriod;
		int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		int avgPeriod4 = candleSettings[8].avgPeriod;
		int num4;
		if (num2 > avgPeriod4)
		{
			int num3 = ((((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			num4 = num3;
		}
		else
		{
			num4 = avgPeriod4;
		}
		return num4 + 1;
	}

	public static RetCode CdlHangingMan(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHangingManLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				double num8 = 0.0;
				int num9 = startIdx - candleSettings[8].avgPeriod - 1;
				int num10 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = (float)(double)Math.Abs((float)((double)inClose[num10] - (double)inOpen[num10]));
						}
						else
						{
							float num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = (float)((double)inHigh[num10] - (double)inLow[num10]);
							}
							else
							{
								float num17;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num10];
									float num14 = inOpen[num10];
									float num15 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num16 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num17 = (float)((double)num16 - (double)inLow[num10] + ((double)inHigh[num10] - (double)num15));
								}
								else
								{
									num17 = 0f;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = (double)num11 + num2;
						num10++;
					}
					while (num10 < startIdx);
				}
				int num18 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num19;
						if (rangeType2 == RangeType.RealBody)
						{
							num19 = (float)(double)Math.Abs((float)((double)inClose[num18] - (double)inOpen[num18]));
						}
						else
						{
							float num20;
							if (rangeType2 == RangeType.HighLow)
							{
								num20 = (float)((double)inHigh[num18] - (double)inLow[num18]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num13 = inClose[num18];
									float num14 = inOpen[num18];
									float num21 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num22 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num23 = (float)((double)num22 - (double)inLow[num18] + ((double)inHigh[num18] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num20 = num23;
							}
							num19 = num20;
						}
						num4 = (double)num19 + num4;
						num18++;
					}
					while (num18 < startIdx);
				}
				int num24 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num25;
						if (rangeType3 == RangeType.RealBody)
						{
							num25 = (float)(double)Math.Abs((float)((double)inClose[num24] - (double)inOpen[num24]));
						}
						else
						{
							float num26;
							if (rangeType3 == RangeType.HighLow)
							{
								num26 = (float)((double)inHigh[num24] - (double)inLow[num24]);
							}
							else
							{
								float num29;
								if (rangeType3 == RangeType.Shadows)
								{
									float num13 = inClose[num24];
									float num14 = inOpen[num24];
									float num27 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num28 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num29 = (float)((double)num28 - (double)inLow[num24] + ((double)inHigh[num24] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						num6 = (double)num25 + num6;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num30 = num9;
				if (num9 < startIdx - 1)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						float num31;
						if (rangeType4 == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
						}
						else
						{
							float num32;
							if (rangeType4 == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num30] - (double)inLow[num30]);
							}
							else
							{
								float num35;
								if (rangeType4 == RangeType.Shadows)
								{
									float num13 = inClose[num30];
									float num14 = inOpen[num30];
									float num33 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num34 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num35 = (float)((double)num34 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num8 = (double)num31 + num8;
						num30++;
					}
					while (num30 < startIdx - 1);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType;
					if (num38 != 0.0)
					{
						num39 = num2 / num38;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
						}
						else
						{
							float num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = (float)((double)inHigh[num36] - (double)inLow[num36]);
							}
							else
							{
								float num44;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num36];
									float num14 = inOpen[num36];
									float num42 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num43 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num44 = (float)((double)num43 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num42));
								}
								else
								{
									num44 = 0f;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num45 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					RangeType rangeType4;
					if ((double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36])) < candleSettings[2].factor * num39 / num45)
					{
						float num13 = inClose[num36];
						float num14 = inOpen[num36];
						float num46 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
						CandleSetting candleSetting2 = candleSettings[4];
						double num47 = candleSetting2.avgPeriod;
						double num48;
						if (num47 != 0.0)
						{
							num48 = num4 / num47;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num49;
							if (rangeType2 == RangeType.RealBody)
							{
								num49 = (float)(double)Math.Abs((float)((double)num13 - (double)num14));
							}
							else
							{
								float num50;
								if (rangeType2 == RangeType.HighLow)
								{
									num50 = (float)((double)inHigh[num36] - (double)inLow[num36]);
								}
								else
								{
									float num53;
									if (rangeType2 == RangeType.Shadows)
									{
										float num51 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
										float num52 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
										num53 = (float)((double)num52 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num51));
									}
									else
									{
										num53 = 0f;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num54 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num55 = inLow[num36];
						if ((double)num46 - (double)num55 > candleSetting3.factor * num48 / num54)
						{
							num13 = inClose[num36];
							num14 = inOpen[num36];
							float num56 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
							CandleSetting candleSetting4 = candleSettings[7];
							double num57 = candleSetting4.avgPeriod;
							double num58;
							if (num57 != 0.0)
							{
								num58 = num6 / num57;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								float num59;
								if (rangeType3 == RangeType.RealBody)
								{
									num59 = (float)(double)Math.Abs((float)((double)num13 - (double)num14));
								}
								else
								{
									float num60;
									if (rangeType3 == RangeType.HighLow)
									{
										num60 = (float)((double)inHigh[num36] - (double)num55);
									}
									else
									{
										float num63;
										if (rangeType3 == RangeType.Shadows)
										{
											float num61 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
											float num62 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
											num63 = (float)((double)inHigh[num36] - (double)num61 + ((double)num62 - (double)num55));
										}
										else
										{
											num63 = 0f;
										}
										num60 = num63;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting5 = candleSettings[7];
							double num64 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inHigh[num36] - (double)num56 < candleSetting5.factor * num58 / num64)
							{
								num13 = inClose[num36];
								num14 = inOpen[num36];
								float num65 = ((!((double)num13 < (double)num14)) ? num14 : num13);
								CandleSetting candleSetting6 = candleSettings[8];
								double num66 = candleSetting6.avgPeriod;
								double num67;
								if (num66 != 0.0)
								{
									num67 = num8 / num66;
								}
								else
								{
									rangeType4 = candleSetting6.rangeType;
									float num68;
									if (rangeType4 == RangeType.RealBody)
									{
										num68 = (float)(double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1]));
									}
									else
									{
										float num69;
										if (rangeType4 == RangeType.HighLow)
										{
											num69 = (float)((double)inHigh[num36 - 1] - (double)inLow[num36 - 1]);
										}
										else
										{
											float num74;
											if (rangeType4 == RangeType.Shadows)
											{
												float num70 = inClose[num36 - 1];
												float num71 = inOpen[num36 - 1];
												float num72 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
												float num73 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
												num74 = (float)((double)num73 - (double)inLow[num36 - 1] + ((double)inHigh[num36 - 1] - (double)num72));
											}
											else
											{
												num74 = 0f;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								CandleSetting candleSetting7 = Globals.candleSettings[8];
								double num75 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)num65 >= (double)inHigh[num36 - 1] - candleSetting7.factor * num67 / num75)
								{
									outInteger[num37] = -100;
									num37++;
									goto IL_086d;
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_086d;
					IL_086d:
					rangeType = Globals.candleSettings[2].rangeType;
					float num76;
					if (rangeType == RangeType.RealBody)
					{
						num76 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num77;
						if (rangeType == RangeType.HighLow)
						{
							num77 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num80;
							if (rangeType == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num78 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num79 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num80 = (float)((double)num79 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num78));
							}
							else
							{
								num80 = 0f;
							}
							num77 = num80;
						}
						num76 = num77;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num81;
					if (rangeType == RangeType.RealBody)
					{
						num81 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num82;
						if (rangeType == RangeType.HighLow)
						{
							num82 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num87;
							if (rangeType == RangeType.Shadows)
							{
								float num83 = inClose[num3];
								float num84 = inOpen[num3];
								float num85 = ((!((double)num83 >= (double)num84)) ? num84 : num83);
								float num86 = ((!((double)num83 >= (double)num84)) ? num83 : num84);
								num87 = (float)((double)num86 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num85));
							}
							else
							{
								num87 = 0f;
							}
							num82 = num87;
						}
						num81 = num82;
					}
					num2 = (double)(num76 - num81) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num92;
							if (rangeType2 == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num90 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num91 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num92 = (float)((double)num91 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num90));
							}
							else
							{
								num92 = 0f;
							}
							num89 = num92;
						}
						num88 = num89;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num93;
					if (rangeType2 == RangeType.RealBody)
					{
						num93 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num94;
						if (rangeType2 == RangeType.HighLow)
						{
							num94 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num99;
							if (rangeType2 == RangeType.Shadows)
							{
								float num95 = inClose[num5];
								float num96 = inOpen[num5];
								float num97 = ((!((double)num95 >= (double)num96)) ? num96 : num95);
								float num98 = ((!((double)num95 >= (double)num96)) ? num95 : num96);
								num99 = (float)((double)num98 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num97));
							}
							else
							{
								num99 = 0f;
							}
							num94 = num99;
						}
						num93 = num94;
					}
					num4 = (double)(num88 - num93) + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num100;
					if (rangeType3 == RangeType.RealBody)
					{
						num100 = (float)(double)Math.Abs((float)((double)inClose[num36] - (double)inOpen[num36]));
					}
					else
					{
						float num101;
						if (rangeType3 == RangeType.HighLow)
						{
							num101 = (float)((double)inHigh[num36] - (double)inLow[num36]);
						}
						else
						{
							float num104;
							if (rangeType3 == RangeType.Shadows)
							{
								float num13 = inClose[num36];
								float num14 = inOpen[num36];
								float num102 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
								float num103 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
								num104 = (float)((double)num103 - (double)inLow[num36] + ((double)inHigh[num36] - (double)num102));
							}
							else
							{
								num104 = 0f;
							}
							num101 = num104;
						}
						num100 = num101;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num105;
					if (rangeType3 == RangeType.RealBody)
					{
						num105 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num106;
						if (rangeType3 == RangeType.HighLow)
						{
							num106 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num111;
							if (rangeType3 == RangeType.Shadows)
							{
								float num107 = inClose[num7];
								float num108 = inOpen[num7];
								float num109 = ((!((double)num107 >= (double)num108)) ? num108 : num107);
								float num110 = ((!((double)num107 >= (double)num108)) ? num107 : num108);
								num111 = (float)((double)num110 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num109));
							}
							else
							{
								num111 = 0f;
							}
							num106 = num111;
						}
						num105 = num106;
					}
					num6 = (double)(num100 - num105) + num6;
					rangeType4 = Globals.candleSettings[8].rangeType;
					float num112;
					if (rangeType4 == RangeType.RealBody)
					{
						num112 = (float)(double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1]));
					}
					else
					{
						float num113;
						if (rangeType4 == RangeType.HighLow)
						{
							num113 = (float)((double)inHigh[num36 - 1] - (double)inLow[num36 - 1]);
						}
						else
						{
							float num116;
							if (rangeType4 == RangeType.Shadows)
							{
								float num70 = inClose[num36 - 1];
								float num71 = inOpen[num36 - 1];
								float num114 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
								float num115 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
								num116 = (float)((double)num115 - (double)inLow[num36 - 1] + ((double)inHigh[num36 - 1] - (double)num114));
							}
							else
							{
								num116 = 0f;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType4 = Globals.candleSettings[8].rangeType;
					float num117;
					if (rangeType4 == RangeType.RealBody)
					{
						num117 = (float)(double)Math.Abs((float)((double)inClose[num9] - (double)inOpen[num9]));
					}
					else
					{
						float num118;
						if (rangeType4 == RangeType.HighLow)
						{
							num118 = (float)((double)inHigh[num9] - (double)inLow[num9]);
						}
						else
						{
							float num123;
							if (rangeType4 == RangeType.Shadows)
							{
								float num119 = inClose[num9];
								float num120 = inOpen[num9];
								float num121 = ((!((double)num119 >= (double)num120)) ? num120 : num119);
								float num122 = ((!((double)num119 >= (double)num120)) ? num119 : num120);
								num123 = (float)((double)num122 - (double)inLow[num9] + ((double)inHigh[num9] - (double)num121));
							}
							else
							{
								num123 = 0f;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					num8 = (double)(num112 - num117) + num8;
					num36++;
					num3++;
					num5++;
					num7++;
					num9++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHangingMan(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHangingManLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				double num8 = 0.0;
				int num9 = startIdx - candleSettings[8].avgPeriod - 1;
				int num10 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = Math.Abs(inClose[num10] - inOpen[num10]);
						}
						else
						{
							double num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = inHigh[num10] - inLow[num10];
							}
							else
							{
								double num17;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num10];
									double num14 = inOpen[num10];
									double num15 = ((!(num13 >= num14)) ? num14 : num13);
									double num16 = ((!(num13 >= num14)) ? num13 : num14);
									num17 = num16 - inLow[num10] + (inHigh[num10] - num15);
								}
								else
								{
									num17 = 0.0;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						num2 = num11 + num2;
						num10++;
					}
					while (num10 < startIdx);
				}
				int num18 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num19;
						if (rangeType2 == RangeType.RealBody)
						{
							num19 = Math.Abs(inClose[num18] - inOpen[num18]);
						}
						else
						{
							double num20;
							if (rangeType2 == RangeType.HighLow)
							{
								num20 = inHigh[num18] - inLow[num18];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num13 = inClose[num18];
									double num14 = inOpen[num18];
									double num21 = ((!(num13 >= num14)) ? num14 : num13);
									double num22 = ((!(num13 >= num14)) ? num13 : num14);
									num23 = num22 - inLow[num18] + (inHigh[num18] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num20 = num23;
							}
							num19 = num20;
						}
						num4 = num19 + num4;
						num18++;
					}
					while (num18 < startIdx);
				}
				int num24 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num25;
						if (rangeType3 == RangeType.RealBody)
						{
							num25 = Math.Abs(inClose[num24] - inOpen[num24]);
						}
						else
						{
							double num26;
							if (rangeType3 == RangeType.HighLow)
							{
								num26 = inHigh[num24] - inLow[num24];
							}
							else
							{
								double num29;
								if (rangeType3 == RangeType.Shadows)
								{
									double num13 = inClose[num24];
									double num14 = inOpen[num24];
									double num27 = ((!(num13 >= num14)) ? num14 : num13);
									double num28 = ((!(num13 >= num14)) ? num13 : num14);
									num29 = num28 - inLow[num24] + (inHigh[num24] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						num6 = num25 + num6;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num30 = num9;
				if (num9 < startIdx - 1)
				{
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						double num31;
						if (rangeType4 == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num30] - inOpen[num30]);
						}
						else
						{
							double num32;
							if (rangeType4 == RangeType.HighLow)
							{
								num32 = inHigh[num30] - inLow[num30];
							}
							else
							{
								double num35;
								if (rangeType4 == RangeType.Shadows)
								{
									double num13 = inClose[num30];
									double num14 = inOpen[num30];
									double num33 = ((!(num13 >= num14)) ? num14 : num13);
									double num34 = ((!(num13 >= num14)) ? num13 : num14);
									num35 = num34 - inLow[num30] + (inHigh[num30] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num8 = num31 + num8;
						num30++;
					}
					while (num30 < startIdx - 1);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType;
					if (num38 != 0.0)
					{
						num39 = num2 / num38;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = Math.Abs(inClose[num36] - inOpen[num36]);
						}
						else
						{
							double num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = inHigh[num36] - inLow[num36];
							}
							else
							{
								double num44;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num36];
									double num14 = inOpen[num36];
									double num42 = ((!(num13 >= num14)) ? num14 : num13);
									double num43 = ((!(num13 >= num14)) ? num13 : num14);
									num44 = num43 - inLow[num36] + (inHigh[num36] - num42);
								}
								else
								{
									num44 = 0.0;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num45 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					RangeType rangeType4;
					if (Math.Abs(inClose[num36] - inOpen[num36]) < candleSettings[2].factor * num39 / num45)
					{
						double num13 = inClose[num36];
						double num14 = inOpen[num36];
						double num46 = ((!(num13 >= num14)) ? num13 : num14);
						CandleSetting candleSetting2 = candleSettings[4];
						double num47 = candleSetting2.avgPeriod;
						double num48;
						if (num47 != 0.0)
						{
							num48 = num4 / num47;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num49;
							if (rangeType2 == RangeType.RealBody)
							{
								num49 = Math.Abs(num13 - num14);
							}
							else
							{
								double num50;
								if (rangeType2 == RangeType.HighLow)
								{
									num50 = inHigh[num36] - inLow[num36];
								}
								else
								{
									double num53;
									if (rangeType2 == RangeType.Shadows)
									{
										double num51 = ((!(num13 >= num14)) ? num14 : num13);
										double num52 = ((!(num13 >= num14)) ? num13 : num14);
										num53 = num52 - inLow[num36] + (inHigh[num36] - num51);
									}
									else
									{
										num53 = 0.0;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num54 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num55 = inLow[num36];
						if (num46 - num55 > candleSetting3.factor * num48 / num54)
						{
							num13 = inClose[num36];
							num14 = inOpen[num36];
							double num56 = ((!(num13 >= num14)) ? num14 : num13);
							CandleSetting candleSetting4 = candleSettings[7];
							double num57 = candleSetting4.avgPeriod;
							double num58;
							if (num57 != 0.0)
							{
								num58 = num6 / num57;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								double num59;
								if (rangeType3 == RangeType.RealBody)
								{
									num59 = Math.Abs(num13 - num14);
								}
								else
								{
									double num60;
									if (rangeType3 == RangeType.HighLow)
									{
										num60 = inHigh[num36] - num55;
									}
									else
									{
										double num63;
										if (rangeType3 == RangeType.Shadows)
										{
											double num61 = ((!(num13 >= num14)) ? num14 : num13);
											double num62 = ((!(num13 >= num14)) ? num13 : num14);
											num63 = inHigh[num36] - num61 + (num62 - num55);
										}
										else
										{
											num63 = 0.0;
										}
										num60 = num63;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting5 = candleSettings[7];
							double num64 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inHigh[num36] - num56 < candleSetting5.factor * num58 / num64)
							{
								num13 = inClose[num36];
								num14 = inOpen[num36];
								double num65 = ((!(num13 < num14)) ? num14 : num13);
								CandleSetting candleSetting6 = candleSettings[8];
								double num66 = candleSetting6.avgPeriod;
								double num67;
								if (num66 != 0.0)
								{
									num67 = num8 / num66;
								}
								else
								{
									rangeType4 = candleSetting6.rangeType;
									double num68;
									if (rangeType4 == RangeType.RealBody)
									{
										num68 = Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]);
									}
									else
									{
										double num69;
										if (rangeType4 == RangeType.HighLow)
										{
											num69 = inHigh[num36 - 1] - inLow[num36 - 1];
										}
										else
										{
											double num74;
											if (rangeType4 == RangeType.Shadows)
											{
												double num70 = inClose[num36 - 1];
												double num71 = inOpen[num36 - 1];
												double num72 = ((!(num70 >= num71)) ? num71 : num70);
												double num73 = ((!(num70 >= num71)) ? num70 : num71);
												num74 = num73 - inLow[num36 - 1] + (inHigh[num36 - 1] - num72);
											}
											else
											{
												num74 = 0.0;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								CandleSetting candleSetting7 = Globals.candleSettings[8];
								double num75 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (num65 >= inHigh[num36 - 1] - candleSetting7.factor * num67 / num75)
								{
									outInteger[num37] = -100;
									num37++;
									goto IL_07e7;
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_07e7;
					IL_07e7:
					rangeType = Globals.candleSettings[2].rangeType;
					double num76;
					if (rangeType == RangeType.RealBody)
					{
						num76 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num77;
						if (rangeType == RangeType.HighLow)
						{
							num77 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num80;
							if (rangeType == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num78 = ((!(num13 >= num14)) ? num14 : num13);
								double num79 = ((!(num13 >= num14)) ? num13 : num14);
								num80 = num79 - inLow[num36] + (inHigh[num36] - num78);
							}
							else
							{
								num80 = 0.0;
							}
							num77 = num80;
						}
						num76 = num77;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num81;
					if (rangeType == RangeType.RealBody)
					{
						num81 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num82;
						if (rangeType == RangeType.HighLow)
						{
							num82 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num87;
							if (rangeType == RangeType.Shadows)
							{
								double num83 = inClose[num3];
								double num84 = inOpen[num3];
								double num85 = ((!(num83 >= num84)) ? num84 : num83);
								double num86 = ((!(num83 >= num84)) ? num83 : num84);
								num87 = num86 - inLow[num3] + (inHigh[num3] - num85);
							}
							else
							{
								num87 = 0.0;
							}
							num82 = num87;
						}
						num81 = num82;
					}
					num2 = num76 - num81 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num92;
							if (rangeType2 == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num90 = ((!(num13 >= num14)) ? num14 : num13);
								double num91 = ((!(num13 >= num14)) ? num13 : num14);
								num92 = num91 - inLow[num36] + (inHigh[num36] - num90);
							}
							else
							{
								num92 = 0.0;
							}
							num89 = num92;
						}
						num88 = num89;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num93;
					if (rangeType2 == RangeType.RealBody)
					{
						num93 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num94;
						if (rangeType2 == RangeType.HighLow)
						{
							num94 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num99;
							if (rangeType2 == RangeType.Shadows)
							{
								double num95 = inClose[num5];
								double num96 = inOpen[num5];
								double num97 = ((!(num95 >= num96)) ? num96 : num95);
								double num98 = ((!(num95 >= num96)) ? num95 : num96);
								num99 = num98 - inLow[num5] + (inHigh[num5] - num97);
							}
							else
							{
								num99 = 0.0;
							}
							num94 = num99;
						}
						num93 = num94;
					}
					num4 = num88 - num93 + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num100;
					if (rangeType3 == RangeType.RealBody)
					{
						num100 = Math.Abs(inClose[num36] - inOpen[num36]);
					}
					else
					{
						double num101;
						if (rangeType3 == RangeType.HighLow)
						{
							num101 = inHigh[num36] - inLow[num36];
						}
						else
						{
							double num104;
							if (rangeType3 == RangeType.Shadows)
							{
								double num13 = inClose[num36];
								double num14 = inOpen[num36];
								double num102 = ((!(num13 >= num14)) ? num14 : num13);
								double num103 = ((!(num13 >= num14)) ? num13 : num14);
								num104 = num103 - inLow[num36] + (inHigh[num36] - num102);
							}
							else
							{
								num104 = 0.0;
							}
							num101 = num104;
						}
						num100 = num101;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num105;
					if (rangeType3 == RangeType.RealBody)
					{
						num105 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num106;
						if (rangeType3 == RangeType.HighLow)
						{
							num106 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num111;
							if (rangeType3 == RangeType.Shadows)
							{
								double num107 = inClose[num7];
								double num108 = inOpen[num7];
								double num109 = ((!(num107 >= num108)) ? num108 : num107);
								double num110 = ((!(num107 >= num108)) ? num107 : num108);
								num111 = num110 - inLow[num7] + (inHigh[num7] - num109);
							}
							else
							{
								num111 = 0.0;
							}
							num106 = num111;
						}
						num105 = num106;
					}
					num6 = num100 - num105 + num6;
					rangeType4 = Globals.candleSettings[8].rangeType;
					double num112;
					if (rangeType4 == RangeType.RealBody)
					{
						num112 = Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]);
					}
					else
					{
						double num113;
						if (rangeType4 == RangeType.HighLow)
						{
							num113 = inHigh[num36 - 1] - inLow[num36 - 1];
						}
						else
						{
							double num116;
							if (rangeType4 == RangeType.Shadows)
							{
								double num70 = inClose[num36 - 1];
								double num71 = inOpen[num36 - 1];
								double num114 = ((!(num70 >= num71)) ? num71 : num70);
								double num115 = ((!(num70 >= num71)) ? num70 : num71);
								num116 = num115 - inLow[num36 - 1] + (inHigh[num36 - 1] - num114);
							}
							else
							{
								num116 = 0.0;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType4 = Globals.candleSettings[8].rangeType;
					double num117;
					if (rangeType4 == RangeType.RealBody)
					{
						num117 = Math.Abs(inClose[num9] - inOpen[num9]);
					}
					else
					{
						double num118;
						if (rangeType4 == RangeType.HighLow)
						{
							num118 = inHigh[num9] - inLow[num9];
						}
						else
						{
							double num123;
							if (rangeType4 == RangeType.Shadows)
							{
								double num119 = inClose[num9];
								double num120 = inOpen[num9];
								double num121 = ((!(num119 >= num120)) ? num120 : num119);
								double num122 = ((!(num119 >= num120)) ? num119 : num120);
								num123 = num122 - inLow[num9] + (inHigh[num9] - num121);
							}
							else
							{
								num123 = 0.0;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					num8 = num112 - num117 + num8;
					num36++;
					num3++;
					num5++;
					num7++;
					num9++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHaramiLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlHarami(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHaramiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
						}
						else
						{
							float num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
							}
							else
							{
								float num30;
								if (rangeType == RangeType.Shadows)
								{
									float num26 = inClose[num20 - 1];
									float num27 = inOpen[num20 - 1];
									float num28 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
									float num29 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
									num30 = (float)((double)num29 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num28));
								}
								else
								{
									num30 = 0f;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1])) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
							}
							else
							{
								float num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = (float)((double)inHigh[num20] - (double)inLow[num20]);
								}
								else
								{
									float num38;
									if (rangeType2 == RangeType.Shadows)
									{
										float num9 = inClose[num20];
										float num10 = inOpen[num20];
										float num36 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num37 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num38 = (float)((double)num37 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num36));
									}
									else
									{
										num38 = 0f;
									}
									num35 = num38;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num39 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20])) <= Globals.candleSettings[2].factor * num33 / num39)
						{
							float num9 = inClose[num20];
							float num10 = inOpen[num20];
							float num40 = ((!((double)num9 > (double)num10)) ? num10 : num9);
							float num26 = inClose[num20 - 1];
							float num27 = inOpen[num20 - 1];
							float num41 = ((!((double)num26 > (double)num27)) ? num27 : num26);
							if ((double)num40 < (double)num41)
							{
								float num42 = ((!((double)num9 < (double)num10)) ? num10 : num9);
								float num43 = ((!((double)num26 < (double)num27)) ? num27 : num26);
								if ((double)num42 > (double)num43)
								{
									int num44 = (((double)num26 >= (double)num27) ? 1 : (-1));
									outInteger[num21] = num44 * -100;
									num21++;
									goto IL_04f0;
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_04f0;
					IL_04f0:
					rangeType = Globals.candleSettings[0].rangeType;
					float num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
					}
					else
					{
						float num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
						}
						else
						{
							float num49;
							if (rangeType == RangeType.Shadows)
							{
								float num26 = inClose[num20 - 1];
								float num27 = inOpen[num20 - 1];
								float num47 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num48 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num49 = (float)((double)num48 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num47));
							}
							else
							{
								num49 = 0f;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num56;
							if (rangeType == RangeType.Shadows)
							{
								float num52 = inClose[num4];
								float num53 = inOpen[num4];
								float num54 = ((!((double)num52 >= (double)num53)) ? num53 : num52);
								float num55 = ((!((double)num52 >= (double)num53)) ? num52 : num53);
								num56 = (float)((double)num55 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num54));
							}
							else
							{
								num56 = 0f;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = (double)(num45 - num50) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
					}
					else
					{
						float num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = (float)((double)inHigh[num20] - (double)inLow[num20]);
						}
						else
						{
							float num61;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num20];
								float num10 = inOpen[num20];
								float num59 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num60 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num61 = (float)((double)num60 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num59));
							}
							else
							{
								num61 = 0f;
							}
							num58 = num61;
						}
						num57 = num58;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num62;
					if (rangeType2 == RangeType.RealBody)
					{
						num62 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num63;
						if (rangeType2 == RangeType.HighLow)
						{
							num63 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num68;
							if (rangeType2 == RangeType.Shadows)
							{
								float num64 = inClose[num5];
								float num65 = inOpen[num5];
								float num66 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
								float num67 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
								num68 = (float)((double)num67 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num66));
							}
							else
							{
								num68 = 0f;
							}
							num63 = num68;
						}
						num62 = num63;
					}
					num3 = (double)(num57 - num62) + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHarami(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHaramiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
						}
						else
						{
							double num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = inHigh[num20 - 1] - inLow[num20 - 1];
							}
							else
							{
								double num30;
								if (rangeType == RangeType.Shadows)
								{
									double num26 = inClose[num20 - 1];
									double num27 = inOpen[num20 - 1];
									double num28 = ((!(num26 >= num27)) ? num27 : num26);
									double num29 = ((!(num26 >= num27)) ? num26 : num27);
									num30 = num29 - inLow[num20 - 1] + (inHigh[num20 - 1] - num28);
								}
								else
								{
									num30 = 0.0;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = Math.Abs(inClose[num20] - inOpen[num20]);
							}
							else
							{
								double num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = inHigh[num20] - inLow[num20];
								}
								else
								{
									double num38;
									if (rangeType2 == RangeType.Shadows)
									{
										double num9 = inClose[num20];
										double num10 = inOpen[num20];
										double num36 = ((!(num9 >= num10)) ? num10 : num9);
										double num37 = ((!(num9 >= num10)) ? num9 : num10);
										num38 = num37 - inLow[num20] + (inHigh[num20] - num36);
									}
									else
									{
										num38 = 0.0;
									}
									num35 = num38;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num39 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num20] - inOpen[num20]) <= Globals.candleSettings[2].factor * num33 / num39)
						{
							double num9 = inClose[num20];
							double num10 = inOpen[num20];
							double num40 = ((!(num9 > num10)) ? num10 : num9);
							double num26 = inClose[num20 - 1];
							double num27 = inOpen[num20 - 1];
							double num41 = ((!(num26 > num27)) ? num27 : num26);
							if (num40 < num41)
							{
								double num42 = ((!(num9 < num10)) ? num10 : num9);
								double num43 = ((!(num26 < num27)) ? num27 : num26);
								if (num42 > num43)
								{
									int num44 = ((num26 >= num27) ? 1 : (-1));
									outInteger[num21] = num44 * -100;
									num21++;
									goto IL_049f;
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_049f;
					IL_049f:
					rangeType = Globals.candleSettings[0].rangeType;
					double num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
					}
					else
					{
						double num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = inHigh[num20 - 1] - inLow[num20 - 1];
						}
						else
						{
							double num49;
							if (rangeType == RangeType.Shadows)
							{
								double num26 = inClose[num20 - 1];
								double num27 = inOpen[num20 - 1];
								double num47 = ((!(num26 >= num27)) ? num27 : num26);
								double num48 = ((!(num26 >= num27)) ? num26 : num27);
								num49 = num48 - inLow[num20 - 1] + (inHigh[num20 - 1] - num47);
							}
							else
							{
								num49 = 0.0;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num56;
							if (rangeType == RangeType.Shadows)
							{
								double num52 = inClose[num4];
								double num53 = inOpen[num4];
								double num54 = ((!(num52 >= num53)) ? num53 : num52);
								double num55 = ((!(num52 >= num53)) ? num52 : num53);
								num56 = num55 - inLow[num4] + (inHigh[num4] - num54);
							}
							else
							{
								num56 = 0.0;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = num45 - num50 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = Math.Abs(inClose[num20] - inOpen[num20]);
					}
					else
					{
						double num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = inHigh[num20] - inLow[num20];
						}
						else
						{
							double num61;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num20];
								double num10 = inOpen[num20];
								double num59 = ((!(num9 >= num10)) ? num10 : num9);
								double num60 = ((!(num9 >= num10)) ? num9 : num10);
								num61 = num60 - inLow[num20] + (inHigh[num20] - num59);
							}
							else
							{
								num61 = 0.0;
							}
							num58 = num61;
						}
						num57 = num58;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num62;
					if (rangeType2 == RangeType.RealBody)
					{
						num62 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num63;
						if (rangeType2 == RangeType.HighLow)
						{
							num63 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num68;
							if (rangeType2 == RangeType.Shadows)
							{
								double num64 = inClose[num5];
								double num65 = inOpen[num5];
								double num66 = ((!(num64 >= num65)) ? num65 : num64);
								double num67 = ((!(num64 >= num65)) ? num64 : num65);
								num68 = num67 - inLow[num5] + (inHigh[num5] - num66);
							}
							else
							{
								num68 = 0.0;
							}
							num63 = num68;
						}
						num62 = num63;
					}
					num3 = num57 - num62 + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHaramiCrossLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlHaramiCross(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHaramiCrossLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[3].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
						}
						else
						{
							float num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
							}
							else
							{
								float num30;
								if (rangeType == RangeType.Shadows)
								{
									float num26 = inClose[num20 - 1];
									float num27 = inOpen[num20 - 1];
									float num28 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
									float num29 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
									num30 = (float)((double)num29 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num28));
								}
								else
								{
									num30 = 0f;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1])) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
							}
							else
							{
								float num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = (float)((double)inHigh[num20] - (double)inLow[num20]);
								}
								else
								{
									float num38;
									if (rangeType2 == RangeType.Shadows)
									{
										float num9 = inClose[num20];
										float num10 = inOpen[num20];
										float num36 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num37 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num38 = (float)((double)num37 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num36));
									}
									else
									{
										num38 = 0f;
									}
									num35 = num38;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num39 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20])) <= Globals.candleSettings[3].factor * num33 / num39)
						{
							float num9 = inClose[num20];
							float num10 = inOpen[num20];
							float num40 = ((!((double)num9 > (double)num10)) ? num10 : num9);
							float num26 = inClose[num20 - 1];
							float num27 = inOpen[num20 - 1];
							float num41 = ((!((double)num26 > (double)num27)) ? num27 : num26);
							if ((double)num40 < (double)num41)
							{
								float num42 = ((!((double)num9 < (double)num10)) ? num10 : num9);
								float num43 = ((!((double)num26 < (double)num27)) ? num27 : num26);
								if ((double)num42 > (double)num43)
								{
									int num44 = (((double)num26 >= (double)num27) ? 1 : (-1));
									outInteger[num21] = num44 * -100;
									num21++;
									goto IL_04f0;
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_04f0;
					IL_04f0:
					rangeType = Globals.candleSettings[0].rangeType;
					float num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
					}
					else
					{
						float num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
						}
						else
						{
							float num49;
							if (rangeType == RangeType.Shadows)
							{
								float num26 = inClose[num20 - 1];
								float num27 = inOpen[num20 - 1];
								float num47 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num48 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num49 = (float)((double)num48 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num47));
							}
							else
							{
								num49 = 0f;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num56;
							if (rangeType == RangeType.Shadows)
							{
								float num52 = inClose[num4];
								float num53 = inOpen[num4];
								float num54 = ((!((double)num52 >= (double)num53)) ? num53 : num52);
								float num55 = ((!((double)num52 >= (double)num53)) ? num52 : num53);
								num56 = (float)((double)num55 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num54));
							}
							else
							{
								num56 = 0f;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = (double)(num45 - num50) + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
					}
					else
					{
						float num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = (float)((double)inHigh[num20] - (double)inLow[num20]);
						}
						else
						{
							float num61;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num20];
								float num10 = inOpen[num20];
								float num59 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num60 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num61 = (float)((double)num60 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num59));
							}
							else
							{
								num61 = 0f;
							}
							num58 = num61;
						}
						num57 = num58;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num62;
					if (rangeType2 == RangeType.RealBody)
					{
						num62 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num63;
						if (rangeType2 == RangeType.HighLow)
						{
							num63 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num68;
							if (rangeType2 == RangeType.Shadows)
							{
								float num64 = inClose[num5];
								float num65 = inOpen[num5];
								float num66 = ((!((double)num64 >= (double)num65)) ? num65 : num64);
								float num67 = ((!((double)num64 >= (double)num65)) ? num64 : num65);
								num68 = (float)((double)num67 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num66));
							}
							else
							{
								num68 = 0f;
							}
							num63 = num68;
						}
						num62 = num63;
					}
					num3 = (double)(num57 - num62) + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHaramiCross(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHaramiCrossLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 1;
				int num5 = startIdx - candleSettings[3].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 1)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 1);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
						}
						else
						{
							double num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = inHigh[num20 - 1] - inLow[num20 - 1];
							}
							else
							{
								double num30;
								if (rangeType == RangeType.Shadows)
								{
									double num26 = inClose[num20 - 1];
									double num27 = inOpen[num20 - 1];
									double num28 = ((!(num26 >= num27)) ? num27 : num26);
									double num29 = ((!(num26 >= num27)) ? num26 : num27);
									num30 = num29 - inLow[num20 - 1] + (inHigh[num20 - 1] - num28);
								}
								else
								{
									num30 = 0.0;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]) > candleSettings[0].factor * num23 / num31)
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num32 = candleSetting2.avgPeriod;
						double num33;
						if (num32 != 0.0)
						{
							num33 = num3 / num32;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num34;
							if (rangeType2 == RangeType.RealBody)
							{
								num34 = Math.Abs(inClose[num20] - inOpen[num20]);
							}
							else
							{
								double num35;
								if (rangeType2 == RangeType.HighLow)
								{
									num35 = inHigh[num20] - inLow[num20];
								}
								else
								{
									double num38;
									if (rangeType2 == RangeType.Shadows)
									{
										double num9 = inClose[num20];
										double num10 = inOpen[num20];
										double num36 = ((!(num9 >= num10)) ? num10 : num9);
										double num37 = ((!(num9 >= num10)) ? num9 : num10);
										num38 = num37 - inLow[num20] + (inHigh[num20] - num36);
									}
									else
									{
										num38 = 0.0;
									}
									num35 = num38;
								}
								num34 = num35;
							}
							num33 = num34;
						}
						double num39 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (Math.Abs(inClose[num20] - inOpen[num20]) <= Globals.candleSettings[3].factor * num33 / num39)
						{
							double num9 = inClose[num20];
							double num10 = inOpen[num20];
							double num40 = ((!(num9 > num10)) ? num10 : num9);
							double num26 = inClose[num20 - 1];
							double num27 = inOpen[num20 - 1];
							double num41 = ((!(num26 > num27)) ? num27 : num26);
							if (num40 < num41)
							{
								double num42 = ((!(num9 < num10)) ? num10 : num9);
								double num43 = ((!(num26 < num27)) ? num27 : num26);
								if (num42 > num43)
								{
									int num44 = ((num26 >= num27) ? 1 : (-1));
									outInteger[num21] = num44 * -100;
									num21++;
									goto IL_049f;
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_049f;
					IL_049f:
					rangeType = Globals.candleSettings[0].rangeType;
					double num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
					}
					else
					{
						double num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = inHigh[num20 - 1] - inLow[num20 - 1];
						}
						else
						{
							double num49;
							if (rangeType == RangeType.Shadows)
							{
								double num26 = inClose[num20 - 1];
								double num27 = inOpen[num20 - 1];
								double num47 = ((!(num26 >= num27)) ? num27 : num26);
								double num48 = ((!(num26 >= num27)) ? num26 : num27);
								num49 = num48 - inLow[num20 - 1] + (inHigh[num20 - 1] - num47);
							}
							else
							{
								num49 = 0.0;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num56;
							if (rangeType == RangeType.Shadows)
							{
								double num52 = inClose[num4];
								double num53 = inOpen[num4];
								double num54 = ((!(num52 >= num53)) ? num53 : num52);
								double num55 = ((!(num52 >= num53)) ? num52 : num53);
								num56 = num55 - inLow[num4] + (inHigh[num4] - num54);
							}
							else
							{
								num56 = 0.0;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = num45 - num50 + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num57;
					if (rangeType2 == RangeType.RealBody)
					{
						num57 = Math.Abs(inClose[num20] - inOpen[num20]);
					}
					else
					{
						double num58;
						if (rangeType2 == RangeType.HighLow)
						{
							num58 = inHigh[num20] - inLow[num20];
						}
						else
						{
							double num61;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num20];
								double num10 = inOpen[num20];
								double num59 = ((!(num9 >= num10)) ? num10 : num9);
								double num60 = ((!(num9 >= num10)) ? num9 : num10);
								num61 = num60 - inLow[num20] + (inHigh[num20] - num59);
							}
							else
							{
								num61 = 0.0;
							}
							num58 = num61;
						}
						num57 = num58;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num62;
					if (rangeType2 == RangeType.RealBody)
					{
						num62 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num63;
						if (rangeType2 == RangeType.HighLow)
						{
							num63 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num68;
							if (rangeType2 == RangeType.Shadows)
							{
								double num64 = inClose[num5];
								double num65 = inOpen[num5];
								double num66 = ((!(num64 >= num65)) ? num65 : num64);
								double num67 = ((!(num64 >= num65)) ? num64 : num65);
								num68 = num67 - inLow[num5] + (inHigh[num5] - num66);
							}
							else
							{
								num68 = 0.0;
							}
							num63 = num68;
						}
						num62 = num63;
					}
					num3 = num57 - num62 + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHignWaveLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[5].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlHignWave(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHignWaveLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[5].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[5].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) < candleSettings[2].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[5];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[5];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inHigh[num14];
						if ((double)num38 - (double)num29 > candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)num38 - (double)inLow[num14]);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)num44 - (double)inLow[num14] + ((double)num38 - (double)num43));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[5];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num39 - (double)inLow[num14] > candleSetting4.factor * num40 / num46)
							{
								int num47 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_0559;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0559;
					IL_0559:
					rangeType = Globals.candleSettings[2].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num52;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num50 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num51 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num52 = (float)((double)num51 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num50));
							}
							else
							{
								num52 = 0f;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num59;
							if (rangeType == RangeType.Shadows)
							{
								float num55 = inClose[num3];
								float num56 = inOpen[num3];
								float num57 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
								float num58 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num59 = (float)((double)num58 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = (double)(num48 - num53) + num2;
					rangeType2 = Globals.candleSettings[5].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num64;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num62 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num63 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num64 = (float)((double)num63 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[5].rangeType;
					float num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType2 == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = (double)(num60 - num65) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHignWave(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHignWaveLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[5].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[5].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) < candleSettings[2].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[5];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[5];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inHigh[num14];
						if (num38 - num29 > candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = num38 - inLow[num14];
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = num44 - inLow[num14] + (num38 - num43);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[5];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num39 - inLow[num14] > candleSetting4.factor * num40 / num46)
							{
								int num47 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_04ff;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04ff;
					IL_04ff:
					rangeType = Globals.candleSettings[2].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num52;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num50 = ((!(num9 >= num10)) ? num10 : num9);
								double num51 = ((!(num9 >= num10)) ? num9 : num10);
								num52 = num51 - inLow[num14] + (inHigh[num14] - num50);
							}
							else
							{
								num52 = 0.0;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num59;
							if (rangeType == RangeType.Shadows)
							{
								double num55 = inClose[num3];
								double num56 = inOpen[num3];
								double num57 = ((!(num55 >= num56)) ? num56 : num55);
								double num58 = ((!(num55 >= num56)) ? num55 : num56);
								num59 = num58 - inLow[num3] + (inHigh[num3] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = num48 - num53 + num2;
					rangeType2 = Globals.candleSettings[5].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num64;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num62 = ((!(num9 >= num10)) ? num10 : num9);
								double num63 = ((!(num9 >= num10)) ? num9 : num10);
								num64 = num63 - inLow[num14] + (inHigh[num14] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[5].rangeType;
					double num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType2 == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = num60 - num65 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHikkakeLookback()
	{
		return 5;
	}

	public static RetCode CdlHikkake(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 5)
				{
					startIdx = 5;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = 0;
				int num3 = startIdx - 3;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					do
					{
						float num5 = inHigh[num4];
						if ((double)num5 < (double)inHigh[num4 - 1])
						{
							float num6 = inLow[num4];
							if ((double)num6 > (double)inLow[num4 - 1])
							{
								float num7 = inHigh[num3];
								if (((double)num7 < (double)num5 && (double)inLow[num3] < (double)num6) || ((double)num7 > (double)num5 && (double)inLow[num3] > (double)num6))
								{
									num2 = (((double)num7 < (double)num5) ? 1 : (-1)) * 100;
									num = num3;
									goto IL_00f0;
								}
							}
						}
						if (num3 <= num + 3 && ((num2 > 0 && (double)inClose[num3] > (double)inHigh[num - 1]) || (num2 < 0 && (double)inClose[num3] < (double)inLow[num - 1])))
						{
							num = 0;
						}
						goto IL_00f0;
						IL_00f0:
						num3++;
						num4++;
					}
					while (num3 < startIdx);
				}
				int num8 = startIdx;
				int num9 = 0;
				do
				{
					float num10 = inHigh[num8 - 1];
					int num11 = num8 - 1 - 1;
					if ((double)num10 < (double)inHigh[num11])
					{
						float num12 = inLow[num8 - 1];
						if ((double)num12 > (double)inLow[num11])
						{
							float num7 = inHigh[num8];
							if (((double)num7 < (double)num10 && (double)inLow[num8] < (double)num12) || ((double)num7 > (double)num10 && (double)inLow[num8] > (double)num12))
							{
								num2 = (((double)num7 < (double)num10) ? 1 : (-1)) * 100;
								num = num8;
								outInteger[num9] = num2;
								num9++;
								goto IL_01cd;
							}
						}
					}
					if (num8 <= num + 3 && ((num2 > 0 && (double)inClose[num8] > (double)inHigh[num - 1]) || (num2 < 0 && (double)inClose[num8] < (double)inLow[num - 1])))
					{
						int num13 = ((num2 > 0) ? 1 : (-1));
						outInteger[num9] = num13 * 100 + num2;
						num9++;
						num = 0;
					}
					else
					{
						outInteger[num9] = 0;
						num9++;
					}
					goto IL_01cd;
					IL_01cd:
					num8++;
				}
				while (num8 <= endIdx);
				outNBElement = num9;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHikkake(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 5)
				{
					startIdx = 5;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = 0;
				int num3 = startIdx - 3;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					do
					{
						double num5 = inHigh[num4];
						if (num5 < inHigh[num4 - 1])
						{
							double num6 = inLow[num4];
							if (num6 > inLow[num4 - 1])
							{
								double num7 = inHigh[num3];
								if ((num7 < num5 && inLow[num3] < num6) || (num7 > num5 && inLow[num3] > num6))
								{
									num2 = ((num7 < num5) ? 1 : (-1)) * 100;
									num = num3;
									goto IL_00de;
								}
							}
						}
						if (num3 <= num + 3 && ((num2 > 0 && inClose[num3] > inHigh[num - 1]) || (num2 < 0 && inClose[num3] < inLow[num - 1])))
						{
							num = 0;
						}
						goto IL_00de;
						IL_00de:
						num3++;
						num4++;
					}
					while (num3 < startIdx);
				}
				int num8 = startIdx;
				int num9 = 0;
				do
				{
					double num10 = inHigh[num8 - 1];
					int num11 = num8 - 1 - 1;
					if (num10 < inHigh[num11])
					{
						double num12 = inLow[num8 - 1];
						if (num12 > inLow[num11])
						{
							double num7 = inHigh[num8];
							if ((num7 < num10 && inLow[num8] < num12) || (num7 > num10 && inLow[num8] > num12))
							{
								num2 = ((num7 < num10) ? 1 : (-1)) * 100;
								num = num8;
								outInteger[num9] = num2;
								num9++;
								goto IL_01a9;
							}
						}
					}
					if (num8 <= num + 3 && ((num2 > 0 && inClose[num8] > inHigh[num - 1]) || (num2 < 0 && inClose[num8] < inLow[num - 1])))
					{
						int num13 = ((num2 > 0) ? 1 : (-1));
						outInteger[num9] = num13 * 100 + num2;
						num9++;
						num = 0;
					}
					else
					{
						outInteger[num9] = 0;
						num9++;
					}
					goto IL_01a9;
					IL_01a9:
					num8++;
				}
				while (num8 <= endIdx);
				outNBElement = num9;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHikkakeModLookback()
	{
		int avgPeriod = Globals.candleSettings[8].avgPeriod;
		return ((1 > avgPeriod) ? 1 : avgPeriod) + 5;
	}

	public static RetCode CdlHikkakeMod(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHikkakeModLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[8].avgPeriod - 3;
				if (num3 < startIdx - 3)
				{
					int num4 = num3 - 2;
					int num5 = startIdx - 3 - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = 0;
				int num15 = startIdx - 3;
				if (num15 < startIdx)
				{
					int num16 = num3 - 2;
					int num17 = num15 - 2;
					num3 = startIdx - num15 + num3;
					do
					{
						float num18 = inHigh[num17];
						int num19 = num17 + 1 - 2;
						RangeType rangeType;
						if ((double)num18 < (double)inHigh[num19])
						{
							float num20 = inLow[num17];
							if ((double)num20 > (double)inLow[num19])
							{
								float num21 = inHigh[num17 + 1];
								if ((double)num21 < (double)num18)
								{
									float num22 = inLow[num17 + 1];
									if ((double)num22 > (double)num20)
									{
										if ((double)inHigh[num15] < (double)num21 && (double)inLow[num15] < (double)num22)
										{
											CandleSetting candleSetting = Globals.candleSettings[8];
											double num23 = candleSetting.avgPeriod;
											double num24;
											if (num23 != 0.0)
											{
												num24 = num2 / num23;
											}
											else
											{
												rangeType = candleSetting.rangeType;
												float num25;
												if (rangeType == RangeType.RealBody)
												{
													num25 = (float)(double)Math.Abs((float)((double)inClose[num17] - (double)inOpen[num17]));
												}
												else
												{
													float num26;
													if (rangeType == RangeType.HighLow)
													{
														num26 = (float)((double)num18 - (double)num20);
													}
													else
													{
														float num31;
														if (rangeType == RangeType.Shadows)
														{
															float num27 = inClose[num17];
															float num28 = inOpen[num17];
															float num29 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
															float num30 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
															num31 = (float)((double)num30 - (double)num20 + ((double)num18 - (double)num29));
														}
														else
														{
															num31 = 0f;
														}
														num26 = num31;
													}
													num25 = num26;
												}
												num24 = num25;
											}
											CandleSetting candleSetting2 = Globals.candleSettings[8];
											double num32 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											num20 = inLow[num17];
											if ((double)inClose[num17] <= candleSetting2.factor * num24 / num32 + (double)num20)
											{
												goto IL_0424;
											}
										}
										if ((double)inHigh[num15] > (double)inHigh[num17 + 1] && (double)inLow[num15] > (double)inLow[num17 + 1])
										{
											CandleSetting candleSetting3 = Globals.candleSettings[8];
											double num23 = candleSetting3.avgPeriod;
											double num33;
											if (num23 != 0.0)
											{
												num33 = num2 / num23;
											}
											else
											{
												rangeType = candleSetting3.rangeType;
												float num34;
												if (rangeType == RangeType.RealBody)
												{
													num34 = (float)(double)Math.Abs((float)((double)inClose[num17] - (double)inOpen[num17]));
												}
												else
												{
													float num35;
													if (rangeType == RangeType.HighLow)
													{
														num35 = (float)((double)inHigh[num17] - (double)num20);
													}
													else
													{
														float num38;
														if (rangeType == RangeType.Shadows)
														{
															float num27 = inClose[num17];
															float num28 = inOpen[num17];
															float num36 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
															float num37 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
															num38 = (float)((double)inHigh[num17] - (double)num36 + ((double)num37 - (double)num20));
														}
														else
														{
															num38 = 0f;
														}
														num35 = num38;
													}
													num34 = num35;
												}
												num33 = num34;
											}
											CandleSetting candleSetting2 = Globals.candleSettings[8];
											double num39 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if ((double)inClose[num17] >= (double)inHigh[num17] - candleSetting2.factor * num33 / num39)
											{
												goto IL_0424;
											}
										}
									}
								}
							}
						}
						if (num15 <= num13 + 3 && ((num14 > 0 && (double)inClose[num15] > (double)inHigh[num13 - 1]) || (num14 < 0 && (double)inClose[num15] < (double)inLow[num13 - 1])))
						{
							num13 = 0;
						}
						goto IL_046f;
						IL_046f:
						rangeType = Globals.candleSettings[8].rangeType;
						float num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = (float)(double)Math.Abs((float)((double)inClose[num17] - (double)inOpen[num17]));
						}
						else
						{
							float num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = (float)((double)inHigh[num17] - (double)inLow[num17]);
							}
							else
							{
								float num44;
								if (rangeType == RangeType.Shadows)
								{
									float num27 = inClose[num17];
									float num28 = inOpen[num17];
									float num42 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
									float num43 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
									num44 = (float)((double)num43 - (double)inLow[num17] + ((double)inHigh[num17] - (double)num42));
								}
								else
								{
									num44 = 0f;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						rangeType = Globals.candleSettings[8].rangeType;
						float num45;
						if (rangeType == RangeType.RealBody)
						{
							num45 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num46;
							if (rangeType == RangeType.HighLow)
							{
								num46 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num51;
								if (rangeType == RangeType.Shadows)
								{
									float num47 = inClose[num16];
									float num48 = inOpen[num16];
									float num49 = ((!((double)num47 >= (double)num48)) ? num48 : num47);
									float num50 = ((!((double)num47 >= (double)num48)) ? num47 : num48);
									num51 = (float)((double)num50 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num49));
								}
								else
								{
									num51 = 0f;
								}
								num46 = num51;
							}
							num45 = num46;
						}
						num2 = (double)(num40 - num45) + num2;
						num16++;
						num15++;
						num17++;
						continue;
						IL_0424:
						num14 = (((double)inHigh[num15] < (double)inHigh[num17 + 1]) ? 1 : (-1)) * 100;
						num13 = num15;
						goto IL_046f;
					}
					while (num15 < startIdx);
				}
				int num52 = 0;
				int num53 = startIdx - 2;
				int num54 = num3 - 2;
				do
				{
					float num55 = inHigh[num53];
					int num56 = num53 + 1 - 2;
					RangeType rangeType;
					if ((double)num55 < (double)inHigh[num56])
					{
						float num57 = inLow[num53];
						if ((double)num57 > (double)inLow[num56])
						{
							float num58 = inHigh[num53 + 1];
							if ((double)num58 < (double)num55)
							{
								float num59 = inLow[num53 + 1];
								if ((double)num59 > (double)num57)
								{
									if ((double)inHigh[num53 + 2] < (double)num58 && (double)inLow[num53 + 2] < (double)num59)
									{
										CandleSetting candleSetting4 = Globals.candleSettings[8];
										double num23 = candleSetting4.avgPeriod;
										double num60;
										if (num23 != 0.0)
										{
											num60 = num2 / num23;
										}
										else
										{
											rangeType = candleSetting4.rangeType;
											float num61;
											if (rangeType == RangeType.RealBody)
											{
												num61 = (float)(double)Math.Abs((float)((double)inClose[num53] - (double)inOpen[num53]));
											}
											else
											{
												float num62;
												if (rangeType == RangeType.HighLow)
												{
													num62 = (float)((double)num55 - (double)num57);
												}
												else
												{
													float num67;
													if (rangeType == RangeType.Shadows)
													{
														float num63 = inClose[num53];
														float num64 = inOpen[num53];
														float num65 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
														float num66 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
														num67 = (float)((double)num66 - (double)num57 + ((double)num55 - (double)num65));
													}
													else
													{
														num67 = 0f;
													}
													num62 = num67;
												}
												num61 = num62;
											}
											num60 = num61;
										}
										CandleSetting candleSetting5 = Globals.candleSettings[8];
										double num68 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										num57 = inLow[num53];
										if ((double)inClose[num53] <= candleSetting5.factor * num60 / num68 + (double)num57)
										{
											goto IL_0891;
										}
									}
									if ((double)inHigh[num53 + 2] > (double)inHigh[num53 + 1] && (double)inLow[num53 + 2] > (double)inLow[num53 + 1])
									{
										CandleSetting candleSetting6 = Globals.candleSettings[8];
										double num23 = candleSetting6.avgPeriod;
										double num69;
										if (num23 != 0.0)
										{
											num69 = num2 / num23;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											float num70;
											if (rangeType == RangeType.RealBody)
											{
												num70 = (float)(double)Math.Abs((float)((double)inClose[num53] - (double)inOpen[num53]));
											}
											else
											{
												float num71;
												if (rangeType == RangeType.HighLow)
												{
													num71 = (float)((double)inHigh[num53] - (double)num57);
												}
												else
												{
													float num74;
													if (rangeType == RangeType.Shadows)
													{
														float num63 = inClose[num53];
														float num64 = inOpen[num53];
														float num72 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
														float num73 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
														num74 = (float)((double)inHigh[num53] - (double)num72 + ((double)num73 - (double)num57));
													}
													else
													{
														num74 = 0f;
													}
													num71 = num74;
												}
												num70 = num71;
											}
											num69 = num70;
										}
										CandleSetting candleSetting5 = Globals.candleSettings[8];
										double num75 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inClose[num53] >= (double)inHigh[num53] - candleSetting5.factor * num69 / num75)
										{
											goto IL_0891;
										}
									}
								}
							}
						}
					}
					if (num53 + 2 <= num13 + 3 && ((num14 > 0 && (double)inClose[num53 + 2] > (double)inHigh[num13 - 1]) || (num14 < 0 && (double)inClose[num53 + 2] < (double)inLow[num13 - 1])))
					{
						int num76 = ((num14 > 0) ? 1 : (-1));
						outInteger[num52] = num76 * 100 + num14;
						num52++;
						num13 = 0;
					}
					else
					{
						outInteger[num52] = 0;
						num52++;
					}
					goto IL_0921;
					IL_0921:
					rangeType = Globals.candleSettings[8].rangeType;
					float num77;
					if (rangeType == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num53] - (double)inOpen[num53]));
					}
					else
					{
						float num78;
						if (rangeType == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num53] - (double)inLow[num53]);
						}
						else
						{
							float num81;
							if (rangeType == RangeType.Shadows)
							{
								float num63 = inClose[num53];
								float num64 = inOpen[num53];
								float num79 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
								float num80 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
								num81 = (float)((double)num80 - (double)inLow[num53] + ((double)inHigh[num53] - (double)num79));
							}
							else
							{
								num81 = 0f;
							}
							num78 = num81;
						}
						num77 = num78;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					float num82;
					if (rangeType == RangeType.RealBody)
					{
						num82 = (float)(double)Math.Abs((float)((double)inClose[num54] - (double)inOpen[num54]));
					}
					else
					{
						float num83;
						if (rangeType == RangeType.HighLow)
						{
							num83 = (float)((double)inHigh[num54] - (double)inLow[num54]);
						}
						else
						{
							float num88;
							if (rangeType == RangeType.Shadows)
							{
								float num84 = inClose[num54];
								float num85 = inOpen[num54];
								float num86 = ((!((double)num84 >= (double)num85)) ? num85 : num84);
								float num87 = ((!((double)num84 >= (double)num85)) ? num84 : num85);
								num88 = (float)((double)num87 - (double)inLow[num54] + ((double)inHigh[num54] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num83 = num88;
						}
						num82 = num83;
					}
					num2 = (double)(num77 - num82) + num2;
					num53++;
					num54++;
					continue;
					IL_0891:
					num14 = (((double)inHigh[num53 + 2] < (double)inHigh[num53 + 1]) ? 1 : (-1)) * 100;
					num13 = num53 + 2;
					outInteger[num52] = num14;
					num52++;
					goto IL_0921;
				}
				while (num53 + 2 <= endIdx);
				outNBElement = num52;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHikkakeMod(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHikkakeModLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[8].avgPeriod - 3;
				if (num3 < startIdx - 3)
				{
					int num4 = num3 - 2;
					int num5 = startIdx - 3 - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = 0;
				int num15 = startIdx - 3;
				if (num15 < startIdx)
				{
					int num16 = num3 - 2;
					int num17 = num15 - 2;
					num3 = startIdx - num15 + num3;
					do
					{
						double num18 = inHigh[num17];
						int num19 = num17 + 1 - 2;
						RangeType rangeType;
						if (num18 < inHigh[num19])
						{
							double num20 = inLow[num17];
							if (num20 > inLow[num19])
							{
								double num21 = inHigh[num17 + 1];
								if (num21 < num18)
								{
									double num22 = inLow[num17 + 1];
									if (num22 > num20)
									{
										if (inHigh[num15] < num21 && inLow[num15] < num22)
										{
											CandleSetting candleSetting = Globals.candleSettings[8];
											double num23 = candleSetting.avgPeriod;
											double num24;
											if (num23 != 0.0)
											{
												num24 = num2 / num23;
											}
											else
											{
												rangeType = candleSetting.rangeType;
												double num25;
												if (rangeType == RangeType.RealBody)
												{
													num25 = Math.Abs(inClose[num17] - inOpen[num17]);
												}
												else
												{
													double num26;
													if (rangeType == RangeType.HighLow)
													{
														num26 = num18 - num20;
													}
													else
													{
														double num31;
														if (rangeType == RangeType.Shadows)
														{
															double num27 = inClose[num17];
															double num28 = inOpen[num17];
															double num29 = ((!(num27 >= num28)) ? num28 : num27);
															double num30 = ((!(num27 >= num28)) ? num27 : num28);
															num31 = num18 - num29 + (num30 - num20);
														}
														else
														{
															num31 = 0.0;
														}
														num26 = num31;
													}
													num25 = num26;
												}
												num24 = num25;
											}
											CandleSetting candleSetting2 = Globals.candleSettings[8];
											double num32 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											num20 = inLow[num17];
											if (inClose[num17] <= candleSetting2.factor * num24 / num32 + num20)
											{
												goto IL_03e3;
											}
										}
										if (inHigh[num15] > inHigh[num17 + 1] && inLow[num15] > inLow[num17 + 1])
										{
											CandleSetting candleSetting3 = Globals.candleSettings[8];
											double num23 = candleSetting3.avgPeriod;
											double num33;
											if (num23 != 0.0)
											{
												num33 = num2 / num23;
											}
											else
											{
												rangeType = candleSetting3.rangeType;
												double num34;
												if (rangeType == RangeType.RealBody)
												{
													num34 = Math.Abs(inClose[num17] - inOpen[num17]);
												}
												else
												{
													double num35;
													if (rangeType == RangeType.HighLow)
													{
														num35 = inHigh[num17] - num20;
													}
													else
													{
														double num38;
														if (rangeType == RangeType.Shadows)
														{
															double num27 = inClose[num17];
															double num28 = inOpen[num17];
															double num36 = ((!(num27 >= num28)) ? num28 : num27);
															double num37 = ((!(num27 >= num28)) ? num27 : num28);
															num38 = inHigh[num17] - num36 + (num37 - num20);
														}
														else
														{
															num38 = 0.0;
														}
														num35 = num38;
													}
													num34 = num35;
												}
												num33 = num34;
											}
											CandleSetting candleSetting2 = Globals.candleSettings[8];
											double num39 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											if (inClose[num17] >= inHigh[num17] - candleSetting2.factor * num33 / num39)
											{
												goto IL_03e3;
											}
										}
									}
								}
							}
						}
						if (num15 <= num13 + 3 && ((num14 > 0 && inClose[num15] > inHigh[num13 - 1]) || (num14 < 0 && inClose[num15] < inLow[num13 - 1])))
						{
							num13 = 0;
						}
						goto IL_0428;
						IL_0428:
						rangeType = Globals.candleSettings[8].rangeType;
						double num40;
						if (rangeType == RangeType.RealBody)
						{
							num40 = Math.Abs(inClose[num17] - inOpen[num17]);
						}
						else
						{
							double num41;
							if (rangeType == RangeType.HighLow)
							{
								num41 = inHigh[num17] - inLow[num17];
							}
							else
							{
								double num44;
								if (rangeType == RangeType.Shadows)
								{
									double num27 = inClose[num17];
									double num28 = inOpen[num17];
									double num42 = ((!(num27 >= num28)) ? num28 : num27);
									double num43 = ((!(num27 >= num28)) ? num27 : num28);
									num44 = num43 - inLow[num17] + (inHigh[num17] - num42);
								}
								else
								{
									num44 = 0.0;
								}
								num41 = num44;
							}
							num40 = num41;
						}
						rangeType = Globals.candleSettings[8].rangeType;
						double num45;
						if (rangeType == RangeType.RealBody)
						{
							num45 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num46;
							if (rangeType == RangeType.HighLow)
							{
								num46 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num51;
								if (rangeType == RangeType.Shadows)
								{
									double num47 = inClose[num16];
									double num48 = inOpen[num16];
									double num49 = ((!(num47 >= num48)) ? num48 : num47);
									double num50 = ((!(num47 >= num48)) ? num47 : num48);
									num51 = num50 - inLow[num16] + (inHigh[num16] - num49);
								}
								else
								{
									num51 = 0.0;
								}
								num46 = num51;
							}
							num45 = num46;
						}
						num2 = num40 - num45 + num2;
						num16++;
						num15++;
						num17++;
						continue;
						IL_03e3:
						num14 = ((inHigh[num15] < inHigh[num17 + 1]) ? 1 : (-1)) * 100;
						num13 = num15;
						goto IL_0428;
					}
					while (num15 < startIdx);
				}
				int num52 = 0;
				int num53 = startIdx - 2;
				int num54 = num3 - 2;
				do
				{
					double num55 = inHigh[num53];
					int num56 = num53 + 1 - 2;
					RangeType rangeType;
					if (num55 < inHigh[num56])
					{
						double num57 = inLow[num53];
						if (num57 > inLow[num56])
						{
							double num58 = inHigh[num53 + 1];
							if (num58 < num55)
							{
								double num59 = inLow[num53 + 1];
								if (num59 > num57)
								{
									if (inHigh[num53 + 2] < num58 && inLow[num53 + 2] < num59)
									{
										CandleSetting candleSetting4 = Globals.candleSettings[8];
										double num23 = candleSetting4.avgPeriod;
										double num60;
										if (num23 != 0.0)
										{
											num60 = num2 / num23;
										}
										else
										{
											rangeType = candleSetting4.rangeType;
											double num61;
											if (rangeType == RangeType.RealBody)
											{
												num61 = Math.Abs(inClose[num53] - inOpen[num53]);
											}
											else
											{
												double num62;
												if (rangeType == RangeType.HighLow)
												{
													num62 = num55 - num57;
												}
												else
												{
													double num67;
													if (rangeType == RangeType.Shadows)
													{
														double num63 = inClose[num53];
														double num64 = inOpen[num53];
														double num65 = ((!(num63 >= num64)) ? num64 : num63);
														double num66 = ((!(num63 >= num64)) ? num63 : num64);
														num67 = num55 - num65 + (num66 - num57);
													}
													else
													{
														num67 = 0.0;
													}
													num62 = num67;
												}
												num61 = num62;
											}
											num60 = num61;
										}
										CandleSetting candleSetting5 = Globals.candleSettings[8];
										double num68 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										num57 = inLow[num53];
										if (inClose[num53] <= candleSetting5.factor * num60 / num68 + num57)
										{
											goto IL_07fb;
										}
									}
									if (inHigh[num53 + 2] > inHigh[num53 + 1] && inLow[num53 + 2] > inLow[num53 + 1])
									{
										CandleSetting candleSetting6 = Globals.candleSettings[8];
										double num23 = candleSetting6.avgPeriod;
										double num69;
										if (num23 != 0.0)
										{
											num69 = num2 / num23;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											double num70;
											if (rangeType == RangeType.RealBody)
											{
												num70 = Math.Abs(inClose[num53] - inOpen[num53]);
											}
											else
											{
												double num71;
												if (rangeType == RangeType.HighLow)
												{
													num71 = inHigh[num53] - num57;
												}
												else
												{
													double num74;
													if (rangeType == RangeType.Shadows)
													{
														double num63 = inClose[num53];
														double num64 = inOpen[num53];
														double num72 = ((!(num63 >= num64)) ? num64 : num63);
														double num73 = ((!(num63 >= num64)) ? num63 : num64);
														num74 = inHigh[num53] - num72 + (num73 - num57);
													}
													else
													{
														num74 = 0.0;
													}
													num71 = num74;
												}
												num70 = num71;
											}
											num69 = num70;
										}
										CandleSetting candleSetting5 = Globals.candleSettings[8];
										double num75 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inClose[num53] >= inHigh[num53] - candleSetting5.factor * num69 / num75)
										{
											goto IL_07fb;
										}
									}
								}
							}
						}
					}
					if (num53 + 2 <= num13 + 3 && ((num14 > 0 && inClose[num53 + 2] > inHigh[num13 - 1]) || (num14 < 0 && inClose[num53 + 2] < inLow[num13 - 1])))
					{
						int num76 = ((num14 > 0) ? 1 : (-1));
						outInteger[num52] = num76 * 100 + num14;
						num52++;
						num13 = 0;
					}
					else
					{
						outInteger[num52] = 0;
						num52++;
					}
					goto IL_0885;
					IL_0885:
					rangeType = Globals.candleSettings[8].rangeType;
					double num77;
					if (rangeType == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num53] - inOpen[num53]);
					}
					else
					{
						double num78;
						if (rangeType == RangeType.HighLow)
						{
							num78 = inHigh[num53] - inLow[num53];
						}
						else
						{
							double num81;
							if (rangeType == RangeType.Shadows)
							{
								double num63 = inClose[num53];
								double num64 = inOpen[num53];
								double num79 = ((!(num63 >= num64)) ? num64 : num63);
								double num80 = ((!(num63 >= num64)) ? num63 : num64);
								num81 = num80 - inLow[num53] + (inHigh[num53] - num79);
							}
							else
							{
								num81 = 0.0;
							}
							num78 = num81;
						}
						num77 = num78;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					double num82;
					if (rangeType == RangeType.RealBody)
					{
						num82 = Math.Abs(inClose[num54] - inOpen[num54]);
					}
					else
					{
						double num83;
						if (rangeType == RangeType.HighLow)
						{
							num83 = inHigh[num54] - inLow[num54];
						}
						else
						{
							double num88;
							if (rangeType == RangeType.Shadows)
							{
								double num84 = inClose[num54];
								double num85 = inOpen[num54];
								double num86 = ((!(num84 >= num85)) ? num85 : num84);
								double num87 = ((!(num84 >= num85)) ? num84 : num85);
								num88 = num87 - inLow[num54] + (inHigh[num54] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num83 = num88;
						}
						num82 = num83;
					}
					num2 = num77 - num82 + num2;
					num53++;
					num54++;
					continue;
					IL_07fb:
					num14 = ((inHigh[num53 + 2] < inHigh[num53 + 1]) ? 1 : (-1)) * 100;
					num13 = num53 + 2;
					outInteger[num52] = num14;
					num52++;
					goto IL_0885;
				}
				while (num53 + 2 <= endIdx);
				outNBElement = num52;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlHomingPigeonLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlHomingPigeon(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHomingPigeonLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				if (num4 < startIdx)
				{
					int num6 = num4 - 1;
					int num7 = startIdx - num4;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num6];
									float num11 = inOpen[num6];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				int num15 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num22;
								if (rangeType2 == RangeType.Shadows)
								{
									float num18 = inClose[num15];
									float num19 = inOpen[num15];
									float num20 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
									float num21 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
									num22 = (float)((double)num21 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num20));
								}
								else
								{
									num22 = 0f;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						num3 = (double)num16 + num3;
						num15++;
					}
					while (num15 < startIdx);
				}
				int num23 = startIdx;
				int num24 = 0;
				do
				{
					float num25 = inClose[num23 - 1];
					float num26 = inOpen[num23 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!((double)num25 >= (double)num26) && !((double)inClose[num23] >= (double)inOpen[num23]))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num27 = candleSetting.avgPeriod;
						double num28;
						if (num27 != 0.0)
						{
							num28 = num2 / num27;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num29;
							if (rangeType == RangeType.RealBody)
							{
								num29 = (float)(double)Math.Abs((float)((double)num25 - (double)num26));
							}
							else
							{
								float num30;
								if (rangeType == RangeType.HighLow)
								{
									num30 = (float)((double)inHigh[num23 - 1] - (double)inLow[num23 - 1]);
								}
								else
								{
									float num33;
									if (rangeType == RangeType.Shadows)
									{
										float num31 = ((!((double)num25 >= (double)num26)) ? num26 : num25);
										float num32 = ((!((double)num25 >= (double)num26)) ? num25 : num26);
										num33 = (float)((double)num32 - (double)inLow[num23 - 1] + ((double)inHigh[num23 - 1] - (double)num31));
									}
									else
									{
										num33 = 0f;
									}
									num30 = num33;
								}
								num29 = num30;
							}
							num28 = num29;
						}
						double num34 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num23 - 1] - (double)inOpen[num23 - 1])) > candleSettings[0].factor * num28 / num34)
						{
							CandleSetting candleSetting2 = candleSettings[2];
							double num35 = candleSetting2.avgPeriod;
							double num36;
							if (num35 != 0.0)
							{
								num36 = num3 / num35;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								float num37;
								if (rangeType2 == RangeType.RealBody)
								{
									num37 = (float)(double)Math.Abs((float)((double)inClose[num23] - (double)inOpen[num23]));
								}
								else
								{
									float num38;
									if (rangeType2 == RangeType.HighLow)
									{
										num38 = (float)((double)inHigh[num23] - (double)inLow[num23]);
									}
									else
									{
										float num41;
										if (rangeType2 == RangeType.Shadows)
										{
											float num18 = inClose[num23];
											float num19 = inOpen[num23];
											float num39 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
											float num40 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
											num41 = (float)((double)num40 - (double)inLow[num23] + ((double)inHigh[num23] - (double)num39));
										}
										else
										{
											num41 = 0f;
										}
										num38 = num41;
									}
									num37 = num38;
								}
								num36 = num37;
							}
							double num42 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)Math.Abs((float)((double)inClose[num23] - (double)inOpen[num23])) <= Globals.candleSettings[2].factor * num36 / num42 && (double)inOpen[num23] < (double)inOpen[num23 - 1] && (double)inClose[num23] > (double)inClose[num23 - 1])
							{
								outInteger[num24] = 100;
								num24++;
								goto IL_04bb;
							}
						}
					}
					outInteger[num24] = 0;
					num24++;
					goto IL_04bb;
					IL_04bb:
					rangeType = Globals.candleSettings[0].rangeType;
					float num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = (float)(double)Math.Abs((float)((double)inClose[num23 - 1] - (double)inOpen[num23 - 1]));
					}
					else
					{
						float num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = (float)((double)inHigh[num23 - 1] - (double)inLow[num23 - 1]);
						}
						else
						{
							float num47;
							if (rangeType == RangeType.Shadows)
							{
								num25 = inClose[num23 - 1];
								num26 = inOpen[num23 - 1];
								float num45 = ((!((double)num25 >= (double)num26)) ? num26 : num25);
								float num46 = ((!((double)num25 >= (double)num26)) ? num25 : num26);
								num47 = (float)((double)num46 - (double)inLow[num23 - 1] + ((double)inHigh[num23 - 1] - (double)num45));
							}
							else
							{
								num47 = 0f;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
						}
						else
						{
							float num54;
							if (rangeType == RangeType.Shadows)
							{
								float num50 = inClose[num4 - 1];
								float num51 = inOpen[num4 - 1];
								float num52 = ((!((double)num50 >= (double)num51)) ? num51 : num50);
								float num53 = ((!((double)num50 >= (double)num51)) ? num50 : num51);
								num54 = (float)((double)num53 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num52));
							}
							else
							{
								num54 = 0f;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = (double)(num43 - num48) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num55;
					if (rangeType2 == RangeType.RealBody)
					{
						num55 = (float)(double)Math.Abs((float)((double)inClose[num23] - (double)inOpen[num23]));
					}
					else
					{
						float num56;
						if (rangeType2 == RangeType.HighLow)
						{
							num56 = (float)((double)inHigh[num23] - (double)inLow[num23]);
						}
						else
						{
							float num59;
							if (rangeType2 == RangeType.Shadows)
							{
								float num18 = inClose[num23];
								float num19 = inOpen[num23];
								float num57 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
								float num58 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
								num59 = (float)((double)num58 - (double)inLow[num23] + ((double)inHigh[num23] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num56 = num59;
						}
						num55 = num56;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num66;
							if (rangeType2 == RangeType.Shadows)
							{
								float num62 = inClose[num5];
								float num63 = inOpen[num5];
								float num64 = ((!((double)num62 >= (double)num63)) ? num63 : num62);
								float num65 = ((!((double)num62 >= (double)num63)) ? num62 : num63);
								num66 = (float)((double)num65 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num64));
							}
							else
							{
								num66 = 0f;
							}
							num61 = num66;
						}
						num60 = num61;
					}
					num3 = (double)(num55 - num60) + num3;
					num23++;
					num4++;
					num5++;
				}
				while (num23 <= endIdx);
				outNBElement = num24;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlHomingPigeon(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlHomingPigeonLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				if (num4 < startIdx)
				{
					int num6 = num4 - 1;
					int num7 = startIdx - num4;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num6];
									double num11 = inOpen[num6];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num6] + (inHigh[num6] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				int num15 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num22;
								if (rangeType2 == RangeType.Shadows)
								{
									double num18 = inClose[num15];
									double num19 = inOpen[num15];
									double num20 = ((!(num18 >= num19)) ? num19 : num18);
									double num21 = ((!(num18 >= num19)) ? num18 : num19);
									num22 = num21 - inLow[num15] + (inHigh[num15] - num20);
								}
								else
								{
									num22 = 0.0;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						num3 = num16 + num3;
						num15++;
					}
					while (num15 < startIdx);
				}
				int num23 = startIdx;
				int num24 = 0;
				do
				{
					double num25 = inClose[num23 - 1];
					double num26 = inOpen[num23 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!(num25 >= num26) && !(inClose[num23] >= inOpen[num23]))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num27 = candleSetting.avgPeriod;
						double num28;
						if (num27 != 0.0)
						{
							num28 = num2 / num27;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num29;
							if (rangeType == RangeType.RealBody)
							{
								num29 = Math.Abs(num25 - num26);
							}
							else
							{
								double num30;
								if (rangeType == RangeType.HighLow)
								{
									num30 = inHigh[num23 - 1] - inLow[num23 - 1];
								}
								else
								{
									double num33;
									if (rangeType == RangeType.Shadows)
									{
										double num31 = ((!(num25 >= num26)) ? num26 : num25);
										double num32 = ((!(num25 >= num26)) ? num25 : num26);
										num33 = num32 - inLow[num23 - 1] + (inHigh[num23 - 1] - num31);
									}
									else
									{
										num33 = 0.0;
									}
									num30 = num33;
								}
								num29 = num30;
							}
							num28 = num29;
						}
						double num34 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num23 - 1] - inOpen[num23 - 1]) > candleSettings[0].factor * num28 / num34)
						{
							CandleSetting candleSetting2 = candleSettings[2];
							double num35 = candleSetting2.avgPeriod;
							double num36;
							if (num35 != 0.0)
							{
								num36 = num3 / num35;
							}
							else
							{
								rangeType2 = candleSetting2.rangeType;
								double num37;
								if (rangeType2 == RangeType.RealBody)
								{
									num37 = Math.Abs(inClose[num23] - inOpen[num23]);
								}
								else
								{
									double num38;
									if (rangeType2 == RangeType.HighLow)
									{
										num38 = inHigh[num23] - inLow[num23];
									}
									else
									{
										double num41;
										if (rangeType2 == RangeType.Shadows)
										{
											double num18 = inClose[num23];
											double num19 = inOpen[num23];
											double num39 = ((!(num18 >= num19)) ? num19 : num18);
											double num40 = ((!(num18 >= num19)) ? num18 : num19);
											num41 = num40 - inLow[num23] + (inHigh[num23] - num39);
										}
										else
										{
											num41 = 0.0;
										}
										num38 = num41;
									}
									num37 = num38;
								}
								num36 = num37;
							}
							double num42 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (Math.Abs(inClose[num23] - inOpen[num23]) <= Globals.candleSettings[2].factor * num36 / num42 && inOpen[num23] < inOpen[num23 - 1] && inClose[num23] > inClose[num23 - 1])
							{
								outInteger[num24] = 100;
								num24++;
								goto IL_0470;
							}
						}
					}
					outInteger[num24] = 0;
					num24++;
					goto IL_0470;
					IL_0470:
					rangeType = Globals.candleSettings[0].rangeType;
					double num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = Math.Abs(inClose[num23 - 1] - inOpen[num23 - 1]);
					}
					else
					{
						double num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = inHigh[num23 - 1] - inLow[num23 - 1];
						}
						else
						{
							double num47;
							if (rangeType == RangeType.Shadows)
							{
								num25 = inClose[num23 - 1];
								num26 = inOpen[num23 - 1];
								double num45 = ((!(num25 >= num26)) ? num26 : num25);
								double num46 = ((!(num25 >= num26)) ? num25 : num26);
								num47 = num46 - inLow[num23 - 1] + (inHigh[num23 - 1] - num45);
							}
							else
							{
								num47 = 0.0;
							}
							num44 = num47;
						}
						num43 = num44;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num4 - 1] - inLow[num4 - 1];
						}
						else
						{
							double num54;
							if (rangeType == RangeType.Shadows)
							{
								double num50 = inClose[num4 - 1];
								double num51 = inOpen[num4 - 1];
								double num52 = ((!(num50 >= num51)) ? num51 : num50);
								double num53 = ((!(num50 >= num51)) ? num50 : num51);
								num54 = num53 - inLow[num4 - 1] + (inHigh[num4 - 1] - num52);
							}
							else
							{
								num54 = 0.0;
							}
							num49 = num54;
						}
						num48 = num49;
					}
					num2 = num43 - num48 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num55;
					if (rangeType2 == RangeType.RealBody)
					{
						num55 = Math.Abs(inClose[num23] - inOpen[num23]);
					}
					else
					{
						double num56;
						if (rangeType2 == RangeType.HighLow)
						{
							num56 = inHigh[num23] - inLow[num23];
						}
						else
						{
							double num59;
							if (rangeType2 == RangeType.Shadows)
							{
								double num18 = inClose[num23];
								double num19 = inOpen[num23];
								double num57 = ((!(num18 >= num19)) ? num19 : num18);
								double num58 = ((!(num18 >= num19)) ? num18 : num19);
								num59 = num58 - inLow[num23] + (inHigh[num23] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num56 = num59;
						}
						num55 = num56;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num66;
							if (rangeType2 == RangeType.Shadows)
							{
								double num62 = inClose[num5];
								double num63 = inOpen[num5];
								double num64 = ((!(num62 >= num63)) ? num63 : num62);
								double num65 = ((!(num62 >= num63)) ? num62 : num63);
								num66 = num65 - inLow[num5] + (inHigh[num5] - num64);
							}
							else
							{
								num66 = 0.0;
							}
							num61 = num66;
						}
						num60 = num61;
					}
					num3 = num55 - num60 + num3;
					num23++;
					num4++;
					num5++;
				}
				while (num23 <= endIdx);
				outNBElement = num24;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlIdentical3CrowsLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[10].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
	}

	public static RetCode CdlIdentical3Crows(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlIdentical3CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4 - 1];
									float num8 = inOpen[num4 - 1];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[2] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						float num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num18;
								if (rangeType == RangeType.Shadows)
								{
									float num14 = inClose[num4];
									float num15 = inOpen[num4];
									float num16 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num17 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num18 = (float)((double)num17 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num16));
								}
								else
								{
									num18 = 0f;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[1] += num12;
						rangeType = Globals.candleSettings[7].rangeType;
						float num19;
						if (rangeType == RangeType.RealBody)
						{
							num19 = (float)(double)Math.Abs((float)((double)inClose[num4 + 1] - (double)inOpen[num4 + 1]));
						}
						else
						{
							float num20;
							if (rangeType == RangeType.HighLow)
							{
								num20 = (float)((double)inHigh[num4 + 1] - (double)inLow[num4 + 1]);
							}
							else
							{
								float num25;
								if (rangeType == RangeType.Shadows)
								{
									float num21 = inClose[num4 + 1];
									float num22 = inOpen[num4 + 1];
									float num23 = ((!((double)num21 >= (double)num22)) ? num22 : num21);
									float num24 = ((!((double)num21 >= (double)num22)) ? num21 : num22);
									num25 = (float)((double)num24 - (double)inLow[num4 + 1] + ((double)inHigh[num4 + 1] - (double)num23));
								}
								else
								{
									num25 = 0f;
								}
								num20 = num25;
							}
							num19 = num20;
						}
						array[0] += num19;
						num4++;
					}
					while (num4 + 1 < startIdx);
				}
				if (num3 < startIdx)
				{
					int num26 = num3 - 1;
					int num27 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						float num28;
						if (rangeType2 == RangeType.RealBody)
						{
							num28 = (float)(double)Math.Abs((float)((double)inClose[num26 - 1] - (double)inOpen[num26 - 1]));
						}
						else
						{
							float num29;
							if (rangeType2 == RangeType.HighLow)
							{
								num29 = (float)((double)inHigh[num26 - 1] - (double)inLow[num26 - 1]);
							}
							else
							{
								float num34;
								if (rangeType2 == RangeType.Shadows)
								{
									float num30 = inClose[num26 - 1];
									float num31 = inOpen[num26 - 1];
									float num32 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
									float num33 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
									num34 = (float)((double)num33 - (double)inLow[num26 - 1] + ((double)inHigh[num26 - 1] - (double)num32));
								}
								else
								{
									num34 = 0f;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array2[2] += num28;
						rangeType2 = Globals.candleSettings[10].rangeType;
						float num35;
						if (rangeType2 == RangeType.RealBody)
						{
							num35 = (float)(double)Math.Abs((float)((double)inClose[num26] - (double)inOpen[num26]));
						}
						else
						{
							float num36;
							if (rangeType2 == RangeType.HighLow)
							{
								num36 = (float)((double)inHigh[num26] - (double)inLow[num26]);
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.Shadows)
								{
									float num37 = inClose[num26];
									float num38 = inOpen[num26];
									float num39 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
									float num40 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
									num41 = (float)((double)num40 - (double)inLow[num26] + ((double)inHigh[num26] - (double)num39));
								}
								else
								{
									num41 = 0f;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array2[1] += num35;
						num26++;
						num27--;
					}
					while (num27 != 0);
				}
				int num42 = startIdx;
				int num43 = 0;
				do
				{
					float num44 = inClose[num42 - 2];
					float num45 = inOpen[num42 - 2];
					if (!((double)num44 >= (double)num45))
					{
						float num46 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num47 = candleSetting.avgPeriod;
						double num48;
						RangeType rangeType;
						if (num47 != 0.0)
						{
							num48 = array[2] / num47;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num49;
							if (rangeType == RangeType.RealBody)
							{
								num49 = (float)(double)Math.Abs((float)((double)num44 - (double)num45));
							}
							else
							{
								float num50;
								if (rangeType == RangeType.HighLow)
								{
									num50 = (float)((double)inHigh[num42 - 2] - (double)inLow[num42 - 2]);
								}
								else
								{
									float num53;
									if (rangeType == RangeType.Shadows)
									{
										float num51 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num52 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num53 = (float)((double)num52 - (double)inLow[num42 - 2] + ((double)inHigh[num42 - 2] - (double)num51));
									}
									else
									{
										num53 = 0f;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num54 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if ((double)num46 - (double)inLow[num42 - 2] < candleSetting2.factor * num48 / num54)
						{
							float num55 = inClose[num42 - 1];
							float num56 = inOpen[num42 - 1];
							if (!((double)num55 >= (double)num56))
							{
								float num57 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num47 = candleSetting2.avgPeriod;
								double num58;
								if (num47 != 0.0)
								{
									num58 = array[1] / num47;
								}
								else
								{
									float num59;
									if (rangeType == RangeType.RealBody)
									{
										num59 = (float)(double)Math.Abs((float)((double)num55 - (double)num56));
									}
									else
									{
										float num60;
										if (rangeType == RangeType.HighLow)
										{
											num60 = (float)((double)inHigh[num42 - 1] - (double)inLow[num42 - 1]);
										}
										else
										{
											float num63;
											if (rangeType == RangeType.Shadows)
											{
												float num61 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
												float num62 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
												num63 = (float)((double)num62 - (double)inLow[num42 - 1] + ((double)inHigh[num42 - 1] - (double)num61));
											}
											else
											{
												num63 = 0f;
											}
											num60 = num63;
										}
										num59 = num60;
									}
									num58 = num59;
								}
								CandleSetting candleSetting3 = Globals.candleSettings[7];
								rangeType = candleSetting3.rangeType;
								double num64 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)num57 - (double)inLow[num42 - 1] < candleSetting3.factor * num58 / num64)
								{
									float num65 = inClose[num42];
									float num66 = inOpen[num42];
									if (!((double)num65 >= (double)num66))
									{
										float num67 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
										num47 = candleSetting3.avgPeriod;
										double num68;
										if (num47 != 0.0)
										{
											num68 = array[0] / num47;
										}
										else
										{
											float num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = (float)(double)Math.Abs((float)((double)num65 - (double)num66));
											}
											else
											{
												float num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = (float)((double)inHigh[num42] - (double)inLow[num42]);
												}
												else
												{
													float num73;
													if (rangeType == RangeType.Shadows)
													{
														float num71 = ((!((double)num65 >= (double)num66)) ? num66 : num65);
														float num72 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
														num73 = (float)((double)num72 - (double)inLow[num42] + ((double)inHigh[num42] - (double)num71));
													}
													else
													{
														num73 = 0f;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num74 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)num67 - (double)inLow[num42] < candleSetting4.factor * num68 / num74)
										{
											num44 = inClose[num42 - 2];
											num55 = inClose[num42 - 1];
											if ((double)num44 > (double)num55 && (double)num55 > (double)inClose[num42])
											{
												CandleSetting candleSetting5 = candleSettings[10];
												double num75 = candleSetting5.avgPeriod;
												double num76;
												RangeType rangeType2;
												if (num75 != 0.0)
												{
													num76 = array2[2] / num75;
												}
												else
												{
													rangeType2 = candleSetting5.rangeType;
													float num77;
													if (rangeType2 == RangeType.RealBody)
													{
														num77 = (float)(double)Math.Abs((float)((double)num44 - (double)inOpen[num42 - 2]));
													}
													else
													{
														float num78;
														if (rangeType2 == RangeType.HighLow)
														{
															num78 = (float)((double)inHigh[num42 - 2] - (double)inLow[num42 - 2]);
														}
														else
														{
															float num81;
															if (rangeType2 == RangeType.Shadows)
															{
																num45 = inOpen[num42 - 2];
																float num79 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
																float num80 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
																num81 = (float)((double)num80 - (double)inLow[num42 - 2] + ((double)inHigh[num42 - 2] - (double)num79));
															}
															else
															{
																num81 = 0f;
															}
															num78 = num81;
														}
														num77 = num78;
													}
													num76 = num77;
												}
												CandleSetting candleSetting6 = Globals.candleSettings[10];
												rangeType2 = candleSetting6.rangeType;
												double num82 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
												num44 = inClose[num42 - 2];
												if ((double)inOpen[num42 - 1] <= candleSetting6.factor * num76 / num82 + (double)num44)
												{
													num75 = candleSetting6.avgPeriod;
													double num83;
													if (num75 != 0.0)
													{
														num83 = array2[2] / num75;
													}
													else
													{
														float num84;
														if (rangeType2 == RangeType.RealBody)
														{
															num84 = (float)(double)Math.Abs((float)((double)num44 - (double)inOpen[num42 - 2]));
														}
														else
														{
															float num85;
															if (rangeType2 == RangeType.HighLow)
															{
																num85 = (float)((double)inHigh[num42 - 2] - (double)inLow[num42 - 2]);
															}
															else
															{
																float num88;
																if (rangeType2 == RangeType.Shadows)
																{
																	num45 = inOpen[num42 - 2];
																	float num86 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
																	float num87 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
																	num88 = (float)((double)num87 - (double)inLow[num42 - 2] + ((double)inHigh[num42 - 2] - (double)num86));
																}
																else
																{
																	num88 = 0f;
																}
																num85 = num88;
															}
															num84 = num85;
														}
														num83 = num84;
													}
													CandleSetting candleSetting7 = Globals.candleSettings[10];
													rangeType2 = candleSetting7.rangeType;
													double num89 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
													num56 = inOpen[num42 - 1];
													if ((double)num56 >= (double)inClose[num42 - 2] - candleSetting7.factor * num83 / num89)
													{
														num75 = candleSetting7.avgPeriod;
														double num90;
														if (num75 != 0.0)
														{
															num90 = array2[1] / num75;
														}
														else
														{
															float num91;
															if (rangeType2 == RangeType.RealBody)
															{
																num91 = (float)(double)Math.Abs((float)((double)inClose[num42 - 1] - (double)num56));
															}
															else
															{
																float num92;
																if (rangeType2 == RangeType.HighLow)
																{
																	num92 = (float)((double)inHigh[num42 - 1] - (double)inLow[num42 - 1]);
																}
																else
																{
																	float num95;
																	if (rangeType2 == RangeType.Shadows)
																	{
																		num55 = inClose[num42 - 1];
																		float num93 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
																		float num94 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
																		num95 = (float)((double)num94 - (double)inLow[num42 - 1] + ((double)inHigh[num42 - 1] - (double)num93));
																	}
																	else
																	{
																		num95 = 0f;
																	}
																	num92 = num95;
																}
																num91 = num92;
															}
															num90 = num91;
														}
														CandleSetting candleSetting8 = Globals.candleSettings[10];
														rangeType2 = candleSetting8.rangeType;
														double num96 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
														num55 = inClose[num42 - 1];
														if ((double)inOpen[num42] <= candleSetting8.factor * num90 / num96 + (double)num55)
														{
															num75 = candleSetting8.avgPeriod;
															double num97;
															if (num75 != 0.0)
															{
																num97 = array2[1] / num75;
															}
															else
															{
																float num98;
																if (rangeType2 == RangeType.RealBody)
																{
																	num98 = (float)(double)Math.Abs((float)((double)num55 - (double)inOpen[num42 - 1]));
																}
																else
																{
																	float num99;
																	if (rangeType2 == RangeType.HighLow)
																	{
																		num99 = (float)((double)inHigh[num42 - 1] - (double)inLow[num42 - 1]);
																	}
																	else
																	{
																		float num102;
																		if (rangeType2 == RangeType.Shadows)
																		{
																			num56 = inOpen[num42 - 1];
																			float num100 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
																			float num101 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
																			num102 = (float)((double)num101 - (double)inLow[num42 - 1] + ((double)inHigh[num42 - 1] - (double)num100));
																		}
																		else
																		{
																			num102 = 0f;
																		}
																		num99 = num102;
																	}
																	num98 = num99;
																}
																num97 = num98;
															}
															CandleSetting candleSetting9 = Globals.candleSettings[10];
															double num103 = ((candleSetting9.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if ((double)inOpen[num42] >= (double)inClose[num42 - 1] - candleSetting9.factor * num97 / num103)
															{
																outInteger[num43] = -100;
																num43++;
																goto IL_0d46;
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num43] = 0;
					num43++;
					goto IL_0d46;
					IL_0d46:
					int num104 = 2;
					int num105 = num2 - 2;
					int num106 = num42 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num107;
						if (rangeType == RangeType.RealBody)
						{
							num107 = (float)(double)Math.Abs((float)((double)inClose[num105 + num106] - (double)inOpen[num105 + num106]));
						}
						else
						{
							float num108;
							if (rangeType == RangeType.HighLow)
							{
								num108 = (float)((double)inHigh[num105 + num106] - (double)inLow[num105 + num106]);
							}
							else
							{
								float num113;
								if (rangeType == RangeType.Shadows)
								{
									float num109 = inClose[num105 + num106];
									float num110 = inOpen[num105 + num106];
									float num111 = ((!((double)num109 >= (double)num110)) ? num110 : num109);
									float num112 = ((!((double)num109 >= (double)num110)) ? num109 : num110);
									num113 = (float)((double)num112 - (double)inLow[num105 + num106] + ((double)inHigh[num105 + num106] - (double)num111));
								}
								else
								{
									num113 = 0f;
								}
								num108 = num113;
							}
							num107 = num108;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num114;
						if (rangeType == RangeType.RealBody)
						{
							num114 = (float)(double)Math.Abs((float)((double)inClose[num105] - (double)inOpen[num105]));
						}
						else
						{
							float num115;
							if (rangeType == RangeType.HighLow)
							{
								num115 = (float)((double)inHigh[num105] - (double)inLow[num105]);
							}
							else
							{
								float num120;
								if (rangeType == RangeType.Shadows)
								{
									float num116 = inClose[num105];
									float num117 = inOpen[num105];
									float num118 = ((!((double)num116 >= (double)num117)) ? num117 : num116);
									float num119 = ((!((double)num116 >= (double)num117)) ? num116 : num117);
									num120 = (float)((double)num119 - (double)inLow[num105] + ((double)inHigh[num105] - (double)num118));
								}
								else
								{
									num120 = 0f;
								}
								num115 = num120;
							}
							num114 = num115;
						}
						array[num104] += num107 - num114;
						num104--;
						num105++;
					}
					while (num104 >= 0);
					int num121 = 2;
					int num122 = num3 - 2;
					int num123 = num42 - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						float num124;
						if (rangeType2 == RangeType.RealBody)
						{
							num124 = (float)(double)Math.Abs((float)((double)inClose[num122 + num123] - (double)inOpen[num122 + num123]));
						}
						else
						{
							float num125;
							if (rangeType2 == RangeType.HighLow)
							{
								num125 = (float)((double)inHigh[num122 + num123] - (double)inLow[num122 + num123]);
							}
							else
							{
								float num130;
								if (rangeType2 == RangeType.Shadows)
								{
									float num126 = inClose[num122 + num123];
									float num127 = inOpen[num122 + num123];
									float num128 = ((!((double)num126 >= (double)num127)) ? num127 : num126);
									float num129 = ((!((double)num126 >= (double)num127)) ? num126 : num127);
									num130 = (float)((double)num129 - (double)inLow[num122 + num123] + ((double)inHigh[num122 + num123] - (double)num128));
								}
								else
								{
									num130 = 0f;
								}
								num125 = num130;
							}
							num124 = num125;
						}
						rangeType2 = Globals.candleSettings[10].rangeType;
						float num131;
						if (rangeType2 == RangeType.RealBody)
						{
							num131 = (float)(double)Math.Abs((float)((double)inClose[num122] - (double)inOpen[num122]));
						}
						else
						{
							float num132;
							if (rangeType2 == RangeType.HighLow)
							{
								num132 = (float)((double)inHigh[num122] - (double)inLow[num122]);
							}
							else
							{
								float num137;
								if (rangeType2 == RangeType.Shadows)
								{
									float num133 = inClose[num122];
									float num134 = inOpen[num122];
									float num135 = ((!((double)num133 >= (double)num134)) ? num134 : num133);
									float num136 = ((!((double)num133 >= (double)num134)) ? num133 : num134);
									num137 = (float)((double)num136 - (double)inLow[num122] + ((double)inHigh[num122] - (double)num135));
								}
								else
								{
									num137 = 0f;
								}
								num132 = num137;
							}
							num131 = num132;
						}
						array2[num121] += num124 - num131;
						num121--;
						num122++;
					}
					while (num121 >= 1);
					num42++;
					num2++;
					num3++;
				}
				while (num42 <= endIdx);
				outNBElement = num43;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlIdentical3Crows(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlIdentical3CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 1;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4 - 1] - inLow[num4 - 1];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4 - 1];
									double num8 = inOpen[num4 - 1];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4 - 1] + (inHigh[num4 - 1] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[2] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						double num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num18;
								if (rangeType == RangeType.Shadows)
								{
									double num14 = inClose[num4];
									double num15 = inOpen[num4];
									double num16 = ((!(num14 >= num15)) ? num15 : num14);
									double num17 = ((!(num14 >= num15)) ? num14 : num15);
									num18 = num17 - inLow[num4] + (inHigh[num4] - num16);
								}
								else
								{
									num18 = 0.0;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[1] += num12;
						rangeType = Globals.candleSettings[7].rangeType;
						double num19;
						if (rangeType == RangeType.RealBody)
						{
							num19 = Math.Abs(inClose[num4 + 1] - inOpen[num4 + 1]);
						}
						else
						{
							double num20;
							if (rangeType == RangeType.HighLow)
							{
								num20 = inHigh[num4 + 1] - inLow[num4 + 1];
							}
							else
							{
								double num25;
								if (rangeType == RangeType.Shadows)
								{
									double num21 = inClose[num4 + 1];
									double num22 = inOpen[num4 + 1];
									double num23 = ((!(num21 >= num22)) ? num22 : num21);
									double num24 = ((!(num21 >= num22)) ? num21 : num22);
									num25 = num24 - inLow[num4 + 1] + (inHigh[num4 + 1] - num23);
								}
								else
								{
									num25 = 0.0;
								}
								num20 = num25;
							}
							num19 = num20;
						}
						array[0] += num19;
						num4++;
					}
					while (num4 + 1 < startIdx);
				}
				if (num3 < startIdx)
				{
					int num26 = num3 - 1;
					int num27 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						double num28;
						if (rangeType2 == RangeType.RealBody)
						{
							num28 = Math.Abs(inClose[num26 - 1] - inOpen[num26 - 1]);
						}
						else
						{
							double num29;
							if (rangeType2 == RangeType.HighLow)
							{
								num29 = inHigh[num26 - 1] - inLow[num26 - 1];
							}
							else
							{
								double num34;
								if (rangeType2 == RangeType.Shadows)
								{
									double num30 = inClose[num26 - 1];
									double num31 = inOpen[num26 - 1];
									double num32 = ((!(num30 >= num31)) ? num31 : num30);
									double num33 = ((!(num30 >= num31)) ? num30 : num31);
									num34 = num33 - inLow[num26 - 1] + (inHigh[num26 - 1] - num32);
								}
								else
								{
									num34 = 0.0;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array2[2] += num28;
						rangeType2 = Globals.candleSettings[10].rangeType;
						double num35;
						if (rangeType2 == RangeType.RealBody)
						{
							num35 = Math.Abs(inClose[num26] - inOpen[num26]);
						}
						else
						{
							double num36;
							if (rangeType2 == RangeType.HighLow)
							{
								num36 = inHigh[num26] - inLow[num26];
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.Shadows)
								{
									double num37 = inClose[num26];
									double num38 = inOpen[num26];
									double num39 = ((!(num37 >= num38)) ? num38 : num37);
									double num40 = ((!(num37 >= num38)) ? num37 : num38);
									num41 = num40 - inLow[num26] + (inHigh[num26] - num39);
								}
								else
								{
									num41 = 0.0;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array2[1] += num35;
						num26++;
						num27--;
					}
					while (num27 != 0);
				}
				int num42 = startIdx;
				int num43 = 0;
				do
				{
					double num44 = inClose[num42 - 2];
					double num45 = inOpen[num42 - 2];
					if (!(num44 >= num45))
					{
						double num46 = ((!(num44 >= num45)) ? num44 : num45);
						CandleSetting candleSetting = Globals.candleSettings[7];
						double num47 = candleSetting.avgPeriod;
						double num48;
						RangeType rangeType;
						if (num47 != 0.0)
						{
							num48 = array[2] / num47;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num49;
							if (rangeType == RangeType.RealBody)
							{
								num49 = Math.Abs(num44 - num45);
							}
							else
							{
								double num50;
								if (rangeType == RangeType.HighLow)
								{
									num50 = inHigh[num42 - 2] - inLow[num42 - 2];
								}
								else
								{
									double num53;
									if (rangeType == RangeType.Shadows)
									{
										double num51 = ((!(num44 >= num45)) ? num45 : num44);
										double num52 = ((!(num44 >= num45)) ? num44 : num45);
										num53 = num52 - inLow[num42 - 2] + (inHigh[num42 - 2] - num51);
									}
									else
									{
										num53 = 0.0;
									}
									num50 = num53;
								}
								num49 = num50;
							}
							num48 = num49;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[7];
						rangeType = candleSetting2.rangeType;
						double num54 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (num46 - inLow[num42 - 2] < candleSetting2.factor * num48 / num54)
						{
							double num55 = inClose[num42 - 1];
							double num56 = inOpen[num42 - 1];
							if (!(num55 >= num56))
							{
								double num57 = ((!(num55 >= num56)) ? num55 : num56);
								num47 = candleSetting2.avgPeriod;
								double num58;
								if (num47 != 0.0)
								{
									num58 = array[1] / num47;
								}
								else
								{
									double num59;
									if (rangeType == RangeType.RealBody)
									{
										num59 = Math.Abs(num55 - num56);
									}
									else
									{
										double num60;
										if (rangeType == RangeType.HighLow)
										{
											num60 = inHigh[num42 - 1] - inLow[num42 - 1];
										}
										else
										{
											double num63;
											if (rangeType == RangeType.Shadows)
											{
												double num61 = ((!(num55 >= num56)) ? num56 : num55);
												double num62 = ((!(num55 >= num56)) ? num55 : num56);
												num63 = num62 - inLow[num42 - 1] + (inHigh[num42 - 1] - num61);
											}
											else
											{
												num63 = 0.0;
											}
											num60 = num63;
										}
										num59 = num60;
									}
									num58 = num59;
								}
								CandleSetting candleSetting3 = Globals.candleSettings[7];
								rangeType = candleSetting3.rangeType;
								double num64 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (num57 - inLow[num42 - 1] < candleSetting3.factor * num58 / num64)
								{
									double num65 = inClose[num42];
									double num66 = inOpen[num42];
									if (!(num65 >= num66))
									{
										double num67 = ((!(num65 >= num66)) ? num65 : num66);
										num47 = candleSetting3.avgPeriod;
										double num68;
										if (num47 != 0.0)
										{
											num68 = array[0] / num47;
										}
										else
										{
											double num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = Math.Abs(num65 - num66);
											}
											else
											{
												double num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = inHigh[num42] - inLow[num42];
												}
												else
												{
													double num73;
													if (rangeType == RangeType.Shadows)
													{
														double num71 = ((!(num65 >= num66)) ? num66 : num65);
														double num72 = ((!(num65 >= num66)) ? num65 : num66);
														num73 = num72 - inLow[num42] + (inHigh[num42] - num71);
													}
													else
													{
														num73 = 0.0;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num74 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (num67 - inLow[num42] < candleSetting4.factor * num68 / num74)
										{
											num44 = inClose[num42 - 2];
											num55 = inClose[num42 - 1];
											if (num44 > num55 && num55 > inClose[num42])
											{
												CandleSetting candleSetting5 = candleSettings[10];
												double num75 = candleSetting5.avgPeriod;
												double num76;
												RangeType rangeType2;
												if (num75 != 0.0)
												{
													num76 = array2[2] / num75;
												}
												else
												{
													rangeType2 = candleSetting5.rangeType;
													double num77;
													if (rangeType2 == RangeType.RealBody)
													{
														num77 = Math.Abs(num44 - inOpen[num42 - 2]);
													}
													else
													{
														double num78;
														if (rangeType2 == RangeType.HighLow)
														{
															num78 = inHigh[num42 - 2] - inLow[num42 - 2];
														}
														else
														{
															double num81;
															if (rangeType2 == RangeType.Shadows)
															{
																num45 = inOpen[num42 - 2];
																double num79 = ((!(num44 >= num45)) ? num45 : num44);
																double num80 = ((!(num44 >= num45)) ? num44 : num45);
																num81 = num80 - inLow[num42 - 2] + (inHigh[num42 - 2] - num79);
															}
															else
															{
																num81 = 0.0;
															}
															num78 = num81;
														}
														num77 = num78;
													}
													num76 = num77;
												}
												CandleSetting candleSetting6 = Globals.candleSettings[10];
												rangeType2 = candleSetting6.rangeType;
												double num82 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
												num44 = inClose[num42 - 2];
												if (inOpen[num42 - 1] <= candleSetting6.factor * num76 / num82 + num44)
												{
													num75 = candleSetting6.avgPeriod;
													double num83;
													if (num75 != 0.0)
													{
														num83 = array2[2] / num75;
													}
													else
													{
														double num84;
														if (rangeType2 == RangeType.RealBody)
														{
															num84 = Math.Abs(num44 - inOpen[num42 - 2]);
														}
														else
														{
															double num85;
															if (rangeType2 == RangeType.HighLow)
															{
																num85 = inHigh[num42 - 2] - inLow[num42 - 2];
															}
															else
															{
																double num88;
																if (rangeType2 == RangeType.Shadows)
																{
																	num45 = inOpen[num42 - 2];
																	double num86 = ((!(num44 >= num45)) ? num45 : num44);
																	double num87 = ((!(num44 >= num45)) ? num44 : num45);
																	num88 = num87 - inLow[num42 - 2] + (inHigh[num42 - 2] - num86);
																}
																else
																{
																	num88 = 0.0;
																}
																num85 = num88;
															}
															num84 = num85;
														}
														num83 = num84;
													}
													CandleSetting candleSetting7 = Globals.candleSettings[10];
													rangeType2 = candleSetting7.rangeType;
													double num89 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
													num56 = inOpen[num42 - 1];
													if (num56 >= inClose[num42 - 2] - candleSetting7.factor * num83 / num89)
													{
														num75 = candleSetting7.avgPeriod;
														double num90;
														if (num75 != 0.0)
														{
															num90 = array2[1] / num75;
														}
														else
														{
															double num91;
															if (rangeType2 == RangeType.RealBody)
															{
																num91 = Math.Abs(inClose[num42 - 1] - num56);
															}
															else
															{
																double num92;
																if (rangeType2 == RangeType.HighLow)
																{
																	num92 = inHigh[num42 - 1] - inLow[num42 - 1];
																}
																else
																{
																	double num95;
																	if (rangeType2 == RangeType.Shadows)
																	{
																		num55 = inClose[num42 - 1];
																		double num93 = ((!(num55 >= num56)) ? num56 : num55);
																		double num94 = ((!(num55 >= num56)) ? num55 : num56);
																		num95 = num94 - inLow[num42 - 1] + (inHigh[num42 - 1] - num93);
																	}
																	else
																	{
																		num95 = 0.0;
																	}
																	num92 = num95;
																}
																num91 = num92;
															}
															num90 = num91;
														}
														CandleSetting candleSetting8 = Globals.candleSettings[10];
														rangeType2 = candleSetting8.rangeType;
														double num96 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
														num55 = inClose[num42 - 1];
														if (inOpen[num42] <= candleSetting8.factor * num90 / num96 + num55)
														{
															num75 = candleSetting8.avgPeriod;
															double num97;
															if (num75 != 0.0)
															{
																num97 = array2[1] / num75;
															}
															else
															{
																double num98;
																if (rangeType2 == RangeType.RealBody)
																{
																	num98 = Math.Abs(num55 - inOpen[num42 - 1]);
																}
																else
																{
																	double num99;
																	if (rangeType2 == RangeType.HighLow)
																	{
																		num99 = inHigh[num42 - 1] - inLow[num42 - 1];
																	}
																	else
																	{
																		double num102;
																		if (rangeType2 == RangeType.Shadows)
																		{
																			num56 = inOpen[num42 - 1];
																			double num100 = ((!(num55 >= num56)) ? num56 : num55);
																			double num101 = ((!(num55 >= num56)) ? num55 : num56);
																			num102 = num101 - inLow[num42 - 1] + (inHigh[num42 - 1] - num100);
																		}
																		else
																		{
																			num102 = 0.0;
																		}
																		num99 = num102;
																	}
																	num98 = num99;
																}
																num97 = num98;
															}
															CandleSetting candleSetting9 = Globals.candleSettings[10];
															double num103 = ((candleSetting9.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
															if (inOpen[num42] >= inClose[num42 - 1] - candleSetting9.factor * num97 / num103)
															{
																outInteger[num43] = -100;
																num43++;
																goto IL_0c77;
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num43] = 0;
					num43++;
					goto IL_0c77;
					IL_0c77:
					int num104 = 2;
					int num105 = num2 - 2;
					int num106 = num42 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num107;
						if (rangeType == RangeType.RealBody)
						{
							num107 = Math.Abs(inClose[num105 + num106] - inOpen[num105 + num106]);
						}
						else
						{
							double num108;
							if (rangeType == RangeType.HighLow)
							{
								num108 = inHigh[num105 + num106] - inLow[num105 + num106];
							}
							else
							{
								double num113;
								if (rangeType == RangeType.Shadows)
								{
									double num109 = inClose[num105 + num106];
									double num110 = inOpen[num105 + num106];
									double num111 = ((!(num109 >= num110)) ? num110 : num109);
									double num112 = ((!(num109 >= num110)) ? num109 : num110);
									num113 = num112 - inLow[num105 + num106] + (inHigh[num105 + num106] - num111);
								}
								else
								{
									num113 = 0.0;
								}
								num108 = num113;
							}
							num107 = num108;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num114;
						if (rangeType == RangeType.RealBody)
						{
							num114 = Math.Abs(inClose[num105] - inOpen[num105]);
						}
						else
						{
							double num115;
							if (rangeType == RangeType.HighLow)
							{
								num115 = inHigh[num105] - inLow[num105];
							}
							else
							{
								double num120;
								if (rangeType == RangeType.Shadows)
								{
									double num116 = inClose[num105];
									double num117 = inOpen[num105];
									double num118 = ((!(num116 >= num117)) ? num117 : num116);
									double num119 = ((!(num116 >= num117)) ? num116 : num117);
									num120 = num119 - inLow[num105] + (inHigh[num105] - num118);
								}
								else
								{
									num120 = 0.0;
								}
								num115 = num120;
							}
							num114 = num115;
						}
						array[num104] += num107 - num114;
						num104--;
						num105++;
					}
					while (num104 >= 0);
					int num121 = 2;
					int num122 = num3 - 2;
					int num123 = num42 - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[10].rangeType;
						double num124;
						if (rangeType2 == RangeType.RealBody)
						{
							num124 = Math.Abs(inClose[num122 + num123] - inOpen[num122 + num123]);
						}
						else
						{
							double num125;
							if (rangeType2 == RangeType.HighLow)
							{
								num125 = inHigh[num122 + num123] - inLow[num122 + num123];
							}
							else
							{
								double num130;
								if (rangeType2 == RangeType.Shadows)
								{
									double num126 = inClose[num122 + num123];
									double num127 = inOpen[num122 + num123];
									double num128 = ((!(num126 >= num127)) ? num127 : num126);
									double num129 = ((!(num126 >= num127)) ? num126 : num127);
									num130 = num129 - inLow[num122 + num123] + (inHigh[num122 + num123] - num128);
								}
								else
								{
									num130 = 0.0;
								}
								num125 = num130;
							}
							num124 = num125;
						}
						rangeType2 = Globals.candleSettings[10].rangeType;
						double num131;
						if (rangeType2 == RangeType.RealBody)
						{
							num131 = Math.Abs(inClose[num122] - inOpen[num122]);
						}
						else
						{
							double num132;
							if (rangeType2 == RangeType.HighLow)
							{
								num132 = inHigh[num122] - inLow[num122];
							}
							else
							{
								double num137;
								if (rangeType2 == RangeType.Shadows)
								{
									double num133 = inClose[num122];
									double num134 = inOpen[num122];
									double num135 = ((!(num133 >= num134)) ? num134 : num133);
									double num136 = ((!(num133 >= num134)) ? num133 : num134);
									num137 = num136 - inLow[num122] + (inHigh[num122] - num135);
								}
								else
								{
									num137 = 0.0;
								}
								num132 = num137;
							}
							num131 = num132;
						}
						array2[num121] += num124 - num131;
						num121--;
						num122++;
					}
					while (num121 >= 1);
					num42++;
					num2++;
					num3++;
				}
				while (num42 <= endIdx);
				outNBElement = num43;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlInNeckLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[10].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlInNeck(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlInNeckLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num6];
									float num11 = inOpen[num6];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num19 = inClose[num15];
									float num20 = inOpen[num15];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					float num26 = inClose[num24 - 1];
					float num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!((double)num26 >= (double)num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							float num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = (float)(double)Math.Abs((float)((double)num26 - (double)num27));
							}
							else
							{
								float num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
								}
								else
								{
									float num34;
									if (rangeType2 == RangeType.Shadows)
									{
										float num32 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
										float num33 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
										num34 = (float)((double)num33 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num32));
									}
									else
									{
										num34 = 0f;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1])) > candleSettings[0].factor * num29 / num35)
						{
							float num36 = inOpen[num24];
							if ((double)inClose[num24] >= (double)num36)
							{
								float num37 = inLow[num24 - 1];
								if ((double)num36 < (double)num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										float num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
										}
										else
										{
											float num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = (float)((double)inHigh[num24 - 1] - (double)num37);
											}
											else
											{
												float num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													float num42 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
													float num43 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
													num44 = (float)((double)inHigh[num24 - 1] - (double)num42 + ((double)num43 - (double)num37));
												}
												else
												{
													num44 = 0f;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									float num46 = inClose[num24];
									num26 = inClose[num24 - 1];
									if ((double)num46 <= candleSetting3.factor * num39 / num45 + (double)num26 && (double)num46 >= (double)num26)
									{
										outInteger[num25] = -100;
										num25++;
										goto IL_04d2;
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_04d2;
					IL_04d2:
					rangeType = Globals.candleSettings[10].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num49 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num50 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num51 = (float)((double)num50 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num3 - 1];
								float num55 = inOpen[num3 - 1];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num61 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num62 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num63 = (float)((double)num62 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5 - 1] - (double)inOpen[num5 - 1]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5 - 1] - (double)inLow[num5 - 1]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5 - 1];
								float num67 = inOpen[num5 - 1];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5 - 1] + ((double)inHigh[num5 - 1] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = (double)(num59 - num64) + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlInNeck(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlInNeckLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num6];
									double num11 = inOpen[num6];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num6] + (inHigh[num6] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num19 = inClose[num15];
									double num20 = inOpen[num15];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num15] + (inHigh[num15] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					double num26 = inClose[num24 - 1];
					double num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!(num26 >= num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							double num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = Math.Abs(num26 - num27);
							}
							else
							{
								double num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = inHigh[num24 - 1] - inLow[num24 - 1];
								}
								else
								{
									double num34;
									if (rangeType2 == RangeType.Shadows)
									{
										double num32 = ((!(num26 >= num27)) ? num27 : num26);
										double num33 = ((!(num26 >= num27)) ? num26 : num27);
										num34 = num33 - inLow[num24 - 1] + (inHigh[num24 - 1] - num32);
									}
									else
									{
										num34 = 0.0;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]) > candleSettings[0].factor * num29 / num35)
						{
							double num36 = inOpen[num24];
							if (inClose[num24] >= num36)
							{
								double num37 = inLow[num24 - 1];
								if (num36 < num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										double num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
										}
										else
										{
											double num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = inHigh[num24 - 1] - num37;
											}
											else
											{
												double num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													double num42 = ((!(num26 >= num27)) ? num27 : num26);
													double num43 = ((!(num26 >= num27)) ? num26 : num27);
													num44 = inHigh[num24 - 1] - num42 + (num43 - num37);
												}
												else
												{
													num44 = 0.0;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num26 = inClose[num24 - 1];
									double num46 = inClose[num24];
									if (num46 <= candleSetting3.factor * num39 / num45 + num26 && num46 >= num26)
									{
										outInteger[num25] = -100;
										num25++;
										goto IL_0486;
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_0486;
					IL_0486:
					rangeType = Globals.candleSettings[10].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num49 = ((!(num26 >= num27)) ? num27 : num26);
								double num50 = ((!(num26 >= num27)) ? num26 : num27);
								num51 = num50 - inLow[num24 - 1] + (inHigh[num24 - 1] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
					}
					else
					{
						double num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = inHigh[num3 - 1] - inLow[num3 - 1];
						}
						else
						{
							double num58;
							if (rangeType == RangeType.Shadows)
							{
								double num54 = inClose[num3 - 1];
								double num55 = inOpen[num3 - 1];
								double num56 = ((!(num54 >= num55)) ? num55 : num54);
								double num57 = ((!(num54 >= num55)) ? num54 : num55);
								num58 = num57 - inLow[num3 - 1] + (inHigh[num3 - 1] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = num47 - num52 + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num61 = ((!(num26 >= num27)) ? num27 : num26);
								double num62 = ((!(num26 >= num27)) ? num26 : num27);
								num63 = num62 - inLow[num24 - 1] + (inHigh[num24 - 1] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5 - 1] - inOpen[num5 - 1]);
					}
					else
					{
						double num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = inHigh[num5 - 1] - inLow[num5 - 1];
						}
						else
						{
							double num70;
							if (rangeType2 == RangeType.Shadows)
							{
								double num66 = inClose[num5 - 1];
								double num67 = inOpen[num5 - 1];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5 - 1] + (inHigh[num5 - 1] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = num59 - num64 + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlInvertedHammerLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[7].avgPeriod;
		int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num2 + 1;
	}

	public static RetCode CdlInvertedHammer(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlInvertedHammerLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = (double)num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num35;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num33 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num34 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num35 = (float)((double)num34 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22])) < candleSettings[2].factor * num30 / num36)
					{
						float num11 = inClose[num22];
						float num12 = inOpen[num22];
						float num37 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = (float)((double)inHigh[num22] - (double)inLow[num22]);
								}
								else
								{
									float num44;
									if (rangeType2 == RangeType.Shadows)
									{
										float num42 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
										float num43 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
										num44 = (float)((double)num43 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num42));
									}
									else
									{
										num44 = 0f;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num46 = inHigh[num22];
						if ((double)num46 - (double)num37 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							float num47 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[7];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								float num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
								}
								else
								{
									float num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = (float)((double)num46 - (double)inLow[num22]);
									}
									else
									{
										float num54;
										if (rangeType3 == RangeType.Shadows)
										{
											float num52 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
											float num53 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
											num54 = (float)((double)num53 - (double)inLow[num22] + ((double)num46 - (double)num52));
										}
										else
										{
											num54 = 0f;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[7];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num47 - (double)inLow[num22] < candleSetting5.factor * num49 / num55)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								float num56 = ((!((double)num12 > (double)num11)) ? num11 : num12);
								float num57 = inOpen[num22 - 1];
								float num58 = inClose[num22 - 1];
								float num59 = ((!((double)num57 < (double)num58)) ? num58 : num57);
								if ((double)num56 < (double)num59)
								{
									outInteger[num28] = 100;
									num28++;
									goto IL_0667;
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_0667;
					IL_0667:
					rangeType = Globals.candleSettings[2].rangeType;
					float num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num64;
							if (rangeType == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num62 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num63 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num64 = (float)((double)num63 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num71;
							if (rangeType == RangeType.Shadows)
							{
								float num67 = inClose[num3];
								float num68 = inOpen[num3];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = (double)(num60 - num65) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num76;
							if (rangeType2 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num74 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num75 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num76 = (float)((double)num75 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num74));
							}
							else
							{
								num76 = 0f;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num83;
							if (rangeType2 == RangeType.Shadows)
							{
								float num79 = inClose[num5];
								float num80 = inOpen[num5];
								float num81 = ((!((double)num79 >= (double)num80)) ? num80 : num79);
								float num82 = ((!((double)num79 >= (double)num80)) ? num79 : num80);
								num83 = (float)((double)num82 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num81));
							}
							else
							{
								num83 = 0f;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num4 = (double)(num72 - num77) + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num88;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num86 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num87 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num88 = (float)((double)num87 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num95;
							if (rangeType3 == RangeType.Shadows)
							{
								float num91 = inClose[num7];
								float num92 = inOpen[num7];
								float num93 = ((!((double)num91 >= (double)num92)) ? num92 : num91);
								float num94 = ((!((double)num91 >= (double)num92)) ? num91 : num92);
								num95 = (float)((double)num94 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num93));
							}
							else
							{
								num95 = 0f;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num6 = (double)(num84 - num89) + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlInvertedHammer(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlInvertedHammerLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num35;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num33 = ((!(num11 >= num12)) ? num12 : num11);
									double num34 = ((!(num11 >= num12)) ? num11 : num12);
									num35 = num34 - inLow[num22] + (inHigh[num22] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num22] - inOpen[num22]) < candleSettings[2].factor * num30 / num36)
					{
						double num11 = inClose[num22];
						double num12 = inOpen[num22];
						double num37 = ((!(num11 >= num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = Math.Abs(num11 - num12);
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = inHigh[num22] - inLow[num22];
								}
								else
								{
									double num44;
									if (rangeType2 == RangeType.Shadows)
									{
										double num42 = ((!(num11 >= num12)) ? num12 : num11);
										double num43 = ((!(num11 >= num12)) ? num11 : num12);
										num44 = num43 - inLow[num22] + (inHigh[num22] - num42);
									}
									else
									{
										num44 = 0.0;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num46 = inHigh[num22];
						if (num46 - num37 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							double num47 = ((!(num11 >= num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[7];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								double num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = Math.Abs(num11 - num12);
								}
								else
								{
									double num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = num46 - inLow[num22];
									}
									else
									{
										double num54;
										if (rangeType3 == RangeType.Shadows)
										{
											double num52 = ((!(num11 >= num12)) ? num12 : num11);
											double num53 = ((!(num11 >= num12)) ? num11 : num12);
											num54 = num53 - inLow[num22] + (num46 - num52);
										}
										else
										{
											num54 = 0.0;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[7];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num47 - inLow[num22] < candleSetting5.factor * num49 / num55)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								double num56 = ((!(num12 > num11)) ? num11 : num12);
								double num57 = inOpen[num22 - 1];
								double num58 = inClose[num22 - 1];
								double num59 = ((!(num57 < num58)) ? num58 : num57);
								if (num56 < num59)
								{
									outInteger[num28] = 100;
									num28++;
									goto IL_05fb;
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_05fb;
					IL_05fb:
					rangeType = Globals.candleSettings[2].rangeType;
					double num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num64;
							if (rangeType == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num62 = ((!(num11 >= num12)) ? num12 : num11);
								double num63 = ((!(num11 >= num12)) ? num11 : num12);
								num64 = num63 - inLow[num22] + (inHigh[num22] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num71;
							if (rangeType == RangeType.Shadows)
							{
								double num67 = inClose[num3];
								double num68 = inOpen[num3];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num3] + (inHigh[num3] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = num60 - num65 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num76;
							if (rangeType2 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num74 = ((!(num11 >= num12)) ? num12 : num11);
								double num75 = ((!(num11 >= num12)) ? num11 : num12);
								num76 = num75 - inLow[num22] + (inHigh[num22] - num74);
							}
							else
							{
								num76 = 0.0;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num83;
							if (rangeType2 == RangeType.Shadows)
							{
								double num79 = inClose[num5];
								double num80 = inOpen[num5];
								double num81 = ((!(num79 >= num80)) ? num80 : num79);
								double num82 = ((!(num79 >= num80)) ? num79 : num80);
								num83 = num82 - inLow[num5] + (inHigh[num5] - num81);
							}
							else
							{
								num83 = 0.0;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num4 = num72 - num77 + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num88;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num86 = ((!(num11 >= num12)) ? num12 : num11);
								double num87 = ((!(num11 >= num12)) ? num11 : num12);
								num88 = num87 - inLow[num22] + (inHigh[num22] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num95;
							if (rangeType3 == RangeType.Shadows)
							{
								double num91 = inClose[num7];
								double num92 = inOpen[num7];
								double num93 = ((!(num91 >= num92)) ? num92 : num91);
								double num94 = ((!(num91 >= num92)) ? num91 : num92);
								num95 = num94 - inLow[num7] + (inHigh[num7] - num93);
							}
							else
							{
								num95 = 0.0;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num6 = num84 - num89 + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlKickingLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlKicking(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		double[] array2 = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlKickingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				int num4 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4 - 1];
									float num8 = inOpen[num4 - 1];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[1] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						float num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num18;
								if (rangeType == RangeType.Shadows)
								{
									float num14 = inClose[num4];
									float num15 = inOpen[num4];
									float num16 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num17 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num18 = (float)((double)num17 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num16));
								}
								else
								{
									num18 = 0f;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[0] += num12;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num19 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = (float)(double)Math.Abs((float)((double)inClose[num19 - 1] - (double)inOpen[num19 - 1]));
						}
						else
						{
							float num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = (float)((double)inHigh[num19 - 1] - (double)inLow[num19 - 1]);
							}
							else
							{
								float num24;
								if (rangeType2 == RangeType.Shadows)
								{
									float num7 = inClose[num19 - 1];
									float num8 = inOpen[num19 - 1];
									float num22 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num23 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num24 = (float)((double)num23 - (double)inLow[num19 - 1] + ((double)inHigh[num19 - 1] - (double)num22));
								}
								else
								{
									num24 = 0f;
								}
								num21 = num24;
							}
							num20 = num21;
						}
						array2[1] += num20;
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = (float)(double)Math.Abs((float)((double)inClose[num19] - (double)inOpen[num19]));
						}
						else
						{
							float num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = (float)((double)inHigh[num19] - (double)inLow[num19]);
							}
							else
							{
								float num29;
								if (rangeType2 == RangeType.Shadows)
								{
									float num14 = inClose[num19];
									float num15 = inOpen[num19];
									float num27 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num28 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num29 = (float)((double)num28 - (double)inLow[num19] + ((double)inHigh[num19] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						array2[0] += num25;
						num19++;
					}
					while (num19 < startIdx);
				}
				int num30 = startIdx;
				int num31 = 0;
				do
				{
					float num7 = inClose[num30 - 1];
					float num8 = inOpen[num30 - 1];
					int num32 = (((double)num7 >= (double)num8) ? 1 : (-1));
					int num33 = (((double)inClose[num30] >= (double)inOpen[num30]) ? 1 : (-1));
					if (num32 == -num33)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num34 = candleSetting.avgPeriod;
						double num35;
						if (num34 != 0.0)
						{
							num35 = array2[1] / num34;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							float num36;
							if (rangeType2 == RangeType.RealBody)
							{
								num36 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
							}
							else
							{
								float num37;
								if (rangeType2 == RangeType.HighLow)
								{
									num37 = (float)((double)inHigh[num30 - 1] - (double)inLow[num30 - 1]);
								}
								else
								{
									float num40;
									if (rangeType2 == RangeType.Shadows)
									{
										float num38 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
										float num39 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
										num40 = (float)((double)num39 - (double)inLow[num30 - 1] + ((double)inHigh[num30 - 1] - (double)num38));
									}
									else
									{
										num40 = 0f;
									}
									num37 = num40;
								}
								num36 = num37;
							}
							num35 = num36;
						}
						double num41 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num30 - 1] - (double)inOpen[num30 - 1])) > candleSettings[0].factor * num35 / num41)
						{
							num7 = inClose[num30 - 1];
							num8 = inOpen[num30 - 1];
							float num42 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
							CandleSetting candleSetting2 = candleSettings[7];
							double num43 = candleSetting2.avgPeriod;
							double num44;
							RangeType rangeType;
							if (num43 != 0.0)
							{
								num44 = array[1] / num43;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								float num45;
								if (rangeType == RangeType.RealBody)
								{
									num45 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
								}
								else
								{
									float num46;
									if (rangeType == RangeType.HighLow)
									{
										num46 = (float)((double)inHigh[num30 - 1] - (double)inLow[num30 - 1]);
									}
									else
									{
										float num49;
										if (rangeType == RangeType.Shadows)
										{
											float num47 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
											float num48 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
											num49 = (float)((double)num48 - (double)inLow[num30 - 1] + ((double)inHigh[num30 - 1] - (double)num47));
										}
										else
										{
											num49 = 0f;
										}
										num46 = num49;
									}
									num45 = num46;
								}
								num44 = num45;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num50 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							float num51 = inHigh[num30 - 1];
							if ((double)num51 - (double)num42 < candleSetting3.factor * num44 / num50)
							{
								num7 = inClose[num30 - 1];
								num8 = inOpen[num30 - 1];
								float num52 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
								num43 = candleSetting3.avgPeriod;
								double num53;
								if (num43 != 0.0)
								{
									num53 = array[1] / num43;
								}
								else
								{
									float num54;
									if (rangeType == RangeType.RealBody)
									{
										num54 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
									}
									else
									{
										float num55;
										if (rangeType == RangeType.HighLow)
										{
											num55 = (float)((double)num51 - (double)inLow[num30 - 1]);
										}
										else
										{
											float num58;
											if (rangeType == RangeType.Shadows)
											{
												float num56 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
												float num57 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
												num58 = (float)((double)num57 - (double)inLow[num30 - 1] + ((double)num51 - (double)num56));
											}
											else
											{
												num58 = 0f;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								candleSettings = Globals.candleSettings;
								CandleSetting candleSetting4 = candleSettings[7];
								double num59 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)num52 - (double)inLow[num30 - 1] < candleSetting4.factor * num53 / num59)
								{
									CandleSetting candleSetting5 = candleSettings[0];
									num34 = candleSetting5.avgPeriod;
									double num60;
									if (num34 != 0.0)
									{
										num60 = array2[0] / num34;
									}
									else
									{
										RangeType rangeType2 = candleSetting5.rangeType;
										float num61;
										if (rangeType2 == RangeType.RealBody)
										{
											num61 = (float)(double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
										}
										else
										{
											float num62;
											if (rangeType2 == RangeType.HighLow)
											{
												num62 = (float)((double)inHigh[num30] - (double)inLow[num30]);
											}
											else
											{
												float num65;
												if (rangeType2 == RangeType.Shadows)
												{
													float num14 = inClose[num30];
													float num15 = inOpen[num30];
													float num63 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
													float num64 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
													num65 = (float)((double)num64 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num63));
												}
												else
												{
													num65 = 0f;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									double num66 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if ((double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30])) > candleSettings[0].factor * num60 / num66)
									{
										float num14 = inClose[num30];
										float num15 = inOpen[num30];
										float num67 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
										CandleSetting candleSetting6 = candleSettings[7];
										num43 = candleSetting6.avgPeriod;
										double num68;
										if (num43 != 0.0)
										{
											num68 = array[0] / num43;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											float num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = (float)(double)Math.Abs((float)((double)num14 - (double)num15));
											}
											else
											{
												float num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = (float)((double)inHigh[num30] - (double)inLow[num30]);
												}
												else
												{
													float num73;
													if (rangeType == RangeType.Shadows)
													{
														float num71 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
														float num72 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
														num73 = (float)((double)num72 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num71));
													}
													else
													{
														num73 = 0f;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										CandleSetting candleSetting7 = Globals.candleSettings[7];
										rangeType = candleSetting7.rangeType;
										double num74 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										float num75 = inHigh[num30];
										if ((double)num75 - (double)num67 < candleSetting7.factor * num68 / num74)
										{
											num14 = inClose[num30];
											num15 = inOpen[num30];
											float num76 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
											num43 = candleSetting7.avgPeriod;
											double num77;
											if (num43 != 0.0)
											{
												num77 = array[0] / num43;
											}
											else
											{
												float num78;
												if (rangeType == RangeType.RealBody)
												{
													num78 = (float)(double)Math.Abs((float)((double)num14 - (double)num15));
												}
												else
												{
													float num79;
													if (rangeType == RangeType.HighLow)
													{
														num79 = (float)((double)num75 - (double)inLow[num30]);
													}
													else
													{
														float num82;
														if (rangeType == RangeType.Shadows)
														{
															float num80 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
															float num81 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
															num82 = (float)((double)num81 - (double)inLow[num30] + ((double)num75 - (double)num80));
														}
														else
														{
															num82 = 0f;
														}
														num79 = num82;
													}
													num78 = num79;
												}
												num77 = num78;
											}
											CandleSetting candleSetting8 = Globals.candleSettings[7];
											double num83 = ((candleSetting8.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											float num84 = inLow[num30];
											if ((double)num76 - (double)num84 < candleSetting8.factor * num77 / num83)
											{
												num7 = inClose[num30 - 1];
												num8 = inOpen[num30 - 1];
												if ((!((double)num7 >= (double)num8) && (double)num84 > (double)inHigh[num30 - 1]) || ((double)num7 >= (double)num8 && (double)inHigh[num30] < (double)inLow[num30 - 1]))
												{
													int num85 = (((double)inClose[num30] >= (double)inOpen[num30]) ? 1 : (-1));
													outInteger[num31] = num85 * 100;
													num31++;
													goto IL_0b0d;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num31] = 0;
					num31++;
					goto IL_0b0d;
					IL_0b0d:
					int num86 = 1;
					int num87 = num30 - 1;
					int num88 = num3 - num30;
					int num89 = num2 - num30;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num90;
						if (rangeType2 == RangeType.RealBody)
						{
							num90 = (float)(double)Math.Abs((float)((double)inClose[num87] - (double)inOpen[num87]));
						}
						else
						{
							float num91;
							if (rangeType2 == RangeType.HighLow)
							{
								num91 = (float)((double)inHigh[num87] - (double)inLow[num87]);
							}
							else
							{
								float num96;
								if (rangeType2 == RangeType.Shadows)
								{
									float num92 = inClose[num87];
									float num93 = inOpen[num87];
									float num94 = ((!((double)num92 >= (double)num93)) ? num93 : num92);
									float num95 = ((!((double)num92 >= (double)num93)) ? num92 : num93);
									num96 = (float)((double)num95 - (double)inLow[num87] + ((double)inHigh[num87] - (double)num94));
								}
								else
								{
									num96 = 0f;
								}
								num91 = num96;
							}
							num90 = num91;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num97;
						if (rangeType2 == RangeType.RealBody)
						{
							num97 = (float)(double)Math.Abs((float)((double)inClose[num87 + num88] - (double)inOpen[num87 + num88]));
						}
						else
						{
							float num98;
							if (rangeType2 == RangeType.HighLow)
							{
								num98 = (float)((double)inHigh[num87 + num88] - (double)inLow[num87 + num88]);
							}
							else
							{
								float num103;
								if (rangeType2 == RangeType.Shadows)
								{
									float num99 = inClose[num87 + num88];
									float num100 = inOpen[num87 + num88];
									float num101 = ((!((double)num99 >= (double)num100)) ? num100 : num99);
									float num102 = ((!((double)num99 >= (double)num100)) ? num99 : num100);
									num103 = (float)((double)num102 - (double)inLow[num87 + num88] + ((double)inHigh[num87 + num88] - (double)num101));
								}
								else
								{
									num103 = 0f;
								}
								num98 = num103;
							}
							num97 = num98;
						}
						array2[num86] += num90 - num97;
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num104;
						if (rangeType == RangeType.RealBody)
						{
							num104 = (float)(double)Math.Abs((float)((double)inClose[num87] - (double)inOpen[num87]));
						}
						else
						{
							float num105;
							if (rangeType == RangeType.HighLow)
							{
								num105 = (float)((double)inHigh[num87] - (double)inLow[num87]);
							}
							else
							{
								float num108;
								if (rangeType == RangeType.Shadows)
								{
									float num92 = inClose[num87];
									float num93 = inOpen[num87];
									float num106 = ((!((double)num92 >= (double)num93)) ? num93 : num92);
									float num107 = ((!((double)num92 >= (double)num93)) ? num92 : num93);
									num108 = (float)((double)num107 - (double)inLow[num87] + ((double)inHigh[num87] - (double)num106));
								}
								else
								{
									num108 = 0f;
								}
								num105 = num108;
							}
							num104 = num105;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num109;
						if (rangeType == RangeType.RealBody)
						{
							num109 = (float)(double)Math.Abs((float)((double)inClose[num87 + num89] - (double)inOpen[num87 + num89]));
						}
						else
						{
							float num110;
							if (rangeType == RangeType.HighLow)
							{
								num110 = (float)((double)inHigh[num87 + num89] - (double)inLow[num87 + num89]);
							}
							else
							{
								float num115;
								if (rangeType == RangeType.Shadows)
								{
									float num111 = inClose[num87 + num89];
									float num112 = inOpen[num87 + num89];
									float num113 = ((!((double)num111 >= (double)num112)) ? num112 : num111);
									float num114 = ((!((double)num111 >= (double)num112)) ? num111 : num112);
									num115 = (float)((double)num114 - (double)inLow[num87 + num89] + ((double)inHigh[num87 + num89] - (double)num113));
								}
								else
								{
									num115 = 0f;
								}
								num110 = num115;
							}
							num109 = num110;
						}
						array[num86] += num104 - num109;
						num86--;
						num87++;
					}
					while (num86 >= 0);
					num30++;
					num2++;
					num3++;
				}
				while (num30 <= endIdx);
				outNBElement = num31;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlKicking(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		double[] array2 = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlKickingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				int num4 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4 - 1] - inLow[num4 - 1];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4 - 1];
									double num8 = inOpen[num4 - 1];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4 - 1] + (inHigh[num4 - 1] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[1] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						double num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num18;
								if (rangeType == RangeType.Shadows)
								{
									double num14 = inClose[num4];
									double num15 = inOpen[num4];
									double num16 = ((!(num14 >= num15)) ? num15 : num14);
									double num17 = ((!(num14 >= num15)) ? num14 : num15);
									num18 = num17 - inLow[num4] + (inHigh[num4] - num16);
								}
								else
								{
									num18 = 0.0;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[0] += num12;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num19 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = Math.Abs(inClose[num19 - 1] - inOpen[num19 - 1]);
						}
						else
						{
							double num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = inHigh[num19 - 1] - inLow[num19 - 1];
							}
							else
							{
								double num24;
								if (rangeType2 == RangeType.Shadows)
								{
									double num7 = inClose[num19 - 1];
									double num8 = inOpen[num19 - 1];
									double num22 = ((!(num7 >= num8)) ? num8 : num7);
									double num23 = ((!(num7 >= num8)) ? num7 : num8);
									num24 = num23 - inLow[num19 - 1] + (inHigh[num19 - 1] - num22);
								}
								else
								{
									num24 = 0.0;
								}
								num21 = num24;
							}
							num20 = num21;
						}
						array2[1] += num20;
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = Math.Abs(inClose[num19] - inOpen[num19]);
						}
						else
						{
							double num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = inHigh[num19] - inLow[num19];
							}
							else
							{
								double num29;
								if (rangeType2 == RangeType.Shadows)
								{
									double num14 = inClose[num19];
									double num15 = inOpen[num19];
									double num27 = ((!(num14 >= num15)) ? num15 : num14);
									double num28 = ((!(num14 >= num15)) ? num14 : num15);
									num29 = num28 - inLow[num19] + (inHigh[num19] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						array2[0] += num25;
						num19++;
					}
					while (num19 < startIdx);
				}
				int num30 = startIdx;
				int num31 = 0;
				do
				{
					double num7 = inClose[num30 - 1];
					double num8 = inOpen[num30 - 1];
					int num32 = ((num7 >= num8) ? 1 : (-1));
					int num33 = ((inClose[num30] >= inOpen[num30]) ? 1 : (-1));
					if (num32 == -num33)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num34 = candleSetting.avgPeriod;
						double num35;
						if (num34 != 0.0)
						{
							num35 = array2[1] / num34;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							double num36;
							if (rangeType2 == RangeType.RealBody)
							{
								num36 = Math.Abs(num7 - num8);
							}
							else
							{
								double num37;
								if (rangeType2 == RangeType.HighLow)
								{
									num37 = inHigh[num30 - 1] - inLow[num30 - 1];
								}
								else
								{
									double num40;
									if (rangeType2 == RangeType.Shadows)
									{
										double num38 = ((!(num7 >= num8)) ? num8 : num7);
										double num39 = ((!(num7 >= num8)) ? num7 : num8);
										num40 = num39 - inLow[num30 - 1] + (inHigh[num30 - 1] - num38);
									}
									else
									{
										num40 = 0.0;
									}
									num37 = num40;
								}
								num36 = num37;
							}
							num35 = num36;
						}
						double num41 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num30 - 1] - inOpen[num30 - 1]) > candleSettings[0].factor * num35 / num41)
						{
							num7 = inClose[num30 - 1];
							num8 = inOpen[num30 - 1];
							double num42 = ((!(num7 >= num8)) ? num8 : num7);
							CandleSetting candleSetting2 = candleSettings[7];
							double num43 = candleSetting2.avgPeriod;
							double num44;
							RangeType rangeType;
							if (num43 != 0.0)
							{
								num44 = array[1] / num43;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								double num45;
								if (rangeType == RangeType.RealBody)
								{
									num45 = Math.Abs(num7 - num8);
								}
								else
								{
									double num46;
									if (rangeType == RangeType.HighLow)
									{
										num46 = inHigh[num30 - 1] - inLow[num30 - 1];
									}
									else
									{
										double num49;
										if (rangeType == RangeType.Shadows)
										{
											double num47 = ((!(num7 >= num8)) ? num8 : num7);
											double num48 = ((!(num7 >= num8)) ? num7 : num8);
											num49 = num48 - inLow[num30 - 1] + (inHigh[num30 - 1] - num47);
										}
										else
										{
											num49 = 0.0;
										}
										num46 = num49;
									}
									num45 = num46;
								}
								num44 = num45;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num50 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num51 = inHigh[num30 - 1];
							if (num51 - num42 < candleSetting3.factor * num44 / num50)
							{
								num7 = inClose[num30 - 1];
								num8 = inOpen[num30 - 1];
								double num52 = ((!(num7 >= num8)) ? num7 : num8);
								num43 = candleSetting3.avgPeriod;
								double num53;
								if (num43 != 0.0)
								{
									num53 = array[1] / num43;
								}
								else
								{
									double num54;
									if (rangeType == RangeType.RealBody)
									{
										num54 = Math.Abs(num7 - num8);
									}
									else
									{
										double num55;
										if (rangeType == RangeType.HighLow)
										{
											num55 = num51 - inLow[num30 - 1];
										}
										else
										{
											double num58;
											if (rangeType == RangeType.Shadows)
											{
												double num56 = ((!(num7 >= num8)) ? num8 : num7);
												double num57 = ((!(num7 >= num8)) ? num7 : num8);
												num58 = num57 - inLow[num30 - 1] + (num51 - num56);
											}
											else
											{
												num58 = 0.0;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								candleSettings = Globals.candleSettings;
								CandleSetting candleSetting4 = candleSettings[7];
								double num59 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (num52 - inLow[num30 - 1] < candleSetting4.factor * num53 / num59)
								{
									CandleSetting candleSetting5 = candleSettings[0];
									num34 = candleSetting5.avgPeriod;
									double num60;
									if (num34 != 0.0)
									{
										num60 = array2[0] / num34;
									}
									else
									{
										RangeType rangeType2 = candleSetting5.rangeType;
										double num61;
										if (rangeType2 == RangeType.RealBody)
										{
											num61 = Math.Abs(inClose[num30] - inOpen[num30]);
										}
										else
										{
											double num62;
											if (rangeType2 == RangeType.HighLow)
											{
												num62 = inHigh[num30] - inLow[num30];
											}
											else
											{
												double num65;
												if (rangeType2 == RangeType.Shadows)
												{
													double num14 = inClose[num30];
													double num15 = inOpen[num30];
													double num63 = ((!(num14 >= num15)) ? num15 : num14);
													double num64 = ((!(num14 >= num15)) ? num14 : num15);
													num65 = num64 - inLow[num30] + (inHigh[num30] - num63);
												}
												else
												{
													num65 = 0.0;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									double num66 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if (Math.Abs(inClose[num30] - inOpen[num30]) > candleSettings[0].factor * num60 / num66)
									{
										double num14 = inClose[num30];
										double num15 = inOpen[num30];
										double num67 = ((!(num14 >= num15)) ? num15 : num14);
										CandleSetting candleSetting6 = candleSettings[7];
										num43 = candleSetting6.avgPeriod;
										double num68;
										if (num43 != 0.0)
										{
											num68 = array[0] / num43;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											double num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = Math.Abs(num14 - num15);
											}
											else
											{
												double num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = inHigh[num30] - inLow[num30];
												}
												else
												{
													double num73;
													if (rangeType == RangeType.Shadows)
													{
														double num71 = ((!(num14 >= num15)) ? num15 : num14);
														double num72 = ((!(num14 >= num15)) ? num14 : num15);
														num73 = num72 - inLow[num30] + (inHigh[num30] - num71);
													}
													else
													{
														num73 = 0.0;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										CandleSetting candleSetting7 = Globals.candleSettings[7];
										rangeType = candleSetting7.rangeType;
										double num74 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										double num75 = inHigh[num30];
										if (num75 - num67 < candleSetting7.factor * num68 / num74)
										{
											num14 = inClose[num30];
											num15 = inOpen[num30];
											double num76 = ((!(num14 >= num15)) ? num14 : num15);
											num43 = candleSetting7.avgPeriod;
											double num77;
											if (num43 != 0.0)
											{
												num77 = array[0] / num43;
											}
											else
											{
												double num78;
												if (rangeType == RangeType.RealBody)
												{
													num78 = Math.Abs(num14 - num15);
												}
												else
												{
													double num79;
													if (rangeType == RangeType.HighLow)
													{
														num79 = num75 - inLow[num30];
													}
													else
													{
														double num82;
														if (rangeType == RangeType.Shadows)
														{
															double num80 = ((!(num14 >= num15)) ? num15 : num14);
															double num81 = ((!(num14 >= num15)) ? num14 : num15);
															num82 = num81 - inLow[num30] + (num75 - num80);
														}
														else
														{
															num82 = 0.0;
														}
														num79 = num82;
													}
													num78 = num79;
												}
												num77 = num78;
											}
											CandleSetting candleSetting8 = Globals.candleSettings[7];
											double num83 = ((candleSetting8.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											double num84 = inLow[num30];
											if (num76 - num84 < candleSetting8.factor * num77 / num83)
											{
												num7 = inClose[num30 - 1];
												num8 = inOpen[num30 - 1];
												if ((!(num7 >= num8) && num84 > inHigh[num30 - 1]) || (num7 >= num8 && inHigh[num30] < inLow[num30 - 1]))
												{
													int num85 = ((inClose[num30] >= inOpen[num30]) ? 1 : (-1));
													outInteger[num31] = num85 * 100;
													num31++;
													goto IL_0a49;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num31] = 0;
					num31++;
					goto IL_0a49;
					IL_0a49:
					int num86 = 1;
					int num87 = num30 - 1;
					int num88 = num3 - num30;
					int num89 = num2 - num30;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num90;
						if (rangeType2 == RangeType.RealBody)
						{
							num90 = Math.Abs(inClose[num87] - inOpen[num87]);
						}
						else
						{
							double num91;
							if (rangeType2 == RangeType.HighLow)
							{
								num91 = inHigh[num87] - inLow[num87];
							}
							else
							{
								double num96;
								if (rangeType2 == RangeType.Shadows)
								{
									double num92 = inClose[num87];
									double num93 = inOpen[num87];
									double num94 = ((!(num92 >= num93)) ? num93 : num92);
									double num95 = ((!(num92 >= num93)) ? num92 : num93);
									num96 = num95 - inLow[num87] + (inHigh[num87] - num94);
								}
								else
								{
									num96 = 0.0;
								}
								num91 = num96;
							}
							num90 = num91;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num97;
						if (rangeType2 == RangeType.RealBody)
						{
							num97 = Math.Abs(inClose[num88 + num87] - inOpen[num88 + num87]);
						}
						else
						{
							double num98;
							if (rangeType2 == RangeType.HighLow)
							{
								num98 = inHigh[num88 + num87] - inLow[num88 + num87];
							}
							else
							{
								double num103;
								if (rangeType2 == RangeType.Shadows)
								{
									double num99 = inClose[num88 + num87];
									double num100 = inOpen[num88 + num87];
									double num101 = ((!(num99 >= num100)) ? num100 : num99);
									double num102 = ((!(num99 >= num100)) ? num99 : num100);
									num103 = num102 - inLow[num88 + num87] + (inHigh[num88 + num87] - num101);
								}
								else
								{
									num103 = 0.0;
								}
								num98 = num103;
							}
							num97 = num98;
						}
						array2[num86] += num90 - num97;
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num104;
						if (rangeType == RangeType.RealBody)
						{
							num104 = Math.Abs(inClose[num87] - inOpen[num87]);
						}
						else
						{
							double num105;
							if (rangeType == RangeType.HighLow)
							{
								num105 = inHigh[num87] - inLow[num87];
							}
							else
							{
								double num108;
								if (rangeType == RangeType.Shadows)
								{
									double num92 = inClose[num87];
									double num93 = inOpen[num87];
									double num106 = ((!(num92 >= num93)) ? num93 : num92);
									double num107 = ((!(num92 >= num93)) ? num92 : num93);
									num108 = num107 - inLow[num87] + (inHigh[num87] - num106);
								}
								else
								{
									num108 = 0.0;
								}
								num105 = num108;
							}
							num104 = num105;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num109;
						if (rangeType == RangeType.RealBody)
						{
							num109 = Math.Abs(inClose[num89 + num87] - inOpen[num89 + num87]);
						}
						else
						{
							double num110;
							if (rangeType == RangeType.HighLow)
							{
								num110 = inHigh[num89 + num87] - inLow[num89 + num87];
							}
							else
							{
								double num115;
								if (rangeType == RangeType.Shadows)
								{
									double num111 = inClose[num89 + num87];
									double num112 = inOpen[num89 + num87];
									double num113 = ((!(num111 >= num112)) ? num112 : num111);
									double num114 = ((!(num111 >= num112)) ? num111 : num112);
									num115 = num114 - inLow[num89 + num87] + (inHigh[num89 + num87] - num113);
								}
								else
								{
									num115 = 0.0;
								}
								num110 = num115;
							}
							num109 = num110;
						}
						array[num86] += num104 - num109;
						num86--;
						num87++;
					}
					while (num86 >= 0);
					num30++;
					num2++;
					num3++;
				}
				while (num30 <= endIdx);
				outNBElement = num31;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlKickingByLengthLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlKickingByLength(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		double[] array2 = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlKickingByLengthLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				int num4 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4 - 1];
									float num8 = inOpen[num4 - 1];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[1] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						float num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num18;
								if (rangeType == RangeType.Shadows)
								{
									float num14 = inClose[num4];
									float num15 = inOpen[num4];
									float num16 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num17 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num18 = (float)((double)num17 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num16));
								}
								else
								{
									num18 = 0f;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[0] += num12;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num19 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = (float)(double)Math.Abs((float)((double)inClose[num19 - 1] - (double)inOpen[num19 - 1]));
						}
						else
						{
							float num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = (float)((double)inHigh[num19 - 1] - (double)inLow[num19 - 1]);
							}
							else
							{
								float num24;
								if (rangeType2 == RangeType.Shadows)
								{
									float num7 = inClose[num19 - 1];
									float num8 = inOpen[num19 - 1];
									float num22 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num23 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num24 = (float)((double)num23 - (double)inLow[num19 - 1] + ((double)inHigh[num19 - 1] - (double)num22));
								}
								else
								{
									num24 = 0f;
								}
								num21 = num24;
							}
							num20 = num21;
						}
						array2[1] += num20;
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = (float)(double)Math.Abs((float)((double)inClose[num19] - (double)inOpen[num19]));
						}
						else
						{
							float num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = (float)((double)inHigh[num19] - (double)inLow[num19]);
							}
							else
							{
								float num29;
								if (rangeType2 == RangeType.Shadows)
								{
									float num14 = inClose[num19];
									float num15 = inOpen[num19];
									float num27 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
									float num28 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
									num29 = (float)((double)num28 - (double)inLow[num19] + ((double)inHigh[num19] - (double)num27));
								}
								else
								{
									num29 = 0f;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						array2[0] += num25;
						num19++;
					}
					while (num19 < startIdx);
				}
				int num30 = startIdx;
				int num31 = 0;
				do
				{
					float num7 = inClose[num30 - 1];
					float num8 = inOpen[num30 - 1];
					int num32 = (((double)num7 >= (double)num8) ? 1 : (-1));
					int num33 = (((double)inClose[num30] >= (double)inOpen[num30]) ? 1 : (-1));
					if (num32 == -num33)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num34 = candleSetting.avgPeriod;
						double num35;
						if (num34 != 0.0)
						{
							num35 = array2[1] / num34;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							float num36;
							if (rangeType2 == RangeType.RealBody)
							{
								num36 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
							}
							else
							{
								float num37;
								if (rangeType2 == RangeType.HighLow)
								{
									num37 = (float)((double)inHigh[num30 - 1] - (double)inLow[num30 - 1]);
								}
								else
								{
									float num40;
									if (rangeType2 == RangeType.Shadows)
									{
										float num38 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
										float num39 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
										num40 = (float)((double)num39 - (double)inLow[num30 - 1] + ((double)inHigh[num30 - 1] - (double)num38));
									}
									else
									{
										num40 = 0f;
									}
									num37 = num40;
								}
								num36 = num37;
							}
							num35 = num36;
						}
						double num41 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num30 - 1] - (double)inOpen[num30 - 1])) > candleSettings[0].factor * num35 / num41)
						{
							num7 = inClose[num30 - 1];
							num8 = inOpen[num30 - 1];
							float num42 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
							CandleSetting candleSetting2 = candleSettings[7];
							double num43 = candleSetting2.avgPeriod;
							double num44;
							RangeType rangeType;
							if (num43 != 0.0)
							{
								num44 = array[1] / num43;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								float num45;
								if (rangeType == RangeType.RealBody)
								{
									num45 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
								}
								else
								{
									float num46;
									if (rangeType == RangeType.HighLow)
									{
										num46 = (float)((double)inHigh[num30 - 1] - (double)inLow[num30 - 1]);
									}
									else
									{
										float num49;
										if (rangeType == RangeType.Shadows)
										{
											float num47 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
											float num48 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
											num49 = (float)((double)num48 - (double)inLow[num30 - 1] + ((double)inHigh[num30 - 1] - (double)num47));
										}
										else
										{
											num49 = 0f;
										}
										num46 = num49;
									}
									num45 = num46;
								}
								num44 = num45;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num50 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							float num51 = inHigh[num30 - 1];
							if ((double)num51 - (double)num42 < candleSetting3.factor * num44 / num50)
							{
								num7 = inClose[num30 - 1];
								num8 = inOpen[num30 - 1];
								float num52 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
								num43 = candleSetting3.avgPeriod;
								double num53;
								if (num43 != 0.0)
								{
									num53 = array[1] / num43;
								}
								else
								{
									float num54;
									if (rangeType == RangeType.RealBody)
									{
										num54 = (float)(double)Math.Abs((float)((double)num7 - (double)num8));
									}
									else
									{
										float num55;
										if (rangeType == RangeType.HighLow)
										{
											num55 = (float)((double)num51 - (double)inLow[num30 - 1]);
										}
										else
										{
											float num58;
											if (rangeType == RangeType.Shadows)
											{
												float num56 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
												float num57 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
												num58 = (float)((double)num57 - (double)inLow[num30 - 1] + ((double)num51 - (double)num56));
											}
											else
											{
												num58 = 0f;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								candleSettings = Globals.candleSettings;
								CandleSetting candleSetting4 = candleSettings[7];
								double num59 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)num52 - (double)inLow[num30 - 1] < candleSetting4.factor * num53 / num59)
								{
									CandleSetting candleSetting5 = candleSettings[0];
									num34 = candleSetting5.avgPeriod;
									double num60;
									if (num34 != 0.0)
									{
										num60 = array2[0] / num34;
									}
									else
									{
										RangeType rangeType2 = candleSetting5.rangeType;
										float num61;
										if (rangeType2 == RangeType.RealBody)
										{
											num61 = (float)(double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
										}
										else
										{
											float num62;
											if (rangeType2 == RangeType.HighLow)
											{
												num62 = (float)((double)inHigh[num30] - (double)inLow[num30]);
											}
											else
											{
												float num65;
												if (rangeType2 == RangeType.Shadows)
												{
													float num14 = inClose[num30];
													float num15 = inOpen[num30];
													float num63 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
													float num64 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
													num65 = (float)((double)num64 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num63));
												}
												else
												{
													num65 = 0f;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									double num66 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if ((double)Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30])) > candleSettings[0].factor * num60 / num66)
									{
										float num14 = inClose[num30];
										float num15 = inOpen[num30];
										float num67 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
										CandleSetting candleSetting6 = candleSettings[7];
										num43 = candleSetting6.avgPeriod;
										double num68;
										if (num43 != 0.0)
										{
											num68 = array[0] / num43;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											float num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = (float)(double)Math.Abs((float)((double)num14 - (double)num15));
											}
											else
											{
												float num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = (float)((double)inHigh[num30] - (double)inLow[num30]);
												}
												else
												{
													float num73;
													if (rangeType == RangeType.Shadows)
													{
														float num71 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
														float num72 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
														num73 = (float)((double)num72 - (double)inLow[num30] + ((double)inHigh[num30] - (double)num71));
													}
													else
													{
														num73 = 0f;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										CandleSetting candleSetting7 = Globals.candleSettings[7];
										rangeType = candleSetting7.rangeType;
										double num74 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										float num75 = inHigh[num30];
										if ((double)num75 - (double)num67 < candleSetting7.factor * num68 / num74)
										{
											num14 = inClose[num30];
											num15 = inOpen[num30];
											float num76 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
											num43 = candleSetting7.avgPeriod;
											double num77;
											if (num43 != 0.0)
											{
												num77 = array[0] / num43;
											}
											else
											{
												float num78;
												if (rangeType == RangeType.RealBody)
												{
													num78 = (float)(double)Math.Abs((float)((double)num14 - (double)num15));
												}
												else
												{
													float num79;
													if (rangeType == RangeType.HighLow)
													{
														num79 = (float)((double)num75 - (double)inLow[num30]);
													}
													else
													{
														float num82;
														if (rangeType == RangeType.Shadows)
														{
															float num80 = ((!((double)num14 >= (double)num15)) ? num15 : num14);
															float num81 = ((!((double)num14 >= (double)num15)) ? num14 : num15);
															num82 = (float)((double)num81 - (double)inLow[num30] + ((double)num75 - (double)num80));
														}
														else
														{
															num82 = 0f;
														}
														num79 = num82;
													}
													num78 = num79;
												}
												num77 = num78;
											}
											CandleSetting candleSetting8 = Globals.candleSettings[7];
											double num83 = ((candleSetting8.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											float num84 = inLow[num30];
											if ((double)num76 - (double)num84 < candleSetting8.factor * num77 / num83)
											{
												num7 = inClose[num30 - 1];
												num8 = inOpen[num30 - 1];
												if ((!((double)num7 >= (double)num8) && (double)num84 > (double)inHigh[num30 - 1]) || ((double)num7 >= (double)num8 && (double)inHigh[num30] < (double)inLow[num30 - 1]))
												{
													double num85 = Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
													int num86 = ((!(num85 > (double)Math.Abs((float)((double)inClose[num30 - 1] - (double)inOpen[num30 - 1])))) ? (num30 - 1) : num30);
													double num87 = Math.Abs((float)((double)inClose[num30] - (double)inOpen[num30]));
													int num88 = ((!(num87 > (double)Math.Abs((float)((double)inClose[num30 - 1] - (double)inOpen[num30 - 1])))) ? (num30 - 1) : num30);
													int num89 = (((double)inClose[num86] >= (double)inOpen[num88]) ? 1 : (-1));
													outInteger[num31] = num89 * 100;
													num31++;
													goto IL_0b92;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num31] = 0;
					num31++;
					goto IL_0b92;
					IL_0b92:
					int num90 = 1;
					int num91 = num30 - 1;
					int num92 = num3 - num30;
					int num93 = num2 - num30;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num94;
						if (rangeType2 == RangeType.RealBody)
						{
							num94 = (float)(double)Math.Abs((float)((double)inClose[num91] - (double)inOpen[num91]));
						}
						else
						{
							float num95;
							if (rangeType2 == RangeType.HighLow)
							{
								num95 = (float)((double)inHigh[num91] - (double)inLow[num91]);
							}
							else
							{
								float num100;
								if (rangeType2 == RangeType.Shadows)
								{
									float num96 = inClose[num91];
									float num97 = inOpen[num91];
									float num98 = ((!((double)num96 >= (double)num97)) ? num97 : num96);
									float num99 = ((!((double)num96 >= (double)num97)) ? num96 : num97);
									num100 = (float)((double)num99 - (double)inLow[num91] + ((double)inHigh[num91] - (double)num98));
								}
								else
								{
									num100 = 0f;
								}
								num95 = num100;
							}
							num94 = num95;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num101;
						if (rangeType2 == RangeType.RealBody)
						{
							num101 = (float)(double)Math.Abs((float)((double)inClose[num91 + num92] - (double)inOpen[num91 + num92]));
						}
						else
						{
							float num102;
							if (rangeType2 == RangeType.HighLow)
							{
								num102 = (float)((double)inHigh[num91 + num92] - (double)inLow[num91 + num92]);
							}
							else
							{
								float num107;
								if (rangeType2 == RangeType.Shadows)
								{
									float num103 = inClose[num91 + num92];
									float num104 = inOpen[num91 + num92];
									float num105 = ((!((double)num103 >= (double)num104)) ? num104 : num103);
									float num106 = ((!((double)num103 >= (double)num104)) ? num103 : num104);
									num107 = (float)((double)num106 - (double)inLow[num91 + num92] + ((double)inHigh[num91 + num92] - (double)num105));
								}
								else
								{
									num107 = 0f;
								}
								num102 = num107;
							}
							num101 = num102;
						}
						array2[num90] += num94 - num101;
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num108;
						if (rangeType == RangeType.RealBody)
						{
							num108 = (float)(double)Math.Abs((float)((double)inClose[num91] - (double)inOpen[num91]));
						}
						else
						{
							float num109;
							if (rangeType == RangeType.HighLow)
							{
								num109 = (float)((double)inHigh[num91] - (double)inLow[num91]);
							}
							else
							{
								float num112;
								if (rangeType == RangeType.Shadows)
								{
									float num96 = inClose[num91];
									float num97 = inOpen[num91];
									float num110 = ((!((double)num96 >= (double)num97)) ? num97 : num96);
									float num111 = ((!((double)num96 >= (double)num97)) ? num96 : num97);
									num112 = (float)((double)num111 - (double)inLow[num91] + ((double)inHigh[num91] - (double)num110));
								}
								else
								{
									num112 = 0f;
								}
								num109 = num112;
							}
							num108 = num109;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						float num113;
						if (rangeType == RangeType.RealBody)
						{
							num113 = (float)(double)Math.Abs((float)((double)inClose[num91 + num93] - (double)inOpen[num91 + num93]));
						}
						else
						{
							float num114;
							if (rangeType == RangeType.HighLow)
							{
								num114 = (float)((double)inHigh[num91 + num93] - (double)inLow[num91 + num93]);
							}
							else
							{
								float num119;
								if (rangeType == RangeType.Shadows)
								{
									float num115 = inClose[num91 + num93];
									float num116 = inOpen[num91 + num93];
									float num117 = ((!((double)num115 >= (double)num116)) ? num116 : num115);
									float num118 = ((!((double)num115 >= (double)num116)) ? num115 : num116);
									num119 = (float)((double)num118 - (double)inLow[num91 + num93] + ((double)inHigh[num91 + num93] - (double)num117));
								}
								else
								{
									num119 = 0f;
								}
								num114 = num119;
							}
							num113 = num114;
						}
						array[num90] += num108 - num113;
						num90--;
						num91++;
					}
					while (num90 >= 0);
					num30++;
					num2++;
					num3++;
				}
				while (num30 <= endIdx);
				outNBElement = num31;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlKickingByLength(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		double[] array2 = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlKickingByLengthLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[7].avgPeriod;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				int num4 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4 - 1] - inLow[num4 - 1];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4 - 1];
									double num8 = inOpen[num4 - 1];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4 - 1] + (inHigh[num4 - 1] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						array[1] += num5;
						rangeType = Globals.candleSettings[7].rangeType;
						double num12;
						if (rangeType == RangeType.RealBody)
						{
							num12 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num13;
							if (rangeType == RangeType.HighLow)
							{
								num13 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num18;
								if (rangeType == RangeType.Shadows)
								{
									double num14 = inClose[num4];
									double num15 = inOpen[num4];
									double num16 = ((!(num14 >= num15)) ? num15 : num14);
									double num17 = ((!(num14 >= num15)) ? num14 : num15);
									num18 = num17 - inLow[num4] + (inHigh[num4] - num16);
								}
								else
								{
									num18 = 0.0;
								}
								num13 = num18;
							}
							num12 = num13;
						}
						array[0] += num12;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num19 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num20;
						if (rangeType2 == RangeType.RealBody)
						{
							num20 = Math.Abs(inClose[num19 - 1] - inOpen[num19 - 1]);
						}
						else
						{
							double num21;
							if (rangeType2 == RangeType.HighLow)
							{
								num21 = inHigh[num19 - 1] - inLow[num19 - 1];
							}
							else
							{
								double num24;
								if (rangeType2 == RangeType.Shadows)
								{
									double num7 = inClose[num19 - 1];
									double num8 = inOpen[num19 - 1];
									double num22 = ((!(num7 >= num8)) ? num8 : num7);
									double num23 = ((!(num7 >= num8)) ? num7 : num8);
									num24 = num23 - inLow[num19 - 1] + (inHigh[num19 - 1] - num22);
								}
								else
								{
									num24 = 0.0;
								}
								num21 = num24;
							}
							num20 = num21;
						}
						array2[1] += num20;
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = Math.Abs(inClose[num19] - inOpen[num19]);
						}
						else
						{
							double num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = inHigh[num19] - inLow[num19];
							}
							else
							{
								double num29;
								if (rangeType2 == RangeType.Shadows)
								{
									double num14 = inClose[num19];
									double num15 = inOpen[num19];
									double num27 = ((!(num14 >= num15)) ? num15 : num14);
									double num28 = ((!(num14 >= num15)) ? num14 : num15);
									num29 = num28 - inLow[num19] + (inHigh[num19] - num27);
								}
								else
								{
									num29 = 0.0;
								}
								num26 = num29;
							}
							num25 = num26;
						}
						array2[0] += num25;
						num19++;
					}
					while (num19 < startIdx);
				}
				int num30 = startIdx;
				int num31 = 0;
				do
				{
					double num7 = inClose[num30 - 1];
					double num8 = inOpen[num30 - 1];
					int num32 = ((num7 >= num8) ? 1 : (-1));
					int num33 = ((inClose[num30] >= inOpen[num30]) ? 1 : (-1));
					if (num32 == -num33)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num34 = candleSetting.avgPeriod;
						double num35;
						if (num34 != 0.0)
						{
							num35 = array2[1] / num34;
						}
						else
						{
							RangeType rangeType2 = candleSetting.rangeType;
							double num36;
							if (rangeType2 == RangeType.RealBody)
							{
								num36 = Math.Abs(num7 - num8);
							}
							else
							{
								double num37;
								if (rangeType2 == RangeType.HighLow)
								{
									num37 = inHigh[num30 - 1] - inLow[num30 - 1];
								}
								else
								{
									double num40;
									if (rangeType2 == RangeType.Shadows)
									{
										double num38 = ((!(num7 >= num8)) ? num8 : num7);
										double num39 = ((!(num7 >= num8)) ? num7 : num8);
										num40 = num39 - inLow[num30 - 1] + (inHigh[num30 - 1] - num38);
									}
									else
									{
										num40 = 0.0;
									}
									num37 = num40;
								}
								num36 = num37;
							}
							num35 = num36;
						}
						double num41 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num30 - 1] - inOpen[num30 - 1]) > candleSettings[0].factor * num35 / num41)
						{
							num7 = inClose[num30 - 1];
							num8 = inOpen[num30 - 1];
							double num42 = ((!(num7 >= num8)) ? num8 : num7);
							CandleSetting candleSetting2 = candleSettings[7];
							double num43 = candleSetting2.avgPeriod;
							double num44;
							RangeType rangeType;
							if (num43 != 0.0)
							{
								num44 = array[1] / num43;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								double num45;
								if (rangeType == RangeType.RealBody)
								{
									num45 = Math.Abs(num7 - num8);
								}
								else
								{
									double num46;
									if (rangeType == RangeType.HighLow)
									{
										num46 = inHigh[num30 - 1] - inLow[num30 - 1];
									}
									else
									{
										double num49;
										if (rangeType == RangeType.Shadows)
										{
											double num47 = ((!(num7 >= num8)) ? num8 : num7);
											double num48 = ((!(num7 >= num8)) ? num7 : num8);
											num49 = num48 - inLow[num30 - 1] + (inHigh[num30 - 1] - num47);
										}
										else
										{
											num49 = 0.0;
										}
										num46 = num49;
									}
									num45 = num46;
								}
								num44 = num45;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[7];
							rangeType = candleSetting3.rangeType;
							double num50 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num51 = inHigh[num30 - 1];
							if (num51 - num42 < candleSetting3.factor * num44 / num50)
							{
								num7 = inClose[num30 - 1];
								num8 = inOpen[num30 - 1];
								double num52 = ((!(num7 >= num8)) ? num7 : num8);
								num43 = candleSetting3.avgPeriod;
								double num53;
								if (num43 != 0.0)
								{
									num53 = array[1] / num43;
								}
								else
								{
									double num54;
									if (rangeType == RangeType.RealBody)
									{
										num54 = Math.Abs(num7 - num8);
									}
									else
									{
										double num55;
										if (rangeType == RangeType.HighLow)
										{
											num55 = num51 - inLow[num30 - 1];
										}
										else
										{
											double num58;
											if (rangeType == RangeType.Shadows)
											{
												double num56 = ((!(num7 >= num8)) ? num8 : num7);
												double num57 = ((!(num7 >= num8)) ? num7 : num8);
												num58 = num57 - inLow[num30 - 1] + (num51 - num56);
											}
											else
											{
												num58 = 0.0;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								candleSettings = Globals.candleSettings;
								CandleSetting candleSetting4 = candleSettings[7];
								double num59 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (num52 - inLow[num30 - 1] < candleSetting4.factor * num53 / num59)
								{
									CandleSetting candleSetting5 = candleSettings[0];
									num34 = candleSetting5.avgPeriod;
									double num60;
									if (num34 != 0.0)
									{
										num60 = array2[0] / num34;
									}
									else
									{
										RangeType rangeType2 = candleSetting5.rangeType;
										double num61;
										if (rangeType2 == RangeType.RealBody)
										{
											num61 = Math.Abs(inClose[num30] - inOpen[num30]);
										}
										else
										{
											double num62;
											if (rangeType2 == RangeType.HighLow)
											{
												num62 = inHigh[num30] - inLow[num30];
											}
											else
											{
												double num65;
												if (rangeType2 == RangeType.Shadows)
												{
													double num14 = inClose[num30];
													double num15 = inOpen[num30];
													double num63 = ((!(num14 >= num15)) ? num15 : num14);
													double num64 = ((!(num14 >= num15)) ? num14 : num15);
													num65 = num64 - inLow[num30] + (inHigh[num30] - num63);
												}
												else
												{
													num65 = 0.0;
												}
												num62 = num65;
											}
											num61 = num62;
										}
										num60 = num61;
									}
									double num66 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if (Math.Abs(inClose[num30] - inOpen[num30]) > candleSettings[0].factor * num60 / num66)
									{
										double num14 = inClose[num30];
										double num15 = inOpen[num30];
										double num67 = ((!(num14 >= num15)) ? num15 : num14);
										CandleSetting candleSetting6 = candleSettings[7];
										num43 = candleSetting6.avgPeriod;
										double num68;
										if (num43 != 0.0)
										{
											num68 = array[0] / num43;
										}
										else
										{
											rangeType = candleSetting6.rangeType;
											double num69;
											if (rangeType == RangeType.RealBody)
											{
												num69 = Math.Abs(num14 - num15);
											}
											else
											{
												double num70;
												if (rangeType == RangeType.HighLow)
												{
													num70 = inHigh[num30] - inLow[num30];
												}
												else
												{
													double num73;
													if (rangeType == RangeType.Shadows)
													{
														double num71 = ((!(num14 >= num15)) ? num15 : num14);
														double num72 = ((!(num14 >= num15)) ? num14 : num15);
														num73 = num72 - inLow[num30] + (inHigh[num30] - num71);
													}
													else
													{
														num73 = 0.0;
													}
													num70 = num73;
												}
												num69 = num70;
											}
											num68 = num69;
										}
										CandleSetting candleSetting7 = Globals.candleSettings[7];
										rangeType = candleSetting7.rangeType;
										double num74 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										double num75 = inHigh[num30];
										if (num75 - num67 < candleSetting7.factor * num68 / num74)
										{
											num14 = inClose[num30];
											num15 = inOpen[num30];
											double num76 = ((!(num14 >= num15)) ? num14 : num15);
											num43 = candleSetting7.avgPeriod;
											double num77;
											if (num43 != 0.0)
											{
												num77 = array[0] / num43;
											}
											else
											{
												double num78;
												if (rangeType == RangeType.RealBody)
												{
													num78 = Math.Abs(num14 - num15);
												}
												else
												{
													double num79;
													if (rangeType == RangeType.HighLow)
													{
														num79 = num75 - inLow[num30];
													}
													else
													{
														double num82;
														if (rangeType == RangeType.Shadows)
														{
															double num80 = ((!(num14 >= num15)) ? num15 : num14);
															double num81 = ((!(num14 >= num15)) ? num14 : num15);
															num82 = num81 - inLow[num30] + (num75 - num80);
														}
														else
														{
															num82 = 0.0;
														}
														num79 = num82;
													}
													num78 = num79;
												}
												num77 = num78;
											}
											CandleSetting candleSetting8 = Globals.candleSettings[7];
											double num83 = ((candleSetting8.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
											double num84 = inLow[num30];
											if (num76 - num84 < candleSetting8.factor * num77 / num83)
											{
												num7 = inClose[num30 - 1];
												num8 = inOpen[num30 - 1];
												if ((!(num7 >= num8) && num84 > inHigh[num30 - 1]) || (num7 >= num8 && inHigh[num30] < inLow[num30 - 1]))
												{
													double num85 = Math.Abs(inClose[num30] - inOpen[num30]);
													int num86 = ((!(num85 > Math.Abs(inClose[num30 - 1] - inOpen[num30 - 1]))) ? (num30 - 1) : num30);
													double num87 = Math.Abs(inClose[num30] - inOpen[num30]);
													int num88 = ((!(num87 > Math.Abs(inClose[num30 - 1] - inOpen[num30 - 1]))) ? (num30 - 1) : num30);
													int num89 = ((inClose[num86] >= inOpen[num88]) ? 1 : (-1));
													outInteger[num31] = num89 * 100;
													num31++;
													goto IL_0abe;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num31] = 0;
					num31++;
					goto IL_0abe;
					IL_0abe:
					int num90 = 1;
					int num91 = num30 - 1;
					int num92 = num3 - num30;
					int num93 = num2 - num30;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num94;
						if (rangeType2 == RangeType.RealBody)
						{
							num94 = Math.Abs(inClose[num91] - inOpen[num91]);
						}
						else
						{
							double num95;
							if (rangeType2 == RangeType.HighLow)
							{
								num95 = inHigh[num91] - inLow[num91];
							}
							else
							{
								double num100;
								if (rangeType2 == RangeType.Shadows)
								{
									double num96 = inClose[num91];
									double num97 = inOpen[num91];
									double num98 = ((!(num96 >= num97)) ? num97 : num96);
									double num99 = ((!(num96 >= num97)) ? num96 : num97);
									num100 = num99 - inLow[num91] + (inHigh[num91] - num98);
								}
								else
								{
									num100 = 0.0;
								}
								num95 = num100;
							}
							num94 = num95;
						}
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num101;
						if (rangeType2 == RangeType.RealBody)
						{
							num101 = Math.Abs(inClose[num92 + num91] - inOpen[num92 + num91]);
						}
						else
						{
							double num102;
							if (rangeType2 == RangeType.HighLow)
							{
								num102 = inHigh[num92 + num91] - inLow[num92 + num91];
							}
							else
							{
								double num107;
								if (rangeType2 == RangeType.Shadows)
								{
									double num103 = inClose[num92 + num91];
									double num104 = inOpen[num92 + num91];
									double num105 = ((!(num103 >= num104)) ? num104 : num103);
									double num106 = ((!(num103 >= num104)) ? num103 : num104);
									num107 = num106 - inLow[num92 + num91] + (inHigh[num92 + num91] - num105);
								}
								else
								{
									num107 = 0.0;
								}
								num102 = num107;
							}
							num101 = num102;
						}
						array2[num90] += num94 - num101;
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num108;
						if (rangeType == RangeType.RealBody)
						{
							num108 = Math.Abs(inClose[num91] - inOpen[num91]);
						}
						else
						{
							double num109;
							if (rangeType == RangeType.HighLow)
							{
								num109 = inHigh[num91] - inLow[num91];
							}
							else
							{
								double num112;
								if (rangeType == RangeType.Shadows)
								{
									double num96 = inClose[num91];
									double num97 = inOpen[num91];
									double num110 = ((!(num96 >= num97)) ? num97 : num96);
									double num111 = ((!(num96 >= num97)) ? num96 : num97);
									num112 = num111 - inLow[num91] + (inHigh[num91] - num110);
								}
								else
								{
									num112 = 0.0;
								}
								num109 = num112;
							}
							num108 = num109;
						}
						rangeType = Globals.candleSettings[7].rangeType;
						double num113;
						if (rangeType == RangeType.RealBody)
						{
							num113 = Math.Abs(inClose[num93 + num91] - inOpen[num93 + num91]);
						}
						else
						{
							double num114;
							if (rangeType == RangeType.HighLow)
							{
								num114 = inHigh[num93 + num91] - inLow[num93 + num91];
							}
							else
							{
								double num119;
								if (rangeType == RangeType.Shadows)
								{
									double num115 = inClose[num93 + num91];
									double num116 = inOpen[num93 + num91];
									double num117 = ((!(num115 >= num116)) ? num116 : num115);
									double num118 = ((!(num115 >= num116)) ? num115 : num116);
									num119 = num118 - inLow[num93 + num91] + (inHigh[num93 + num91] - num117);
								}
								else
								{
									num119 = 0.0;
								}
								num114 = num119;
							}
							num113 = num114;
						}
						array[num90] += num108 - num113;
						num90--;
						num91++;
					}
					while (num90 >= 0);
					num30++;
					num2++;
					num3++;
				}
				while (num30 <= endIdx);
				outNBElement = num31;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlLadderBottomLookback()
	{
		return Globals.candleSettings[7].avgPeriod + 4;
	}

	public static RetCode CdlLadderBottom(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLadderBottomLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					int num16 = num14 - 2 - 1;
					float num17 = inClose[num16];
					float num18 = inOpen[num16];
					RangeType rangeType;
					if (!((double)num17 >= (double)num18))
					{
						float num19 = inClose[num14 - 2];
						float num20 = inOpen[num14 - 2];
						if (!((double)num19 >= (double)num20))
						{
							int num21 = num14 - 2 + 1;
							float num22 = inClose[num21];
							float num23 = inOpen[num21];
							if (!((double)num22 >= (double)num23) && (double)num18 > (double)num20 && (double)num20 > (double)num23 && (double)num17 > (double)num19 && (double)num19 > (double)num22)
							{
								float num24 = inClose[num14];
								float num25 = inOpen[num14];
								if (!((double)num24 >= (double)num25))
								{
									float num26 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
									CandleSetting candleSetting = Globals.candleSettings[7];
									double num27 = candleSetting.avgPeriod;
									double num28;
									if (num27 != 0.0)
									{
										num28 = num2 / num27;
									}
									else
									{
										rangeType = candleSetting.rangeType;
										float num29;
										if (rangeType == RangeType.RealBody)
										{
											num29 = (float)(double)Math.Abs((float)((double)num24 - (double)num25));
										}
										else
										{
											float num30;
											if (rangeType == RangeType.HighLow)
											{
												num30 = (float)((double)inHigh[num14] - (double)inLow[num14]);
											}
											else
											{
												float num33;
												if (rangeType == RangeType.Shadows)
												{
													float num31 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
													float num32 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
													num33 = (float)((double)num32 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num31));
												}
												else
												{
													num33 = 0f;
												}
												num30 = num33;
											}
											num29 = num30;
										}
										num28 = num29;
									}
									CandleSetting candleSetting2 = Globals.candleSettings[7];
									double num34 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									float num35 = inHigh[num14];
									if ((double)num35 - (double)num26 > candleSetting2.factor * num28 / num34)
									{
										float num36 = inClose[num14 + 1];
										float num37 = inOpen[num14 + 1];
										if ((double)num36 >= (double)num37 && (double)num37 > (double)inOpen[num14] && (double)num36 > (double)num35)
										{
											outInteger[num13] = 100;
											num13++;
											goto IL_0344;
										}
									}
								}
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0344;
					IL_0344:
					rangeType = Globals.candleSettings[7].rangeType;
					float num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num42;
							if (rangeType == RangeType.Shadows)
							{
								float num24 = inClose[num14];
								float num25 = inOpen[num14];
								float num40 = ((!((double)num24 >= (double)num25)) ? num25 : num24);
								float num41 = ((!((double)num24 >= (double)num25)) ? num24 : num25);
								num42 = (float)((double)num41 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num40));
							}
							else
							{
								num42 = 0f;
							}
							num39 = num42;
						}
						num38 = num39;
					}
					rangeType = Globals.candleSettings[7].rangeType;
					float num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
					}
					else
					{
						float num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = (float)((double)inHigh[num15] - (double)inLow[num15]);
						}
						else
						{
							float num49;
							if (rangeType == RangeType.Shadows)
							{
								float num45 = inClose[num15];
								float num46 = inOpen[num15];
								float num47 = ((!((double)num45 >= (double)num46)) ? num46 : num45);
								float num48 = ((!((double)num45 >= (double)num46)) ? num45 : num46);
								num49 = (float)((double)num48 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num47));
							}
							else
							{
								num49 = 0f;
							}
							num44 = num49;
						}
						num43 = num44;
					}
					num2 = (double)(num38 - num43) + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlLadderBottom(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLadderBottomLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[7].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					int num16 = num14 - 2 - 1;
					double num17 = inClose[num16];
					double num18 = inOpen[num16];
					RangeType rangeType;
					if (!(num17 >= num18))
					{
						double num19 = inClose[num14 - 2];
						double num20 = inOpen[num14 - 2];
						if (!(num19 >= num20))
						{
							int num21 = num14 - 2 + 1;
							double num22 = inClose[num21];
							double num23 = inOpen[num21];
							if (!(num22 >= num23) && num18 > num20 && num20 > num23 && num17 > num19 && num19 > num22)
							{
								double num24 = inClose[num14];
								double num25 = inOpen[num14];
								if (!(num24 >= num25))
								{
									double num26 = ((!(num24 >= num25)) ? num25 : num24);
									CandleSetting candleSetting = Globals.candleSettings[7];
									double num27 = candleSetting.avgPeriod;
									double num28;
									if (num27 != 0.0)
									{
										num28 = num2 / num27;
									}
									else
									{
										rangeType = candleSetting.rangeType;
										double num29;
										if (rangeType == RangeType.RealBody)
										{
											num29 = Math.Abs(num24 - num25);
										}
										else
										{
											double num30;
											if (rangeType == RangeType.HighLow)
											{
												num30 = inHigh[num14] - inLow[num14];
											}
											else
											{
												double num33;
												if (rangeType == RangeType.Shadows)
												{
													double num31 = ((!(num24 >= num25)) ? num25 : num24);
													double num32 = ((!(num24 >= num25)) ? num24 : num25);
													num33 = num32 - inLow[num14] + (inHigh[num14] - num31);
												}
												else
												{
													num33 = 0.0;
												}
												num30 = num33;
											}
											num29 = num30;
										}
										num28 = num29;
									}
									CandleSetting candleSetting2 = Globals.candleSettings[7];
									double num34 = ((candleSetting2.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									double num35 = inHigh[num14];
									if (num35 - num26 > candleSetting2.factor * num28 / num34)
									{
										double num36 = inClose[num14 + 1];
										double num37 = inOpen[num14 + 1];
										if (num36 >= num37 && num37 > inOpen[num14] && num36 > num35)
										{
											outInteger[num13] = 100;
											num13++;
											goto IL_0308;
										}
									}
								}
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0308;
					IL_0308:
					rangeType = Globals.candleSettings[7].rangeType;
					double num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num42;
							if (rangeType == RangeType.Shadows)
							{
								double num24 = inClose[num14];
								double num25 = inOpen[num14];
								double num40 = ((!(num24 >= num25)) ? num25 : num24);
								double num41 = ((!(num24 >= num25)) ? num24 : num25);
								num42 = num41 - inLow[num14] + (inHigh[num14] - num40);
							}
							else
							{
								num42 = 0.0;
							}
							num39 = num42;
						}
						num38 = num39;
					}
					rangeType = Globals.candleSettings[7].rangeType;
					double num43;
					if (rangeType == RangeType.RealBody)
					{
						num43 = Math.Abs(inClose[num15] - inOpen[num15]);
					}
					else
					{
						double num44;
						if (rangeType == RangeType.HighLow)
						{
							num44 = inHigh[num15] - inLow[num15];
						}
						else
						{
							double num49;
							if (rangeType == RangeType.Shadows)
							{
								double num45 = inClose[num15];
								double num46 = inOpen[num15];
								double num47 = ((!(num45 >= num46)) ? num46 : num45);
								double num48 = ((!(num45 >= num46)) ? num45 : num46);
								num49 = num48 - inLow[num15] + (inHigh[num15] - num47);
							}
							else
							{
								num49 = 0.0;
							}
							num44 = num49;
						}
						num43 = num44;
					}
					num2 = num38 - num43 + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlLongLeggedDojiLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlLongLeggedDoji(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLongLeggedDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					float num9;
					float num10;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									num9 = inClose[num14];
									num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if (!((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) <= candleSettings[3].factor * num22 / num28))
					{
						goto IL_0535;
					}
					num9 = inClose[num14];
					num10 = inOpen[num14];
					float num29 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
					CandleSetting candleSetting2 = candleSettings[4];
					double num30 = candleSetting2.avgPeriod;
					double num31;
					RangeType rangeType2;
					if (num30 != 0.0)
					{
						num31 = num4 / num30;
					}
					else
					{
						rangeType2 = candleSetting2.rangeType;
						float num32;
						if (rangeType2 == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
						}
						else
						{
							float num33;
							if (rangeType2 == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num36;
								if (rangeType2 == RangeType.Shadows)
								{
									float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
								}
								else
								{
									num36 = 0f;
								}
								num33 = num36;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					CandleSetting candleSetting3 = Globals.candleSettings[4];
					rangeType2 = candleSetting3.rangeType;
					double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
					float num38 = inLow[num14];
					if (!((double)num29 - (double)num38 > candleSetting3.factor * num31 / num37))
					{
						num9 = inClose[num14];
						num10 = inOpen[num14];
						float num39 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						num30 = candleSetting3.avgPeriod;
						double num40;
						if (num30 != 0.0)
						{
							num40 = num4 / num30;
						}
						else
						{
							float num41;
							if (rangeType2 == RangeType.RealBody)
							{
								num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num42;
								if (rangeType2 == RangeType.HighLow)
								{
									num42 = (float)((double)inHigh[num14] - (double)num38);
								}
								else
								{
									float num45;
									if (rangeType2 == RangeType.Shadows)
									{
										float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num45 = (float)((double)inHigh[num14] - (double)num43 + ((double)num44 - (double)num38));
									}
									else
									{
										num45 = 0f;
									}
									num42 = num45;
								}
								num41 = num42;
							}
							num40 = num41;
						}
						candleSetting3 = Globals.candleSettings[4];
						double num46 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (!((double)inHigh[num14] - (double)num39 > candleSetting3.factor * num40 / num46))
						{
							goto IL_0535;
						}
					}
					outInteger[num20] = 100;
					num20++;
					goto IL_0541;
					IL_0535:
					outInteger[num20] = 0;
					num20++;
					goto IL_0541;
					IL_0541:
					rangeType = Globals.candleSettings[3].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								num9 = inClose[num14];
								num10 = inOpen[num14];
								float num49 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num50 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num51 = (float)((double)num50 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num3];
								float num55 = inOpen[num3];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								num9 = inClose[num14];
								num10 = inOpen[num14];
								float num61 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num62 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num63 = (float)((double)num62 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5];
								float num67 = inOpen[num5];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = (double)(num59 - num64) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlLongLeggedDoji(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLongLeggedDojiLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					double num9;
					double num10;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									num9 = inClose[num14];
									num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if (!(Math.Abs(inClose[num14] - inOpen[num14]) <= candleSettings[3].factor * num22 / num28))
					{
						goto IL_04dd;
					}
					num9 = inClose[num14];
					num10 = inOpen[num14];
					double num29 = ((!(num9 >= num10)) ? num9 : num10);
					CandleSetting candleSetting2 = candleSettings[4];
					double num30 = candleSetting2.avgPeriod;
					double num31;
					RangeType rangeType2;
					if (num30 != 0.0)
					{
						num31 = num4 / num30;
					}
					else
					{
						rangeType2 = candleSetting2.rangeType;
						double num32;
						if (rangeType2 == RangeType.RealBody)
						{
							num32 = Math.Abs(num9 - num10);
						}
						else
						{
							double num33;
							if (rangeType2 == RangeType.HighLow)
							{
								num33 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num36;
								if (rangeType2 == RangeType.Shadows)
								{
									double num34 = ((!(num9 >= num10)) ? num10 : num9);
									double num35 = ((!(num9 >= num10)) ? num9 : num10);
									num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
								}
								else
								{
									num36 = 0.0;
								}
								num33 = num36;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					CandleSetting candleSetting3 = Globals.candleSettings[4];
					rangeType2 = candleSetting3.rangeType;
					double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
					double num38 = inLow[num14];
					if (!(num29 - num38 > candleSetting3.factor * num31 / num37))
					{
						num9 = inClose[num14];
						num10 = inOpen[num14];
						double num39 = ((!(num9 >= num10)) ? num10 : num9);
						num30 = candleSetting3.avgPeriod;
						double num40;
						if (num30 != 0.0)
						{
							num40 = num4 / num30;
						}
						else
						{
							double num41;
							if (rangeType2 == RangeType.RealBody)
							{
								num41 = Math.Abs(num9 - num10);
							}
							else
							{
								double num42;
								if (rangeType2 == RangeType.HighLow)
								{
									num42 = inHigh[num14] - num38;
								}
								else
								{
									double num45;
									if (rangeType2 == RangeType.Shadows)
									{
										double num43 = ((!(num9 >= num10)) ? num10 : num9);
										double num44 = ((!(num9 >= num10)) ? num9 : num10);
										num45 = inHigh[num14] - num43 + (num44 - num38);
									}
									else
									{
										num45 = 0.0;
									}
									num42 = num45;
								}
								num41 = num42;
							}
							num40 = num41;
						}
						candleSetting3 = Globals.candleSettings[4];
						double num46 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						if (!(inHigh[num14] - num39 > candleSetting3.factor * num40 / num46))
						{
							goto IL_04dd;
						}
					}
					outInteger[num20] = 100;
					num20++;
					goto IL_04e9;
					IL_04dd:
					outInteger[num20] = 0;
					num20++;
					goto IL_04e9;
					IL_04e9:
					rangeType = Globals.candleSettings[3].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num51;
							if (rangeType == RangeType.Shadows)
							{
								num9 = inClose[num14];
								num10 = inOpen[num14];
								double num49 = ((!(num9 >= num10)) ? num10 : num9);
								double num50 = ((!(num9 >= num10)) ? num9 : num10);
								num51 = num50 - inLow[num14] + (inHigh[num14] - num49);
							}
							else
							{
								num51 = 0.0;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num58;
							if (rangeType == RangeType.Shadows)
							{
								double num54 = inClose[num3];
								double num55 = inOpen[num3];
								double num56 = ((!(num54 >= num55)) ? num55 : num54);
								double num57 = ((!(num54 >= num55)) ? num54 : num55);
								num58 = num57 - inLow[num3] + (inHigh[num3] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = num47 - num52 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num63;
							if (rangeType2 == RangeType.Shadows)
							{
								num9 = inClose[num14];
								num10 = inOpen[num14];
								double num61 = ((!(num9 >= num10)) ? num10 : num9);
								double num62 = ((!(num9 >= num10)) ? num9 : num10);
								num63 = num62 - inLow[num14] + (inHigh[num14] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType2 == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = num59 - num64 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlLongLineLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[0].avgPeriod;
		int avgPeriod2 = candleSettings[6].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlLongLine(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLongLineLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[6].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[6].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > candleSettings[0].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[6];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[6];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inHigh[num14];
						if ((double)num38 - (double)num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)num38 - (double)inLow[num14]);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)num44 - (double)inLow[num14] + ((double)num38 - (double)num43));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[6];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num39 - (double)inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_0559;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0559;
					IL_0559:
					rangeType = Globals.candleSettings[0].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num52;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num50 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num51 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num52 = (float)((double)num51 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num50));
							}
							else
							{
								num52 = 0f;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num59;
							if (rangeType == RangeType.Shadows)
							{
								float num55 = inClose[num3];
								float num56 = inOpen[num3];
								float num57 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
								float num58 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num59 = (float)((double)num58 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = (double)(num48 - num53) + num2;
					rangeType2 = Globals.candleSettings[6].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num64;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num62 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num63 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num64 = (float)((double)num63 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[6].rangeType;
					float num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType2 == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = (double)(num60 - num65) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlLongLine(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlLongLineLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[6].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[6].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) > candleSettings[0].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[6];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[6];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inHigh[num14];
						if (num38 - num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = num38 - inLow[num14];
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = num44 - inLow[num14] + (num38 - num43);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[6];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num39 - inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_04ff;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04ff;
					IL_04ff:
					rangeType = Globals.candleSettings[0].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num52;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num50 = ((!(num9 >= num10)) ? num10 : num9);
								double num51 = ((!(num9 >= num10)) ? num9 : num10);
								num52 = num51 - inLow[num14] + (inHigh[num14] - num50);
							}
							else
							{
								num52 = 0.0;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num59;
							if (rangeType == RangeType.Shadows)
							{
								double num55 = inClose[num3];
								double num56 = inOpen[num3];
								double num57 = ((!(num55 >= num56)) ? num56 : num55);
								double num58 = ((!(num55 >= num56)) ? num55 : num56);
								num59 = num58 - inLow[num3] + (inHigh[num3] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = num48 - num53 + num2;
					rangeType2 = Globals.candleSettings[6].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num64;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num62 = ((!(num9 >= num10)) ? num10 : num9);
								double num63 = ((!(num9 >= num10)) ? num9 : num10);
								num64 = num63 - inLow[num14] + (inHigh[num14] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[6].rangeType;
					double num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType2 == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = num60 - num65 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlMarubozuLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[0].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlMarubozu(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMarubozuLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) > candleSettings[0].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inHigh[num14];
						if ((double)num38 - (double)num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)num38 - (double)inLow[num14]);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)num44 - (double)inLow[num14] + ((double)num38 - (double)num43));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num39 - (double)inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_0559;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0559;
					IL_0559:
					rangeType = Globals.candleSettings[0].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num52;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num50 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num51 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num52 = (float)((double)num51 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num50));
							}
							else
							{
								num52 = 0f;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num59;
							if (rangeType == RangeType.Shadows)
							{
								float num55 = inClose[num3];
								float num56 = inOpen[num3];
								float num57 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
								float num58 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num59 = (float)((double)num58 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = (double)(num48 - num53) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num64;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num62 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num63 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num64 = (float)((double)num63 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType2 == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = (double)(num60 - num65) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlMarubozu(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMarubozuLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) > candleSettings[0].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[7];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[7];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inHigh[num14];
						if (num38 - num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = num38 - inLow[num14];
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = num44 - inLow[num14] + (num38 - num43);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[7];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num39 - inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_04ff;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04ff;
					IL_04ff:
					rangeType = Globals.candleSettings[0].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num52;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num50 = ((!(num9 >= num10)) ? num10 : num9);
								double num51 = ((!(num9 >= num10)) ? num9 : num10);
								num52 = num51 - inLow[num14] + (inHigh[num14] - num50);
							}
							else
							{
								num52 = 0.0;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num59;
							if (rangeType == RangeType.Shadows)
							{
								double num55 = inClose[num3];
								double num56 = inOpen[num3];
								double num57 = ((!(num55 >= num56)) ? num56 : num55);
								double num58 = ((!(num55 >= num56)) ? num55 : num56);
								num59 = num58 - inLow[num3] + (inHigh[num3] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = num48 - num53 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num64;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num62 = ((!(num9 >= num10)) ? num10 : num9);
								double num63 = ((!(num9 >= num10)) ? num9 : num10);
								num64 = num63 - inLow[num14] + (inHigh[num14] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType2 == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = num60 - num65 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlMatchingLowLookback()
	{
		return Globals.candleSettings[10].avgPeriod + 1;
	}

	public static RetCode CdlMatchingLow(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMatchingLowLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[10].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					float num16 = inClose[num14];
					float num17 = inOpen[num14];
					RangeType rangeType;
					if (!((double)num16 >= (double)num17) && !((double)inClose[num14 + 1] >= (double)inOpen[num14 + 1]))
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = (float)(double)Math.Abs((float)((double)num16 - (double)num17));
							}
							else
							{
								float num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num24;
									if (rangeType == RangeType.Shadows)
									{
										float num22 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
										float num23 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
										num24 = (float)((double)num23 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num22));
									}
									else
									{
										num24 = 0f;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						candleSetting = Globals.candleSettings[10];
						rangeType = candleSetting.rangeType;
						double num25 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						num16 = inClose[num14];
						if ((double)inClose[num14 + 1] <= candleSetting.factor * num19 / num25 + (double)num16)
						{
							num18 = candleSetting.avgPeriod;
							double num26;
							if (num18 != 0.0)
							{
								num26 = num2 / num18;
							}
							else
							{
								float num27;
								if (rangeType == RangeType.RealBody)
								{
									num27 = (float)(double)Math.Abs((float)((double)num16 - (double)inOpen[num14]));
								}
								else
								{
									float num28;
									if (rangeType == RangeType.HighLow)
									{
										num28 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num31;
										if (rangeType == RangeType.Shadows)
										{
											num17 = inOpen[num14];
											float num29 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
											float num30 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
											num31 = (float)((double)num30 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num29));
										}
										else
										{
											num31 = 0f;
										}
										num28 = num31;
									}
									num27 = num28;
								}
								num26 = num27;
							}
							candleSetting = Globals.candleSettings[10];
							double num32 = ((candleSetting.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inClose[num14 + 1] >= (double)inClose[num14] - candleSetting.factor * num26 / num32)
							{
								outInteger[num13] = 100;
								num13++;
								goto IL_0395;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0395;
					IL_0395:
					rangeType = Globals.candleSettings[10].rangeType;
					float num33;
					if (rangeType == RangeType.RealBody)
					{
						num33 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num34;
						if (rangeType == RangeType.HighLow)
						{
							num34 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num37;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								float num35 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
								float num36 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
								num37 = (float)((double)num36 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num35));
							}
							else
							{
								num37 = 0f;
							}
							num34 = num37;
						}
						num33 = num34;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
					}
					else
					{
						float num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = (float)((double)inHigh[num15] - (double)inLow[num15]);
						}
						else
						{
							float num44;
							if (rangeType == RangeType.Shadows)
							{
								float num40 = inClose[num15];
								float num41 = inOpen[num15];
								float num42 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
								float num43 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
								num44 = (float)((double)num43 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num42));
							}
							else
							{
								num44 = 0f;
							}
							num39 = num44;
						}
						num38 = num39;
					}
					num2 = (double)(num33 - num38) + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlMatchingLow(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMatchingLowLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[10].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 1;
				int num15 = num3 - 1;
				do
				{
					double num16 = inClose[num14];
					double num17 = inOpen[num14];
					RangeType rangeType;
					if (!(num16 >= num17) && !(inClose[num14 + 1] >= inOpen[num14 + 1]))
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = Math.Abs(num16 - num17);
							}
							else
							{
								double num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num24;
									if (rangeType == RangeType.Shadows)
									{
										double num22 = ((!(num16 >= num17)) ? num17 : num16);
										double num23 = ((!(num16 >= num17)) ? num16 : num17);
										num24 = num23 - inLow[num14] + (inHigh[num14] - num22);
									}
									else
									{
										num24 = 0.0;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						candleSetting = Globals.candleSettings[10];
						rangeType = candleSetting.rangeType;
						double num25 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						num16 = inClose[num14];
						if (inClose[num14 + 1] <= candleSetting.factor * num19 / num25 + num16)
						{
							num18 = candleSetting.avgPeriod;
							double num26;
							if (num18 != 0.0)
							{
								num26 = num2 / num18;
							}
							else
							{
								double num27;
								if (rangeType == RangeType.RealBody)
								{
									num27 = Math.Abs(num16 - inOpen[num14]);
								}
								else
								{
									double num28;
									if (rangeType == RangeType.HighLow)
									{
										num28 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num31;
										if (rangeType == RangeType.Shadows)
										{
											num17 = inOpen[num14];
											double num29 = ((!(num16 >= num17)) ? num17 : num16);
											double num30 = ((!(num16 >= num17)) ? num16 : num17);
											num31 = num30 - inLow[num14] + (inHigh[num14] - num29);
										}
										else
										{
											num31 = 0.0;
										}
										num28 = num31;
									}
									num27 = num28;
								}
								num26 = num27;
							}
							candleSetting = Globals.candleSettings[10];
							double num32 = ((candleSetting.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inClose[num14 + 1] >= inClose[num14] - candleSetting.factor * num26 / num32)
							{
								outInteger[num13] = 100;
								num13++;
								goto IL_035a;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_035a;
					IL_035a:
					rangeType = Globals.candleSettings[10].rangeType;
					double num33;
					if (rangeType == RangeType.RealBody)
					{
						num33 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num34;
						if (rangeType == RangeType.HighLow)
						{
							num34 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num37;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								double num35 = ((!(num16 >= num17)) ? num17 : num16);
								double num36 = ((!(num16 >= num17)) ? num16 : num17);
								num37 = num36 - inLow[num14] + (inHigh[num14] - num35);
							}
							else
							{
								num37 = 0.0;
							}
							num34 = num37;
						}
						num33 = num34;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = Math.Abs(inClose[num15] - inOpen[num15]);
					}
					else
					{
						double num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = inHigh[num15] - inLow[num15];
						}
						else
						{
							double num44;
							if (rangeType == RangeType.Shadows)
							{
								double num40 = inClose[num15];
								double num41 = inOpen[num15];
								double num42 = ((!(num40 >= num41)) ? num41 : num40);
								double num43 = ((!(num40 >= num41)) ? num40 : num41);
								num44 = num43 - inLow[num15] + (inHigh[num15] - num42);
							}
							else
							{
								num44 = 0.0;
							}
							num39 = num44;
						}
						num38 = num39;
					}
					num2 = num33 - num38 + num2;
					num14++;
					num15++;
				}
				while (num14 + 1 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlMatHoldLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[2].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 4;
		}
		return -1;
	}

	public static RetCode CdlMatHold(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[5];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.5;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMatHoldLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[4] = 0.0;
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[2].avgPeriod;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 2;
					int num5 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4 - 1];
									float num9 = inOpen[num4 - 1];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						array[3] += num6;
						rangeType = Globals.candleSettings[2].rangeType;
						float num13;
						if (rangeType == RangeType.RealBody)
						{
							num13 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num14;
							if (rangeType == RangeType.HighLow)
							{
								num14 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num19;
								if (rangeType == RangeType.Shadows)
								{
									float num15 = inClose[num4];
									float num16 = inOpen[num4];
									float num17 = ((!((double)num15 >= (double)num16)) ? num16 : num15);
									float num18 = ((!((double)num15 >= (double)num16)) ? num15 : num16);
									num19 = (float)((double)num18 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num14 = num19;
							}
							num13 = num14;
						}
						array[2] += num13;
						rangeType = Globals.candleSettings[2].rangeType;
						float num20;
						if (rangeType == RangeType.RealBody)
						{
							num20 = (float)(double)Math.Abs((float)((double)inClose[num4 + 1] - (double)inOpen[num4 + 1]));
						}
						else
						{
							float num21;
							if (rangeType == RangeType.HighLow)
							{
								num21 = (float)((double)inHigh[num4 + 1] - (double)inLow[num4 + 1]);
							}
							else
							{
								float num26;
								if (rangeType == RangeType.Shadows)
								{
									float num22 = inClose[num4 + 1];
									float num23 = inOpen[num4 + 1];
									float num24 = ((!((double)num22 >= (double)num23)) ? num23 : num22);
									float num25 = ((!((double)num22 >= (double)num23)) ? num22 : num23);
									num26 = (float)((double)num25 - (double)inLow[num4 + 1] + ((double)inHigh[num4 + 1] - (double)num24));
								}
								else
								{
									num26 = 0f;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						array[1] += num20;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				if (num3 < startIdx)
				{
					int num27 = num3 - 4;
					int num28 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num29;
						if (rangeType2 == RangeType.RealBody)
						{
							num29 = (float)(double)Math.Abs((float)((double)inClose[num27] - (double)inOpen[num27]));
						}
						else
						{
							float num30;
							if (rangeType2 == RangeType.HighLow)
							{
								num30 = (float)((double)inHigh[num27] - (double)inLow[num27]);
							}
							else
							{
								float num35;
								if (rangeType2 == RangeType.Shadows)
								{
									float num31 = inClose[num27];
									float num32 = inOpen[num27];
									float num33 = ((!((double)num31 >= (double)num32)) ? num32 : num31);
									float num34 = ((!((double)num31 >= (double)num32)) ? num31 : num32);
									num35 = (float)((double)num34 - (double)inLow[num27] + ((double)inHigh[num27] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num30 = num35;
							}
							num29 = num30;
						}
						array[4] += num29;
						num27++;
						num28--;
					}
					while (num28 != 0);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType2;
					if (num38 != 0.0)
					{
						num39 = array[4] / num38;
					}
					else
					{
						rangeType2 = candleSetting.rangeType;
						float num40;
						if (rangeType2 == RangeType.RealBody)
						{
							num40 = (float)(double)Math.Abs((float)((double)inClose[num36 - 4] - (double)inOpen[num36 - 4]));
						}
						else
						{
							float num41;
							if (rangeType2 == RangeType.HighLow)
							{
								num41 = (float)((double)inHigh[num36 - 4] - (double)inLow[num36 - 4]);
							}
							else
							{
								float num46;
								if (rangeType2 == RangeType.Shadows)
								{
									float num42 = inClose[num36 - 4];
									float num43 = inOpen[num36 - 4];
									float num44 = ((!((double)num42 >= (double)num43)) ? num43 : num42);
									float num45 = ((!((double)num42 >= (double)num43)) ? num42 : num43);
									num46 = (float)((double)num45 - (double)inLow[num36 - 4] + ((double)inHigh[num36 - 4] - (double)num44));
								}
								else
								{
									num46 = 0f;
								}
								num41 = num46;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num47 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if ((double)Math.Abs((float)((double)inClose[num36 - 4] - (double)inOpen[num36 - 4])) > candleSettings[0].factor * num39 / num47)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num48 = candleSetting2.avgPeriod;
						double num49;
						if (num48 != 0.0)
						{
							num49 = array[3] / num48;
						}
						else
						{
							RangeType rangeType = candleSetting2.rangeType;
							float num50;
							if (rangeType == RangeType.RealBody)
							{
								num50 = (float)(double)Math.Abs((float)((double)inClose[num36 - 3] - (double)inOpen[num36 - 3]));
							}
							else
							{
								float num51;
								if (rangeType == RangeType.HighLow)
								{
									num51 = (float)((double)inHigh[num36 - 3] - (double)inLow[num36 - 3]);
								}
								else
								{
									float num56;
									if (rangeType == RangeType.Shadows)
									{
										float num52 = inClose[num36 - 3];
										float num53 = inOpen[num36 - 3];
										float num54 = ((!((double)num52 >= (double)num53)) ? num53 : num52);
										float num55 = ((!((double)num52 >= (double)num53)) ? num52 : num53);
										num56 = (float)((double)num55 - (double)inLow[num36 - 3] + ((double)inHigh[num36 - 3] - (double)num54));
									}
									else
									{
										num56 = 0f;
									}
									num51 = num56;
								}
								num50 = num51;
							}
							num49 = num50;
						}
						double num57 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if ((double)Math.Abs((float)((double)inClose[num36 - 3] - (double)inOpen[num36 - 3])) < candleSetting3.factor * num49 / num57)
						{
							num48 = candleSetting3.avgPeriod;
							double num58;
							if (num48 != 0.0)
							{
								num58 = array[2] / num48;
							}
							else
							{
								RangeType rangeType = candleSetting3.rangeType;
								float num59;
								if (rangeType == RangeType.RealBody)
								{
									num59 = (float)(double)Math.Abs((float)((double)inClose[num36 - 2] - (double)inOpen[num36 - 2]));
								}
								else
								{
									float num60;
									if (rangeType == RangeType.HighLow)
									{
										num60 = (float)((double)inHigh[num36 - 2] - (double)inLow[num36 - 2]);
									}
									else
									{
										float num65;
										if (rangeType == RangeType.Shadows)
										{
											float num61 = inClose[num36 - 2];
											float num62 = inOpen[num36 - 2];
											float num63 = ((!((double)num61 >= (double)num62)) ? num62 : num61);
											float num64 = ((!((double)num61 >= (double)num62)) ? num61 : num62);
											num65 = (float)((double)num64 - (double)inLow[num36 - 2] + ((double)inHigh[num36 - 2] - (double)num63));
										}
										else
										{
											num65 = 0f;
										}
										num60 = num65;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							double num66 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							CandleSetting candleSetting4 = Globals.candleSettings[2];
							if ((double)Math.Abs((float)((double)inClose[num36 - 2] - (double)inOpen[num36 - 2])) < candleSetting4.factor * num58 / num66)
							{
								num48 = candleSetting4.avgPeriod;
								double num67;
								if (num48 != 0.0)
								{
									num67 = array[1] / num48;
								}
								else
								{
									RangeType rangeType = candleSetting4.rangeType;
									float num68;
									if (rangeType == RangeType.RealBody)
									{
										num68 = (float)(double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1]));
									}
									else
									{
										float num69;
										if (rangeType == RangeType.HighLow)
										{
											num69 = (float)((double)inHigh[num36 - 1] - (double)inLow[num36 - 1]);
										}
										else
										{
											float num74;
											if (rangeType == RangeType.Shadows)
											{
												float num70 = inClose[num36 - 1];
												float num71 = inOpen[num36 - 1];
												float num72 = ((!((double)num70 >= (double)num71)) ? num71 : num70);
												float num73 = ((!((double)num70 >= (double)num71)) ? num70 : num71);
												num74 = (float)((double)num73 - (double)inLow[num36 - 1] + ((double)inHigh[num36 - 1] - (double)num72));
											}
											else
											{
												num74 = 0f;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								double num75 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num36 - 1] - (double)inOpen[num36 - 1])) < Globals.candleSettings[2].factor * num67 / num75)
								{
									float num42 = inClose[num36 - 4];
									float num43 = inOpen[num36 - 4];
									if ((double)num42 >= (double)num43)
									{
										float num52 = inClose[num36 - 3];
										float num53 = inOpen[num36 - 3];
										if (!((double)num52 >= (double)num53) && (double)inClose[num36] >= (double)inOpen[num36])
										{
											float num76 = ((!((double)num53 < (double)num52)) ? num52 : num53);
											float num77 = ((!((double)num43 > (double)num42)) ? num42 : num43);
											if ((double)num76 > (double)num77)
											{
												float num62 = inOpen[num36 - 2];
												float num61 = inClose[num36 - 2];
												float num78 = ((!((double)num62 < (double)num61)) ? num61 : num62);
												if ((double)num78 < (double)num42)
												{
													float num71 = inOpen[num36 - 1];
													float num70 = inClose[num36 - 1];
													float num79 = ((!((double)num71 < (double)num70)) ? num70 : num71);
													if ((double)num79 < (double)num42)
													{
														float num80 = ((!((double)num62 < (double)num61)) ? num61 : num62);
														double num81 = num42;
														double num82 = num80;
														double num83 = num81;
														if (num82 > num83 - (double)Math.Abs((float)(num83 - (double)num43)) * optInPenetration)
														{
															num71 = inOpen[num36 - 1];
															num70 = inClose[num36 - 1];
															float num84 = ((!((double)num71 < (double)num70)) ? num70 : num71);
															num81 = inClose[num36 - 4];
															double num85 = num84;
															double num86 = num81;
															if (num85 > num86 - (double)Math.Abs((float)(num86 - (double)inOpen[num36 - 4])) * optInPenetration)
															{
																num61 = inClose[num36 - 2];
																num62 = inOpen[num36 - 2];
																float num87 = ((!((double)num61 > (double)num62)) ? num62 : num61);
																if ((double)num87 < (double)inOpen[num36 - 3])
																{
																	num70 = inClose[num36 - 1];
																	num71 = inOpen[num36 - 1];
																	float num88 = ((!((double)num70 > (double)num71)) ? num71 : num70);
																	float num89 = ((!((double)num61 > (double)num62)) ? num62 : num61);
																	if ((double)num88 < (double)num89 && (double)inOpen[num36] > (double)num70)
																	{
																		float num90 = inHigh[num36 - 3];
																		float num91 = inHigh[num36 - 2];
																		float num92 = ((!((double)num90 > (double)num91)) ? num91 : num90);
																		float num93 = inHigh[num36 - 1];
																		float num95;
																		if ((double)num92 > (double)num93)
																		{
																			float num94 = ((!((double)num90 > (double)num91)) ? num91 : num90);
																			num95 = num94;
																		}
																		else
																		{
																			num95 = num93;
																		}
																		if ((double)inClose[num36] > (double)num95)
																		{
																			outInteger[num37] = 100;
																			num37++;
																			goto IL_0b13;
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_0b13;
					IL_0b13:
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num96;
					if (rangeType2 == RangeType.RealBody)
					{
						num96 = (float)(double)Math.Abs((float)((double)inClose[num36 - 4] - (double)inOpen[num36 - 4]));
					}
					else
					{
						float num97;
						if (rangeType2 == RangeType.HighLow)
						{
							num97 = (float)((double)inHigh[num36 - 4] - (double)inLow[num36 - 4]);
						}
						else
						{
							float num100;
							if (rangeType2 == RangeType.Shadows)
							{
								float num42 = inClose[num36 - 4];
								float num43 = inOpen[num36 - 4];
								float num98 = ((!((double)num42 >= (double)num43)) ? num43 : num42);
								float num99 = ((!((double)num42 >= (double)num43)) ? num42 : num43);
								num100 = (float)((double)num99 - (double)inLow[num36 - 4] + ((double)inHigh[num36 - 4] - (double)num98));
							}
							else
							{
								num100 = 0f;
							}
							num97 = num100;
						}
						num96 = num97;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num101;
					if (rangeType2 == RangeType.RealBody)
					{
						num101 = (float)(double)Math.Abs((float)((double)inClose[num3 - 4] - (double)inOpen[num3 - 4]));
					}
					else
					{
						float num102;
						if (rangeType2 == RangeType.HighLow)
						{
							num102 = (float)((double)inHigh[num3 - 4] - (double)inLow[num3 - 4]);
						}
						else
						{
							float num107;
							if (rangeType2 == RangeType.Shadows)
							{
								float num103 = inClose[num3 - 4];
								float num104 = inOpen[num3 - 4];
								float num105 = ((!((double)num103 >= (double)num104)) ? num104 : num103);
								float num106 = ((!((double)num103 >= (double)num104)) ? num103 : num104);
								num107 = (float)((double)num106 - (double)inLow[num3 - 4] + ((double)inHigh[num3 - 4] - (double)num105));
							}
							else
							{
								num107 = 0f;
							}
							num102 = num107;
						}
						num101 = num102;
					}
					array[4] += num96 - num101;
					int num108 = 3;
					int num109 = num2 - 3;
					int num110 = num36 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num111;
						if (rangeType == RangeType.RealBody)
						{
							num111 = (float)(double)Math.Abs((float)((double)inClose[num109 + num110] - (double)inOpen[num109 + num110]));
						}
						else
						{
							float num112;
							if (rangeType == RangeType.HighLow)
							{
								num112 = (float)((double)inHigh[num109 + num110] - (double)inLow[num109 + num110]);
							}
							else
							{
								float num117;
								if (rangeType == RangeType.Shadows)
								{
									float num113 = inClose[num109 + num110];
									float num114 = inOpen[num109 + num110];
									float num115 = ((!((double)num113 >= (double)num114)) ? num114 : num113);
									float num116 = ((!((double)num113 >= (double)num114)) ? num113 : num114);
									num117 = (float)((double)num116 - (double)inLow[num109 + num110] + ((double)inHigh[num109 + num110] - (double)num115));
								}
								else
								{
									num117 = 0f;
								}
								num112 = num117;
							}
							num111 = num112;
						}
						rangeType = Globals.candleSettings[2].rangeType;
						float num118;
						if (rangeType == RangeType.RealBody)
						{
							num118 = (float)(double)Math.Abs((float)((double)inClose[num109] - (double)inOpen[num109]));
						}
						else
						{
							float num119;
							if (rangeType == RangeType.HighLow)
							{
								num119 = (float)((double)inHigh[num109] - (double)inLow[num109]);
							}
							else
							{
								float num124;
								if (rangeType == RangeType.Shadows)
								{
									float num120 = inClose[num109];
									float num121 = inOpen[num109];
									float num122 = ((!((double)num120 >= (double)num121)) ? num121 : num120);
									float num123 = ((!((double)num120 >= (double)num121)) ? num120 : num121);
									num124 = (float)((double)num123 - (double)inLow[num109] + ((double)inHigh[num109] - (double)num122));
								}
								else
								{
									num124 = 0f;
								}
								num119 = num124;
							}
							num118 = num119;
						}
						array[num108] += num111 - num118;
						num108--;
						num109++;
					}
					while (num108 >= 1);
					num36++;
					num2++;
					num3++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlMatHold(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[5];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.5;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMatHoldLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[4] = 0.0;
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[2].avgPeriod;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 2;
					int num5 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4 - 1] - inLow[num4 - 1];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4 - 1];
									double num9 = inOpen[num4 - 1];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4 - 1] + (inHigh[num4 - 1] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						array[3] += num6;
						rangeType = Globals.candleSettings[2].rangeType;
						double num13;
						if (rangeType == RangeType.RealBody)
						{
							num13 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num14;
							if (rangeType == RangeType.HighLow)
							{
								num14 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num19;
								if (rangeType == RangeType.Shadows)
								{
									double num15 = inClose[num4];
									double num16 = inOpen[num4];
									double num17 = ((!(num15 >= num16)) ? num16 : num15);
									double num18 = ((!(num15 >= num16)) ? num15 : num16);
									num19 = num18 - inLow[num4] + (inHigh[num4] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num14 = num19;
							}
							num13 = num14;
						}
						array[2] += num13;
						rangeType = Globals.candleSettings[2].rangeType;
						double num20;
						if (rangeType == RangeType.RealBody)
						{
							num20 = Math.Abs(inClose[num4 + 1] - inOpen[num4 + 1]);
						}
						else
						{
							double num21;
							if (rangeType == RangeType.HighLow)
							{
								num21 = inHigh[num4 + 1] - inLow[num4 + 1];
							}
							else
							{
								double num26;
								if (rangeType == RangeType.Shadows)
								{
									double num22 = inClose[num4 + 1];
									double num23 = inOpen[num4 + 1];
									double num24 = ((!(num22 >= num23)) ? num23 : num22);
									double num25 = ((!(num22 >= num23)) ? num22 : num23);
									num26 = num25 - inLow[num4 + 1] + (inHigh[num4 + 1] - num24);
								}
								else
								{
									num26 = 0.0;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						array[1] += num20;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				if (num3 < startIdx)
				{
					int num27 = num3 - 4;
					int num28 = startIdx - num3;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num29;
						if (rangeType2 == RangeType.RealBody)
						{
							num29 = Math.Abs(inClose[num27] - inOpen[num27]);
						}
						else
						{
							double num30;
							if (rangeType2 == RangeType.HighLow)
							{
								num30 = inHigh[num27] - inLow[num27];
							}
							else
							{
								double num35;
								if (rangeType2 == RangeType.Shadows)
								{
									double num31 = inClose[num27];
									double num32 = inOpen[num27];
									double num33 = ((!(num31 >= num32)) ? num32 : num31);
									double num34 = ((!(num31 >= num32)) ? num31 : num32);
									num35 = num34 - inLow[num27] + (inHigh[num27] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num30 = num35;
							}
							num29 = num30;
						}
						array[4] += num29;
						num27++;
						num28--;
					}
					while (num28 != 0);
				}
				int num36 = startIdx;
				int num37 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num38 = candleSetting.avgPeriod;
					double num39;
					RangeType rangeType2;
					if (num38 != 0.0)
					{
						num39 = array[4] / num38;
					}
					else
					{
						rangeType2 = candleSetting.rangeType;
						double num40;
						if (rangeType2 == RangeType.RealBody)
						{
							num40 = Math.Abs(inClose[num36 - 4] - inOpen[num36 - 4]);
						}
						else
						{
							double num41;
							if (rangeType2 == RangeType.HighLow)
							{
								num41 = inHigh[num36 - 4] - inLow[num36 - 4];
							}
							else
							{
								double num46;
								if (rangeType2 == RangeType.Shadows)
								{
									double num42 = inClose[num36 - 4];
									double num43 = inOpen[num36 - 4];
									double num44 = ((!(num42 >= num43)) ? num43 : num42);
									double num45 = ((!(num42 >= num43)) ? num42 : num43);
									num46 = num45 - inLow[num36 - 4] + (inHigh[num36 - 4] - num44);
								}
								else
								{
									num46 = 0.0;
								}
								num41 = num46;
							}
							num40 = num41;
						}
						num39 = num40;
					}
					double num47 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if (Math.Abs(inClose[num36 - 4] - inOpen[num36 - 4]) > candleSettings[0].factor * num39 / num47)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num48 = candleSetting2.avgPeriod;
						double num49;
						if (num48 != 0.0)
						{
							num49 = array[3] / num48;
						}
						else
						{
							RangeType rangeType = candleSetting2.rangeType;
							double num50;
							if (rangeType == RangeType.RealBody)
							{
								num50 = Math.Abs(inClose[num36 - 3] - inOpen[num36 - 3]);
							}
							else
							{
								double num51;
								if (rangeType == RangeType.HighLow)
								{
									num51 = inHigh[num36 - 3] - inLow[num36 - 3];
								}
								else
								{
									double num56;
									if (rangeType == RangeType.Shadows)
									{
										double num52 = inClose[num36 - 3];
										double num53 = inOpen[num36 - 3];
										double num54 = ((!(num52 >= num53)) ? num53 : num52);
										double num55 = ((!(num52 >= num53)) ? num52 : num53);
										num56 = num55 - inLow[num36 - 3] + (inHigh[num36 - 3] - num54);
									}
									else
									{
										num56 = 0.0;
									}
									num51 = num56;
								}
								num50 = num51;
							}
							num49 = num50;
						}
						double num57 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if (Math.Abs(inClose[num36 - 3] - inOpen[num36 - 3]) < candleSetting3.factor * num49 / num57)
						{
							num48 = candleSetting3.avgPeriod;
							double num58;
							if (num48 != 0.0)
							{
								num58 = array[2] / num48;
							}
							else
							{
								RangeType rangeType = candleSetting3.rangeType;
								double num59;
								if (rangeType == RangeType.RealBody)
								{
									num59 = Math.Abs(inClose[num36 - 2] - inOpen[num36 - 2]);
								}
								else
								{
									double num60;
									if (rangeType == RangeType.HighLow)
									{
										num60 = inHigh[num36 - 2] - inLow[num36 - 2];
									}
									else
									{
										double num65;
										if (rangeType == RangeType.Shadows)
										{
											double num61 = inClose[num36 - 2];
											double num62 = inOpen[num36 - 2];
											double num63 = ((!(num61 >= num62)) ? num62 : num61);
											double num64 = ((!(num61 >= num62)) ? num61 : num62);
											num65 = num64 - inLow[num36 - 2] + (inHigh[num36 - 2] - num63);
										}
										else
										{
											num65 = 0.0;
										}
										num60 = num65;
									}
									num59 = num60;
								}
								num58 = num59;
							}
							double num66 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							CandleSetting candleSetting4 = Globals.candleSettings[2];
							if (Math.Abs(inClose[num36 - 2] - inOpen[num36 - 2]) < candleSetting4.factor * num58 / num66)
							{
								num48 = candleSetting4.avgPeriod;
								double num67;
								if (num48 != 0.0)
								{
									num67 = array[1] / num48;
								}
								else
								{
									RangeType rangeType = candleSetting4.rangeType;
									double num68;
									if (rangeType == RangeType.RealBody)
									{
										num68 = Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]);
									}
									else
									{
										double num69;
										if (rangeType == RangeType.HighLow)
										{
											num69 = inHigh[num36 - 1] - inLow[num36 - 1];
										}
										else
										{
											double num74;
											if (rangeType == RangeType.Shadows)
											{
												double num70 = inClose[num36 - 1];
												double num71 = inOpen[num36 - 1];
												double num72 = ((!(num70 >= num71)) ? num71 : num70);
												double num73 = ((!(num70 >= num71)) ? num70 : num71);
												num74 = num73 - inLow[num36 - 1] + (inHigh[num36 - 1] - num72);
											}
											else
											{
												num74 = 0.0;
											}
											num69 = num74;
										}
										num68 = num69;
									}
									num67 = num68;
								}
								double num75 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num36 - 1] - inOpen[num36 - 1]) < Globals.candleSettings[2].factor * num67 / num75)
								{
									double num42 = inClose[num36 - 4];
									double num43 = inOpen[num36 - 4];
									if (num42 >= num43)
									{
										double num52 = inClose[num36 - 3];
										double num53 = inOpen[num36 - 3];
										if (!(num52 >= num53) && inClose[num36] >= inOpen[num36])
										{
											double num76 = ((!(num53 < num52)) ? num52 : num53);
											double num77 = ((!(num43 > num42)) ? num42 : num43);
											if (num76 > num77)
											{
												double num62 = inOpen[num36 - 2];
												double num61 = inClose[num36 - 2];
												double num78 = ((!(num62 < num61)) ? num61 : num62);
												if (num78 < num42)
												{
													double num71 = inOpen[num36 - 1];
													double num70 = inClose[num36 - 1];
													double num79 = ((!(num71 < num70)) ? num70 : num71);
													if (num79 < num42)
													{
														double num80 = ((!(num62 < num61)) ? num61 : num62);
														double num81 = Math.Abs(num42 - num43) * optInPenetration;
														num42 = inClose[num36 - 4];
														if (num80 > num42 - num81)
														{
															num71 = inOpen[num36 - 1];
															num70 = inClose[num36 - 1];
															double num82 = ((!(num71 < num70)) ? num70 : num71);
															if (num82 > inClose[num36 - 4] - Math.Abs(num42 - inOpen[num36 - 4]) * optInPenetration)
															{
																num61 = inClose[num36 - 2];
																num62 = inOpen[num36 - 2];
																double num83 = ((!(num61 > num62)) ? num62 : num61);
																if (num83 < inOpen[num36 - 3])
																{
																	num70 = inClose[num36 - 1];
																	num71 = inOpen[num36 - 1];
																	double num84 = ((!(num70 > num71)) ? num71 : num70);
																	double num85 = ((!(num61 > num62)) ? num62 : num61);
																	if (num84 < num85 && inOpen[num36] > num70)
																	{
																		double num86 = inHigh[num36 - 3];
																		double num87 = inHigh[num36 - 2];
																		double num88 = ((!(num86 > num87)) ? num87 : num86);
																		double num89 = inHigh[num36 - 1];
																		double num91;
																		if (num88 > num89)
																		{
																			double num90 = ((!(num86 > num87)) ? num87 : num86);
																			num91 = num90;
																		}
																		else
																		{
																			num91 = num89;
																		}
																		if (inClose[num36] > num91)
																		{
																			outInteger[num37] = 100;
																			num37++;
																			goto IL_0a4e;
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num37] = 0;
					num37++;
					goto IL_0a4e;
					IL_0a4e:
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num92;
					if (rangeType2 == RangeType.RealBody)
					{
						num92 = Math.Abs(inClose[num36 - 4] - inOpen[num36 - 4]);
					}
					else
					{
						double num93;
						if (rangeType2 == RangeType.HighLow)
						{
							num93 = inHigh[num36 - 4] - inLow[num36 - 4];
						}
						else
						{
							double num96;
							if (rangeType2 == RangeType.Shadows)
							{
								double num42 = inClose[num36 - 4];
								double num43 = inOpen[num36 - 4];
								double num94 = ((!(num42 >= num43)) ? num43 : num42);
								double num95 = ((!(num42 >= num43)) ? num42 : num43);
								num96 = num95 - inLow[num36 - 4] + (inHigh[num36 - 4] - num94);
							}
							else
							{
								num96 = 0.0;
							}
							num93 = num96;
						}
						num92 = num93;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num97;
					if (rangeType2 == RangeType.RealBody)
					{
						num97 = Math.Abs(inClose[num3 - 4] - inOpen[num3 - 4]);
					}
					else
					{
						double num98;
						if (rangeType2 == RangeType.HighLow)
						{
							num98 = inHigh[num3 - 4] - inLow[num3 - 4];
						}
						else
						{
							double num103;
							if (rangeType2 == RangeType.Shadows)
							{
								double num99 = inClose[num3 - 4];
								double num100 = inOpen[num3 - 4];
								double num101 = ((!(num99 >= num100)) ? num100 : num99);
								double num102 = ((!(num99 >= num100)) ? num99 : num100);
								num103 = num102 - inLow[num3 - 4] + (inHigh[num3 - 4] - num101);
							}
							else
							{
								num103 = 0.0;
							}
							num98 = num103;
						}
						num97 = num98;
					}
					array[4] += num92 - num97;
					int num104 = 3;
					int num105 = num2 - 3;
					int num106 = num36 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num107;
						if (rangeType == RangeType.RealBody)
						{
							num107 = Math.Abs(inClose[num105 + num106] - inOpen[num105 + num106]);
						}
						else
						{
							double num108;
							if (rangeType == RangeType.HighLow)
							{
								num108 = inHigh[num105 + num106] - inLow[num105 + num106];
							}
							else
							{
								double num113;
								if (rangeType == RangeType.Shadows)
								{
									double num109 = inClose[num105 + num106];
									double num110 = inOpen[num105 + num106];
									double num111 = ((!(num109 >= num110)) ? num110 : num109);
									double num112 = ((!(num109 >= num110)) ? num109 : num110);
									num113 = num112 - inLow[num105 + num106] + (inHigh[num105 + num106] - num111);
								}
								else
								{
									num113 = 0.0;
								}
								num108 = num113;
							}
							num107 = num108;
						}
						rangeType = Globals.candleSettings[2].rangeType;
						double num114;
						if (rangeType == RangeType.RealBody)
						{
							num114 = Math.Abs(inClose[num105] - inOpen[num105]);
						}
						else
						{
							double num115;
							if (rangeType == RangeType.HighLow)
							{
								num115 = inHigh[num105] - inLow[num105];
							}
							else
							{
								double num120;
								if (rangeType == RangeType.Shadows)
								{
									double num116 = inClose[num105];
									double num117 = inOpen[num105];
									double num118 = ((!(num116 >= num117)) ? num117 : num116);
									double num119 = ((!(num116 >= num117)) ? num116 : num117);
									num120 = num119 - inLow[num105] + (inHigh[num105] - num118);
								}
								else
								{
									num120 = 0.0;
								}
								num115 = num120;
							}
							num114 = num115;
						}
						array[num104] += num107 - num114;
						num104--;
						num105++;
					}
					while (num104 >= 1);
					num36++;
					num2++;
					num3++;
				}
				while (num36 <= endIdx);
				outNBElement = num37;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlMorningDojiStarLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[3].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
			int avgPeriod3 = candleSettings[2].avgPeriod;
			int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
			return num2 + 2;
		}
		return -1;
	}

	public static RetCode CdlMorningDojiStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMorningDojiStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = (double)num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = (double)num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
						}
						else
						{
							float num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
							}
							else
							{
								float num38;
								if (rangeType == RangeType.Shadows)
								{
									float num34 = inClose[num28 - 2];
									float num35 = inOpen[num28 - 2];
									float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
									float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
									num38 = (float)((double)num37 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num36));
								}
								else
								{
									num38 = 0f;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) > candleSettings[0].factor * num31 / num39 && !((double)inClose[num28 - 2] >= (double)inOpen[num28 - 2]))
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
							}
							else
							{
								float num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
								}
								else
								{
									float num48;
									if (rangeType2 == RangeType.Shadows)
									{
										float num44 = inClose[num28 - 1];
										float num45 = inOpen[num28 - 1];
										float num46 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num47 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num48 = (float)((double)num47 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num46));
									}
									else
									{
										num48 = 0f;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1])) <= candleSettings[3].factor * num41 / num49)
						{
							float num45 = inOpen[num28 - 1];
							float num44 = inClose[num28 - 1];
							float num50 = ((!((double)num45 > (double)num44)) ? num44 : num45);
							float num35 = inOpen[num28 - 2];
							float num34 = inClose[num28 - 2];
							float num51 = ((!((double)num35 < (double)num34)) ? num34 : num35);
							if ((double)num50 < (double)num51)
							{
								CandleSetting candleSetting3 = candleSettings[2];
								double num52 = candleSetting3.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType3 = candleSetting3.rangeType;
									float num54;
									if (rangeType3 == RangeType.RealBody)
									{
										num54 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
									}
									else
									{
										float num55;
										if (rangeType3 == RangeType.HighLow)
										{
											num55 = (float)((double)inHigh[num28] - (double)inLow[num28]);
										}
										else
										{
											float num58;
											if (rangeType3 == RangeType.Shadows)
											{
												float num11 = inClose[num28];
												float num12 = inOpen[num28];
												float num56 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
												float num57 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
												num58 = (float)((double)num57 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num56));
											}
											else
											{
												num58 = 0f;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28])) > Globals.candleSettings[2].factor * num53 / num59)
								{
									float num11 = inClose[num28];
									if ((double)num11 >= (double)inOpen[num28] && (double)num11 > (double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) * optInPenetration + (double)inClose[num28 - 2])
									{
										outInteger[num29] = 100;
										num29++;
										goto IL_0755;
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0755;
					IL_0755:
					rangeType = Globals.candleSettings[0].rangeType;
					float num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
					}
					else
					{
						float num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
						}
						else
						{
							float num64;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								float num62 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num63 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num64 = (float)((double)num63 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = (double)(num60 - num65) + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
					}
					else
					{
						float num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
						}
						else
						{
							float num76;
							if (rangeType2 == RangeType.Shadows)
							{
								float num44 = inClose[num28 - 1];
								float num45 = inOpen[num28 - 1];
								float num74 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
								float num75 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
								num76 = (float)((double)num75 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num74));
							}
							else
							{
								num76 = 0f;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					float num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num83;
							if (rangeType2 == RangeType.Shadows)
							{
								float num79 = inClose[num6];
								float num80 = inOpen[num6];
								float num81 = ((!((double)num79 >= (double)num80)) ? num80 : num79);
								float num82 = ((!((double)num79 >= (double)num80)) ? num79 : num80);
								num83 = (float)((double)num82 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num81));
							}
							else
							{
								num83 = 0f;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num3 = (double)(num72 - num77) + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
					}
					else
					{
						float num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = (float)((double)inHigh[num28] - (double)inLow[num28]);
						}
						else
						{
							float num88;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num28];
								float num12 = inOpen[num28];
								float num86 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num87 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num88 = (float)((double)num87 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					float num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num95;
							if (rangeType3 == RangeType.Shadows)
							{
								float num91 = inClose[num7];
								float num92 = inOpen[num7];
								float num93 = ((!((double)num91 >= (double)num92)) ? num92 : num91);
								float num94 = ((!((double)num91 >= (double)num92)) ? num91 : num92);
								num95 = (float)((double)num94 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num93));
							}
							else
							{
								num95 = 0f;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num4 = (double)(num84 - num89) + num4;
					num28++;
					num5++;
					num6++;
					num7++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlMorningDojiStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMorningDojiStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[3].avgPeriod - 1;
				int num7 = startIdx - candleSettings[2].avgPeriod;
				int num8 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx - 2);
				}
				int num16 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[3].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num3 = num17 + num3;
						num16++;
					}
					while (num16 < startIdx - 1);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[2].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num4 = num23 + num4;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
						}
						else
						{
							double num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = inHigh[num28 - 2] - inLow[num28 - 2];
							}
							else
							{
								double num38;
								if (rangeType == RangeType.Shadows)
								{
									double num34 = inClose[num28 - 2];
									double num35 = inOpen[num28 - 2];
									double num36 = ((!(num34 >= num35)) ? num35 : num34);
									double num37 = ((!(num34 >= num35)) ? num34 : num35);
									num38 = num37 - inLow[num28 - 2] + (inHigh[num28 - 2] - num36);
								}
								else
								{
									num38 = 0.0;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) > candleSettings[0].factor * num31 / num39 && !(inClose[num28 - 2] >= inOpen[num28 - 2]))
					{
						CandleSetting candleSetting2 = candleSettings[3];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
							}
							else
							{
								double num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = inHigh[num28 - 1] - inLow[num28 - 1];
								}
								else
								{
									double num48;
									if (rangeType2 == RangeType.Shadows)
									{
										double num44 = inClose[num28 - 1];
										double num45 = inOpen[num28 - 1];
										double num46 = ((!(num44 >= num45)) ? num45 : num44);
										double num47 = ((!(num44 >= num45)) ? num44 : num45);
										num48 = num47 - inLow[num28 - 1] + (inHigh[num28 - 1] - num46);
									}
									else
									{
										num48 = 0.0;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]) <= candleSettings[3].factor * num41 / num49)
						{
							double num45 = inOpen[num28 - 1];
							double num44 = inClose[num28 - 1];
							double num50 = ((!(num45 > num44)) ? num44 : num45);
							double num35 = inOpen[num28 - 2];
							double num34 = inClose[num28 - 2];
							double num51 = ((!(num35 < num34)) ? num34 : num35);
							if (num50 < num51)
							{
								CandleSetting candleSetting3 = candleSettings[2];
								double num52 = candleSetting3.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType3 = candleSetting3.rangeType;
									double num54;
									if (rangeType3 == RangeType.RealBody)
									{
										num54 = Math.Abs(inClose[num28] - inOpen[num28]);
									}
									else
									{
										double num55;
										if (rangeType3 == RangeType.HighLow)
										{
											num55 = inHigh[num28] - inLow[num28];
										}
										else
										{
											double num58;
											if (rangeType3 == RangeType.Shadows)
											{
												double num11 = inClose[num28];
												double num12 = inOpen[num28];
												double num56 = ((!(num11 >= num12)) ? num12 : num11);
												double num57 = ((!(num11 >= num12)) ? num11 : num12);
												num58 = num57 - inLow[num28] + (inHigh[num28] - num56);
											}
											else
											{
												num58 = 0.0;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num28] - inOpen[num28]) > Globals.candleSettings[2].factor * num53 / num59 && inClose[num28] >= inOpen[num28] && inClose[num28] > Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) * optInPenetration + inClose[num28 - 2])
								{
									outInteger[num29] = 100;
									num29++;
									goto IL_06e3;
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_06e3;
					IL_06e3:
					rangeType = Globals.candleSettings[0].rangeType;
					double num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
					}
					else
					{
						double num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = inHigh[num28 - 2] - inLow[num28 - 2];
						}
						else
						{
							double num64;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								double num62 = ((!(num34 >= num35)) ? num35 : num34);
								double num63 = ((!(num34 >= num35)) ? num34 : num35);
								num64 = num63 - inLow[num28 - 2] + (inHigh[num28 - 2] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = num60 - num65 + num2;
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
					}
					else
					{
						double num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = inHigh[num28 - 1] - inLow[num28 - 1];
						}
						else
						{
							double num76;
							if (rangeType2 == RangeType.Shadows)
							{
								double num44 = inClose[num28 - 1];
								double num45 = inOpen[num28 - 1];
								double num74 = ((!(num44 >= num45)) ? num45 : num44);
								double num75 = ((!(num44 >= num45)) ? num44 : num45);
								num76 = num75 - inLow[num28 - 1] + (inHigh[num28 - 1] - num74);
							}
							else
							{
								num76 = 0.0;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[3].rangeType;
					double num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num83;
							if (rangeType2 == RangeType.Shadows)
							{
								double num79 = inClose[num6];
								double num80 = inOpen[num6];
								double num81 = ((!(num79 >= num80)) ? num80 : num79);
								double num82 = ((!(num79 >= num80)) ? num79 : num80);
								num83 = num82 - inLow[num6] + (inHigh[num6] - num81);
							}
							else
							{
								num83 = 0.0;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num3 = num72 - num77 + num3;
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = Math.Abs(inClose[num28] - inOpen[num28]);
					}
					else
					{
						double num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = inHigh[num28] - inLow[num28];
						}
						else
						{
							double num88;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num28];
								double num12 = inOpen[num28];
								double num86 = ((!(num11 >= num12)) ? num12 : num11);
								double num87 = ((!(num11 >= num12)) ? num11 : num12);
								num88 = num87 - inLow[num28] + (inHigh[num28] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[2].rangeType;
					double num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num95;
							if (rangeType3 == RangeType.Shadows)
							{
								double num91 = inClose[num7];
								double num92 = inOpen[num7];
								double num93 = ((!(num91 >= num92)) ? num92 : num91);
								double num94 = ((!(num91 >= num92)) ? num91 : num92);
								num95 = num94 - inLow[num7] + (inHigh[num7] - num93);
							}
							else
							{
								num95 = 0.0;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num4 = num84 - num89 + num4;
					num28++;
					num5++;
					num6++;
					num7++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlMorningStarLookback(double optInPenetration)
	{
		if (optInPenetration == -4E+37 || (!(optInPenetration < 0.0) && !(optInPenetration > 3E+37)))
		{
			CandleSetting[] candleSettings = Globals.candleSettings;
			int avgPeriod = candleSettings[2].avgPeriod;
			int avgPeriod2 = candleSettings[0].avgPeriod;
			return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
		}
		return -1;
	}

	public static RetCode CdlMorningStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMorningStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[2].avgPeriod - 1;
				int num7 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num7] - (double)inLow[num7]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num7];
									float num11 = inOpen[num7];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num7++;
					}
					while (num7 < startIdx - 2);
				}
				int num15 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num20;
								if (rangeType2 == RangeType.Shadows)
								{
									float num10 = inClose[num15];
									float num11 = inOpen[num15];
									float num18 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num19 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num20 = (float)((double)num19 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num18));
								}
								else
								{
									num20 = 0f;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num3 = (double)num16 + num3;
						rangeType2 = Globals.candleSettings[2].rangeType;
						float num21;
						if (rangeType2 == RangeType.RealBody)
						{
							num21 = (float)(double)Math.Abs((float)((double)inClose[num15 + 1] - (double)inOpen[num15 + 1]));
						}
						else
						{
							float num22;
							if (rangeType2 == RangeType.HighLow)
							{
								num22 = (float)((double)inHigh[num15 + 1] - (double)inLow[num15 + 1]);
							}
							else
							{
								float num27;
								if (rangeType2 == RangeType.Shadows)
								{
									float num23 = inClose[num15 + 1];
									float num24 = inOpen[num15 + 1];
									float num25 = ((!((double)num23 >= (double)num24)) ? num24 : num23);
									float num26 = ((!((double)num23 >= (double)num24)) ? num23 : num24);
									num27 = (float)((double)num26 - (double)inLow[num15 + 1] + ((double)inHigh[num15 + 1] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num22 = num27;
							}
							num21 = num22;
						}
						num4 = (double)num21 + num4;
						num15++;
					}
					while (num15 < startIdx - 1);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
						}
						else
						{
							float num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
							}
							else
							{
								float num38;
								if (rangeType == RangeType.Shadows)
								{
									float num34 = inClose[num28 - 2];
									float num35 = inOpen[num28 - 2];
									float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
									float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
									num38 = (float)((double)num37 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num36));
								}
								else
								{
									num38 = 0f;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) > candleSettings[0].factor * num31 / num39 && !((double)inClose[num28 - 2] >= (double)inOpen[num28 - 2]))
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
							}
							else
							{
								float num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
								}
								else
								{
									float num48;
									if (rangeType2 == RangeType.Shadows)
									{
										float num44 = inClose[num28 - 1];
										float num45 = inOpen[num28 - 1];
										float num46 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
										float num47 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
										num48 = (float)((double)num47 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num46));
									}
									else
									{
										num48 = 0f;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if ((double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1])) <= candleSetting3.factor * num41 / num49)
						{
							float num45 = inOpen[num28 - 1];
							float num44 = inClose[num28 - 1];
							float num50 = ((!((double)num45 > (double)num44)) ? num44 : num45);
							float num35 = inOpen[num28 - 2];
							float num34 = inClose[num28 - 2];
							float num51 = ((!((double)num35 < (double)num34)) ? num34 : num35);
							if ((double)num50 < (double)num51)
							{
								num40 = candleSetting3.avgPeriod;
								double num52;
								if (num40 != 0.0)
								{
									num52 = num4 / num40;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									float num53;
									if (rangeType2 == RangeType.RealBody)
									{
										num53 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
									}
									else
									{
										float num54;
										if (rangeType2 == RangeType.HighLow)
										{
											num54 = (float)((double)inHigh[num28] - (double)inLow[num28]);
										}
										else
										{
											float num57;
											if (rangeType2 == RangeType.Shadows)
											{
												float num10 = inClose[num28];
												float num11 = inOpen[num28];
												float num55 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
												float num56 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
												num57 = (float)((double)num56 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num55));
											}
											else
											{
												num57 = 0f;
											}
											num54 = num57;
										}
										num53 = num54;
									}
									num52 = num53;
								}
								double num58 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28])) > Globals.candleSettings[2].factor * num52 / num58)
								{
									float num10 = inClose[num28];
									if ((double)num10 >= (double)inOpen[num28] && (double)num10 > (double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2])) * optInPenetration + (double)inClose[num28 - 2])
									{
										outInteger[num29] = 100;
										num29++;
										goto IL_0745;
									}
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_0745;
					IL_0745:
					rangeType = Globals.candleSettings[0].rangeType;
					float num59;
					if (rangeType == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num28 - 2] - (double)inOpen[num28 - 2]));
					}
					else
					{
						float num60;
						if (rangeType == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num28 - 2] - (double)inLow[num28 - 2]);
						}
						else
						{
							float num63;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num28 - 2];
								float num35 = inOpen[num28 - 2];
								float num61 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num62 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num63 = (float)((double)num62 - (double)inLow[num28 - 2] + ((double)inHigh[num28 - 2] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num64;
					if (rangeType == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num65;
						if (rangeType == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num70;
							if (rangeType == RangeType.Shadows)
							{
								float num66 = inClose[num5];
								float num67 = inOpen[num5];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num2 = (double)(num59 - num64) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num71;
					if (rangeType2 == RangeType.RealBody)
					{
						num71 = (float)(double)Math.Abs((float)((double)inClose[num28 - 1] - (double)inOpen[num28 - 1]));
					}
					else
					{
						float num72;
						if (rangeType2 == RangeType.HighLow)
						{
							num72 = (float)((double)inHigh[num28 - 1] - (double)inLow[num28 - 1]);
						}
						else
						{
							float num75;
							if (rangeType2 == RangeType.Shadows)
							{
								float num44 = inClose[num28 - 1];
								float num45 = inOpen[num28 - 1];
								float num73 = ((!((double)num44 >= (double)num45)) ? num45 : num44);
								float num74 = ((!((double)num44 >= (double)num45)) ? num44 : num45);
								num75 = (float)((double)num74 - (double)inLow[num28 - 1] + ((double)inHigh[num28 - 1] - (double)num73));
							}
							else
							{
								num75 = 0f;
							}
							num72 = num75;
						}
						num71 = num72;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num76;
					if (rangeType2 == RangeType.RealBody)
					{
						num76 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
					}
					else
					{
						float num77;
						if (rangeType2 == RangeType.HighLow)
						{
							num77 = (float)((double)inHigh[num6] - (double)inLow[num6]);
						}
						else
						{
							float num82;
							if (rangeType2 == RangeType.Shadows)
							{
								float num78 = inClose[num6];
								float num79 = inOpen[num6];
								float num80 = ((!((double)num78 >= (double)num79)) ? num79 : num78);
								float num81 = ((!((double)num78 >= (double)num79)) ? num78 : num79);
								num82 = (float)((double)num81 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num80));
							}
							else
							{
								num82 = 0f;
							}
							num77 = num82;
						}
						num76 = num77;
					}
					num3 = (double)(num71 - num76) + num3;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num83;
					if (rangeType2 == RangeType.RealBody)
					{
						num83 = (float)(double)Math.Abs((float)((double)inClose[num28] - (double)inOpen[num28]));
					}
					else
					{
						float num84;
						if (rangeType2 == RangeType.HighLow)
						{
							num84 = (float)((double)inHigh[num28] - (double)inLow[num28]);
						}
						else
						{
							float num87;
							if (rangeType2 == RangeType.Shadows)
							{
								float num10 = inClose[num28];
								float num11 = inOpen[num28];
								float num85 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
								float num86 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
								num87 = (float)((double)num86 - (double)inLow[num28] + ((double)inHigh[num28] - (double)num85));
							}
							else
							{
								num87 = 0f;
							}
							num84 = num87;
						}
						num83 = num84;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = (float)(double)Math.Abs((float)((double)inClose[num6 + 1] - (double)inOpen[num6 + 1]));
					}
					else
					{
						float num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = (float)((double)inHigh[num6 + 1] - (double)inLow[num6 + 1]);
						}
						else
						{
							float num94;
							if (rangeType2 == RangeType.Shadows)
							{
								float num90 = inClose[num6 + 1];
								float num91 = inOpen[num6 + 1];
								float num92 = ((!((double)num90 >= (double)num91)) ? num91 : num90);
								float num93 = ((!((double)num90 >= (double)num91)) ? num90 : num91);
								num94 = (float)((double)num93 - (double)inLow[num6 + 1] + ((double)inHigh[num6 + 1] - (double)num92));
							}
							else
							{
								num94 = 0f;
							}
							num89 = num94;
						}
						num88 = num89;
					}
					num4 = (double)(num83 - num88) + num4;
					num28++;
					num5++;
					num6++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlMorningStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, double optInPenetration, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (optInPenetration == -4E+37)
				{
					optInPenetration = 0.3;
				}
				else if (optInPenetration < 0.0 || optInPenetration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlMorningStarLookback(optInPenetration);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num5 = startIdx - candleSettings[0].avgPeriod - 2;
				int num6 = startIdx - candleSettings[2].avgPeriod - 1;
				int num7 = num5;
				if (num5 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num7] - inOpen[num7]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num7] - inLow[num7];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num7];
									double num11 = inOpen[num7];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num7] + (inHigh[num7] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num7++;
					}
					while (num7 < startIdx - 2);
				}
				int num15 = num6;
				if (num6 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num16;
						if (rangeType2 == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num17;
							if (rangeType2 == RangeType.HighLow)
							{
								num17 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num20;
								if (rangeType2 == RangeType.Shadows)
								{
									double num10 = inClose[num15];
									double num11 = inOpen[num15];
									double num18 = ((!(num10 >= num11)) ? num11 : num10);
									double num19 = ((!(num10 >= num11)) ? num10 : num11);
									num20 = num19 - inLow[num15] + (inHigh[num15] - num18);
								}
								else
								{
									num20 = 0.0;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num3 = num16 + num3;
						rangeType2 = Globals.candleSettings[2].rangeType;
						double num21;
						if (rangeType2 == RangeType.RealBody)
						{
							num21 = Math.Abs(inClose[num15 + 1] - inOpen[num15 + 1]);
						}
						else
						{
							double num22;
							if (rangeType2 == RangeType.HighLow)
							{
								num22 = inHigh[num15 + 1] - inLow[num15 + 1];
							}
							else
							{
								double num27;
								if (rangeType2 == RangeType.Shadows)
								{
									double num23 = inClose[num15 + 1];
									double num24 = inOpen[num15 + 1];
									double num25 = ((!(num23 >= num24)) ? num24 : num23);
									double num26 = ((!(num23 >= num24)) ? num23 : num24);
									num27 = num26 - inLow[num15 + 1] + (inHigh[num15 + 1] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num22 = num27;
							}
							num21 = num22;
						}
						num4 = num21 + num4;
						num15++;
					}
					while (num15 < startIdx - 1);
				}
				int num28 = startIdx;
				int num29 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num30 = candleSetting.avgPeriod;
					double num31;
					RangeType rangeType;
					if (num30 != 0.0)
					{
						num31 = num2 / num30;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num32;
						if (rangeType == RangeType.RealBody)
						{
							num32 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
						}
						else
						{
							double num33;
							if (rangeType == RangeType.HighLow)
							{
								num33 = inHigh[num28 - 2] - inLow[num28 - 2];
							}
							else
							{
								double num38;
								if (rangeType == RangeType.Shadows)
								{
									double num34 = inClose[num28 - 2];
									double num35 = inOpen[num28 - 2];
									double num36 = ((!(num34 >= num35)) ? num35 : num34);
									double num37 = ((!(num34 >= num35)) ? num34 : num35);
									num38 = num37 - inLow[num28 - 2] + (inHigh[num28 - 2] - num36);
								}
								else
								{
									num38 = 0.0;
								}
								num33 = num38;
							}
							num32 = num33;
						}
						num31 = num32;
					}
					double num39 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) > candleSettings[0].factor * num31 / num39 && !(inClose[num28 - 2] >= inOpen[num28 - 2]))
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num40 = candleSetting2.avgPeriod;
						double num41;
						if (num40 != 0.0)
						{
							num41 = num3 / num40;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num42;
							if (rangeType2 == RangeType.RealBody)
							{
								num42 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
							}
							else
							{
								double num43;
								if (rangeType2 == RangeType.HighLow)
								{
									num43 = inHigh[num28 - 1] - inLow[num28 - 1];
								}
								else
								{
									double num48;
									if (rangeType2 == RangeType.Shadows)
									{
										double num44 = inClose[num28 - 1];
										double num45 = inOpen[num28 - 1];
										double num46 = ((!(num44 >= num45)) ? num45 : num44);
										double num47 = ((!(num44 >= num45)) ? num44 : num45);
										num48 = num47 - inLow[num28 - 1] + (inHigh[num28 - 1] - num46);
									}
									else
									{
										num48 = 0.0;
									}
									num43 = num48;
								}
								num42 = num43;
							}
							num41 = num42;
						}
						double num49 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if (Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]) <= candleSetting3.factor * num41 / num49)
						{
							double num45 = inOpen[num28 - 1];
							double num44 = inClose[num28 - 1];
							double num50 = ((!(num45 > num44)) ? num44 : num45);
							double num35 = inOpen[num28 - 2];
							double num34 = inClose[num28 - 2];
							double num51 = ((!(num35 < num34)) ? num34 : num35);
							if (num50 < num51)
							{
								num40 = candleSetting3.avgPeriod;
								double num52;
								if (num40 != 0.0)
								{
									num52 = num4 / num40;
								}
								else
								{
									rangeType2 = candleSetting3.rangeType;
									double num53;
									if (rangeType2 == RangeType.RealBody)
									{
										num53 = Math.Abs(inClose[num28] - inOpen[num28]);
									}
									else
									{
										double num54;
										if (rangeType2 == RangeType.HighLow)
										{
											num54 = inHigh[num28] - inLow[num28];
										}
										else
										{
											double num57;
											if (rangeType2 == RangeType.Shadows)
											{
												double num10 = inClose[num28];
												double num11 = inOpen[num28];
												double num55 = ((!(num10 >= num11)) ? num11 : num10);
												double num56 = ((!(num10 >= num11)) ? num10 : num11);
												num57 = num56 - inLow[num28] + (inHigh[num28] - num55);
											}
											else
											{
												num57 = 0.0;
											}
											num54 = num57;
										}
										num53 = num54;
									}
									num52 = num53;
								}
								double num58 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num28] - inOpen[num28]) > Globals.candleSettings[2].factor * num52 / num58 && inClose[num28] >= inOpen[num28] && inClose[num28] > Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]) * optInPenetration + inClose[num28 - 2])
								{
									outInteger[num29] = 100;
									num29++;
									goto IL_06d6;
								}
							}
						}
					}
					outInteger[num29] = 0;
					num29++;
					goto IL_06d6;
					IL_06d6:
					rangeType = Globals.candleSettings[0].rangeType;
					double num59;
					if (rangeType == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num28 - 2] - inOpen[num28 - 2]);
					}
					else
					{
						double num60;
						if (rangeType == RangeType.HighLow)
						{
							num60 = inHigh[num28 - 2] - inLow[num28 - 2];
						}
						else
						{
							double num63;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num28 - 2];
								double num35 = inOpen[num28 - 2];
								double num61 = ((!(num34 >= num35)) ? num35 : num34);
								double num62 = ((!(num34 >= num35)) ? num34 : num35);
								num63 = num62 - inLow[num28 - 2] + (inHigh[num28 - 2] - num61);
							}
							else
							{
								num63 = 0.0;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num64;
					if (rangeType == RangeType.RealBody)
					{
						num64 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num65;
						if (rangeType == RangeType.HighLow)
						{
							num65 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num70;
							if (rangeType == RangeType.Shadows)
							{
								double num66 = inClose[num5];
								double num67 = inOpen[num5];
								double num68 = ((!(num66 >= num67)) ? num67 : num66);
								double num69 = ((!(num66 >= num67)) ? num66 : num67);
								num70 = num69 - inLow[num5] + (inHigh[num5] - num68);
							}
							else
							{
								num70 = 0.0;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num2 = num59 - num64 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num71;
					if (rangeType2 == RangeType.RealBody)
					{
						num71 = Math.Abs(inClose[num28 - 1] - inOpen[num28 - 1]);
					}
					else
					{
						double num72;
						if (rangeType2 == RangeType.HighLow)
						{
							num72 = inHigh[num28 - 1] - inLow[num28 - 1];
						}
						else
						{
							double num75;
							if (rangeType2 == RangeType.Shadows)
							{
								double num44 = inClose[num28 - 1];
								double num45 = inOpen[num28 - 1];
								double num73 = ((!(num44 >= num45)) ? num45 : num44);
								double num74 = ((!(num44 >= num45)) ? num44 : num45);
								num75 = num74 - inLow[num28 - 1] + (inHigh[num28 - 1] - num73);
							}
							else
							{
								num75 = 0.0;
							}
							num72 = num75;
						}
						num71 = num72;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num76;
					if (rangeType2 == RangeType.RealBody)
					{
						num76 = Math.Abs(inClose[num6] - inOpen[num6]);
					}
					else
					{
						double num77;
						if (rangeType2 == RangeType.HighLow)
						{
							num77 = inHigh[num6] - inLow[num6];
						}
						else
						{
							double num82;
							if (rangeType2 == RangeType.Shadows)
							{
								double num78 = inClose[num6];
								double num79 = inOpen[num6];
								double num80 = ((!(num78 >= num79)) ? num79 : num78);
								double num81 = ((!(num78 >= num79)) ? num78 : num79);
								num82 = num81 - inLow[num6] + (inHigh[num6] - num80);
							}
							else
							{
								num82 = 0.0;
							}
							num77 = num82;
						}
						num76 = num77;
					}
					num3 = num71 - num76 + num3;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num83;
					if (rangeType2 == RangeType.RealBody)
					{
						num83 = Math.Abs(inClose[num28] - inOpen[num28]);
					}
					else
					{
						double num84;
						if (rangeType2 == RangeType.HighLow)
						{
							num84 = inHigh[num28] - inLow[num28];
						}
						else
						{
							double num87;
							if (rangeType2 == RangeType.Shadows)
							{
								double num10 = inClose[num28];
								double num11 = inOpen[num28];
								double num85 = ((!(num10 >= num11)) ? num11 : num10);
								double num86 = ((!(num10 >= num11)) ? num10 : num11);
								num87 = num86 - inLow[num28] + (inHigh[num28] - num85);
							}
							else
							{
								num87 = 0.0;
							}
							num84 = num87;
						}
						num83 = num84;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num88;
					if (rangeType2 == RangeType.RealBody)
					{
						num88 = Math.Abs(inClose[num6 + 1] - inOpen[num6 + 1]);
					}
					else
					{
						double num89;
						if (rangeType2 == RangeType.HighLow)
						{
							num89 = inHigh[num6 + 1] - inLow[num6 + 1];
						}
						else
						{
							double num94;
							if (rangeType2 == RangeType.Shadows)
							{
								double num90 = inClose[num6 + 1];
								double num91 = inOpen[num6 + 1];
								double num92 = ((!(num90 >= num91)) ? num91 : num90);
								double num93 = ((!(num90 >= num91)) ? num90 : num91);
								num94 = num93 - inLow[num6 + 1] + (inHigh[num6 + 1] - num92);
							}
							else
							{
								num94 = 0.0;
							}
							num89 = num94;
						}
						num88 = num89;
					}
					num4 = num83 - num88 + num4;
					num28++;
					num5++;
					num6++;
				}
				while (num28 <= endIdx);
				outNBElement = num29;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlOnNeckLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[10].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlOnNeck(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlOnNeckLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num6];
									float num11 = inOpen[num6];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num19 = inClose[num15];
									float num20 = inOpen[num15];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					float num26 = inClose[num24 - 1];
					float num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!((double)num26 >= (double)num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							float num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = (float)(double)Math.Abs((float)((double)num26 - (double)num27));
							}
							else
							{
								float num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
								}
								else
								{
									float num34;
									if (rangeType2 == RangeType.Shadows)
									{
										float num32 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
										float num33 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
										num34 = (float)((double)num33 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num32));
									}
									else
									{
										num34 = 0f;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1])) > candleSettings[0].factor * num29 / num35)
						{
							float num36 = inOpen[num24];
							if ((double)inClose[num24] >= (double)num36)
							{
								float num37 = inLow[num24 - 1];
								if ((double)num36 < (double)num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										float num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
										}
										else
										{
											float num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = (float)((double)inHigh[num24 - 1] - (double)num37);
											}
											else
											{
												float num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													float num42 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
													float num43 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
													num44 = (float)((double)inHigh[num24 - 1] - (double)num42 + ((double)num43 - (double)num37));
												}
												else
												{
													num44 = 0f;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									rangeType = candleSetting3.rangeType;
									double num45 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num37 = inLow[num24 - 1];
									if ((double)inClose[num24] <= candleSetting3.factor * num39 / num45 + (double)num37)
									{
										num38 = candleSetting3.avgPeriod;
										double num46;
										if (num38 != 0.0)
										{
											num46 = num2 / num38;
										}
										else
										{
											float num47;
											if (rangeType == RangeType.RealBody)
											{
												num47 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
											}
											else
											{
												float num48;
												if (rangeType == RangeType.HighLow)
												{
													num48 = (float)((double)inHigh[num24 - 1] - (double)num37);
												}
												else
												{
													float num51;
													if (rangeType == RangeType.Shadows)
													{
														num26 = inClose[num24 - 1];
														num27 = inOpen[num24 - 1];
														float num49 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
														float num50 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
														num51 = (float)((double)inHigh[num24 - 1] - (double)num49 + ((double)num50 - (double)num37));
													}
													else
													{
														num51 = 0f;
													}
													num48 = num51;
												}
												num47 = num48;
											}
											num46 = num47;
										}
										CandleSetting candleSetting4 = Globals.candleSettings[10];
										double num52 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inClose[num24] >= (double)inLow[num24 - 1] - candleSetting4.factor * num46 / num52)
										{
											outInteger[num25] = -100;
											num25++;
											goto IL_05cf;
										}
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_05cf;
					IL_05cf:
					rangeType = Globals.candleSettings[10].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num57;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num55 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num56 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num57 = (float)((double)num56 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num55));
							}
							else
							{
								num57 = 0f;
							}
							num54 = num57;
						}
						num53 = num54;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num58;
					if (rangeType == RangeType.RealBody)
					{
						num58 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
					}
					else
					{
						float num59;
						if (rangeType == RangeType.HighLow)
						{
							num59 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
						}
						else
						{
							float num64;
							if (rangeType == RangeType.Shadows)
							{
								float num60 = inClose[num3 - 1];
								float num61 = inOpen[num3 - 1];
								float num62 = ((!((double)num60 >= (double)num61)) ? num61 : num60);
								float num63 = ((!((double)num60 >= (double)num61)) ? num60 : num61);
								num64 = (float)((double)num63 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num59 = num64;
						}
						num58 = num59;
					}
					num2 = (double)(num53 - num58) + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num69;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num67 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num68 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num69 = (float)((double)num68 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num67));
							}
							else
							{
								num69 = 0f;
							}
							num66 = num69;
						}
						num65 = num66;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num70;
					if (rangeType2 == RangeType.RealBody)
					{
						num70 = (float)(double)Math.Abs((float)((double)inClose[num5 - 1] - (double)inOpen[num5 - 1]));
					}
					else
					{
						float num71;
						if (rangeType2 == RangeType.HighLow)
						{
							num71 = (float)((double)inHigh[num5 - 1] - (double)inLow[num5 - 1]);
						}
						else
						{
							float num76;
							if (rangeType2 == RangeType.Shadows)
							{
								float num72 = inClose[num5 - 1];
								float num73 = inOpen[num5 - 1];
								float num74 = ((!((double)num72 >= (double)num73)) ? num73 : num72);
								float num75 = ((!((double)num72 >= (double)num73)) ? num72 : num73);
								num76 = (float)((double)num75 - (double)inLow[num5 - 1] + ((double)inHigh[num5 - 1] - (double)num74));
							}
							else
							{
								num76 = 0f;
							}
							num71 = num76;
						}
						num70 = num71;
					}
					num4 = (double)(num65 - num70) + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlOnNeck(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlOnNeckLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num6];
									double num11 = inOpen[num6];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num6] + (inHigh[num6] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num19 = inClose[num15];
									double num20 = inOpen[num15];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num15] + (inHigh[num15] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					double num26 = inClose[num24 - 1];
					double num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!(num26 >= num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							double num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = Math.Abs(num26 - num27);
							}
							else
							{
								double num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = inHigh[num24 - 1] - inLow[num24 - 1];
								}
								else
								{
									double num34;
									if (rangeType2 == RangeType.Shadows)
									{
										double num32 = ((!(num26 >= num27)) ? num27 : num26);
										double num33 = ((!(num26 >= num27)) ? num26 : num27);
										num34 = num33 - inLow[num24 - 1] + (inHigh[num24 - 1] - num32);
									}
									else
									{
										num34 = 0.0;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]) > candleSettings[0].factor * num29 / num35)
						{
							double num36 = inOpen[num24];
							if (inClose[num24] >= num36)
							{
								double num37 = inLow[num24 - 1];
								if (num36 < num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										double num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
										}
										else
										{
											double num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = inHigh[num24 - 1] - num37;
											}
											else
											{
												double num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													double num42 = ((!(num26 >= num27)) ? num27 : num26);
													double num43 = ((!(num26 >= num27)) ? num26 : num27);
													num44 = inHigh[num24 - 1] - num42 + (num43 - num37);
												}
												else
												{
													num44 = 0.0;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									rangeType = candleSetting3.rangeType;
									double num45 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num37 = inLow[num24 - 1];
									if (inClose[num24] <= candleSetting3.factor * num39 / num45 + num37)
									{
										num38 = candleSetting3.avgPeriod;
										double num46;
										if (num38 != 0.0)
										{
											num46 = num2 / num38;
										}
										else
										{
											double num47;
											if (rangeType == RangeType.RealBody)
											{
												num47 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
											}
											else
											{
												double num48;
												if (rangeType == RangeType.HighLow)
												{
													num48 = inHigh[num24 - 1] - num37;
												}
												else
												{
													double num51;
													if (rangeType == RangeType.Shadows)
													{
														num26 = inClose[num24 - 1];
														num27 = inOpen[num24 - 1];
														double num49 = ((!(num26 >= num27)) ? num27 : num26);
														double num50 = ((!(num26 >= num27)) ? num26 : num27);
														num51 = inHigh[num24 - 1] - num49 + (num50 - num37);
													}
													else
													{
														num51 = 0.0;
													}
													num48 = num51;
												}
												num47 = num48;
											}
											num46 = num47;
										}
										CandleSetting candleSetting4 = Globals.candleSettings[10];
										double num52 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inClose[num24] >= inLow[num24 - 1] - candleSetting4.factor * num46 / num52)
										{
											outInteger[num25] = -100;
											num25++;
											goto IL_0575;
										}
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_0575;
					IL_0575:
					rangeType = Globals.candleSettings[10].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num57;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num55 = ((!(num26 >= num27)) ? num27 : num26);
								double num56 = ((!(num26 >= num27)) ? num26 : num27);
								num57 = num56 - inLow[num24 - 1] + (inHigh[num24 - 1] - num55);
							}
							else
							{
								num57 = 0.0;
							}
							num54 = num57;
						}
						num53 = num54;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num58;
					if (rangeType == RangeType.RealBody)
					{
						num58 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
					}
					else
					{
						double num59;
						if (rangeType == RangeType.HighLow)
						{
							num59 = inHigh[num3 - 1] - inLow[num3 - 1];
						}
						else
						{
							double num64;
							if (rangeType == RangeType.Shadows)
							{
								double num60 = inClose[num3 - 1];
								double num61 = inOpen[num3 - 1];
								double num62 = ((!(num60 >= num61)) ? num61 : num60);
								double num63 = ((!(num60 >= num61)) ? num60 : num61);
								num64 = num63 - inLow[num3 - 1] + (inHigh[num3 - 1] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num59 = num64;
						}
						num58 = num59;
					}
					num2 = num53 - num58 + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num69;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num67 = ((!(num26 >= num27)) ? num27 : num26);
								double num68 = ((!(num26 >= num27)) ? num26 : num27);
								num69 = num68 - inLow[num24 - 1] + (inHigh[num24 - 1] - num67);
							}
							else
							{
								num69 = 0.0;
							}
							num66 = num69;
						}
						num65 = num66;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num70;
					if (rangeType2 == RangeType.RealBody)
					{
						num70 = Math.Abs(inClose[num5 - 1] - inOpen[num5 - 1]);
					}
					else
					{
						double num71;
						if (rangeType2 == RangeType.HighLow)
						{
							num71 = inHigh[num5 - 1] - inLow[num5 - 1];
						}
						else
						{
							double num76;
							if (rangeType2 == RangeType.Shadows)
							{
								double num72 = inClose[num5 - 1];
								double num73 = inOpen[num5 - 1];
								double num74 = ((!(num72 >= num73)) ? num73 : num72);
								double num75 = ((!(num72 >= num73)) ? num72 : num73);
								num76 = num75 - inLow[num5 - 1] + (inHigh[num5 - 1] - num74);
							}
							else
							{
								num76 = 0.0;
							}
							num71 = num76;
						}
						num70 = num71;
					}
					num4 = num65 - num70 + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlPiercingLookback()
	{
		return Globals.candleSettings[0].avgPeriod + 1;
	}

	public static RetCode CdlPiercing(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlPiercingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				int num2 = startIdx - Globals.candleSettings[0].avgPeriod;
				int num3 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num4;
						if (rangeType == RangeType.RealBody)
						{
							num4 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
						}
						else
						{
							float num5;
							if (rangeType == RangeType.HighLow)
							{
								num5 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
							}
							else
							{
								float num10;
								if (rangeType == RangeType.Shadows)
								{
									float num6 = inClose[num3 - 1];
									float num7 = inOpen[num3 - 1];
									float num8 = ((!((double)num6 >= (double)num7)) ? num7 : num6);
									float num9 = ((!((double)num6 >= (double)num7)) ? num6 : num7);
									num10 = (float)((double)num9 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num8));
								}
								else
								{
									num10 = 0f;
								}
								num5 = num10;
							}
							num4 = num5;
						}
						array[1] += num4;
						rangeType = Globals.candleSettings[0].rangeType;
						float num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
						}
						else
						{
							float num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = (float)((double)inHigh[num3] - (double)inLow[num3]);
							}
							else
							{
								float num17;
								if (rangeType == RangeType.Shadows)
								{
									float num13 = inClose[num3];
									float num14 = inOpen[num3];
									float num15 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
									float num16 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
									num17 = (float)((double)num16 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num15));
								}
								else
								{
									num17 = 0f;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						array[0] += num11;
						num3++;
					}
					while (num3 < startIdx);
				}
				int num18 = startIdx;
				int num19 = 0;
				int num20 = num2;
				do
				{
					float num6 = inClose[num18 - 1];
					float num7 = inOpen[num18 - 1];
					if (!((double)num6 >= (double)num7))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num21 = candleSetting.avgPeriod;
						double num22;
						if (num21 != 0.0)
						{
							num22 = array[1] / num21;
						}
						else
						{
							RangeType rangeType = candleSetting.rangeType;
							float num23;
							if (rangeType == RangeType.RealBody)
							{
								num23 = (float)(double)Math.Abs((float)((double)num6 - (double)num7));
							}
							else
							{
								float num24;
								if (rangeType == RangeType.HighLow)
								{
									num24 = (float)((double)inHigh[num18 - 1] - (double)inLow[num18 - 1]);
								}
								else
								{
									float num27;
									if (rangeType == RangeType.Shadows)
									{
										float num25 = ((!((double)num6 >= (double)num7)) ? num7 : num6);
										float num26 = ((!((double)num6 >= (double)num7)) ? num6 : num7);
										num27 = (float)((double)num26 - (double)inLow[num18 - 1] + ((double)inHigh[num18 - 1] - (double)num25));
									}
									else
									{
										num27 = 0f;
									}
									num24 = num27;
								}
								num23 = num24;
							}
							num22 = num23;
						}
						double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSetting = Globals.candleSettings[0];
						if ((double)Math.Abs((float)((double)inClose[num18 - 1] - (double)inOpen[num18 - 1])) > candleSetting.factor * num22 / num28)
						{
							float num13 = inClose[num18];
							float num14 = inOpen[num18];
							if ((double)num13 >= (double)num14)
							{
								num21 = candleSetting.avgPeriod;
								double num29;
								if (num21 != 0.0)
								{
									num29 = array[0] / num21;
								}
								else
								{
									RangeType rangeType = candleSetting.rangeType;
									float num30;
									if (rangeType == RangeType.RealBody)
									{
										num30 = (float)(double)Math.Abs((float)((double)num13 - (double)num14));
									}
									else
									{
										float num31;
										if (rangeType == RangeType.HighLow)
										{
											num31 = (float)((double)inHigh[num18] - (double)inLow[num18]);
										}
										else
										{
											float num34;
											if (rangeType == RangeType.Shadows)
											{
												float num32 = ((!((double)num13 >= (double)num14)) ? num14 : num13);
												float num33 = ((!((double)num13 >= (double)num14)) ? num13 : num14);
												num34 = (float)((double)num33 - (double)inLow[num18] + ((double)inHigh[num18] - (double)num32));
											}
											else
											{
												num34 = 0f;
											}
											num31 = num34;
										}
										num30 = num31;
									}
									num29 = num30;
								}
								double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num18] - (double)inOpen[num18])) > Globals.candleSettings[0].factor * num29 / num35 && (double)inOpen[num18] < (double)inLow[num18 - 1])
								{
									num13 = inClose[num18];
									num7 = inOpen[num18 - 1];
									if ((double)num13 < (double)num7 && (double)num13 > (double)Math.Abs((float)((double)inClose[num18 - 1] - (double)num7)) * 0.5 + (double)inClose[num18 - 1])
									{
										outInteger[num19] = 100;
										num19++;
										goto IL_04c6;
									}
								}
							}
						}
					}
					outInteger[num19] = 0;
					num19++;
					goto IL_04c6;
					IL_04c6:
					int num36 = 1;
					int num37 = num20 - 1;
					int num38 = num18 - num20;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num39;
						if (rangeType == RangeType.RealBody)
						{
							num39 = (float)(double)Math.Abs((float)((double)inClose[num37 + num38] - (double)inOpen[num37 + num38]));
						}
						else
						{
							float num40;
							if (rangeType == RangeType.HighLow)
							{
								num40 = (float)((double)inHigh[num37 + num38] - (double)inLow[num37 + num38]);
							}
							else
							{
								float num45;
								if (rangeType == RangeType.Shadows)
								{
									float num41 = inClose[num37 + num38];
									float num42 = inOpen[num37 + num38];
									float num43 = ((!((double)num41 >= (double)num42)) ? num42 : num41);
									float num44 = ((!((double)num41 >= (double)num42)) ? num41 : num42);
									num45 = (float)((double)num44 - (double)inLow[num37 + num38] + ((double)inHigh[num37 + num38] - (double)num43));
								}
								else
								{
									num45 = 0f;
								}
								num40 = num45;
							}
							num39 = num40;
						}
						rangeType = Globals.candleSettings[0].rangeType;
						float num46;
						if (rangeType == RangeType.RealBody)
						{
							num46 = (float)(double)Math.Abs((float)((double)inClose[num37] - (double)inOpen[num37]));
						}
						else
						{
							float num47;
							if (rangeType == RangeType.HighLow)
							{
								num47 = (float)((double)inHigh[num37] - (double)inLow[num37]);
							}
							else
							{
								float num52;
								if (rangeType == RangeType.Shadows)
								{
									float num48 = inClose[num37];
									float num49 = inOpen[num37];
									float num50 = ((!((double)num48 >= (double)num49)) ? num49 : num48);
									float num51 = ((!((double)num48 >= (double)num49)) ? num48 : num49);
									num52 = (float)((double)num51 - (double)inLow[num37] + ((double)inHigh[num37] - (double)num50));
								}
								else
								{
									num52 = 0f;
								}
								num47 = num52;
							}
							num46 = num47;
						}
						array[num36] += num39 - num46;
						num36--;
						num37++;
					}
					while (num36 >= 0);
					num18++;
					num20++;
				}
				while (num18 <= endIdx);
				outNBElement = num19;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlPiercing(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[2];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlPiercingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[1] = 0.0;
				array[0] = 0.0;
				int num2 = startIdx - Globals.candleSettings[0].avgPeriod;
				int num3 = num2;
				if (num2 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num4;
						if (rangeType == RangeType.RealBody)
						{
							num4 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
						}
						else
						{
							double num5;
							if (rangeType == RangeType.HighLow)
							{
								num5 = inHigh[num3 - 1] - inLow[num3 - 1];
							}
							else
							{
								double num10;
								if (rangeType == RangeType.Shadows)
								{
									double num6 = inClose[num3 - 1];
									double num7 = inOpen[num3 - 1];
									double num8 = ((!(num6 >= num7)) ? num7 : num6);
									double num9 = ((!(num6 >= num7)) ? num6 : num7);
									num10 = num9 - inLow[num3 - 1] + (inHigh[num3 - 1] - num8);
								}
								else
								{
									num10 = 0.0;
								}
								num5 = num10;
							}
							num4 = num5;
						}
						array[1] += num4;
						rangeType = Globals.candleSettings[0].rangeType;
						double num11;
						if (rangeType == RangeType.RealBody)
						{
							num11 = Math.Abs(inClose[num3] - inOpen[num3]);
						}
						else
						{
							double num12;
							if (rangeType == RangeType.HighLow)
							{
								num12 = inHigh[num3] - inLow[num3];
							}
							else
							{
								double num17;
								if (rangeType == RangeType.Shadows)
								{
									double num13 = inClose[num3];
									double num14 = inOpen[num3];
									double num15 = ((!(num13 >= num14)) ? num14 : num13);
									double num16 = ((!(num13 >= num14)) ? num13 : num14);
									num17 = num16 - inLow[num3] + (inHigh[num3] - num15);
								}
								else
								{
									num17 = 0.0;
								}
								num12 = num17;
							}
							num11 = num12;
						}
						array[0] += num11;
						num3++;
					}
					while (num3 < startIdx);
				}
				int num18 = startIdx;
				int num19 = 0;
				int num20 = num2;
				do
				{
					double num6 = inClose[num18 - 1];
					double num7 = inOpen[num18 - 1];
					if (!(num6 >= num7))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num21 = candleSetting.avgPeriod;
						double num22;
						if (num21 != 0.0)
						{
							num22 = array[1] / num21;
						}
						else
						{
							RangeType rangeType = candleSetting.rangeType;
							double num23;
							if (rangeType == RangeType.RealBody)
							{
								num23 = Math.Abs(num6 - num7);
							}
							else
							{
								double num24;
								if (rangeType == RangeType.HighLow)
								{
									num24 = inHigh[num18 - 1] - inLow[num18 - 1];
								}
								else
								{
									double num27;
									if (rangeType == RangeType.Shadows)
									{
										double num25 = ((!(num6 >= num7)) ? num7 : num6);
										double num26 = ((!(num6 >= num7)) ? num6 : num7);
										num27 = num26 - inLow[num18 - 1] + (inHigh[num18 - 1] - num25);
									}
									else
									{
										num27 = 0.0;
									}
									num24 = num27;
								}
								num23 = num24;
							}
							num22 = num23;
						}
						double num28 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSetting = Globals.candleSettings[0];
						if (Math.Abs(inClose[num18 - 1] - inOpen[num18 - 1]) > candleSetting.factor * num22 / num28)
						{
							double num13 = inClose[num18];
							double num14 = inOpen[num18];
							if (num13 >= num14)
							{
								num21 = candleSetting.avgPeriod;
								double num29;
								if (num21 != 0.0)
								{
									num29 = array[0] / num21;
								}
								else
								{
									RangeType rangeType = candleSetting.rangeType;
									double num30;
									if (rangeType == RangeType.RealBody)
									{
										num30 = Math.Abs(num13 - num14);
									}
									else
									{
										double num31;
										if (rangeType == RangeType.HighLow)
										{
											num31 = inHigh[num18] - inLow[num18];
										}
										else
										{
											double num34;
											if (rangeType == RangeType.Shadows)
											{
												double num32 = num13;
												double num33 = num14;
												num34 = num33 - inLow[num18] + (inHigh[num18] - num32);
											}
											else
											{
												num34 = 0.0;
											}
											num31 = num34;
										}
										num30 = num31;
									}
									num29 = num30;
								}
								double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num18] - inOpen[num18]) > Globals.candleSettings[0].factor * num29 / num35 && inOpen[num18] < inLow[num18 - 1])
								{
									num7 = inOpen[num18 - 1];
									if (inClose[num18] < num7 && inClose[num18] > Math.Abs(inClose[num18 - 1] - num7) * 0.5 + inClose[num18 - 1])
									{
										outInteger[num19] = 100;
										num19++;
										goto IL_0458;
									}
								}
							}
						}
					}
					outInteger[num19] = 0;
					num19++;
					goto IL_0458;
					IL_0458:
					int num36 = 1;
					int num37 = num20 - 1;
					int num38 = num18 - num20;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num39;
						if (rangeType == RangeType.RealBody)
						{
							num39 = Math.Abs(inClose[num38 + num37] - inOpen[num38 + num37]);
						}
						else
						{
							double num40;
							if (rangeType == RangeType.HighLow)
							{
								num40 = inHigh[num38 + num37] - inLow[num38 + num37];
							}
							else
							{
								double num45;
								if (rangeType == RangeType.Shadows)
								{
									double num41 = inClose[num38 + num37];
									double num42 = inOpen[num38 + num37];
									double num43 = ((!(num41 >= num42)) ? num42 : num41);
									double num44 = ((!(num41 >= num42)) ? num41 : num42);
									num45 = num44 - inLow[num38 + num37] + (inHigh[num38 + num37] - num43);
								}
								else
								{
									num45 = 0.0;
								}
								num40 = num45;
							}
							num39 = num40;
						}
						rangeType = Globals.candleSettings[0].rangeType;
						double num46;
						if (rangeType == RangeType.RealBody)
						{
							num46 = Math.Abs(inClose[num37] - inOpen[num37]);
						}
						else
						{
							double num47;
							if (rangeType == RangeType.HighLow)
							{
								num47 = inHigh[num37] - inLow[num37];
							}
							else
							{
								double num52;
								if (rangeType == RangeType.Shadows)
								{
									double num48 = inClose[num37];
									double num49 = inOpen[num37];
									double num50 = ((!(num48 >= num49)) ? num49 : num48);
									double num51 = ((!(num48 >= num49)) ? num48 : num49);
									num52 = num51 - inLow[num37] + (inHigh[num37] - num50);
								}
								else
								{
									num52 = 0.0;
								}
								num47 = num52;
							}
							num46 = num47;
						}
						array[num36] += num39 - num46;
						num36--;
						num37++;
					}
					while (num36 >= 0);
					num18++;
					num20++;
				}
				while (num18 <= endIdx);
				outNBElement = num19;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlRickshawManLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[8].avgPeriod;
		if (num > avgPeriod3)
		{
			return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
		}
		return avgPeriod3;
	}

	public static RetCode CdlRickshawMan(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlRickshawManLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[8].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = (double)num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num35;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num33 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num34 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num35 = (float)((double)num34 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22])) <= candleSettings[3].factor * num30 / num36)
					{
						float num11 = inClose[num22];
						float num12 = inOpen[num22];
						float num37 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = (float)((double)inHigh[num22] - (double)inLow[num22]);
								}
								else
								{
									float num44;
									if (rangeType2 == RangeType.Shadows)
									{
										float num42 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
										float num43 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
										num44 = (float)((double)num43 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num42));
									}
									else
									{
										num44 = 0f;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[4];
						rangeType2 = candleSetting3.rangeType;
						double num45 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num46 = inLow[num22];
						if ((double)num37 - (double)num46 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							float num47 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
							num38 = candleSetting3.avgPeriod;
							double num48;
							if (num38 != 0.0)
							{
								num48 = num4 / num38;
							}
							else
							{
								float num49;
								if (rangeType2 == RangeType.RealBody)
								{
									num49 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
								}
								else
								{
									float num50;
									if (rangeType2 == RangeType.HighLow)
									{
										num50 = (float)((double)inHigh[num22] - (double)num46);
									}
									else
									{
										float num53;
										if (rangeType2 == RangeType.Shadows)
										{
											float num51 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
											float num52 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
											num53 = (float)((double)inHigh[num22] - (double)num51 + ((double)num52 - (double)num46));
										}
										else
										{
											num53 = 0f;
										}
										num50 = num53;
									}
									num49 = num50;
								}
								num48 = num49;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting4 = candleSettings[4];
							double num54 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							float num55 = inHigh[num22];
							if ((double)num55 - (double)num47 > candleSetting4.factor * num48 / num54)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								float num56 = ((!((double)num12 < (double)num11)) ? num11 : num12);
								CandleSetting candleSetting5 = candleSettings[8];
								double num57 = candleSetting5.avgPeriod;
								double num58;
								if (num57 != 0.0)
								{
									num58 = num6 / num57;
								}
								else
								{
									rangeType3 = candleSetting5.rangeType;
									float num59;
									if (rangeType3 == RangeType.RealBody)
									{
										num59 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
									}
									else
									{
										float num60;
										if (rangeType3 == RangeType.HighLow)
										{
											num60 = (float)((double)num55 - (double)inLow[num22]);
										}
										else
										{
											float num63;
											if (rangeType3 == RangeType.Shadows)
											{
												float num61 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
												float num62 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
												num63 = (float)((double)num62 - (double)inLow[num22] + ((double)num55 - (double)num61));
											}
											else
											{
												num63 = 0f;
											}
											num60 = num63;
										}
										num59 = num60;
									}
									num58 = num59;
								}
								CandleSetting candleSetting6 = Globals.candleSettings[8];
								rangeType3 = candleSetting6.rangeType;
								double num64 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
								num55 = inHigh[num22];
								num46 = inLow[num22];
								double num65 = (double)num55 - (double)num46;
								if ((double)num56 <= candleSetting6.factor * num58 / num64 + (num65 * 0.5 + (double)num46))
								{
									num12 = inOpen[num22];
									num11 = inClose[num22];
									float num66 = ((!((double)num12 > (double)num11)) ? num11 : num12);
									num57 = candleSetting6.avgPeriod;
									double num67;
									if (num57 != 0.0)
									{
										num67 = num6 / num57;
									}
									else
									{
										float num68;
										if (rangeType3 == RangeType.RealBody)
										{
											num68 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
										}
										else
										{
											float num69;
											if (rangeType3 == RangeType.HighLow)
											{
												num69 = (float)num65;
											}
											else
											{
												float num72;
												if (rangeType3 == RangeType.Shadows)
												{
													float num70 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
													float num71 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
													num72 = (float)((double)num71 - (double)num46 + ((double)num55 - (double)num70));
												}
												else
												{
													num72 = 0f;
												}
												num69 = num72;
											}
											num68 = num69;
										}
										num67 = num68;
									}
									CandleSetting candleSetting7 = Globals.candleSettings[8];
									double num73 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num46 = inLow[num22];
									if ((double)num66 >= ((double)inHigh[num22] - (double)num46) * 0.5 + (double)num46 - candleSetting7.factor * num67 / num73)
									{
										outInteger[num28] = 100;
										num28++;
										goto IL_0853;
									}
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_0853;
					IL_0853:
					rangeType = Globals.candleSettings[3].rangeType;
					float num74;
					if (rangeType == RangeType.RealBody)
					{
						num74 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num75;
						if (rangeType == RangeType.HighLow)
						{
							num75 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num78;
							if (rangeType == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num76 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num77 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num78 = (float)((double)num77 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num76));
							}
							else
							{
								num78 = 0f;
							}
							num75 = num78;
						}
						num74 = num75;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num79;
					if (rangeType == RangeType.RealBody)
					{
						num79 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num80;
						if (rangeType == RangeType.HighLow)
						{
							num80 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num85;
							if (rangeType == RangeType.Shadows)
							{
								float num81 = inClose[num3];
								float num82 = inOpen[num3];
								float num83 = ((!((double)num81 >= (double)num82)) ? num82 : num81);
								float num84 = ((!((double)num81 >= (double)num82)) ? num81 : num82);
								num85 = (float)((double)num84 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num83));
							}
							else
							{
								num85 = 0f;
							}
							num80 = num85;
						}
						num79 = num80;
					}
					num2 = (double)(num74 - num79) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num86;
					if (rangeType2 == RangeType.RealBody)
					{
						num86 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num87;
						if (rangeType2 == RangeType.HighLow)
						{
							num87 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num90;
							if (rangeType2 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num88 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num89 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num90 = (float)((double)num89 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num88));
							}
							else
							{
								num90 = 0f;
							}
							num87 = num90;
						}
						num86 = num87;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num91;
					if (rangeType2 == RangeType.RealBody)
					{
						num91 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num92;
						if (rangeType2 == RangeType.HighLow)
						{
							num92 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num97;
							if (rangeType2 == RangeType.Shadows)
							{
								float num93 = inClose[num5];
								float num94 = inOpen[num5];
								float num95 = ((!((double)num93 >= (double)num94)) ? num94 : num93);
								float num96 = ((!((double)num93 >= (double)num94)) ? num93 : num94);
								num97 = (float)((double)num96 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num95));
							}
							else
							{
								num97 = 0f;
							}
							num92 = num97;
						}
						num91 = num92;
					}
					num4 = (double)(num86 - num91) + num4;
					rangeType3 = Globals.candleSettings[8].rangeType;
					float num98;
					if (rangeType3 == RangeType.RealBody)
					{
						num98 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num99;
						if (rangeType3 == RangeType.HighLow)
						{
							num99 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num102;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num100 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num101 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num102 = (float)((double)num101 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num100));
							}
							else
							{
								num102 = 0f;
							}
							num99 = num102;
						}
						num98 = num99;
					}
					rangeType3 = Globals.candleSettings[8].rangeType;
					float num103;
					if (rangeType3 == RangeType.RealBody)
					{
						num103 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num104;
						if (rangeType3 == RangeType.HighLow)
						{
							num104 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num109;
							if (rangeType3 == RangeType.Shadows)
							{
								float num105 = inClose[num7];
								float num106 = inOpen[num7];
								float num107 = ((!((double)num105 >= (double)num106)) ? num106 : num105);
								float num108 = ((!((double)num105 >= (double)num106)) ? num105 : num106);
								num109 = (float)((double)num108 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num107));
							}
							else
							{
								num109 = 0f;
							}
							num104 = num109;
						}
						num103 = num104;
					}
					num6 = (double)(num98 - num103) + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlRickshawMan(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlRickshawManLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[8].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[8].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num35;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num33 = ((!(num11 >= num12)) ? num12 : num11);
									double num34 = ((!(num11 >= num12)) ? num11 : num12);
									num35 = num34 - inLow[num22] + (inHigh[num22] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num22] - inOpen[num22]) <= candleSettings[3].factor * num30 / num36)
					{
						double num11 = inClose[num22];
						double num12 = inOpen[num22];
						double num37 = ((!(num11 >= num12)) ? num11 : num12);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = Math.Abs(num11 - num12);
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = inHigh[num22] - inLow[num22];
								}
								else
								{
									double num44;
									if (rangeType2 == RangeType.Shadows)
									{
										double num42 = ((!(num11 >= num12)) ? num12 : num11);
										double num43 = ((!(num11 >= num12)) ? num11 : num12);
										num44 = num43 - inLow[num22] + (inHigh[num22] - num42);
									}
									else
									{
										num44 = 0.0;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[4];
						rangeType2 = candleSetting3.rangeType;
						double num45 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num46 = inLow[num22];
						if (num37 - num46 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							double num47 = ((!(num11 >= num12)) ? num12 : num11);
							num38 = candleSetting3.avgPeriod;
							double num48;
							if (num38 != 0.0)
							{
								num48 = num4 / num38;
							}
							else
							{
								double num49;
								if (rangeType2 == RangeType.RealBody)
								{
									num49 = Math.Abs(num11 - num12);
								}
								else
								{
									double num50;
									if (rangeType2 == RangeType.HighLow)
									{
										num50 = inHigh[num22] - num46;
									}
									else
									{
										double num53;
										if (rangeType2 == RangeType.Shadows)
										{
											double num51 = ((!(num11 >= num12)) ? num12 : num11);
											double num52 = ((!(num11 >= num12)) ? num11 : num12);
											num53 = inHigh[num22] - num51 + (num52 - num46);
										}
										else
										{
											num53 = 0.0;
										}
										num50 = num53;
									}
									num49 = num50;
								}
								num48 = num49;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting4 = candleSettings[4];
							double num54 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num55 = inHigh[num22];
							if (num55 - num47 > candleSetting4.factor * num48 / num54)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								double num56 = ((!(num12 < num11)) ? num11 : num12);
								CandleSetting candleSetting5 = candleSettings[8];
								double num57 = candleSetting5.avgPeriod;
								double num58;
								if (num57 != 0.0)
								{
									num58 = num6 / num57;
								}
								else
								{
									rangeType3 = candleSetting5.rangeType;
									double num59;
									if (rangeType3 == RangeType.RealBody)
									{
										num59 = Math.Abs(num11 - num12);
									}
									else
									{
										double num60;
										if (rangeType3 == RangeType.HighLow)
										{
											num60 = num55 - inLow[num22];
										}
										else
										{
											double num63;
											if (rangeType3 == RangeType.Shadows)
											{
												double num61 = ((!(num11 >= num12)) ? num12 : num11);
												double num62 = ((!(num11 >= num12)) ? num11 : num12);
												num63 = num62 - inLow[num22] + (num55 - num61);
											}
											else
											{
												num63 = 0.0;
											}
											num60 = num63;
										}
										num59 = num60;
									}
									num58 = num59;
								}
								CandleSetting candleSetting6 = Globals.candleSettings[8];
								rangeType3 = candleSetting6.rangeType;
								double num64 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
								num55 = inHigh[num22];
								num46 = inLow[num22];
								double num65 = num55 - num46;
								if (num56 <= candleSetting6.factor * num58 / num64 + (num65 * 0.5 + num46))
								{
									num12 = inOpen[num22];
									num11 = inClose[num22];
									double num66 = ((!(num12 > num11)) ? num11 : num12);
									num57 = candleSetting6.avgPeriod;
									double num67;
									if (num57 != 0.0)
									{
										num67 = num6 / num57;
									}
									else
									{
										double num68;
										if (rangeType3 == RangeType.RealBody)
										{
											num68 = Math.Abs(num11 - num12);
										}
										else
										{
											double num69;
											if (rangeType3 == RangeType.HighLow)
											{
												num69 = num65;
											}
											else
											{
												double num72;
												if (rangeType3 == RangeType.Shadows)
												{
													double num70 = ((!(num11 >= num12)) ? num12 : num11);
													double num71 = ((!(num11 >= num12)) ? num11 : num12);
													num72 = num55 - num70 + (num71 - num46);
												}
												else
												{
													num72 = 0.0;
												}
												num69 = num72;
											}
											num68 = num69;
										}
										num67 = num68;
									}
									CandleSetting candleSetting7 = Globals.candleSettings[8];
									double num73 = ((candleSetting7.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num46 = inLow[num22];
									if (num66 >= (inHigh[num22] - num46) * 0.5 + num46 - candleSetting7.factor * num67 / num73)
									{
										outInteger[num28] = 100;
										num28++;
										goto IL_07c4;
									}
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_07c4;
					IL_07c4:
					rangeType = Globals.candleSettings[3].rangeType;
					double num74;
					if (rangeType == RangeType.RealBody)
					{
						num74 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num75;
						if (rangeType == RangeType.HighLow)
						{
							num75 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num78;
							if (rangeType == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num76 = ((!(num11 >= num12)) ? num12 : num11);
								double num77 = ((!(num11 >= num12)) ? num11 : num12);
								num78 = num77 - inLow[num22] + (inHigh[num22] - num76);
							}
							else
							{
								num78 = 0.0;
							}
							num75 = num78;
						}
						num74 = num75;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num79;
					if (rangeType == RangeType.RealBody)
					{
						num79 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num80;
						if (rangeType == RangeType.HighLow)
						{
							num80 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num85;
							if (rangeType == RangeType.Shadows)
							{
								double num81 = inClose[num3];
								double num82 = inOpen[num3];
								double num83 = ((!(num81 >= num82)) ? num82 : num81);
								double num84 = ((!(num81 >= num82)) ? num81 : num82);
								num85 = num84 - inLow[num3] + (inHigh[num3] - num83);
							}
							else
							{
								num85 = 0.0;
							}
							num80 = num85;
						}
						num79 = num80;
					}
					num2 = num74 - num79 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num86;
					if (rangeType2 == RangeType.RealBody)
					{
						num86 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num87;
						if (rangeType2 == RangeType.HighLow)
						{
							num87 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num90;
							if (rangeType2 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num88 = ((!(num11 >= num12)) ? num12 : num11);
								double num89 = ((!(num11 >= num12)) ? num11 : num12);
								num90 = num89 - inLow[num22] + (inHigh[num22] - num88);
							}
							else
							{
								num90 = 0.0;
							}
							num87 = num90;
						}
						num86 = num87;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num91;
					if (rangeType2 == RangeType.RealBody)
					{
						num91 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num92;
						if (rangeType2 == RangeType.HighLow)
						{
							num92 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num97;
							if (rangeType2 == RangeType.Shadows)
							{
								double num93 = inClose[num5];
								double num94 = inOpen[num5];
								double num95 = ((!(num93 >= num94)) ? num94 : num93);
								double num96 = ((!(num93 >= num94)) ? num93 : num94);
								num97 = num96 - inLow[num5] + (inHigh[num5] - num95);
							}
							else
							{
								num97 = 0.0;
							}
							num92 = num97;
						}
						num91 = num92;
					}
					num4 = num86 - num91 + num4;
					rangeType3 = Globals.candleSettings[8].rangeType;
					double num98;
					if (rangeType3 == RangeType.RealBody)
					{
						num98 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num99;
						if (rangeType3 == RangeType.HighLow)
						{
							num99 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num102;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num100 = ((!(num11 >= num12)) ? num12 : num11);
								double num101 = ((!(num11 >= num12)) ? num11 : num12);
								num102 = num101 - inLow[num22] + (inHigh[num22] - num100);
							}
							else
							{
								num102 = 0.0;
							}
							num99 = num102;
						}
						num98 = num99;
					}
					rangeType3 = Globals.candleSettings[8].rangeType;
					double num103;
					if (rangeType3 == RangeType.RealBody)
					{
						num103 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num104;
						if (rangeType3 == RangeType.HighLow)
						{
							num104 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num109;
							if (rangeType3 == RangeType.Shadows)
							{
								double num105 = inClose[num7];
								double num106 = inOpen[num7];
								double num107 = ((!(num105 >= num106)) ? num106 : num105);
								double num108 = ((!(num105 >= num106)) ? num105 : num106);
								num109 = num108 - inLow[num7] + (inHigh[num7] - num107);
							}
							else
							{
								num109 = 0.0;
							}
							num104 = num109;
						}
						num103 = num104;
					}
					num6 = num98 - num103 + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlRiseFall3MethodsLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 4;
	}

	public static RetCode CdlRiseFall3Methods(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[5];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlRiseFall3MethodsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[4] = 0.0;
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[2].avgPeriod;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 2;
					int num5 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4 - 1] - (double)inOpen[num4 - 1]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4 - 1] - (double)inLow[num4 - 1]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4 - 1];
									float num9 = inOpen[num4 - 1];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4 - 1] + ((double)inHigh[num4 - 1] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						array[3] += num6;
						rangeType = Globals.candleSettings[2].rangeType;
						float num13;
						if (rangeType == RangeType.RealBody)
						{
							num13 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num14;
							if (rangeType == RangeType.HighLow)
							{
								num14 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num19;
								if (rangeType == RangeType.Shadows)
								{
									float num15 = inClose[num4];
									float num16 = inOpen[num4];
									float num17 = ((!((double)num15 >= (double)num16)) ? num16 : num15);
									float num18 = ((!((double)num15 >= (double)num16)) ? num15 : num16);
									num19 = (float)((double)num18 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num14 = num19;
							}
							num13 = num14;
						}
						array[2] += num13;
						rangeType = Globals.candleSettings[2].rangeType;
						float num20;
						if (rangeType == RangeType.RealBody)
						{
							num20 = (float)(double)Math.Abs((float)((double)inClose[num4 + 1] - (double)inOpen[num4 + 1]));
						}
						else
						{
							float num21;
							if (rangeType == RangeType.HighLow)
							{
								num21 = (float)((double)inHigh[num4 + 1] - (double)inLow[num4 + 1]);
							}
							else
							{
								float num26;
								if (rangeType == RangeType.Shadows)
								{
									float num22 = inClose[num4 + 1];
									float num23 = inOpen[num4 + 1];
									float num24 = ((!((double)num22 >= (double)num23)) ? num23 : num22);
									float num25 = ((!((double)num22 >= (double)num23)) ? num22 : num23);
									num26 = (float)((double)num25 - (double)inLow[num4 + 1] + ((double)inHigh[num4 + 1] - (double)num24));
								}
								else
								{
									num26 = 0f;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						array[1] += num20;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num27 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num28;
						if (rangeType2 == RangeType.RealBody)
						{
							num28 = (float)(double)Math.Abs((float)((double)inClose[num27 - 4] - (double)inOpen[num27 - 4]));
						}
						else
						{
							float num29;
							if (rangeType2 == RangeType.HighLow)
							{
								num29 = (float)((double)inHigh[num27 - 4] - (double)inLow[num27 - 4]);
							}
							else
							{
								float num34;
								if (rangeType2 == RangeType.Shadows)
								{
									float num30 = inClose[num27 - 4];
									float num31 = inOpen[num27 - 4];
									float num32 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
									float num33 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
									num34 = (float)((double)num33 - (double)inLow[num27 - 4] + ((double)inHigh[num27 - 4] - (double)num32));
								}
								else
								{
									num34 = 0f;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array[4] += num28;
						rangeType2 = Globals.candleSettings[0].rangeType;
						float num35;
						if (rangeType2 == RangeType.RealBody)
						{
							num35 = (float)(double)Math.Abs((float)((double)inClose[num27] - (double)inOpen[num27]));
						}
						else
						{
							float num36;
							if (rangeType2 == RangeType.HighLow)
							{
								num36 = (float)((double)inHigh[num27] - (double)inLow[num27]);
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.Shadows)
								{
									float num37 = inClose[num27];
									float num38 = inOpen[num27];
									float num39 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
									float num40 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
									num41 = (float)((double)num40 - (double)inLow[num27] + ((double)inHigh[num27] - (double)num39));
								}
								else
								{
									num41 = 0f;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array[0] += num35;
						num27++;
					}
					while (num27 < startIdx);
				}
				int num42 = startIdx;
				int num43 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num44 = candleSetting.avgPeriod;
					double num45;
					RangeType rangeType2;
					if (num44 != 0.0)
					{
						num45 = array[4] / num44;
					}
					else
					{
						rangeType2 = candleSetting.rangeType;
						float num46;
						if (rangeType2 == RangeType.RealBody)
						{
							num46 = (float)(double)Math.Abs((float)((double)inClose[num42 - 4] - (double)inOpen[num42 - 4]));
						}
						else
						{
							float num47;
							if (rangeType2 == RangeType.HighLow)
							{
								num47 = (float)((double)inHigh[num42 - 4] - (double)inLow[num42 - 4]);
							}
							else
							{
								float num50;
								if (rangeType2 == RangeType.Shadows)
								{
									float num30 = inClose[num42 - 4];
									float num31 = inOpen[num42 - 4];
									float num48 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
									float num49 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
									num50 = (float)((double)num49 - (double)inLow[num42 - 4] + ((double)inHigh[num42 - 4] - (double)num48));
								}
								else
								{
									num50 = 0f;
								}
								num47 = num50;
							}
							num46 = num47;
						}
						num45 = num46;
					}
					double num51 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if ((double)Math.Abs((float)((double)inClose[num42 - 4] - (double)inOpen[num42 - 4])) > candleSettings[0].factor * num45 / num51)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num52 = candleSetting2.avgPeriod;
						double num53;
						if (num52 != 0.0)
						{
							num53 = array[3] / num52;
						}
						else
						{
							RangeType rangeType = candleSetting2.rangeType;
							float num54;
							if (rangeType == RangeType.RealBody)
							{
								num54 = (float)(double)Math.Abs((float)((double)inClose[num42 - 3] - (double)inOpen[num42 - 3]));
							}
							else
							{
								float num55;
								if (rangeType == RangeType.HighLow)
								{
									num55 = (float)((double)inHigh[num42 - 3] - (double)inLow[num42 - 3]);
								}
								else
								{
									float num60;
									if (rangeType == RangeType.Shadows)
									{
										float num56 = inClose[num42 - 3];
										float num57 = inOpen[num42 - 3];
										float num58 = ((!((double)num56 >= (double)num57)) ? num57 : num56);
										float num59 = ((!((double)num56 >= (double)num57)) ? num56 : num57);
										num60 = (float)((double)num59 - (double)inLow[num42 - 3] + ((double)inHigh[num42 - 3] - (double)num58));
									}
									else
									{
										num60 = 0f;
									}
									num55 = num60;
								}
								num54 = num55;
							}
							num53 = num54;
						}
						double num61 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if ((double)Math.Abs((float)((double)inClose[num42 - 3] - (double)inOpen[num42 - 3])) < candleSetting3.factor * num53 / num61)
						{
							num52 = candleSetting3.avgPeriod;
							double num62;
							if (num52 != 0.0)
							{
								num62 = array[2] / num52;
							}
							else
							{
								RangeType rangeType = candleSetting3.rangeType;
								float num63;
								if (rangeType == RangeType.RealBody)
								{
									num63 = (float)(double)Math.Abs((float)((double)inClose[num42 - 2] - (double)inOpen[num42 - 2]));
								}
								else
								{
									float num64;
									if (rangeType == RangeType.HighLow)
									{
										num64 = (float)((double)inHigh[num42 - 2] - (double)inLow[num42 - 2]);
									}
									else
									{
										float num69;
										if (rangeType == RangeType.Shadows)
										{
											float num65 = inClose[num42 - 2];
											float num66 = inOpen[num42 - 2];
											float num67 = ((!((double)num65 >= (double)num66)) ? num66 : num65);
											float num68 = ((!((double)num65 >= (double)num66)) ? num65 : num66);
											num69 = (float)((double)num68 - (double)inLow[num42 - 2] + ((double)inHigh[num42 - 2] - (double)num67));
										}
										else
										{
											num69 = 0f;
										}
										num64 = num69;
									}
									num63 = num64;
								}
								num62 = num63;
							}
							double num70 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							CandleSetting candleSetting4 = Globals.candleSettings[2];
							if ((double)Math.Abs((float)((double)inClose[num42 - 2] - (double)inOpen[num42 - 2])) < candleSetting4.factor * num62 / num70)
							{
								num52 = candleSetting4.avgPeriod;
								double num71;
								if (num52 != 0.0)
								{
									num71 = array[1] / num52;
								}
								else
								{
									RangeType rangeType = candleSetting4.rangeType;
									float num72;
									if (rangeType == RangeType.RealBody)
									{
										num72 = (float)(double)Math.Abs((float)((double)inClose[num42 - 1] - (double)inOpen[num42 - 1]));
									}
									else
									{
										float num73;
										if (rangeType == RangeType.HighLow)
										{
											num73 = (float)((double)inHigh[num42 - 1] - (double)inLow[num42 - 1]);
										}
										else
										{
											float num78;
											if (rangeType == RangeType.Shadows)
											{
												float num74 = inClose[num42 - 1];
												float num75 = inOpen[num42 - 1];
												float num76 = ((!((double)num74 >= (double)num75)) ? num75 : num74);
												float num77 = ((!((double)num74 >= (double)num75)) ? num74 : num75);
												num78 = (float)((double)num77 - (double)inLow[num42 - 1] + ((double)inHigh[num42 - 1] - (double)num76));
											}
											else
											{
												num78 = 0f;
											}
											num73 = num78;
										}
										num72 = num73;
									}
									num71 = num72;
								}
								double num79 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								candleSettings = Globals.candleSettings;
								if ((double)Math.Abs((float)((double)inClose[num42 - 1] - (double)inOpen[num42 - 1])) < candleSettings[2].factor * num71 / num79)
								{
									candleSetting = candleSettings[0];
									num44 = candleSetting.avgPeriod;
									double num80;
									if (num44 != 0.0)
									{
										num80 = array[0] / num44;
									}
									else
									{
										rangeType2 = candleSetting.rangeType;
										float num81;
										if (rangeType2 == RangeType.RealBody)
										{
											num81 = (float)(double)Math.Abs((float)((double)inClose[num42] - (double)inOpen[num42]));
										}
										else
										{
											float num82;
											if (rangeType2 == RangeType.HighLow)
											{
												num82 = (float)((double)inHigh[num42] - (double)inLow[num42]);
											}
											else
											{
												float num85;
												if (rangeType2 == RangeType.Shadows)
												{
													float num37 = inClose[num42];
													float num38 = inOpen[num42];
													float num83 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
													float num84 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
													num85 = (float)((double)num84 - (double)inLow[num42] + ((double)inHigh[num42] - (double)num83));
												}
												else
												{
													num85 = 0f;
												}
												num82 = num85;
											}
											num81 = num82;
										}
										num80 = num81;
									}
									double num86 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if ((double)Math.Abs((float)((double)inClose[num42] - (double)inOpen[num42])) > Globals.candleSettings[0].factor * num80 / num86)
									{
										float num30 = inClose[num42 - 4];
										float num31 = inOpen[num42 - 4];
										int num87 = (((double)num30 >= (double)num31) ? 1 : (-1));
										float num56 = inClose[num42 - 3];
										float num57 = inOpen[num42 - 3];
										int num88 = (((double)num56 >= (double)num57) ? 1 : (-1));
										if (num87 == -num88)
										{
											int num89 = (((double)num56 >= (double)num57) ? 1 : (-1));
											float num65 = inClose[num42 - 2];
											float num66 = inOpen[num42 - 2];
											int num90 = (((double)num65 >= (double)num66) ? 1 : (-1));
											if (num89 == num90)
											{
												int num91 = (((double)num65 >= (double)num66) ? 1 : (-1));
												float num74 = inClose[num42 - 1];
												float num75 = inOpen[num42 - 1];
												int num92 = (((double)num74 >= (double)num75) ? 1 : (-1));
												if (num91 == num92)
												{
													int num93 = (((double)num74 >= (double)num75) ? 1 : (-1));
													float num37 = inClose[num42];
													float num38 = inOpen[num42];
													int num94 = (((double)num37 >= (double)num38) ? 1 : (-1));
													if (num93 == -num94)
													{
														float num95 = ((!((double)num57 < (double)num56)) ? num56 : num57);
														float num96 = inHigh[num42 - 4];
														if ((double)num95 < (double)num96)
														{
															float num97 = ((!((double)num57 > (double)num56)) ? num56 : num57);
															float num98 = inLow[num42 - 4];
															if ((double)num97 > (double)num98)
															{
																float num99 = ((!((double)num66 < (double)num65)) ? num65 : num66);
																if ((double)num99 < (double)num96)
																{
																	float num100 = ((!((double)num66 > (double)num65)) ? num65 : num66);
																	if ((double)num100 > (double)num98)
																	{
																		float num101 = ((!((double)num75 < (double)num74)) ? num74 : num75);
																		if ((double)num101 < (double)num96)
																		{
																			float num102 = ((!((double)num75 > (double)num74)) ? num74 : num75);
																			if ((double)num102 > (double)num98)
																			{
																				int num103 = (((double)num30 >= (double)num31) ? 1 : (-1));
																				int num104 = (((double)num30 >= (double)num31) ? 1 : (-1));
																				if ((double)(float)num103 * (double)num65 < (double)(float)num104 * (double)num56)
																				{
																					int num105 = (((double)num30 >= (double)num31) ? 1 : (-1));
																					int num106 = (((double)num30 >= (double)num31) ? 1 : (-1));
																					if ((double)(float)num105 * (double)num74 < (double)(float)num106 * (double)num65)
																					{
																						int num107 = (((double)num30 >= (double)num31) ? 1 : (-1));
																						int num108 = (((double)num30 >= (double)num31) ? 1 : (-1));
																						if ((double)(float)num107 * (double)num38 > (double)(float)num108 * (double)num74)
																						{
																							int num109 = (((double)num30 >= (double)num31) ? 1 : (-1));
																							int num110 = (((double)num30 >= (double)num31) ? 1 : (-1));
																							if ((double)(float)num109 * (double)num37 > (double)(float)num110 * (double)num30)
																							{
																								int num111 = (((double)num30 >= (double)num31) ? 1 : (-1));
																								outInteger[num43] = num111 * 100;
																								num43++;
																								goto IL_0d84;
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num43] = 0;
					num43++;
					goto IL_0d84;
					IL_0d84:
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num112;
					if (rangeType2 == RangeType.RealBody)
					{
						num112 = (float)(double)Math.Abs((float)((double)inClose[num42 - 4] - (double)inOpen[num42 - 4]));
					}
					else
					{
						float num113;
						if (rangeType2 == RangeType.HighLow)
						{
							num113 = (float)((double)inHigh[num42 - 4] - (double)inLow[num42 - 4]);
						}
						else
						{
							float num116;
							if (rangeType2 == RangeType.Shadows)
							{
								float num30 = inClose[num42 - 4];
								float num31 = inOpen[num42 - 4];
								float num114 = ((!((double)num30 >= (double)num31)) ? num31 : num30);
								float num115 = ((!((double)num30 >= (double)num31)) ? num30 : num31);
								num116 = (float)((double)num115 - (double)inLow[num42 - 4] + ((double)inHigh[num42 - 4] - (double)num114));
							}
							else
							{
								num116 = 0f;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num117;
					if (rangeType2 == RangeType.RealBody)
					{
						num117 = (float)(double)Math.Abs((float)((double)inClose[num3 - 4] - (double)inOpen[num3 - 4]));
					}
					else
					{
						float num118;
						if (rangeType2 == RangeType.HighLow)
						{
							num118 = (float)((double)inHigh[num3 - 4] - (double)inLow[num3 - 4]);
						}
						else
						{
							float num123;
							if (rangeType2 == RangeType.Shadows)
							{
								float num119 = inClose[num3 - 4];
								float num120 = inOpen[num3 - 4];
								float num121 = ((!((double)num119 >= (double)num120)) ? num120 : num119);
								float num122 = ((!((double)num119 >= (double)num120)) ? num119 : num120);
								num123 = (float)((double)num122 - (double)inLow[num3 - 4] + ((double)inHigh[num3 - 4] - (double)num121));
							}
							else
							{
								num123 = 0f;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					array[4] += num112 - num117;
					int num124 = 3;
					int num125 = num2 - 3;
					int num126 = num42 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num127;
						if (rangeType == RangeType.RealBody)
						{
							num127 = (float)(double)Math.Abs((float)((double)inClose[num125 + num126] - (double)inOpen[num125 + num126]));
						}
						else
						{
							float num128;
							if (rangeType == RangeType.HighLow)
							{
								num128 = (float)((double)inHigh[num125 + num126] - (double)inLow[num125 + num126]);
							}
							else
							{
								float num133;
								if (rangeType == RangeType.Shadows)
								{
									float num129 = inClose[num125 + num126];
									float num130 = inOpen[num125 + num126];
									float num131 = ((!((double)num129 >= (double)num130)) ? num130 : num129);
									float num132 = ((!((double)num129 >= (double)num130)) ? num129 : num130);
									num133 = (float)((double)num132 - (double)inLow[num125 + num126] + ((double)inHigh[num125 + num126] - (double)num131));
								}
								else
								{
									num133 = 0f;
								}
								num128 = num133;
							}
							num127 = num128;
						}
						rangeType = Globals.candleSettings[2].rangeType;
						float num134;
						if (rangeType == RangeType.RealBody)
						{
							num134 = (float)(double)Math.Abs((float)((double)inClose[num125] - (double)inOpen[num125]));
						}
						else
						{
							float num135;
							if (rangeType == RangeType.HighLow)
							{
								num135 = (float)((double)inHigh[num125] - (double)inLow[num125]);
							}
							else
							{
								float num140;
								if (rangeType == RangeType.Shadows)
								{
									float num136 = inClose[num125];
									float num137 = inOpen[num125];
									float num138 = ((!((double)num136 >= (double)num137)) ? num137 : num136);
									float num139 = ((!((double)num136 >= (double)num137)) ? num136 : num137);
									num140 = (float)((double)num139 - (double)inLow[num125] + ((double)inHigh[num125] - (double)num138));
								}
								else
								{
									num140 = 0f;
								}
								num135 = num140;
							}
							num134 = num135;
						}
						array[num124] += num127 - num134;
						num124--;
						num125++;
					}
					while (num124 >= 1);
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num141;
					if (rangeType2 == RangeType.RealBody)
					{
						num141 = (float)(double)Math.Abs((float)((double)inClose[num42] - (double)inOpen[num42]));
					}
					else
					{
						float num142;
						if (rangeType2 == RangeType.HighLow)
						{
							num142 = (float)((double)inHigh[num42] - (double)inLow[num42]);
						}
						else
						{
							float num145;
							if (rangeType2 == RangeType.Shadows)
							{
								float num37 = inClose[num42];
								float num38 = inOpen[num42];
								float num143 = ((!((double)num37 >= (double)num38)) ? num38 : num37);
								float num144 = ((!((double)num37 >= (double)num38)) ? num37 : num38);
								num145 = (float)((double)num144 - (double)inLow[num42] + ((double)inHigh[num42] - (double)num143));
							}
							else
							{
								num145 = 0f;
							}
							num142 = num145;
						}
						num141 = num142;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num146;
					if (rangeType2 == RangeType.RealBody)
					{
						num146 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num147;
						if (rangeType2 == RangeType.HighLow)
						{
							num147 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num152;
							if (rangeType2 == RangeType.Shadows)
							{
								float num148 = inClose[num3];
								float num149 = inOpen[num3];
								float num150 = ((!((double)num148 >= (double)num149)) ? num149 : num148);
								float num151 = ((!((double)num148 >= (double)num149)) ? num148 : num149);
								num152 = (float)((double)num151 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num150));
							}
							else
							{
								num152 = 0f;
							}
							num147 = num152;
						}
						num146 = num147;
					}
					array[0] += num141 - num146;
					num42++;
					num2++;
					num3++;
				}
				while (num42 <= endIdx);
				outNBElement = num43;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlRiseFall3Methods(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[5];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlRiseFall3MethodsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[4] = 0.0;
				array[3] = 0.0;
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[2].avgPeriod;
				int num3 = startIdx - candleSettings[0].avgPeriod;
				if (num2 < startIdx)
				{
					int num4 = num2 - 2;
					int num5 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4 - 1] - inOpen[num4 - 1]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4 - 1] - inLow[num4 - 1];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4 - 1];
									double num9 = inOpen[num4 - 1];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4 - 1] + (inHigh[num4 - 1] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						array[3] += num6;
						rangeType = Globals.candleSettings[2].rangeType;
						double num13;
						if (rangeType == RangeType.RealBody)
						{
							num13 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num14;
							if (rangeType == RangeType.HighLow)
							{
								num14 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num19;
								if (rangeType == RangeType.Shadows)
								{
									double num15 = inClose[num4];
									double num16 = inOpen[num4];
									double num17 = ((!(num15 >= num16)) ? num16 : num15);
									double num18 = ((!(num15 >= num16)) ? num15 : num16);
									num19 = num18 - inLow[num4] + (inHigh[num4] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num14 = num19;
							}
							num13 = num14;
						}
						array[2] += num13;
						rangeType = Globals.candleSettings[2].rangeType;
						double num20;
						if (rangeType == RangeType.RealBody)
						{
							num20 = Math.Abs(inClose[num4 + 1] - inOpen[num4 + 1]);
						}
						else
						{
							double num21;
							if (rangeType == RangeType.HighLow)
							{
								num21 = inHigh[num4 + 1] - inLow[num4 + 1];
							}
							else
							{
								double num26;
								if (rangeType == RangeType.Shadows)
								{
									double num22 = inClose[num4 + 1];
									double num23 = inOpen[num4 + 1];
									double num24 = ((!(num22 >= num23)) ? num23 : num22);
									double num25 = ((!(num22 >= num23)) ? num22 : num23);
									num26 = num25 - inLow[num4 + 1] + (inHigh[num4 + 1] - num24);
								}
								else
								{
									num26 = 0.0;
								}
								num21 = num26;
							}
							num20 = num21;
						}
						array[1] += num20;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num27 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num28;
						if (rangeType2 == RangeType.RealBody)
						{
							num28 = Math.Abs(inClose[num27 - 4] - inOpen[num27 - 4]);
						}
						else
						{
							double num29;
							if (rangeType2 == RangeType.HighLow)
							{
								num29 = inHigh[num27 - 4] - inLow[num27 - 4];
							}
							else
							{
								double num34;
								if (rangeType2 == RangeType.Shadows)
								{
									double num30 = inClose[num27 - 4];
									double num31 = inOpen[num27 - 4];
									double num32 = ((!(num30 >= num31)) ? num31 : num30);
									double num33 = ((!(num30 >= num31)) ? num30 : num31);
									num34 = num33 - inLow[num27 - 4] + (inHigh[num27 - 4] - num32);
								}
								else
								{
									num34 = 0.0;
								}
								num29 = num34;
							}
							num28 = num29;
						}
						array[4] += num28;
						rangeType2 = Globals.candleSettings[0].rangeType;
						double num35;
						if (rangeType2 == RangeType.RealBody)
						{
							num35 = Math.Abs(inClose[num27] - inOpen[num27]);
						}
						else
						{
							double num36;
							if (rangeType2 == RangeType.HighLow)
							{
								num36 = inHigh[num27] - inLow[num27];
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.Shadows)
								{
									double num37 = inClose[num27];
									double num38 = inOpen[num27];
									double num39 = ((!(num37 >= num38)) ? num38 : num37);
									double num40 = ((!(num37 >= num38)) ? num37 : num38);
									num41 = num40 - inLow[num27] + (inHigh[num27] - num39);
								}
								else
								{
									num41 = 0.0;
								}
								num36 = num41;
							}
							num35 = num36;
						}
						array[0] += num35;
						num27++;
					}
					while (num27 < startIdx);
				}
				int num42 = startIdx;
				int num43 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num44 = candleSetting.avgPeriod;
					double num45;
					RangeType rangeType2;
					if (num44 != 0.0)
					{
						num45 = array[4] / num44;
					}
					else
					{
						rangeType2 = candleSetting.rangeType;
						double num46;
						if (rangeType2 == RangeType.RealBody)
						{
							num46 = Math.Abs(inClose[num42 - 4] - inOpen[num42 - 4]);
						}
						else
						{
							double num47;
							if (rangeType2 == RangeType.HighLow)
							{
								num47 = inHigh[num42 - 4] - inLow[num42 - 4];
							}
							else
							{
								double num50;
								if (rangeType2 == RangeType.Shadows)
								{
									double num30 = inClose[num42 - 4];
									double num31 = inOpen[num42 - 4];
									double num48 = ((!(num30 >= num31)) ? num31 : num30);
									double num49 = ((!(num30 >= num31)) ? num30 : num31);
									num50 = num49 - inLow[num42 - 4] + (inHigh[num42 - 4] - num48);
								}
								else
								{
									num50 = 0.0;
								}
								num47 = num50;
							}
							num46 = num47;
						}
						num45 = num46;
					}
					double num51 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					if (Math.Abs(inClose[num42 - 4] - inOpen[num42 - 4]) > candleSettings[0].factor * num45 / num51)
					{
						CandleSetting candleSetting2 = candleSettings[2];
						double num52 = candleSetting2.avgPeriod;
						double num53;
						if (num52 != 0.0)
						{
							num53 = array[3] / num52;
						}
						else
						{
							RangeType rangeType = candleSetting2.rangeType;
							double num54;
							if (rangeType == RangeType.RealBody)
							{
								num54 = Math.Abs(inClose[num42 - 3] - inOpen[num42 - 3]);
							}
							else
							{
								double num55;
								if (rangeType == RangeType.HighLow)
								{
									num55 = inHigh[num42 - 3] - inLow[num42 - 3];
								}
								else
								{
									double num60;
									if (rangeType == RangeType.Shadows)
									{
										double num56 = inClose[num42 - 3];
										double num57 = inOpen[num42 - 3];
										double num58 = ((!(num56 >= num57)) ? num57 : num56);
										double num59 = ((!(num56 >= num57)) ? num56 : num57);
										num60 = num59 - inLow[num42 - 3] + (inHigh[num42 - 3] - num58);
									}
									else
									{
										num60 = 0.0;
									}
									num55 = num60;
								}
								num54 = num55;
							}
							num53 = num54;
						}
						double num61 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						CandleSetting candleSetting3 = Globals.candleSettings[2];
						if (Math.Abs(inClose[num42 - 3] - inOpen[num42 - 3]) < candleSetting3.factor * num53 / num61)
						{
							num52 = candleSetting3.avgPeriod;
							double num62;
							if (num52 != 0.0)
							{
								num62 = array[2] / num52;
							}
							else
							{
								RangeType rangeType = candleSetting3.rangeType;
								double num63;
								if (rangeType == RangeType.RealBody)
								{
									num63 = Math.Abs(inClose[num42 - 2] - inOpen[num42 - 2]);
								}
								else
								{
									double num64;
									if (rangeType == RangeType.HighLow)
									{
										num64 = inHigh[num42 - 2] - inLow[num42 - 2];
									}
									else
									{
										double num69;
										if (rangeType == RangeType.Shadows)
										{
											double num65 = inClose[num42 - 2];
											double num66 = inOpen[num42 - 2];
											double num67 = ((!(num65 >= num66)) ? num66 : num65);
											double num68 = ((!(num65 >= num66)) ? num65 : num66);
											num69 = num68 - inLow[num42 - 2] + (inHigh[num42 - 2] - num67);
										}
										else
										{
											num69 = 0.0;
										}
										num64 = num69;
									}
									num63 = num64;
								}
								num62 = num63;
							}
							double num70 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							CandleSetting candleSetting4 = Globals.candleSettings[2];
							if (Math.Abs(inClose[num42 - 2] - inOpen[num42 - 2]) < candleSetting4.factor * num62 / num70)
							{
								num52 = candleSetting4.avgPeriod;
								double num71;
								if (num52 != 0.0)
								{
									num71 = array[1] / num52;
								}
								else
								{
									RangeType rangeType = candleSetting4.rangeType;
									double num72;
									if (rangeType == RangeType.RealBody)
									{
										num72 = Math.Abs(inClose[num42 - 1] - inOpen[num42 - 1]);
									}
									else
									{
										double num73;
										if (rangeType == RangeType.HighLow)
										{
											num73 = inHigh[num42 - 1] - inLow[num42 - 1];
										}
										else
										{
											double num78;
											if (rangeType == RangeType.Shadows)
											{
												double num74 = inClose[num42 - 1];
												double num75 = inOpen[num42 - 1];
												double num76 = ((!(num74 >= num75)) ? num75 : num74);
												double num77 = ((!(num74 >= num75)) ? num74 : num75);
												num78 = num77 - inLow[num42 - 1] + (inHigh[num42 - 1] - num76);
											}
											else
											{
												num78 = 0.0;
											}
											num73 = num78;
										}
										num72 = num73;
									}
									num71 = num72;
								}
								double num79 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								candleSettings = Globals.candleSettings;
								if (Math.Abs(inClose[num42 - 1] - inOpen[num42 - 1]) < candleSettings[2].factor * num71 / num79)
								{
									candleSetting = candleSettings[0];
									num44 = candleSetting.avgPeriod;
									double num80;
									if (num44 != 0.0)
									{
										num80 = array[0] / num44;
									}
									else
									{
										rangeType2 = candleSetting.rangeType;
										double num81;
										if (rangeType2 == RangeType.RealBody)
										{
											num81 = Math.Abs(inClose[num42] - inOpen[num42]);
										}
										else
										{
											double num82;
											if (rangeType2 == RangeType.HighLow)
											{
												num82 = inHigh[num42] - inLow[num42];
											}
											else
											{
												double num85;
												if (rangeType2 == RangeType.Shadows)
												{
													double num37 = inClose[num42];
													double num38 = inOpen[num42];
													double num83 = ((!(num37 >= num38)) ? num38 : num37);
													double num84 = ((!(num37 >= num38)) ? num37 : num38);
													num85 = num84 - inLow[num42] + (inHigh[num42] - num83);
												}
												else
												{
													num85 = 0.0;
												}
												num82 = num85;
											}
											num81 = num82;
										}
										num80 = num81;
									}
									double num86 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									if (Math.Abs(inClose[num42] - inOpen[num42]) > Globals.candleSettings[0].factor * num80 / num86)
									{
										double num30 = inClose[num42 - 4];
										double num31 = inOpen[num42 - 4];
										int num87 = ((num30 >= num31) ? 1 : (-1));
										double num56 = inClose[num42 - 3];
										double num57 = inOpen[num42 - 3];
										int num88 = ((num56 >= num57) ? 1 : (-1));
										if (num87 == -num88)
										{
											int num89 = ((num56 >= num57) ? 1 : (-1));
											double num65 = inClose[num42 - 2];
											double num66 = inOpen[num42 - 2];
											int num90 = ((num65 >= num66) ? 1 : (-1));
											if (num89 == num90)
											{
												int num91 = ((num65 >= num66) ? 1 : (-1));
												double num74 = inClose[num42 - 1];
												double num75 = inOpen[num42 - 1];
												int num92 = ((num74 >= num75) ? 1 : (-1));
												if (num91 == num92)
												{
													int num93 = ((num74 >= num75) ? 1 : (-1));
													double num37 = inClose[num42];
													double num38 = inOpen[num42];
													int num94 = ((num37 >= num38) ? 1 : (-1));
													if (num93 == -num94)
													{
														double num95 = ((!(num57 < num56)) ? num56 : num57);
														double num96 = inHigh[num42 - 4];
														if (num95 < num96)
														{
															double num97 = ((!(num57 > num56)) ? num56 : num57);
															double num98 = inLow[num42 - 4];
															if (num97 > num98)
															{
																double num99 = ((!(num66 < num65)) ? num65 : num66);
																if (num99 < num96)
																{
																	double num100 = ((!(num66 > num65)) ? num65 : num66);
																	if (num100 > num98)
																	{
																		double num101 = ((!(num75 < num74)) ? num74 : num75);
																		if (num101 < num96)
																		{
																			double num102 = ((!(num75 > num74)) ? num74 : num75);
																			if (num102 > num98)
																			{
																				int num103 = ((num30 >= num31) ? 1 : (-1));
																				int num104 = ((num30 >= num31) ? 1 : (-1));
																				if ((double)num103 * num65 < (double)num104 * num56)
																				{
																					int num105 = ((num30 >= num31) ? 1 : (-1));
																					int num106 = ((num30 >= num31) ? 1 : (-1));
																					if ((double)num105 * num74 < (double)num106 * num65)
																					{
																						int num107 = ((num30 >= num31) ? 1 : (-1));
																						int num108 = ((num30 >= num31) ? 1 : (-1));
																						if ((double)num107 * num38 > (double)num108 * num74)
																						{
																							int num109 = ((num30 >= num31) ? 1 : (-1));
																							int num110 = ((num30 >= num31) ? 1 : (-1));
																							if ((double)num109 * num37 > (double)num110 * num30)
																							{
																								int num111 = ((num30 >= num31) ? 1 : (-1));
																								outInteger[num43] = num111 * 100;
																								num43++;
																								goto IL_0c8b;
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num43] = 0;
					num43++;
					goto IL_0c8b;
					IL_0c8b:
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num112;
					if (rangeType2 == RangeType.RealBody)
					{
						num112 = Math.Abs(inClose[num42 - 4] - inOpen[num42 - 4]);
					}
					else
					{
						double num113;
						if (rangeType2 == RangeType.HighLow)
						{
							num113 = inHigh[num42 - 4] - inLow[num42 - 4];
						}
						else
						{
							double num116;
							if (rangeType2 == RangeType.Shadows)
							{
								double num30 = inClose[num42 - 4];
								double num31 = inOpen[num42 - 4];
								double num114 = ((!(num30 >= num31)) ? num31 : num30);
								double num115 = ((!(num30 >= num31)) ? num30 : num31);
								num116 = num115 - inLow[num42 - 4] + (inHigh[num42 - 4] - num114);
							}
							else
							{
								num116 = 0.0;
							}
							num113 = num116;
						}
						num112 = num113;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num117;
					if (rangeType2 == RangeType.RealBody)
					{
						num117 = Math.Abs(inClose[num3 - 4] - inOpen[num3 - 4]);
					}
					else
					{
						double num118;
						if (rangeType2 == RangeType.HighLow)
						{
							num118 = inHigh[num3 - 4] - inLow[num3 - 4];
						}
						else
						{
							double num123;
							if (rangeType2 == RangeType.Shadows)
							{
								double num119 = inClose[num3 - 4];
								double num120 = inOpen[num3 - 4];
								double num121 = ((!(num119 >= num120)) ? num120 : num119);
								double num122 = ((!(num119 >= num120)) ? num119 : num120);
								num123 = num122 - inLow[num3 - 4] + (inHigh[num3 - 4] - num121);
							}
							else
							{
								num123 = 0.0;
							}
							num118 = num123;
						}
						num117 = num118;
					}
					array[4] += num112 - num117;
					int num124 = 3;
					int num125 = num2 - 3;
					int num126 = num42 - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num127;
						if (rangeType == RangeType.RealBody)
						{
							num127 = Math.Abs(inClose[num125 + num126] - inOpen[num125 + num126]);
						}
						else
						{
							double num128;
							if (rangeType == RangeType.HighLow)
							{
								num128 = inHigh[num125 + num126] - inLow[num125 + num126];
							}
							else
							{
								double num133;
								if (rangeType == RangeType.Shadows)
								{
									double num129 = inClose[num125 + num126];
									double num130 = inOpen[num125 + num126];
									double num131 = ((!(num129 >= num130)) ? num130 : num129);
									double num132 = ((!(num129 >= num130)) ? num129 : num130);
									num133 = num132 - inLow[num125 + num126] + (inHigh[num125 + num126] - num131);
								}
								else
								{
									num133 = 0.0;
								}
								num128 = num133;
							}
							num127 = num128;
						}
						rangeType = Globals.candleSettings[2].rangeType;
						double num134;
						if (rangeType == RangeType.RealBody)
						{
							num134 = Math.Abs(inClose[num125] - inOpen[num125]);
						}
						else
						{
							double num135;
							if (rangeType == RangeType.HighLow)
							{
								num135 = inHigh[num125] - inLow[num125];
							}
							else
							{
								double num140;
								if (rangeType == RangeType.Shadows)
								{
									double num136 = inClose[num125];
									double num137 = inOpen[num125];
									double num138 = ((!(num136 >= num137)) ? num137 : num136);
									double num139 = ((!(num136 >= num137)) ? num136 : num137);
									num140 = num139 - inLow[num125] + (inHigh[num125] - num138);
								}
								else
								{
									num140 = 0.0;
								}
								num135 = num140;
							}
							num134 = num135;
						}
						array[num124] += num127 - num134;
						num124--;
						num125++;
					}
					while (num124 >= 1);
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num141;
					if (rangeType2 == RangeType.RealBody)
					{
						num141 = Math.Abs(inClose[num42] - inOpen[num42]);
					}
					else
					{
						double num142;
						if (rangeType2 == RangeType.HighLow)
						{
							num142 = inHigh[num42] - inLow[num42];
						}
						else
						{
							double num145;
							if (rangeType2 == RangeType.Shadows)
							{
								double num37 = inClose[num42];
								double num38 = inOpen[num42];
								double num143 = ((!(num37 >= num38)) ? num38 : num37);
								double num144 = ((!(num37 >= num38)) ? num37 : num38);
								num145 = num144 - inLow[num42] + (inHigh[num42] - num143);
							}
							else
							{
								num145 = 0.0;
							}
							num142 = num145;
						}
						num141 = num142;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num146;
					if (rangeType2 == RangeType.RealBody)
					{
						num146 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num147;
						if (rangeType2 == RangeType.HighLow)
						{
							num147 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num152;
							if (rangeType2 == RangeType.Shadows)
							{
								double num148 = inClose[num3];
								double num149 = inOpen[num3];
								double num150 = ((!(num148 >= num149)) ? num149 : num148);
								double num151 = ((!(num148 >= num149)) ? num148 : num149);
								num152 = num151 - inLow[num3] + (inHigh[num3] - num150);
							}
							else
							{
								num152 = 0.0;
							}
							num147 = num152;
						}
						num146 = num147;
					}
					array[0] += num141 - num146;
					num42++;
					num2++;
					num3++;
				}
				while (num42 <= endIdx);
				outNBElement = num43;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlSeperatingLinesLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[7].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[10].avgPeriod;
		int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num2 + 1;
	}

	public static RetCode CdlSeperatingLines(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlSeperatingLinesLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[7].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[10].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				if (num7 < startIdx)
				{
					int num22 = num7 - 1;
					int num23 = startIdx - num7;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[10].rangeType;
						float num24;
						if (rangeType3 == RangeType.RealBody)
						{
							num24 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num25;
							if (rangeType3 == RangeType.HighLow)
							{
								num25 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num30;
								if (rangeType3 == RangeType.Shadows)
								{
									float num26 = inClose[num22];
									float num27 = inOpen[num22];
									float num28 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
									float num29 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
									num30 = (float)((double)num29 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num28));
								}
								else
								{
									num30 = 0f;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num6 = (double)num24 + num6;
						num22++;
						num23--;
					}
					while (num23 != 0);
				}
				int num31 = startIdx;
				int num32 = 0;
				do
				{
					float num33 = inClose[num31 - 1];
					float num34 = inOpen[num31 - 1];
					int num35 = (((double)num33 >= (double)num34) ? 1 : (-1));
					int num36 = (((double)inClose[num31] >= (double)inOpen[num31]) ? 1 : (-1));
					RangeType rangeType;
					RangeType rangeType2;
					RangeType rangeType3;
					if (num35 == -num36)
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num37 = candleSetting.avgPeriod;
						double num38;
						if (num37 != 0.0)
						{
							num38 = num6 / num37;
						}
						else
						{
							rangeType3 = candleSetting.rangeType;
							float num39;
							if (rangeType3 == RangeType.RealBody)
							{
								num39 = (float)(double)Math.Abs((float)((double)num33 - (double)num34));
							}
							else
							{
								float num40;
								if (rangeType3 == RangeType.HighLow)
								{
									num40 = (float)((double)inHigh[num31 - 1] - (double)inLow[num31 - 1]);
								}
								else
								{
									float num43;
									if (rangeType3 == RangeType.Shadows)
									{
										float num41 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
										float num42 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
										num43 = (float)((double)num42 - (double)inLow[num31 - 1] + ((double)inHigh[num31 - 1] - (double)num41));
									}
									else
									{
										num43 = 0f;
									}
									num40 = num43;
								}
								num39 = num40;
							}
							num38 = num39;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[10];
						rangeType3 = candleSetting2.rangeType;
						double num44 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
						num34 = inOpen[num31 - 1];
						if ((double)inOpen[num31] <= candleSetting2.factor * num38 / num44 + (double)num34)
						{
							num37 = candleSetting2.avgPeriod;
							double num45;
							if (num37 != 0.0)
							{
								num45 = num6 / num37;
							}
							else
							{
								float num46;
								if (rangeType3 == RangeType.RealBody)
								{
									num46 = (float)(double)Math.Abs((float)((double)inClose[num31 - 1] - (double)num34));
								}
								else
								{
									float num47;
									if (rangeType3 == RangeType.HighLow)
									{
										num47 = (float)((double)inHigh[num31 - 1] - (double)inLow[num31 - 1]);
									}
									else
									{
										float num50;
										if (rangeType3 == RangeType.Shadows)
										{
											num33 = inClose[num31 - 1];
											float num48 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
											float num49 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
											num50 = (float)((double)num49 - (double)inLow[num31 - 1] + ((double)inHigh[num31 - 1] - (double)num48));
										}
										else
										{
											num50 = 0f;
										}
										num47 = num50;
									}
									num46 = num47;
								}
								num45 = num46;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[10];
							double num51 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							float num12 = inOpen[num31];
							if ((double)num12 >= (double)inOpen[num31 - 1] - candleSetting3.factor * num45 / num51)
							{
								CandleSetting candleSetting4 = candleSettings[0];
								double num52 = candleSetting4.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType2 = candleSetting4.rangeType;
									float num54;
									if (rangeType2 == RangeType.RealBody)
									{
										num54 = (float)(double)Math.Abs((float)((double)inClose[num31] - (double)num12));
									}
									else
									{
										float num55;
										if (rangeType2 == RangeType.HighLow)
										{
											num55 = (float)((double)inHigh[num31] - (double)inLow[num31]);
										}
										else
										{
											float num58;
											if (rangeType2 == RangeType.Shadows)
											{
												float num11 = inClose[num31];
												float num56 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
												float num57 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
												num58 = (float)((double)num57 - (double)inLow[num31] + ((double)inHigh[num31] - (double)num56));
											}
											else
											{
												num58 = 0f;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								candleSettings = Globals.candleSettings;
								if ((double)Math.Abs((float)((double)inClose[num31] - (double)inOpen[num31])) > candleSettings[0].factor * num53 / num59)
								{
									float num11 = inClose[num31];
									num12 = inOpen[num31];
									if ((double)num11 >= (double)num12)
									{
										float num60 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
										CandleSetting candleSetting5 = candleSettings[7];
										double num61 = candleSetting5.avgPeriod;
										double num62;
										if (num61 != 0.0)
										{
											num62 = num2 / num61;
										}
										else
										{
											rangeType = candleSetting5.rangeType;
											float num63;
											if (rangeType == RangeType.RealBody)
											{
												num63 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
											}
											else
											{
												float num64;
												if (rangeType == RangeType.HighLow)
												{
													num64 = (float)((double)inHigh[num31] - (double)inLow[num31]);
												}
												else
												{
													float num67;
													if (rangeType == RangeType.Shadows)
													{
														float num65 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
														float num66 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
														num67 = (float)((double)num66 - (double)inLow[num31] + ((double)inHigh[num31] - (double)num65));
													}
													else
													{
														num67 = 0f;
													}
													num64 = num67;
												}
												num63 = num64;
											}
											num62 = num63;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting6 = candleSettings[7];
										double num68 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)num60 - (double)inLow[num31] < candleSetting6.factor * num62 / num68)
										{
											goto IL_088f;
										}
									}
									num11 = inClose[num31];
									num12 = inOpen[num31];
									if (!((double)num11 >= (double)num12))
									{
										float num69 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
										CandleSetting candleSetting7 = candleSettings[7];
										double num61 = candleSetting7.avgPeriod;
										double num70;
										if (num61 != 0.0)
										{
											num70 = num2 / num61;
										}
										else
										{
											rangeType = candleSetting7.rangeType;
											float num71;
											if (rangeType == RangeType.RealBody)
											{
												num71 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
											}
											else
											{
												float num72;
												if (rangeType == RangeType.HighLow)
												{
													num72 = (float)((double)inHigh[num31] - (double)inLow[num31]);
												}
												else
												{
													float num75;
													if (rangeType == RangeType.Shadows)
													{
														float num73 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
														float num74 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
														num75 = (float)((double)num74 - (double)inLow[num31] + ((double)inHigh[num31] - (double)num73));
													}
													else
													{
														num75 = 0f;
													}
													num72 = num75;
												}
												num71 = num72;
											}
											num70 = num71;
										}
										CandleSetting candleSetting6 = Globals.candleSettings[7];
										double num76 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inHigh[num31] - (double)num69 < candleSetting6.factor * num70 / num76)
										{
											goto IL_088f;
										}
									}
								}
							}
						}
					}
					outInteger[num32] = 0;
					num32++;
					goto IL_08c0;
					IL_08c0:
					rangeType = Globals.candleSettings[7].rangeType;
					float num77;
					if (rangeType == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num31] - (double)inOpen[num31]));
					}
					else
					{
						float num78;
						if (rangeType == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num31] - (double)inLow[num31]);
						}
						else
						{
							float num81;
							if (rangeType == RangeType.Shadows)
							{
								float num11 = inClose[num31];
								float num12 = inOpen[num31];
								float num79 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num80 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num81 = (float)((double)num80 - (double)inLow[num31] + ((double)inHigh[num31] - (double)num79));
							}
							else
							{
								num81 = 0f;
							}
							num78 = num81;
						}
						num77 = num78;
					}
					rangeType = Globals.candleSettings[7].rangeType;
					float num82;
					if (rangeType == RangeType.RealBody)
					{
						num82 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num83;
						if (rangeType == RangeType.HighLow)
						{
							num83 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num88;
							if (rangeType == RangeType.Shadows)
							{
								float num84 = inClose[num3];
								float num85 = inOpen[num3];
								float num86 = ((!((double)num84 >= (double)num85)) ? num85 : num84);
								float num87 = ((!((double)num84 >= (double)num85)) ? num84 : num85);
								num88 = (float)((double)num87 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num83 = num88;
						}
						num82 = num83;
					}
					num2 = (double)(num77 - num82) + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num89;
					if (rangeType2 == RangeType.RealBody)
					{
						num89 = (float)(double)Math.Abs((float)((double)inClose[num31] - (double)inOpen[num31]));
					}
					else
					{
						float num90;
						if (rangeType2 == RangeType.HighLow)
						{
							num90 = (float)((double)inHigh[num31] - (double)inLow[num31]);
						}
						else
						{
							float num93;
							if (rangeType2 == RangeType.Shadows)
							{
								float num11 = inClose[num31];
								float num12 = inOpen[num31];
								float num91 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num92 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num93 = (float)((double)num92 - (double)inLow[num31] + ((double)inHigh[num31] - (double)num91));
							}
							else
							{
								num93 = 0f;
							}
							num90 = num93;
						}
						num89 = num90;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num94;
					if (rangeType2 == RangeType.RealBody)
					{
						num94 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num95;
						if (rangeType2 == RangeType.HighLow)
						{
							num95 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num100;
							if (rangeType2 == RangeType.Shadows)
							{
								float num96 = inClose[num5];
								float num97 = inOpen[num5];
								float num98 = ((!((double)num96 >= (double)num97)) ? num97 : num96);
								float num99 = ((!((double)num96 >= (double)num97)) ? num96 : num97);
								num100 = (float)((double)num99 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num98));
							}
							else
							{
								num100 = 0f;
							}
							num95 = num100;
						}
						num94 = num95;
					}
					num4 = (double)(num89 - num94) + num4;
					rangeType3 = Globals.candleSettings[10].rangeType;
					float num101;
					if (rangeType3 == RangeType.RealBody)
					{
						num101 = (float)(double)Math.Abs((float)((double)inClose[num31 - 1] - (double)inOpen[num31 - 1]));
					}
					else
					{
						float num102;
						if (rangeType3 == RangeType.HighLow)
						{
							num102 = (float)((double)inHigh[num31 - 1] - (double)inLow[num31 - 1]);
						}
						else
						{
							float num105;
							if (rangeType3 == RangeType.Shadows)
							{
								num33 = inClose[num31 - 1];
								num34 = inOpen[num31 - 1];
								float num103 = ((!((double)num33 >= (double)num34)) ? num34 : num33);
								float num104 = ((!((double)num33 >= (double)num34)) ? num33 : num34);
								num105 = (float)((double)num104 - (double)inLow[num31 - 1] + ((double)inHigh[num31 - 1] - (double)num103));
							}
							else
							{
								num105 = 0f;
							}
							num102 = num105;
						}
						num101 = num102;
					}
					rangeType3 = Globals.candleSettings[10].rangeType;
					float num106;
					if (rangeType3 == RangeType.RealBody)
					{
						num106 = (float)(double)Math.Abs((float)((double)inClose[num7 - 1] - (double)inOpen[num7 - 1]));
					}
					else
					{
						float num107;
						if (rangeType3 == RangeType.HighLow)
						{
							num107 = (float)((double)inHigh[num7 - 1] - (double)inLow[num7 - 1]);
						}
						else
						{
							float num112;
							if (rangeType3 == RangeType.Shadows)
							{
								float num108 = inClose[num7 - 1];
								float num109 = inOpen[num7 - 1];
								float num110 = ((!((double)num108 >= (double)num109)) ? num109 : num108);
								float num111 = ((!((double)num108 >= (double)num109)) ? num108 : num109);
								num112 = (float)((double)num111 - (double)inLow[num7 - 1] + ((double)inHigh[num7 - 1] - (double)num110));
							}
							else
							{
								num112 = 0f;
							}
							num107 = num112;
						}
						num106 = num107;
					}
					num6 = (double)(num101 - num106) + num6;
					num31++;
					num3++;
					num5++;
					num7++;
					continue;
					IL_088f:
					int num113 = (((double)inClose[num31] >= (double)inOpen[num31]) ? 1 : (-1));
					outInteger[num32] = num113 * 100;
					num32++;
					goto IL_08c0;
				}
				while (num31 <= endIdx);
				outNBElement = num32;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlSeperatingLines(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlSeperatingLinesLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[7].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[10].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[7].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				if (num7 < startIdx)
				{
					int num22 = num7 - 1;
					int num23 = startIdx - num7;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[10].rangeType;
						double num24;
						if (rangeType3 == RangeType.RealBody)
						{
							num24 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num25;
							if (rangeType3 == RangeType.HighLow)
							{
								num25 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num30;
								if (rangeType3 == RangeType.Shadows)
								{
									double num26 = inClose[num22];
									double num27 = inOpen[num22];
									double num28 = ((!(num26 >= num27)) ? num27 : num26);
									double num29 = ((!(num26 >= num27)) ? num26 : num27);
									num30 = num29 - inLow[num22] + (inHigh[num22] - num28);
								}
								else
								{
									num30 = 0.0;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num6 = num24 + num6;
						num22++;
						num23--;
					}
					while (num23 != 0);
				}
				int num31 = startIdx;
				int num32 = 0;
				do
				{
					double num33 = inClose[num31 - 1];
					double num34 = inOpen[num31 - 1];
					int num35 = ((num33 >= num34) ? 1 : (-1));
					int num36 = ((inClose[num31] >= inOpen[num31]) ? 1 : (-1));
					RangeType rangeType;
					RangeType rangeType2;
					RangeType rangeType3;
					if (num35 == -num36)
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num37 = candleSetting.avgPeriod;
						double num38;
						if (num37 != 0.0)
						{
							num38 = num6 / num37;
						}
						else
						{
							rangeType3 = candleSetting.rangeType;
							double num39;
							if (rangeType3 == RangeType.RealBody)
							{
								num39 = Math.Abs(num33 - num34);
							}
							else
							{
								double num40;
								if (rangeType3 == RangeType.HighLow)
								{
									num40 = inHigh[num31 - 1] - inLow[num31 - 1];
								}
								else
								{
									double num43;
									if (rangeType3 == RangeType.Shadows)
									{
										double num41 = ((!(num33 >= num34)) ? num34 : num33);
										double num42 = ((!(num33 >= num34)) ? num33 : num34);
										num43 = num42 - inLow[num31 - 1] + (inHigh[num31 - 1] - num41);
									}
									else
									{
										num43 = 0.0;
									}
									num40 = num43;
								}
								num39 = num40;
							}
							num38 = num39;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[10];
						rangeType3 = candleSetting2.rangeType;
						double num44 = ((rangeType3 != RangeType.Shadows) ? 1.0 : 2.0);
						num34 = inOpen[num31 - 1];
						if (inOpen[num31] <= candleSetting2.factor * num38 / num44 + num34)
						{
							num37 = candleSetting2.avgPeriod;
							double num45;
							if (num37 != 0.0)
							{
								num45 = num6 / num37;
							}
							else
							{
								double num46;
								if (rangeType3 == RangeType.RealBody)
								{
									num46 = Math.Abs(inClose[num31 - 1] - num34);
								}
								else
								{
									double num47;
									if (rangeType3 == RangeType.HighLow)
									{
										num47 = inHigh[num31 - 1] - inLow[num31 - 1];
									}
									else
									{
										double num50;
										if (rangeType3 == RangeType.Shadows)
										{
											num33 = inClose[num31 - 1];
											double num48 = ((!(num33 >= num34)) ? num34 : num33);
											double num49 = ((!(num33 >= num34)) ? num33 : num34);
											num50 = num49 - inLow[num31 - 1] + (inHigh[num31 - 1] - num48);
										}
										else
										{
											num50 = 0.0;
										}
										num47 = num50;
									}
									num46 = num47;
								}
								num45 = num46;
							}
							candleSettings = Globals.candleSettings;
							CandleSetting candleSetting3 = candleSettings[10];
							double num51 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							double num12 = inOpen[num31];
							if (num12 >= inOpen[num31 - 1] - candleSetting3.factor * num45 / num51)
							{
								CandleSetting candleSetting4 = candleSettings[0];
								double num52 = candleSetting4.avgPeriod;
								double num53;
								if (num52 != 0.0)
								{
									num53 = num4 / num52;
								}
								else
								{
									rangeType2 = candleSetting4.rangeType;
									double num54;
									if (rangeType2 == RangeType.RealBody)
									{
										num54 = Math.Abs(inClose[num31] - num12);
									}
									else
									{
										double num55;
										if (rangeType2 == RangeType.HighLow)
										{
											num55 = inHigh[num31] - inLow[num31];
										}
										else
										{
											double num58;
											if (rangeType2 == RangeType.Shadows)
											{
												double num11 = inClose[num31];
												double num56 = ((!(num11 >= num12)) ? num12 : num11);
												double num57 = ((!(num11 >= num12)) ? num11 : num12);
												num58 = num57 - inLow[num31] + (inHigh[num31] - num56);
											}
											else
											{
												num58 = 0.0;
											}
											num55 = num58;
										}
										num54 = num55;
									}
									num53 = num54;
								}
								double num59 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								candleSettings = Globals.candleSettings;
								if (Math.Abs(inClose[num31] - inOpen[num31]) > candleSettings[0].factor * num53 / num59)
								{
									double num11 = inClose[num31];
									num12 = inOpen[num31];
									if (num11 >= num12)
									{
										double num60 = num12;
										CandleSetting candleSetting5 = candleSettings[7];
										double num61 = candleSetting5.avgPeriod;
										double num62;
										if (num61 != 0.0)
										{
											num62 = num2 / num61;
										}
										else
										{
											rangeType = candleSetting5.rangeType;
											double num63;
											if (rangeType == RangeType.RealBody)
											{
												num63 = Math.Abs(num11 - num12);
											}
											else
											{
												double num64;
												if (rangeType == RangeType.HighLow)
												{
													num64 = inHigh[num31] - inLow[num31];
												}
												else
												{
													double num67;
													if (rangeType == RangeType.Shadows)
													{
														double num65 = num11;
														double num66 = num12;
														num67 = num66 - inLow[num31] + (inHigh[num31] - num65);
													}
													else
													{
														num67 = 0.0;
													}
													num64 = num67;
												}
												num63 = num64;
											}
											num62 = num63;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting6 = candleSettings[7];
										double num68 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (num60 - inLow[num31] < candleSetting6.factor * num62 / num68)
										{
											goto IL_07e3;
										}
									}
									num11 = inClose[num31];
									num12 = inOpen[num31];
									if (!(num11 >= num12))
									{
										double num69 = ((!(num11 >= num12)) ? num12 : num11);
										CandleSetting candleSetting7 = candleSettings[7];
										double num61 = candleSetting7.avgPeriod;
										double num70;
										if (num61 != 0.0)
										{
											num70 = num2 / num61;
										}
										else
										{
											rangeType = candleSetting7.rangeType;
											double num71;
											if (rangeType == RangeType.RealBody)
											{
												num71 = Math.Abs(num11 - num12);
											}
											else
											{
												double num72;
												if (rangeType == RangeType.HighLow)
												{
													num72 = inHigh[num31] - inLow[num31];
												}
												else
												{
													double num75;
													if (rangeType == RangeType.Shadows)
													{
														double num73 = ((!(num11 >= num12)) ? num12 : num11);
														double num74 = ((!(num11 >= num12)) ? num11 : num12);
														num75 = num74 - inLow[num31] + (inHigh[num31] - num73);
													}
													else
													{
														num75 = 0.0;
													}
													num72 = num75;
												}
												num71 = num72;
											}
											num70 = num71;
										}
										CandleSetting candleSetting6 = Globals.candleSettings[7];
										double num76 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inHigh[num31] - num69 < candleSetting6.factor * num70 / num76)
										{
											goto IL_07e3;
										}
									}
								}
							}
						}
					}
					outInteger[num32] = 0;
					num32++;
					goto IL_0812;
					IL_0812:
					rangeType = Globals.candleSettings[7].rangeType;
					double num77;
					if (rangeType == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num31] - inOpen[num31]);
					}
					else
					{
						double num78;
						if (rangeType == RangeType.HighLow)
						{
							num78 = inHigh[num31] - inLow[num31];
						}
						else
						{
							double num81;
							if (rangeType == RangeType.Shadows)
							{
								double num11 = inClose[num31];
								double num12 = inOpen[num31];
								double num79 = ((!(num11 >= num12)) ? num12 : num11);
								double num80 = ((!(num11 >= num12)) ? num11 : num12);
								num81 = num80 - inLow[num31] + (inHigh[num31] - num79);
							}
							else
							{
								num81 = 0.0;
							}
							num78 = num81;
						}
						num77 = num78;
					}
					rangeType = Globals.candleSettings[7].rangeType;
					double num82;
					if (rangeType == RangeType.RealBody)
					{
						num82 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num83;
						if (rangeType == RangeType.HighLow)
						{
							num83 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num88;
							if (rangeType == RangeType.Shadows)
							{
								double num84 = inClose[num3];
								double num85 = inOpen[num3];
								double num86 = ((!(num84 >= num85)) ? num85 : num84);
								double num87 = ((!(num84 >= num85)) ? num84 : num85);
								num88 = num87 - inLow[num3] + (inHigh[num3] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num83 = num88;
						}
						num82 = num83;
					}
					num2 = num77 - num82 + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num89;
					if (rangeType2 == RangeType.RealBody)
					{
						num89 = Math.Abs(inClose[num31] - inOpen[num31]);
					}
					else
					{
						double num90;
						if (rangeType2 == RangeType.HighLow)
						{
							num90 = inHigh[num31] - inLow[num31];
						}
						else
						{
							double num93;
							if (rangeType2 == RangeType.Shadows)
							{
								double num11 = inClose[num31];
								double num12 = inOpen[num31];
								double num91 = ((!(num11 >= num12)) ? num12 : num11);
								double num92 = ((!(num11 >= num12)) ? num11 : num12);
								num93 = num92 - inLow[num31] + (inHigh[num31] - num91);
							}
							else
							{
								num93 = 0.0;
							}
							num90 = num93;
						}
						num89 = num90;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num94;
					if (rangeType2 == RangeType.RealBody)
					{
						num94 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num95;
						if (rangeType2 == RangeType.HighLow)
						{
							num95 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num100;
							if (rangeType2 == RangeType.Shadows)
							{
								double num96 = inClose[num5];
								double num97 = inOpen[num5];
								double num98 = ((!(num96 >= num97)) ? num97 : num96);
								double num99 = ((!(num96 >= num97)) ? num96 : num97);
								num100 = num99 - inLow[num5] + (inHigh[num5] - num98);
							}
							else
							{
								num100 = 0.0;
							}
							num95 = num100;
						}
						num94 = num95;
					}
					num4 = num89 - num94 + num4;
					rangeType3 = Globals.candleSettings[10].rangeType;
					double num101;
					if (rangeType3 == RangeType.RealBody)
					{
						num101 = Math.Abs(inClose[num31 - 1] - inOpen[num31 - 1]);
					}
					else
					{
						double num102;
						if (rangeType3 == RangeType.HighLow)
						{
							num102 = inHigh[num31 - 1] - inLow[num31 - 1];
						}
						else
						{
							double num105;
							if (rangeType3 == RangeType.Shadows)
							{
								num33 = inClose[num31 - 1];
								num34 = inOpen[num31 - 1];
								double num103 = ((!(num33 >= num34)) ? num34 : num33);
								double num104 = ((!(num33 >= num34)) ? num33 : num34);
								num105 = num104 - inLow[num31 - 1] + (inHigh[num31 - 1] - num103);
							}
							else
							{
								num105 = 0.0;
							}
							num102 = num105;
						}
						num101 = num102;
					}
					rangeType3 = Globals.candleSettings[10].rangeType;
					double num106;
					if (rangeType3 == RangeType.RealBody)
					{
						num106 = Math.Abs(inClose[num7 - 1] - inOpen[num7 - 1]);
					}
					else
					{
						double num107;
						if (rangeType3 == RangeType.HighLow)
						{
							num107 = inHigh[num7 - 1] - inLow[num7 - 1];
						}
						else
						{
							double num112;
							if (rangeType3 == RangeType.Shadows)
							{
								double num108 = inClose[num7 - 1];
								double num109 = inOpen[num7 - 1];
								double num110 = ((!(num108 >= num109)) ? num109 : num108);
								double num111 = ((!(num108 >= num109)) ? num108 : num109);
								num112 = num111 - inLow[num7 - 1] + (inHigh[num7 - 1] - num110);
							}
							else
							{
								num112 = 0.0;
							}
							num107 = num112;
						}
						num106 = num107;
					}
					num6 = num101 - num106 + num6;
					num31++;
					num3++;
					num5++;
					num7++;
					continue;
					IL_07e3:
					int num113 = ((inClose[num31] >= inOpen[num31]) ? 1 : (-1));
					outInteger[num32] = num113 * 100;
					num32++;
					goto IL_0812;
				}
				while (num31 <= endIdx);
				outNBElement = num32;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlShootingStarLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[4].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[7].avgPeriod;
		int num2 = ((num <= avgPeriod3) ? avgPeriod3 : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num2 + 1;
	}

	public static RetCode CdlShootingStar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlShootingStarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = (double)num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num35;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num33 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num34 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num35 = (float)((double)num34 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22])) < candleSettings[2].factor * num30 / num36)
					{
						float num11 = inClose[num22];
						float num12 = inOpen[num22];
						float num37 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = (float)((double)inHigh[num22] - (double)inLow[num22]);
								}
								else
								{
									float num44;
									if (rangeType2 == RangeType.Shadows)
									{
										float num42 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
										float num43 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
										num44 = (float)((double)num43 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num42));
									}
									else
									{
										num44 = 0f;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num46 = inHigh[num22];
						if ((double)num46 - (double)num37 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							float num47 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[7];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								float num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
								}
								else
								{
									float num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = (float)((double)num46 - (double)inLow[num22]);
									}
									else
									{
										float num54;
										if (rangeType3 == RangeType.Shadows)
										{
											float num52 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
											float num53 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
											num54 = (float)((double)num53 - (double)inLow[num22] + ((double)num46 - (double)num52));
										}
										else
										{
											num54 = 0f;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[7];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num47 - (double)inLow[num22] < candleSetting5.factor * num49 / num55)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								float num56 = ((!((double)num12 < (double)num11)) ? num11 : num12);
								float num57 = inOpen[num22 - 1];
								float num58 = inClose[num22 - 1];
								float num59 = ((!((double)num57 > (double)num58)) ? num58 : num57);
								if ((double)num56 > (double)num59)
								{
									outInteger[num28] = -100;
									num28++;
									goto IL_0667;
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_0667;
					IL_0667:
					rangeType = Globals.candleSettings[2].rangeType;
					float num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num64;
							if (rangeType == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num62 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num63 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num64 = (float)((double)num63 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num71;
							if (rangeType == RangeType.Shadows)
							{
								float num67 = inClose[num3];
								float num68 = inOpen[num3];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = (double)(num60 - num65) + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num76;
							if (rangeType2 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num74 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num75 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num76 = (float)((double)num75 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num74));
							}
							else
							{
								num76 = 0f;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					float num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num83;
							if (rangeType2 == RangeType.Shadows)
							{
								float num79 = inClose[num5];
								float num80 = inOpen[num5];
								float num81 = ((!((double)num79 >= (double)num80)) ? num80 : num79);
								float num82 = ((!((double)num79 >= (double)num80)) ? num79 : num80);
								num83 = (float)((double)num82 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num81));
							}
							else
							{
								num83 = 0f;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num4 = (double)(num72 - num77) + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num88;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num86 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num87 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num88 = (float)((double)num87 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num86));
							}
							else
							{
								num88 = 0f;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num95;
							if (rangeType3 == RangeType.Shadows)
							{
								float num91 = inClose[num7];
								float num92 = inOpen[num7];
								float num93 = ((!((double)num91 >= (double)num92)) ? num92 : num91);
								float num94 = ((!((double)num91 >= (double)num92)) ? num91 : num92);
								num95 = (float)((double)num94 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num93));
							}
							else
							{
								num95 = 0f;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num6 = (double)(num84 - num89) + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlShootingStar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlShootingStarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[4].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[7].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[4].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num35;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num33 = ((!(num11 >= num12)) ? num12 : num11);
									double num34 = ((!(num11 >= num12)) ? num11 : num12);
									num35 = num34 - inLow[num22] + (inHigh[num22] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num22] - inOpen[num22]) < candleSettings[2].factor * num30 / num36)
					{
						double num11 = inClose[num22];
						double num12 = inOpen[num22];
						double num37 = ((!(num11 >= num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[4];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = Math.Abs(num11 - num12);
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = inHigh[num22] - inLow[num22];
								}
								else
								{
									double num44;
									if (rangeType2 == RangeType.Shadows)
									{
										double num42 = ((!(num11 >= num12)) ? num12 : num11);
										double num43 = ((!(num11 >= num12)) ? num11 : num12);
										num44 = num43 - inLow[num22] + (inHigh[num22] - num42);
									}
									else
									{
										num44 = 0.0;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[4];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num46 = inHigh[num22];
						if (num46 - num37 > candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							double num47 = ((!(num11 >= num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[7];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								double num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = Math.Abs(num11 - num12);
								}
								else
								{
									double num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = num46 - inLow[num22];
									}
									else
									{
										double num54;
										if (rangeType3 == RangeType.Shadows)
										{
											double num52 = ((!(num11 >= num12)) ? num12 : num11);
											double num53 = ((!(num11 >= num12)) ? num11 : num12);
											num54 = num53 - inLow[num22] + (num46 - num52);
										}
										else
										{
											num54 = 0.0;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[7];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num47 - inLow[num22] < candleSetting5.factor * num49 / num55)
							{
								num12 = inOpen[num22];
								num11 = inClose[num22];
								double num56 = ((!(num12 < num11)) ? num11 : num12);
								double num57 = inOpen[num22 - 1];
								double num58 = inClose[num22 - 1];
								double num59 = ((!(num57 > num58)) ? num58 : num57);
								if (num56 > num59)
								{
									outInteger[num28] = -100;
									num28++;
									goto IL_05fb;
								}
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_05fb;
					IL_05fb:
					rangeType = Globals.candleSettings[2].rangeType;
					double num60;
					if (rangeType == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num61;
						if (rangeType == RangeType.HighLow)
						{
							num61 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num64;
							if (rangeType == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num62 = ((!(num11 >= num12)) ? num12 : num11);
								double num63 = ((!(num11 >= num12)) ? num11 : num12);
								num64 = num63 - inLow[num22] + (inHigh[num22] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num65;
					if (rangeType == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num66;
						if (rangeType == RangeType.HighLow)
						{
							num66 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num71;
							if (rangeType == RangeType.Shadows)
							{
								double num67 = inClose[num3];
								double num68 = inOpen[num3];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num3] + (inHigh[num3] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num2 = num60 - num65 + num2;
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num72;
					if (rangeType2 == RangeType.RealBody)
					{
						num72 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num73;
						if (rangeType2 == RangeType.HighLow)
						{
							num73 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num76;
							if (rangeType2 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num74 = ((!(num11 >= num12)) ? num12 : num11);
								double num75 = ((!(num11 >= num12)) ? num11 : num12);
								num76 = num75 - inLow[num22] + (inHigh[num22] - num74);
							}
							else
							{
								num76 = 0.0;
							}
							num73 = num76;
						}
						num72 = num73;
					}
					rangeType2 = Globals.candleSettings[4].rangeType;
					double num77;
					if (rangeType2 == RangeType.RealBody)
					{
						num77 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num78;
						if (rangeType2 == RangeType.HighLow)
						{
							num78 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num83;
							if (rangeType2 == RangeType.Shadows)
							{
								double num79 = inClose[num5];
								double num80 = inOpen[num5];
								double num81 = ((!(num79 >= num80)) ? num80 : num79);
								double num82 = ((!(num79 >= num80)) ? num79 : num80);
								num83 = num82 - inLow[num5] + (inHigh[num5] - num81);
							}
							else
							{
								num83 = 0.0;
							}
							num78 = num83;
						}
						num77 = num78;
					}
					num4 = num72 - num77 + num4;
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num84;
					if (rangeType3 == RangeType.RealBody)
					{
						num84 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num85;
						if (rangeType3 == RangeType.HighLow)
						{
							num85 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num88;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num86 = ((!(num11 >= num12)) ? num12 : num11);
								double num87 = ((!(num11 >= num12)) ? num11 : num12);
								num88 = num87 - inLow[num22] + (inHigh[num22] - num86);
							}
							else
							{
								num88 = 0.0;
							}
							num85 = num88;
						}
						num84 = num85;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num89;
					if (rangeType3 == RangeType.RealBody)
					{
						num89 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num90;
						if (rangeType3 == RangeType.HighLow)
						{
							num90 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num95;
							if (rangeType3 == RangeType.Shadows)
							{
								double num91 = inClose[num7];
								double num92 = inOpen[num7];
								double num93 = ((!(num91 >= num92)) ? num92 : num91);
								double num94 = ((!(num91 >= num92)) ? num91 : num92);
								num95 = num94 - inLow[num7] + (inHigh[num7] - num93);
							}
							else
							{
								num95 = 0.0;
							}
							num90 = num95;
						}
						num89 = num90;
					}
					num6 = num84 - num89 + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlShortLineLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[6].avgPeriod;
		return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
	}

	public static RetCode CdlShortLine(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlShortLineLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[6].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[6].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = (double)num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num27;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num25 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num26 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num27 = (float)((double)num26 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14])) < candleSettings[2].factor * num22 / num28)
					{
						float num9 = inClose[num14];
						float num10 = inOpen[num14];
						float num29 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[6];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
							}
							else
							{
								float num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num36;
									if (rangeType2 == RangeType.Shadows)
									{
										float num34 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
										float num35 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
										num36 = (float)((double)num35 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num34));
									}
									else
									{
										num36 = 0f;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[6];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						float num38 = inHigh[num14];
						if ((double)num38 - (double)num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = (float)(double)Math.Abs((float)((double)num9 - (double)num10));
								}
								else
								{
									float num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = (float)((double)num38 - (double)inLow[num14]);
									}
									else
									{
										float num45;
										if (rangeType2 == RangeType.Shadows)
										{
											float num43 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
											float num44 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
											num45 = (float)((double)num44 - (double)inLow[num14] + ((double)num38 - (double)num43));
										}
										else
										{
											num45 = 0f;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[6];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num39 - (double)inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = (((double)inClose[num14] >= (double)inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_0559;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_0559;
					IL_0559:
					rangeType = Globals.candleSettings[2].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num52;
							if (rangeType == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num50 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num51 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num52 = (float)((double)num51 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num50));
							}
							else
							{
								num52 = 0f;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num59;
							if (rangeType == RangeType.Shadows)
							{
								float num55 = inClose[num3];
								float num56 = inOpen[num3];
								float num57 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
								float num58 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num59 = (float)((double)num58 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = (double)(num48 - num53) + num2;
					rangeType2 = Globals.candleSettings[6].rangeType;
					float num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num64;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num14];
								float num10 = inOpen[num14];
								float num62 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num63 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num64 = (float)((double)num63 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num62));
							}
							else
							{
								num64 = 0f;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[6].rangeType;
					float num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num71;
							if (rangeType2 == RangeType.Shadows)
							{
								float num67 = inClose[num5];
								float num68 = inOpen[num5];
								float num69 = ((!((double)num67 >= (double)num68)) ? num68 : num67);
								float num70 = ((!((double)num67 >= (double)num68)) ? num67 : num68);
								num71 = (float)((double)num70 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num69));
							}
							else
							{
								num71 = 0f;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = (double)(num60 - num65) + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlShortLine(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlShortLineLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[2].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[6].avgPeriod;
				int num6 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[6].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num4 = num15 + num4;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num21 = candleSetting.avgPeriod;
					double num22;
					RangeType rangeType;
					if (num21 != 0.0)
					{
						num22 = num2 / num21;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num23;
						if (rangeType == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num24;
							if (rangeType == RangeType.HighLow)
							{
								num24 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num27;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num25 = ((!(num9 >= num10)) ? num10 : num9);
									double num26 = ((!(num9 >= num10)) ? num9 : num10);
									num27 = num26 - inLow[num14] + (inHigh[num14] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num22 = num23;
					}
					double num28 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num14] - inOpen[num14]) < candleSettings[2].factor * num22 / num28)
					{
						double num9 = inClose[num14];
						double num10 = inOpen[num14];
						double num29 = ((!(num9 >= num10)) ? num10 : num9);
						CandleSetting candleSetting2 = candleSettings[6];
						double num30 = candleSetting2.avgPeriod;
						double num31;
						if (num30 != 0.0)
						{
							num31 = num4 / num30;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num32;
							if (rangeType2 == RangeType.RealBody)
							{
								num32 = Math.Abs(num9 - num10);
							}
							else
							{
								double num33;
								if (rangeType2 == RangeType.HighLow)
								{
									num33 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num36;
									if (rangeType2 == RangeType.Shadows)
									{
										double num34 = ((!(num9 >= num10)) ? num10 : num9);
										double num35 = ((!(num9 >= num10)) ? num9 : num10);
										num36 = num35 - inLow[num14] + (inHigh[num14] - num34);
									}
									else
									{
										num36 = 0.0;
									}
									num33 = num36;
								}
								num32 = num33;
							}
							num31 = num32;
						}
						CandleSetting candleSetting3 = Globals.candleSettings[6];
						rangeType2 = candleSetting3.rangeType;
						double num37 = ((rangeType2 != RangeType.Shadows) ? 1.0 : 2.0);
						double num38 = inHigh[num14];
						if (num38 - num29 < candleSetting3.factor * num31 / num37)
						{
							num9 = inClose[num14];
							num10 = inOpen[num14];
							double num39 = ((!(num9 >= num10)) ? num9 : num10);
							num30 = candleSetting3.avgPeriod;
							double num40;
							if (num30 != 0.0)
							{
								num40 = num4 / num30;
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.RealBody)
								{
									num41 = Math.Abs(num9 - num10);
								}
								else
								{
									double num42;
									if (rangeType2 == RangeType.HighLow)
									{
										num42 = num38 - inLow[num14];
									}
									else
									{
										double num45;
										if (rangeType2 == RangeType.Shadows)
										{
											double num43 = ((!(num9 >= num10)) ? num10 : num9);
											double num44 = ((!(num9 >= num10)) ? num9 : num10);
											num45 = num44 - inLow[num14] + (num38 - num43);
										}
										else
										{
											num45 = 0.0;
										}
										num42 = num45;
									}
									num41 = num42;
								}
								num40 = num41;
							}
							CandleSetting candleSetting4 = Globals.candleSettings[6];
							double num46 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num39 - inLow[num14] < candleSetting4.factor * num40 / num46)
							{
								int num47 = ((inClose[num14] >= inOpen[num14]) ? 1 : (-1));
								outInteger[num20] = num47 * 100;
								num20++;
								goto IL_04ff;
							}
						}
					}
					outInteger[num20] = 0;
					num20++;
					goto IL_04ff;
					IL_04ff:
					rangeType = Globals.candleSettings[2].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num52;
							if (rangeType == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num50 = ((!(num9 >= num10)) ? num10 : num9);
								double num51 = ((!(num9 >= num10)) ? num9 : num10);
								num52 = num51 - inLow[num14] + (inHigh[num14] - num50);
							}
							else
							{
								num52 = 0.0;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num59;
							if (rangeType == RangeType.Shadows)
							{
								double num55 = inClose[num3];
								double num56 = inOpen[num3];
								double num57 = ((!(num55 >= num56)) ? num56 : num55);
								double num58 = ((!(num55 >= num56)) ? num55 : num56);
								num59 = num58 - inLow[num3] + (inHigh[num3] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = num48 - num53 + num2;
					rangeType2 = Globals.candleSettings[6].rangeType;
					double num60;
					if (rangeType2 == RangeType.RealBody)
					{
						num60 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num61;
						if (rangeType2 == RangeType.HighLow)
						{
							num61 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num64;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num14];
								double num10 = inOpen[num14];
								double num62 = ((!(num9 >= num10)) ? num10 : num9);
								double num63 = ((!(num9 >= num10)) ? num9 : num10);
								num64 = num63 - inLow[num14] + (inHigh[num14] - num62);
							}
							else
							{
								num64 = 0.0;
							}
							num61 = num64;
						}
						num60 = num61;
					}
					rangeType2 = Globals.candleSettings[6].rangeType;
					double num65;
					if (rangeType2 == RangeType.RealBody)
					{
						num65 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num66;
						if (rangeType2 == RangeType.HighLow)
						{
							num66 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num71;
							if (rangeType2 == RangeType.Shadows)
							{
								double num67 = inClose[num5];
								double num68 = inOpen[num5];
								double num69 = ((!(num67 >= num68)) ? num68 : num67);
								double num70 = ((!(num67 >= num68)) ? num67 : num68);
								num71 = num70 - inLow[num5] + (inHigh[num5] - num69);
							}
							else
							{
								num71 = 0.0;
							}
							num66 = num71;
						}
						num65 = num66;
					}
					num4 = num60 - num65 + num4;
					num14++;
					num3++;
					num5++;
				}
				while (num14 <= endIdx);
				outNBElement = num20;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlSpinningTopLookback()
	{
		return Globals.candleSettings[2].avgPeriod;
	}

	public static RetCode CdlSpinningTop(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlSpinningTopLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[2].avgPeriod;
				int num4 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = (double)num5 + num2;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num12 = 0;
				int num13 = num3;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num20;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num18 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num19 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num20 = (float)((double)num19 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num18));
								}
								else
								{
									num20 = 0f;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num21 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					if ((double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4])) < Globals.candleSettings[2].factor * num15 / num21)
					{
						float num7 = inClose[num4];
						float num8 = inOpen[num4];
						float num22 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
						double num23 = (double)inHigh[num4] - (double)num22;
						if (num23 > (double)Math.Abs((float)((double)num7 - (double)num8)))
						{
							num7 = inClose[num4];
							num8 = inOpen[num4];
							float num24 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
							double num25 = (double)num24 - (double)inLow[num4];
							if (num25 > (double)Math.Abs((float)((double)num7 - (double)num8)))
							{
								int num26 = (((double)inClose[num4] >= (double)inOpen[num4]) ? 1 : (-1));
								outInteger[num12] = num26 * 100;
								num12++;
								goto IL_02d8;
							}
						}
					}
					outInteger[num12] = 0;
					num12++;
					goto IL_02d8;
					IL_02d8:
					rangeType = Globals.candleSettings[2].rangeType;
					float num27;
					if (rangeType == RangeType.RealBody)
					{
						num27 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num28;
						if (rangeType == RangeType.HighLow)
						{
							num28 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num31;
							if (rangeType == RangeType.Shadows)
							{
								float num7 = inClose[num4];
								float num8 = inOpen[num4];
								float num29 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
								float num30 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
								num31 = (float)((double)num30 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num29));
							}
							else
							{
								num31 = 0f;
							}
							num28 = num31;
						}
						num27 = num28;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					float num32;
					if (rangeType == RangeType.RealBody)
					{
						num32 = (float)(double)Math.Abs((float)((double)inClose[num13] - (double)inOpen[num13]));
					}
					else
					{
						float num33;
						if (rangeType == RangeType.HighLow)
						{
							num33 = (float)((double)inHigh[num13] - (double)inLow[num13]);
						}
						else
						{
							float num38;
							if (rangeType == RangeType.Shadows)
							{
								float num34 = inClose[num13];
								float num35 = inOpen[num13];
								float num36 = ((!((double)num34 >= (double)num35)) ? num35 : num34);
								float num37 = ((!((double)num34 >= (double)num35)) ? num34 : num35);
								num38 = (float)((double)num37 - (double)inLow[num13] + ((double)inHigh[num13] - (double)num36));
							}
							else
							{
								num38 = 0f;
							}
							num33 = num38;
						}
						num32 = num33;
					}
					num2 = (double)(num27 - num32) + num2;
					num4++;
					num13++;
				}
				while (num4 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlSpinningTop(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlSpinningTopLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[2].avgPeriod;
				int num4 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[2].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4] + (inHigh[num4] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = num5 + num2;
						num4++;
					}
					while (num4 < startIdx);
				}
				int num12 = 0;
				int num13 = num3;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[2];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num20;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num18 = ((!(num7 >= num8)) ? num8 : num7);
									double num19 = ((!(num7 >= num8)) ? num7 : num8);
									num20 = num19 - inLow[num4] + (inHigh[num4] - num18);
								}
								else
								{
									num20 = 0.0;
								}
								num17 = num20;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num21 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					if (Math.Abs(inClose[num4] - inOpen[num4]) < Globals.candleSettings[2].factor * num15 / num21)
					{
						double num7 = inClose[num4];
						double num8 = inOpen[num4];
						double num22 = ((!(num7 >= num8)) ? num8 : num7);
						double num23 = inHigh[num4] - num22;
						if (num23 > Math.Abs(num7 - num8))
						{
							num7 = inClose[num4];
							num8 = inOpen[num4];
							double num24 = ((!(num7 >= num8)) ? num7 : num8);
							double num25 = num24 - inLow[num4];
							if (num25 > Math.Abs(num7 - num8))
							{
								int num26 = ((inClose[num4] >= inOpen[num4]) ? 1 : (-1));
								outInteger[num12] = num26 * 100;
								num12++;
								goto IL_02a6;
							}
						}
					}
					outInteger[num12] = 0;
					num12++;
					goto IL_02a6;
					IL_02a6:
					rangeType = Globals.candleSettings[2].rangeType;
					double num27;
					if (rangeType == RangeType.RealBody)
					{
						num27 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num28;
						if (rangeType == RangeType.HighLow)
						{
							num28 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num31;
							if (rangeType == RangeType.Shadows)
							{
								double num7 = inClose[num4];
								double num8 = inOpen[num4];
								double num29 = ((!(num7 >= num8)) ? num8 : num7);
								double num30 = ((!(num7 >= num8)) ? num7 : num8);
								num31 = num30 - inLow[num4] + (inHigh[num4] - num29);
							}
							else
							{
								num31 = 0.0;
							}
							num28 = num31;
						}
						num27 = num28;
					}
					rangeType = Globals.candleSettings[2].rangeType;
					double num32;
					if (rangeType == RangeType.RealBody)
					{
						num32 = Math.Abs(inClose[num13] - inOpen[num13]);
					}
					else
					{
						double num33;
						if (rangeType == RangeType.HighLow)
						{
							num33 = inHigh[num13] - inLow[num13];
						}
						else
						{
							double num38;
							if (rangeType == RangeType.Shadows)
							{
								double num34 = inClose[num13];
								double num35 = inOpen[num13];
								double num36 = ((!(num34 >= num35)) ? num35 : num34);
								double num37 = ((!(num34 >= num35)) ? num34 : num35);
								num38 = num37 - inLow[num13] + (inHigh[num13] - num36);
							}
							else
							{
								num38 = 0.0;
							}
							num33 = num38;
						}
						num32 = num33;
					}
					num2 = num27 - num32 + num2;
					num4++;
					num13++;
				}
				while (num4 <= endIdx);
				outNBElement = num12;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlStalledPatternLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[0].avgPeriod;
		int avgPeriod2 = candleSettings[2].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[7].avgPeriod;
		int avgPeriod4 = candleSettings[8].avgPeriod;
		int num2 = ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3);
		int num3 = ((num <= num2) ? ((avgPeriod3 <= avgPeriod4) ? avgPeriod4 : avgPeriod3) : ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod));
		return num3 + 2;
	}

	public static RetCode CdlStalledPattern(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlStalledPatternLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[0].avgPeriod;
				double num3 = 0.0;
				int num4 = startIdx - candleSettings[2].avgPeriod;
				double num5 = 0.0;
				int num6 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num7 = startIdx - candleSettings[8].avgPeriod;
				if (num2 < startIdx)
				{
					int num8 = num2 - 1;
					int num9 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num10;
						if (rangeType == RangeType.RealBody)
						{
							num10 = (float)(double)Math.Abs((float)((double)inClose[num8 - 1] - (double)inOpen[num8 - 1]));
						}
						else
						{
							float num11;
							if (rangeType == RangeType.HighLow)
							{
								num11 = (float)((double)inHigh[num8 - 1] - (double)inLow[num8 - 1]);
							}
							else
							{
								float num16;
								if (rangeType == RangeType.Shadows)
								{
									float num12 = inClose[num8 - 1];
									float num13 = inOpen[num8 - 1];
									float num14 = ((!((double)num12 >= (double)num13)) ? num13 : num12);
									float num15 = ((!((double)num12 >= (double)num13)) ? num12 : num13);
									num16 = (float)((double)num15 - (double)inLow[num8 - 1] + ((double)inHigh[num8 - 1] - (double)num14));
								}
								else
								{
									num16 = 0f;
								}
								num11 = num16;
							}
							num10 = num11;
						}
						array[2] += num10;
						rangeType = Globals.candleSettings[0].rangeType;
						float num17;
						if (rangeType == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num18;
							if (rangeType == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num23;
								if (rangeType == RangeType.Shadows)
								{
									float num19 = inClose[num8];
									float num20 = inOpen[num8];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						array[1] += num17;
						num8++;
						num9--;
					}
					while (num9 != 0);
				}
				int num24 = num4;
				if (num4 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = (float)(double)Math.Abs((float)((double)inClose[num24] - (double)inOpen[num24]));
						}
						else
						{
							float num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = (float)((double)inHigh[num24] - (double)inLow[num24]);
							}
							else
							{
								float num31;
								if (rangeType2 == RangeType.Shadows)
								{
									float num27 = inClose[num24];
									float num28 = inOpen[num24];
									float num29 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
									float num30 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
									num31 = (float)((double)num30 - (double)inLow[num24] + ((double)inHigh[num24] - (double)num29));
								}
								else
								{
									num31 = 0f;
								}
								num26 = num31;
							}
							num25 = num26;
						}
						num3 = (double)num25 + num3;
						num24++;
					}
					while (num24 < startIdx);
				}
				if (num6 < startIdx)
				{
					int num32 = num6 - 1;
					int num33 = startIdx - num6;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						float num34;
						if (rangeType3 == RangeType.RealBody)
						{
							num34 = (float)(double)Math.Abs((float)((double)inClose[num32] - (double)inOpen[num32]));
						}
						else
						{
							float num35;
							if (rangeType3 == RangeType.HighLow)
							{
								num35 = (float)((double)inHigh[num32] - (double)inLow[num32]);
							}
							else
							{
								float num40;
								if (rangeType3 == RangeType.Shadows)
								{
									float num36 = inClose[num32];
									float num37 = inOpen[num32];
									float num38 = ((!((double)num36 >= (double)num37)) ? num37 : num36);
									float num39 = ((!((double)num36 >= (double)num37)) ? num36 : num37);
									num40 = (float)((double)num39 - (double)inLow[num32] + ((double)inHigh[num32] - (double)num38));
								}
								else
								{
									num40 = 0f;
								}
								num35 = num40;
							}
							num34 = num35;
						}
						num5 = (double)num34 + num5;
						num32++;
						num33--;
					}
					while (num33 != 0);
				}
				if (num7 < startIdx)
				{
					int num41 = num7 - 1;
					int num42 = startIdx - num7;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						float num43;
						if (rangeType4 == RangeType.RealBody)
						{
							num43 = (float)(double)Math.Abs((float)((double)inClose[num41 - 1] - (double)inOpen[num41 - 1]));
						}
						else
						{
							float num44;
							if (rangeType4 == RangeType.HighLow)
							{
								num44 = (float)((double)inHigh[num41 - 1] - (double)inLow[num41 - 1]);
							}
							else
							{
								float num49;
								if (rangeType4 == RangeType.Shadows)
								{
									float num45 = inClose[num41 - 1];
									float num46 = inOpen[num41 - 1];
									float num47 = ((!((double)num45 >= (double)num46)) ? num46 : num45);
									float num48 = ((!((double)num45 >= (double)num46)) ? num45 : num46);
									num49 = (float)((double)num48 - (double)inLow[num41 - 1] + ((double)inHigh[num41 - 1] - (double)num47));
								}
								else
								{
									num49 = 0f;
								}
								num44 = num49;
							}
							num43 = num44;
						}
						array2[2] += num43;
						rangeType4 = Globals.candleSettings[8].rangeType;
						float num50;
						if (rangeType4 == RangeType.RealBody)
						{
							num50 = (float)(double)Math.Abs((float)((double)inClose[num41] - (double)inOpen[num41]));
						}
						else
						{
							float num51;
							if (rangeType4 == RangeType.HighLow)
							{
								num51 = (float)((double)inHigh[num41] - (double)inLow[num41]);
							}
							else
							{
								float num56;
								if (rangeType4 == RangeType.Shadows)
								{
									float num52 = inClose[num41];
									float num53 = inOpen[num41];
									float num54 = ((!((double)num52 >= (double)num53)) ? num53 : num52);
									float num55 = ((!((double)num52 >= (double)num53)) ? num52 : num53);
									num56 = (float)((double)num55 - (double)inLow[num41] + ((double)inHigh[num41] - (double)num54));
								}
								else
								{
									num56 = 0f;
								}
								num51 = num56;
							}
							num50 = num51;
						}
						array2[1] += num50;
						num41++;
						num42--;
					}
					while (num42 != 0);
				}
				int num57 = startIdx;
				int num58 = 0;
				do
				{
					float num59 = inClose[num57 - 2];
					float num60 = inOpen[num57 - 2];
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)num59 >= (double)num60)
					{
						float num61 = inClose[num57 - 1];
						if ((double)num61 >= (double)inOpen[num57 - 1])
						{
							float num27 = inClose[num57];
							if ((double)num27 >= (double)inOpen[num57] && (double)num27 > (double)num61 && (double)num61 > (double)num59)
							{
								CandleSetting candleSetting = Globals.candleSettings[0];
								double num62 = candleSetting.avgPeriod;
								double num63;
								if (num62 != 0.0)
								{
									num63 = array[2] / num62;
								}
								else
								{
									RangeType rangeType = candleSetting.rangeType;
									float num64;
									if (rangeType == RangeType.RealBody)
									{
										num64 = (float)(double)Math.Abs((float)((double)num59 - (double)num60));
									}
									else
									{
										float num65;
										if (rangeType == RangeType.HighLow)
										{
											num65 = (float)((double)inHigh[num57 - 2] - (double)inLow[num57 - 2]);
										}
										else
										{
											float num68;
											if (rangeType == RangeType.Shadows)
											{
												float num66 = ((!((double)num59 >= (double)num60)) ? num60 : num59);
												float num67 = ((!((double)num59 >= (double)num60)) ? num59 : num60);
												num68 = (float)((double)num67 - (double)inLow[num57 - 2] + ((double)inHigh[num57 - 2] - (double)num66));
											}
											else
											{
												num68 = 0f;
											}
											num65 = num68;
										}
										num64 = num65;
									}
									num63 = num64;
								}
								double num69 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								CandleSetting candleSetting2 = Globals.candleSettings[0];
								if ((double)Math.Abs((float)((double)inClose[num57 - 2] - (double)inOpen[num57 - 2])) > candleSetting2.factor * num63 / num69)
								{
									num62 = candleSetting2.avgPeriod;
									double num70;
									if (num62 != 0.0)
									{
										num70 = array[1] / num62;
									}
									else
									{
										RangeType rangeType = candleSetting2.rangeType;
										float num71;
										if (rangeType == RangeType.RealBody)
										{
											num71 = (float)(double)Math.Abs((float)((double)inClose[num57 - 1] - (double)inOpen[num57 - 1]));
										}
										else
										{
											float num72;
											if (rangeType == RangeType.HighLow)
											{
												num72 = (float)((double)inHigh[num57 - 1] - (double)inLow[num57 - 1]);
											}
											else
											{
												float num76;
												if (rangeType == RangeType.Shadows)
												{
													num61 = inClose[num57 - 1];
													float num73 = inOpen[num57 - 1];
													float num74 = ((!((double)num61 >= (double)num73)) ? num73 : num61);
													float num75 = ((!((double)num61 >= (double)num73)) ? num61 : num73);
													num76 = (float)((double)num75 - (double)inLow[num57 - 1] + ((double)inHigh[num57 - 1] - (double)num74));
												}
												else
												{
													num76 = 0f;
												}
												num72 = num76;
											}
											num71 = num72;
										}
										num70 = num71;
									}
									double num77 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if ((double)Math.Abs((float)((double)inClose[num57 - 1] - (double)inOpen[num57 - 1])) > candleSettings[0].factor * num70 / num77)
									{
										num61 = inClose[num57 - 1];
										float num73 = inOpen[num57 - 1];
										float num78 = ((!((double)num61 >= (double)num73)) ? num73 : num61);
										CandleSetting candleSetting3 = candleSettings[7];
										double num79 = candleSetting3.avgPeriod;
										double num80;
										if (num79 != 0.0)
										{
											num80 = num5 / num79;
										}
										else
										{
											rangeType3 = candleSetting3.rangeType;
											float num81;
											if (rangeType3 == RangeType.RealBody)
											{
												num81 = (float)(double)Math.Abs((float)((double)num61 - (double)num73));
											}
											else
											{
												float num82;
												if (rangeType3 == RangeType.HighLow)
												{
													num82 = (float)((double)inHigh[num57 - 1] - (double)inLow[num57 - 1]);
												}
												else
												{
													float num85;
													if (rangeType3 == RangeType.Shadows)
													{
														float num83 = ((!((double)num61 >= (double)num73)) ? num73 : num61);
														float num84 = ((!((double)num61 >= (double)num73)) ? num61 : num73);
														num85 = (float)((double)num84 - (double)inLow[num57 - 1] + ((double)inHigh[num57 - 1] - (double)num83));
													}
													else
													{
														num85 = 0f;
													}
													num82 = num85;
												}
												num81 = num82;
											}
											num80 = num81;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num86 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if ((double)inHigh[num57 - 1] - (double)num78 < candleSetting4.factor * num80 / num86)
										{
											num60 = inOpen[num57 - 2];
											if ((double)inOpen[num57 - 1] > (double)num60)
											{
												CandleSetting candleSetting5 = candleSettings[8];
												double num87 = candleSetting5.avgPeriod;
												double num88;
												if (num87 != 0.0)
												{
													num88 = array2[2] / num87;
												}
												else
												{
													RangeType rangeType4 = candleSetting5.rangeType;
													float num89;
													if (rangeType4 == RangeType.RealBody)
													{
														num89 = (float)(double)Math.Abs((float)((double)inClose[num57 - 2] - (double)num60));
													}
													else
													{
														float num90;
														if (rangeType4 == RangeType.HighLow)
														{
															num90 = (float)((double)inHigh[num57 - 2] - (double)inLow[num57 - 2]);
														}
														else
														{
															float num93;
															if (rangeType4 == RangeType.Shadows)
															{
																num59 = inClose[num57 - 2];
																float num91 = ((!((double)num59 >= (double)num60)) ? num60 : num59);
																float num92 = ((!((double)num59 >= (double)num60)) ? num59 : num60);
																num93 = (float)((double)num92 - (double)inLow[num57 - 2] + ((double)inHigh[num57 - 2] - (double)num91));
															}
															else
															{
																num93 = 0f;
															}
															num90 = num93;
														}
														num89 = num90;
													}
													num88 = num89;
												}
												candleSettings = Globals.candleSettings;
												CandleSetting candleSetting6 = candleSettings[8];
												double num94 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												if ((double)inOpen[num57 - 1] <= candleSetting6.factor * num88 / num94 + (double)inClose[num57 - 2])
												{
													CandleSetting candleSetting7 = candleSettings[2];
													double num95 = candleSetting7.avgPeriod;
													double num96;
													if (num95 != 0.0)
													{
														num96 = num3 / num95;
													}
													else
													{
														rangeType2 = candleSetting7.rangeType;
														float num97;
														if (rangeType2 == RangeType.RealBody)
														{
															num97 = (float)(double)Math.Abs((float)((double)inClose[num57] - (double)inOpen[num57]));
														}
														else
														{
															float num98;
															if (rangeType2 == RangeType.HighLow)
															{
																num98 = (float)((double)inHigh[num57] - (double)inLow[num57]);
															}
															else
															{
																float num101;
																if (rangeType2 == RangeType.Shadows)
																{
																	num27 = inClose[num57];
																	float num28 = inOpen[num57];
																	float num99 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
																	float num100 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
																	num101 = (float)((double)num100 - (double)inLow[num57] + ((double)inHigh[num57] - (double)num99));
																}
																else
																{
																	num101 = 0f;
																}
																num98 = num101;
															}
															num97 = num98;
														}
														num96 = num97;
													}
													double num102 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
													candleSettings = Globals.candleSettings;
													if ((double)Math.Abs((float)((double)inClose[num57] - (double)inOpen[num57])) < candleSettings[2].factor * num96 / num102)
													{
														CandleSetting candleSetting8 = candleSettings[8];
														num87 = candleSetting8.avgPeriod;
														double num103;
														if (num87 != 0.0)
														{
															num103 = array2[1] / num87;
														}
														else
														{
															RangeType rangeType4 = candleSetting8.rangeType;
															float num104;
															if (rangeType4 == RangeType.RealBody)
															{
																num104 = (float)(double)Math.Abs((float)((double)inClose[num57 - 1] - (double)inOpen[num57 - 1]));
															}
															else
															{
																float num105;
																if (rangeType4 == RangeType.HighLow)
																{
																	num105 = (float)((double)inHigh[num57 - 1] - (double)inLow[num57 - 1]);
																}
																else
																{
																	float num108;
																	if (rangeType4 == RangeType.Shadows)
																	{
																		num61 = inClose[num57 - 1];
																		num73 = inOpen[num57 - 1];
																		float num106 = ((!((double)num61 >= (double)num73)) ? num73 : num61);
																		float num107 = ((!((double)num61 >= (double)num73)) ? num61 : num73);
																		num108 = (float)((double)num107 - (double)inLow[num57 - 1] + ((double)inHigh[num57 - 1] - (double)num106));
																	}
																	else
																	{
																		num108 = 0f;
																	}
																	num105 = num108;
																}
																num104 = num105;
															}
															num103 = num104;
														}
														double num109 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
														double num110 = inClose[num57 - 1];
														double num111 = inOpen[num57];
														if (num111 >= num110 - (double)Math.Abs((float)((double)inClose[num57] - num111)) - Globals.candleSettings[8].factor * num103 / num109)
														{
															outInteger[num58] = -100;
															num58++;
															goto IL_0e99;
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num58] = 0;
					num58++;
					goto IL_0e99;
					IL_0e99:
					int num112 = 2;
					int num113 = num57 - 2;
					int num114 = num2 - num57;
					int num115 = num7 - num57;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num116;
						if (rangeType == RangeType.RealBody)
						{
							num116 = (float)(double)Math.Abs((float)((double)inClose[num113] - (double)inOpen[num113]));
						}
						else
						{
							float num117;
							if (rangeType == RangeType.HighLow)
							{
								num117 = (float)((double)inHigh[num113] - (double)inLow[num113]);
							}
							else
							{
								float num122;
								if (rangeType == RangeType.Shadows)
								{
									float num118 = inClose[num113];
									float num119 = inOpen[num113];
									float num120 = ((!((double)num118 >= (double)num119)) ? num119 : num118);
									float num121 = ((!((double)num118 >= (double)num119)) ? num118 : num119);
									num122 = (float)((double)num121 - (double)inLow[num113] + ((double)inHigh[num113] - (double)num120));
								}
								else
								{
									num122 = 0f;
								}
								num117 = num122;
							}
							num116 = num117;
						}
						rangeType = Globals.candleSettings[0].rangeType;
						float num123;
						if (rangeType == RangeType.RealBody)
						{
							num123 = (float)(double)Math.Abs((float)((double)inClose[num113 + num114] - (double)inOpen[num113 + num114]));
						}
						else
						{
							float num124;
							if (rangeType == RangeType.HighLow)
							{
								num124 = (float)((double)inHigh[num113 + num114] - (double)inLow[num113 + num114]);
							}
							else
							{
								float num129;
								if (rangeType == RangeType.Shadows)
								{
									float num125 = inClose[num113 + num114];
									float num126 = inOpen[num113 + num114];
									float num127 = ((!((double)num125 >= (double)num126)) ? num126 : num125);
									float num128 = ((!((double)num125 >= (double)num126)) ? num125 : num126);
									num129 = (float)((double)num128 - (double)inLow[num113 + num114] + ((double)inHigh[num113 + num114] - (double)num127));
								}
								else
								{
									num129 = 0f;
								}
								num124 = num129;
							}
							num123 = num124;
						}
						array[num112] += num116 - num123;
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						float num130;
						if (rangeType4 == RangeType.RealBody)
						{
							num130 = (float)(double)Math.Abs((float)((double)inClose[num113] - (double)inOpen[num113]));
						}
						else
						{
							float num131;
							if (rangeType4 == RangeType.HighLow)
							{
								num131 = (float)((double)inHigh[num113] - (double)inLow[num113]);
							}
							else
							{
								float num134;
								if (rangeType4 == RangeType.Shadows)
								{
									float num118 = inClose[num113];
									float num119 = inOpen[num113];
									float num132 = ((!((double)num118 >= (double)num119)) ? num119 : num118);
									float num133 = ((!((double)num118 >= (double)num119)) ? num118 : num119);
									num134 = (float)((double)num133 - (double)inLow[num113] + ((double)inHigh[num113] - (double)num132));
								}
								else
								{
									num134 = 0f;
								}
								num131 = num134;
							}
							num130 = num131;
						}
						rangeType4 = Globals.candleSettings[8].rangeType;
						float num135;
						if (rangeType4 == RangeType.RealBody)
						{
							num135 = (float)(double)Math.Abs((float)((double)inClose[num113 + num115] - (double)inOpen[num113 + num115]));
						}
						else
						{
							float num136;
							if (rangeType4 == RangeType.HighLow)
							{
								num136 = (float)((double)inHigh[num113 + num115] - (double)inLow[num113 + num115]);
							}
							else
							{
								float num141;
								if (rangeType4 == RangeType.Shadows)
								{
									float num137 = inClose[num113 + num115];
									float num138 = inOpen[num113 + num115];
									float num139 = ((!((double)num137 >= (double)num138)) ? num138 : num137);
									float num140 = ((!((double)num137 >= (double)num138)) ? num137 : num138);
									num141 = (float)((double)num140 - (double)inLow[num113 + num115] + ((double)inHigh[num113 + num115] - (double)num139));
								}
								else
								{
									num141 = 0f;
								}
								num136 = num141;
							}
							num135 = num136;
						}
						array2[num112] += num130 - num135;
						num112--;
						num113++;
					}
					while (num112 >= 1);
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num142;
					if (rangeType2 == RangeType.RealBody)
					{
						num142 = (float)(double)Math.Abs((float)((double)inClose[num57] - (double)inOpen[num57]));
					}
					else
					{
						float num143;
						if (rangeType2 == RangeType.HighLow)
						{
							num143 = (float)((double)inHigh[num57] - (double)inLow[num57]);
						}
						else
						{
							float num146;
							if (rangeType2 == RangeType.Shadows)
							{
								float num27 = inClose[num57];
								float num28 = inOpen[num57];
								float num144 = ((!((double)num27 >= (double)num28)) ? num28 : num27);
								float num145 = ((!((double)num27 >= (double)num28)) ? num27 : num28);
								num146 = (float)((double)num145 - (double)inLow[num57] + ((double)inHigh[num57] - (double)num144));
							}
							else
							{
								num146 = 0f;
							}
							num143 = num146;
						}
						num142 = num143;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num147;
					if (rangeType2 == RangeType.RealBody)
					{
						num147 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num148;
						if (rangeType2 == RangeType.HighLow)
						{
							num148 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num153;
							if (rangeType2 == RangeType.Shadows)
							{
								float num149 = inClose[num4];
								float num150 = inOpen[num4];
								float num151 = ((!((double)num149 >= (double)num150)) ? num150 : num149);
								float num152 = ((!((double)num149 >= (double)num150)) ? num149 : num150);
								num153 = (float)((double)num152 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num151));
							}
							else
							{
								num153 = 0f;
							}
							num148 = num153;
						}
						num147 = num148;
					}
					num3 = (double)(num142 - num147) + num3;
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num154;
					if (rangeType3 == RangeType.RealBody)
					{
						num154 = (float)(double)Math.Abs((float)((double)inClose[num57 - 1] - (double)inOpen[num57 - 1]));
					}
					else
					{
						float num155;
						if (rangeType3 == RangeType.HighLow)
						{
							num155 = (float)((double)inHigh[num57 - 1] - (double)inLow[num57 - 1]);
						}
						else
						{
							float num158;
							if (rangeType3 == RangeType.Shadows)
							{
								float num61 = inClose[num57 - 1];
								float num73 = inOpen[num57 - 1];
								float num156 = ((!((double)num61 >= (double)num73)) ? num73 : num61);
								float num157 = ((!((double)num61 >= (double)num73)) ? num61 : num73);
								num158 = (float)((double)num157 - (double)inLow[num57 - 1] + ((double)inHigh[num57 - 1] - (double)num156));
							}
							else
							{
								num158 = 0f;
							}
							num155 = num158;
						}
						num154 = num155;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					float num159;
					if (rangeType3 == RangeType.RealBody)
					{
						num159 = (float)(double)Math.Abs((float)((double)inClose[num6 - 1] - (double)inOpen[num6 - 1]));
					}
					else
					{
						float num160;
						if (rangeType3 == RangeType.HighLow)
						{
							num160 = (float)((double)inHigh[num6 - 1] - (double)inLow[num6 - 1]);
						}
						else
						{
							float num165;
							if (rangeType3 == RangeType.Shadows)
							{
								float num161 = inClose[num6 - 1];
								float num162 = inOpen[num6 - 1];
								float num163 = ((!((double)num161 >= (double)num162)) ? num162 : num161);
								float num164 = ((!((double)num161 >= (double)num162)) ? num161 : num162);
								num165 = (float)((double)num164 - (double)inLow[num6 - 1] + ((double)inHigh[num6 - 1] - (double)num163));
							}
							else
							{
								num165 = 0f;
							}
							num160 = num165;
						}
						num159 = num160;
					}
					num5 = (double)(num154 - num159) + num5;
					num57++;
					num2++;
					num4++;
					num6++;
					num7++;
				}
				while (num57 <= endIdx);
				outNBElement = num58;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlStalledPattern(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlStalledPatternLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				array[2] = 0.0;
				array[1] = 0.0;
				array[0] = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num2 = startIdx - candleSettings[0].avgPeriod;
				double num3 = 0.0;
				int num4 = startIdx - candleSettings[2].avgPeriod;
				double num5 = 0.0;
				int num6 = startIdx - candleSettings[7].avgPeriod;
				array2[2] = 0.0;
				array2[1] = 0.0;
				array2[0] = 0.0;
				int num7 = startIdx - candleSettings[8].avgPeriod;
				if (num2 < startIdx)
				{
					int num8 = num2 - 1;
					int num9 = startIdx - num2;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num10;
						if (rangeType == RangeType.RealBody)
						{
							num10 = Math.Abs(inClose[num8 - 1] - inOpen[num8 - 1]);
						}
						else
						{
							double num11;
							if (rangeType == RangeType.HighLow)
							{
								num11 = inHigh[num8 - 1] - inLow[num8 - 1];
							}
							else
							{
								double num16;
								if (rangeType == RangeType.Shadows)
								{
									double num12 = inClose[num8 - 1];
									double num13 = inOpen[num8 - 1];
									double num14 = ((!(num12 >= num13)) ? num13 : num12);
									double num15 = ((!(num12 >= num13)) ? num12 : num13);
									num16 = num15 - inLow[num8 - 1] + (inHigh[num8 - 1] - num14);
								}
								else
								{
									num16 = 0.0;
								}
								num11 = num16;
							}
							num10 = num11;
						}
						array[2] += num10;
						rangeType = Globals.candleSettings[0].rangeType;
						double num17;
						if (rangeType == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num18;
							if (rangeType == RangeType.HighLow)
							{
								num18 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num23;
								if (rangeType == RangeType.Shadows)
								{
									double num19 = inClose[num8];
									double num20 = inOpen[num8];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num8] + (inHigh[num8] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						array[1] += num17;
						num8++;
						num9--;
					}
					while (num9 != 0);
				}
				int num24 = num4;
				if (num4 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num25;
						if (rangeType2 == RangeType.RealBody)
						{
							num25 = Math.Abs(inClose[num24] - inOpen[num24]);
						}
						else
						{
							double num26;
							if (rangeType2 == RangeType.HighLow)
							{
								num26 = inHigh[num24] - inLow[num24];
							}
							else
							{
								double num31;
								if (rangeType2 == RangeType.Shadows)
								{
									double num27 = inClose[num24];
									double num28 = inOpen[num24];
									double num29 = ((!(num27 >= num28)) ? num28 : num27);
									double num30 = ((!(num27 >= num28)) ? num27 : num28);
									num31 = num30 - inLow[num24] + (inHigh[num24] - num29);
								}
								else
								{
									num31 = 0.0;
								}
								num26 = num31;
							}
							num25 = num26;
						}
						num3 = num25 + num3;
						num24++;
					}
					while (num24 < startIdx);
				}
				if (num6 < startIdx)
				{
					int num32 = num6 - 1;
					int num33 = startIdx - num6;
					do
					{
						RangeType rangeType3 = Globals.candleSettings[7].rangeType;
						double num34;
						if (rangeType3 == RangeType.RealBody)
						{
							num34 = Math.Abs(inClose[num32] - inOpen[num32]);
						}
						else
						{
							double num35;
							if (rangeType3 == RangeType.HighLow)
							{
								num35 = inHigh[num32] - inLow[num32];
							}
							else
							{
								double num40;
								if (rangeType3 == RangeType.Shadows)
								{
									double num36 = inClose[num32];
									double num37 = inOpen[num32];
									double num38 = ((!(num36 >= num37)) ? num37 : num36);
									double num39 = ((!(num36 >= num37)) ? num36 : num37);
									num40 = num39 - inLow[num32] + (inHigh[num32] - num38);
								}
								else
								{
									num40 = 0.0;
								}
								num35 = num40;
							}
							num34 = num35;
						}
						num5 = num34 + num5;
						num32++;
						num33--;
					}
					while (num33 != 0);
				}
				if (num7 < startIdx)
				{
					int num41 = num7 - 1;
					int num42 = startIdx - num7;
					do
					{
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						double num43;
						if (rangeType4 == RangeType.RealBody)
						{
							num43 = Math.Abs(inClose[num41 - 1] - inOpen[num41 - 1]);
						}
						else
						{
							double num44;
							if (rangeType4 == RangeType.HighLow)
							{
								num44 = inHigh[num41 - 1] - inLow[num41 - 1];
							}
							else
							{
								double num49;
								if (rangeType4 == RangeType.Shadows)
								{
									double num45 = inClose[num41 - 1];
									double num46 = inOpen[num41 - 1];
									double num47 = ((!(num45 >= num46)) ? num46 : num45);
									double num48 = ((!(num45 >= num46)) ? num45 : num46);
									num49 = num48 - inLow[num41 - 1] + (inHigh[num41 - 1] - num47);
								}
								else
								{
									num49 = 0.0;
								}
								num44 = num49;
							}
							num43 = num44;
						}
						array2[2] += num43;
						rangeType4 = Globals.candleSettings[8].rangeType;
						double num50;
						if (rangeType4 == RangeType.RealBody)
						{
							num50 = Math.Abs(inClose[num41] - inOpen[num41]);
						}
						else
						{
							double num51;
							if (rangeType4 == RangeType.HighLow)
							{
								num51 = inHigh[num41] - inLow[num41];
							}
							else
							{
								double num56;
								if (rangeType4 == RangeType.Shadows)
								{
									double num52 = inClose[num41];
									double num53 = inOpen[num41];
									double num54 = ((!(num52 >= num53)) ? num53 : num52);
									double num55 = ((!(num52 >= num53)) ? num52 : num53);
									num56 = num55 - inLow[num41] + (inHigh[num41] - num54);
								}
								else
								{
									num56 = 0.0;
								}
								num51 = num56;
							}
							num50 = num51;
						}
						array2[1] += num50;
						num41++;
						num42--;
					}
					while (num42 != 0);
				}
				int num57 = startIdx;
				int num58 = 0;
				do
				{
					double num59 = inClose[num57 - 2];
					double num60 = inOpen[num57 - 2];
					RangeType rangeType2;
					RangeType rangeType3;
					if (num59 >= num60)
					{
						double num61 = inClose[num57 - 1];
						if (num61 >= inOpen[num57 - 1])
						{
							double num27 = inClose[num57];
							if (num27 >= inOpen[num57] && num27 > num61 && num61 > num59)
							{
								CandleSetting candleSetting = Globals.candleSettings[0];
								double num62 = candleSetting.avgPeriod;
								double num63;
								if (num62 != 0.0)
								{
									num63 = array[2] / num62;
								}
								else
								{
									RangeType rangeType = candleSetting.rangeType;
									double num64;
									if (rangeType == RangeType.RealBody)
									{
										num64 = Math.Abs(num59 - num60);
									}
									else
									{
										double num65;
										if (rangeType == RangeType.HighLow)
										{
											num65 = inHigh[num57 - 2] - inLow[num57 - 2];
										}
										else
										{
											double num68;
											if (rangeType == RangeType.Shadows)
											{
												double num66 = num59;
												double num67 = num60;
												num68 = num67 - inLow[num57 - 2] + (inHigh[num57 - 2] - num66);
											}
											else
											{
												num68 = 0.0;
											}
											num65 = num68;
										}
										num64 = num65;
									}
									num63 = num64;
								}
								double num69 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								CandleSetting candleSetting2 = Globals.candleSettings[0];
								if (Math.Abs(inClose[num57 - 2] - inOpen[num57 - 2]) > candleSetting2.factor * num63 / num69)
								{
									num62 = candleSetting2.avgPeriod;
									double num70;
									if (num62 != 0.0)
									{
										num70 = array[1] / num62;
									}
									else
									{
										RangeType rangeType = candleSetting2.rangeType;
										double num71;
										if (rangeType == RangeType.RealBody)
										{
											num71 = Math.Abs(inClose[num57 - 1] - inOpen[num57 - 1]);
										}
										else
										{
											double num72;
											if (rangeType == RangeType.HighLow)
											{
												num72 = inHigh[num57 - 1] - inLow[num57 - 1];
											}
											else
											{
												double num76;
												if (rangeType == RangeType.Shadows)
												{
													num61 = inClose[num57 - 1];
													double num73 = inOpen[num57 - 1];
													double num74 = ((!(num61 >= num73)) ? num73 : num61);
													double num75 = ((!(num61 >= num73)) ? num61 : num73);
													num76 = num75 - inLow[num57 - 1] + (inHigh[num57 - 1] - num74);
												}
												else
												{
													num76 = 0.0;
												}
												num72 = num76;
											}
											num71 = num72;
										}
										num70 = num71;
									}
									double num77 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									candleSettings = Globals.candleSettings;
									if (Math.Abs(inClose[num57 - 1] - inOpen[num57 - 1]) > candleSettings[0].factor * num70 / num77)
									{
										num61 = inClose[num57 - 1];
										double num73 = inOpen[num57 - 1];
										double num78 = ((!(num61 >= num73)) ? num73 : num61);
										CandleSetting candleSetting3 = candleSettings[7];
										double num79 = candleSetting3.avgPeriod;
										double num80;
										if (num79 != 0.0)
										{
											num80 = num5 / num79;
										}
										else
										{
											rangeType3 = candleSetting3.rangeType;
											double num81;
											if (rangeType3 == RangeType.RealBody)
											{
												num81 = Math.Abs(num61 - num73);
											}
											else
											{
												double num82;
												if (rangeType3 == RangeType.HighLow)
												{
													num82 = inHigh[num57 - 1] - inLow[num57 - 1];
												}
												else
												{
													double num85;
													if (rangeType3 == RangeType.Shadows)
													{
														double num83 = ((!(num61 >= num73)) ? num73 : num61);
														double num84 = ((!(num61 >= num73)) ? num61 : num73);
														num85 = num84 - inLow[num57 - 1] + (inHigh[num57 - 1] - num83);
													}
													else
													{
														num85 = 0.0;
													}
													num82 = num85;
												}
												num81 = num82;
											}
											num80 = num81;
										}
										candleSettings = Globals.candleSettings;
										CandleSetting candleSetting4 = candleSettings[7];
										double num86 = ((candleSetting4.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
										if (inHigh[num57 - 1] - num78 < candleSetting4.factor * num80 / num86)
										{
											num60 = inOpen[num57 - 2];
											if (inOpen[num57 - 1] > num60)
											{
												CandleSetting candleSetting5 = candleSettings[8];
												double num87 = candleSetting5.avgPeriod;
												double num88;
												if (num87 != 0.0)
												{
													num88 = array2[2] / num87;
												}
												else
												{
													RangeType rangeType4 = candleSetting5.rangeType;
													double num89;
													if (rangeType4 == RangeType.RealBody)
													{
														num89 = Math.Abs(inClose[num57 - 2] - num60);
													}
													else
													{
														double num90;
														if (rangeType4 == RangeType.HighLow)
														{
															num90 = inHigh[num57 - 2] - inLow[num57 - 2];
														}
														else
														{
															double num93;
															if (rangeType4 == RangeType.Shadows)
															{
																num59 = inClose[num57 - 2];
																double num91 = ((!(num59 >= num60)) ? num60 : num59);
																double num92 = ((!(num59 >= num60)) ? num59 : num60);
																num93 = num92 - inLow[num57 - 2] + (inHigh[num57 - 2] - num91);
															}
															else
															{
																num93 = 0.0;
															}
															num90 = num93;
														}
														num89 = num90;
													}
													num88 = num89;
												}
												candleSettings = Globals.candleSettings;
												CandleSetting candleSetting6 = candleSettings[8];
												double num94 = ((candleSetting6.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
												if (inOpen[num57 - 1] <= candleSetting6.factor * num88 / num94 + inClose[num57 - 2])
												{
													CandleSetting candleSetting7 = candleSettings[2];
													double num95 = candleSetting7.avgPeriod;
													double num96;
													if (num95 != 0.0)
													{
														num96 = num3 / num95;
													}
													else
													{
														rangeType2 = candleSetting7.rangeType;
														double num97;
														if (rangeType2 == RangeType.RealBody)
														{
															num97 = Math.Abs(inClose[num57] - inOpen[num57]);
														}
														else
														{
															double num98;
															if (rangeType2 == RangeType.HighLow)
															{
																num98 = inHigh[num57] - inLow[num57];
															}
															else
															{
																double num101;
																if (rangeType2 == RangeType.Shadows)
																{
																	num27 = inClose[num57];
																	double num28 = inOpen[num57];
																	double num99 = ((!(num27 >= num28)) ? num28 : num27);
																	double num100 = ((!(num27 >= num28)) ? num27 : num28);
																	num101 = num100 - inLow[num57] + (inHigh[num57] - num99);
																}
																else
																{
																	num101 = 0.0;
																}
																num98 = num101;
															}
															num97 = num98;
														}
														num96 = num97;
													}
													double num102 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
													candleSettings = Globals.candleSettings;
													if (Math.Abs(inClose[num57] - inOpen[num57]) < candleSettings[2].factor * num96 / num102)
													{
														CandleSetting candleSetting8 = candleSettings[8];
														num87 = candleSetting8.avgPeriod;
														double num103;
														if (num87 != 0.0)
														{
															num103 = array2[1] / num87;
														}
														else
														{
															RangeType rangeType4 = candleSetting8.rangeType;
															double num104;
															if (rangeType4 == RangeType.RealBody)
															{
																num104 = Math.Abs(inClose[num57 - 1] - inOpen[num57 - 1]);
															}
															else
															{
																double num105;
																if (rangeType4 == RangeType.HighLow)
																{
																	num105 = inHigh[num57 - 1] - inLow[num57 - 1];
																}
																else
																{
																	double num108;
																	if (rangeType4 == RangeType.Shadows)
																	{
																		num61 = inClose[num57 - 1];
																		num73 = inOpen[num57 - 1];
																		double num106 = ((!(num61 >= num73)) ? num73 : num61);
																		double num107 = ((!(num61 >= num73)) ? num61 : num73);
																		num108 = num107 - inLow[num57 - 1] + (inHigh[num57 - 1] - num106);
																	}
																	else
																	{
																		num108 = 0.0;
																	}
																	num105 = num108;
																}
																num104 = num105;
															}
															num103 = num104;
														}
														double num109 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
														if (inOpen[num57] >= inClose[num57 - 1] - Math.Abs(inClose[num57] - inOpen[num57]) - Globals.candleSettings[8].factor * num103 / num109)
														{
															outInteger[num58] = -100;
															num58++;
															goto IL_0d92;
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num58] = 0;
					num58++;
					goto IL_0d92;
					IL_0d92:
					int num110 = 2;
					int num111 = num57 - 2;
					int num112 = num2 - num57;
					int num113 = num7 - num57;
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num114;
						if (rangeType == RangeType.RealBody)
						{
							num114 = Math.Abs(inClose[num111] - inOpen[num111]);
						}
						else
						{
							double num115;
							if (rangeType == RangeType.HighLow)
							{
								num115 = inHigh[num111] - inLow[num111];
							}
							else
							{
								double num120;
								if (rangeType == RangeType.Shadows)
								{
									double num116 = inClose[num111];
									double num117 = inOpen[num111];
									double num118 = ((!(num116 >= num117)) ? num117 : num116);
									double num119 = ((!(num116 >= num117)) ? num116 : num117);
									num120 = num119 - inLow[num111] + (inHigh[num111] - num118);
								}
								else
								{
									num120 = 0.0;
								}
								num115 = num120;
							}
							num114 = num115;
						}
						rangeType = Globals.candleSettings[0].rangeType;
						double num121;
						if (rangeType == RangeType.RealBody)
						{
							num121 = Math.Abs(inClose[num111 + num112] - inOpen[num111 + num112]);
						}
						else
						{
							double num122;
							if (rangeType == RangeType.HighLow)
							{
								num122 = inHigh[num111 + num112] - inLow[num111 + num112];
							}
							else
							{
								double num127;
								if (rangeType == RangeType.Shadows)
								{
									double num123 = inClose[num111 + num112];
									double num124 = inOpen[num111 + num112];
									double num125 = ((!(num123 >= num124)) ? num124 : num123);
									double num126 = ((!(num123 >= num124)) ? num123 : num124);
									num127 = num126 - inLow[num111 + num112] + (inHigh[num111 + num112] - num125);
								}
								else
								{
									num127 = 0.0;
								}
								num122 = num127;
							}
							num121 = num122;
						}
						array[num110] += num114 - num121;
						RangeType rangeType4 = Globals.candleSettings[8].rangeType;
						double num128;
						if (rangeType4 == RangeType.RealBody)
						{
							num128 = Math.Abs(inClose[num111] - inOpen[num111]);
						}
						else
						{
							double num129;
							if (rangeType4 == RangeType.HighLow)
							{
								num129 = inHigh[num111] - inLow[num111];
							}
							else
							{
								double num132;
								if (rangeType4 == RangeType.Shadows)
								{
									double num116 = inClose[num111];
									double num117 = inOpen[num111];
									double num130 = ((!(num116 >= num117)) ? num117 : num116);
									double num131 = ((!(num116 >= num117)) ? num116 : num117);
									num132 = num131 - inLow[num111] + (inHigh[num111] - num130);
								}
								else
								{
									num132 = 0.0;
								}
								num129 = num132;
							}
							num128 = num129;
						}
						rangeType4 = Globals.candleSettings[8].rangeType;
						double num133;
						if (rangeType4 == RangeType.RealBody)
						{
							num133 = Math.Abs(inClose[num111 + num113] - inOpen[num111 + num113]);
						}
						else
						{
							double num134;
							if (rangeType4 == RangeType.HighLow)
							{
								num134 = inHigh[num111 + num113] - inLow[num111 + num113];
							}
							else
							{
								double num139;
								if (rangeType4 == RangeType.Shadows)
								{
									double num135 = inClose[num111 + num113];
									double num136 = inOpen[num111 + num113];
									double num137 = ((!(num135 >= num136)) ? num136 : num135);
									double num138 = ((!(num135 >= num136)) ? num135 : num136);
									num139 = num138 - inLow[num111 + num113] + (inHigh[num111 + num113] - num137);
								}
								else
								{
									num139 = 0.0;
								}
								num134 = num139;
							}
							num133 = num134;
						}
						array2[num110] += num128 - num133;
						num110--;
						num111++;
					}
					while (num110 >= 1);
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num140;
					if (rangeType2 == RangeType.RealBody)
					{
						num140 = Math.Abs(inClose[num57] - inOpen[num57]);
					}
					else
					{
						double num141;
						if (rangeType2 == RangeType.HighLow)
						{
							num141 = inHigh[num57] - inLow[num57];
						}
						else
						{
							double num144;
							if (rangeType2 == RangeType.Shadows)
							{
								double num27 = inClose[num57];
								double num28 = inOpen[num57];
								double num142 = ((!(num27 >= num28)) ? num28 : num27);
								double num143 = ((!(num27 >= num28)) ? num27 : num28);
								num144 = num143 - inLow[num57] + (inHigh[num57] - num142);
							}
							else
							{
								num144 = 0.0;
							}
							num141 = num144;
						}
						num140 = num141;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num145;
					if (rangeType2 == RangeType.RealBody)
					{
						num145 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num146;
						if (rangeType2 == RangeType.HighLow)
						{
							num146 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num151;
							if (rangeType2 == RangeType.Shadows)
							{
								double num147 = inClose[num4];
								double num148 = inOpen[num4];
								double num149 = ((!(num147 >= num148)) ? num148 : num147);
								double num150 = ((!(num147 >= num148)) ? num147 : num148);
								num151 = num150 - inLow[num4] + (inHigh[num4] - num149);
							}
							else
							{
								num151 = 0.0;
							}
							num146 = num151;
						}
						num145 = num146;
					}
					num3 = num140 - num145 + num3;
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num152;
					if (rangeType3 == RangeType.RealBody)
					{
						num152 = Math.Abs(inClose[num57 - 1] - inOpen[num57 - 1]);
					}
					else
					{
						double num153;
						if (rangeType3 == RangeType.HighLow)
						{
							num153 = inHigh[num57 - 1] - inLow[num57 - 1];
						}
						else
						{
							double num156;
							if (rangeType3 == RangeType.Shadows)
							{
								double num61 = inClose[num57 - 1];
								double num73 = inOpen[num57 - 1];
								double num154 = ((!(num61 >= num73)) ? num73 : num61);
								double num155 = ((!(num61 >= num73)) ? num61 : num73);
								num156 = num155 - inLow[num57 - 1] + (inHigh[num57 - 1] - num154);
							}
							else
							{
								num156 = 0.0;
							}
							num153 = num156;
						}
						num152 = num153;
					}
					rangeType3 = Globals.candleSettings[7].rangeType;
					double num157;
					if (rangeType3 == RangeType.RealBody)
					{
						num157 = Math.Abs(inClose[num6 - 1] - inOpen[num6 - 1]);
					}
					else
					{
						double num158;
						if (rangeType3 == RangeType.HighLow)
						{
							num158 = inHigh[num6 - 1] - inLow[num6 - 1];
						}
						else
						{
							double num163;
							if (rangeType3 == RangeType.Shadows)
							{
								double num159 = inClose[num6 - 1];
								double num160 = inOpen[num6 - 1];
								double num161 = ((!(num159 >= num160)) ? num160 : num159);
								double num162 = ((!(num159 >= num160)) ? num159 : num160);
								num163 = num162 - inLow[num6 - 1] + (inHigh[num6 - 1] - num161);
							}
							else
							{
								num163 = 0.0;
							}
							num158 = num163;
						}
						num157 = num158;
					}
					num5 = num152 - num157 + num5;
					num57++;
					num2++;
					num4++;
					num6++;
					num7++;
				}
				while (num57 <= endIdx);
				outNBElement = num58;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlStickSandwhichLookback()
	{
		return Globals.candleSettings[10].avgPeriod + 2;
	}

	public static RetCode CdlStickSandwhich(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlStickSandwhichLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[10].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 2;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 2;
				int num15 = num3 - 2;
				do
				{
					float num16 = inClose[num14];
					float num17 = inOpen[num14];
					RangeType rangeType;
					if (!((double)num16 >= (double)num17) && (double)inClose[num14 + 1] >= (double)inOpen[num14 + 1] && !((double)inClose[num14 + 2] >= (double)inOpen[num14 + 2]) && (double)inLow[num14 + 1] > (double)num16)
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = (float)(double)Math.Abs((float)((double)num16 - (double)num17));
							}
							else
							{
								float num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = (float)((double)inHigh[num14] - (double)inLow[num14]);
								}
								else
								{
									float num24;
									if (rangeType == RangeType.Shadows)
									{
										float num22 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
										float num23 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
										num24 = (float)((double)num23 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num22));
									}
									else
									{
										num24 = 0f;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[10];
						rangeType = candleSetting2.rangeType;
						double num25 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						num16 = inClose[num14];
						if ((double)inClose[num14 + 2] <= candleSetting2.factor * num19 / num25 + (double)num16)
						{
							num18 = candleSetting2.avgPeriod;
							double num26;
							if (num18 != 0.0)
							{
								num26 = num2 / num18;
							}
							else
							{
								float num27;
								if (rangeType == RangeType.RealBody)
								{
									num27 = (float)(double)Math.Abs((float)((double)num16 - (double)inOpen[num14]));
								}
								else
								{
									float num28;
									if (rangeType == RangeType.HighLow)
									{
										num28 = (float)((double)inHigh[num14] - (double)inLow[num14]);
									}
									else
									{
										float num31;
										if (rangeType == RangeType.Shadows)
										{
											num17 = inOpen[num14];
											float num29 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
											float num30 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
											num31 = (float)((double)num30 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num29));
										}
										else
										{
											num31 = 0f;
										}
										num28 = num31;
									}
									num27 = num28;
								}
								num26 = num27;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[10];
							double num32 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)inClose[num14 + 2] >= (double)inClose[num14] - candleSetting3.factor * num26 / num32)
							{
								outInteger[num13] = 100;
								num13++;
								goto IL_03b5;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_03b5;
					IL_03b5:
					rangeType = Globals.candleSettings[10].rangeType;
					float num33;
					if (rangeType == RangeType.RealBody)
					{
						num33 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
					}
					else
					{
						float num34;
						if (rangeType == RangeType.HighLow)
						{
							num34 = (float)((double)inHigh[num14] - (double)inLow[num14]);
						}
						else
						{
							float num37;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								float num35 = ((!((double)num16 >= (double)num17)) ? num17 : num16);
								float num36 = ((!((double)num16 >= (double)num17)) ? num16 : num17);
								num37 = (float)((double)num36 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num35));
							}
							else
							{
								num37 = 0f;
							}
							num34 = num37;
						}
						num33 = num34;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
					}
					else
					{
						float num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = (float)((double)inHigh[num15] - (double)inLow[num15]);
						}
						else
						{
							float num44;
							if (rangeType == RangeType.Shadows)
							{
								float num40 = inClose[num15];
								float num41 = inOpen[num15];
								float num42 = ((!((double)num40 >= (double)num41)) ? num41 : num40);
								float num43 = ((!((double)num40 >= (double)num41)) ? num40 : num41);
								num44 = (float)((double)num43 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num42));
							}
							else
							{
								num44 = 0f;
							}
							num39 = num44;
						}
						num38 = num39;
					}
					num2 = (double)(num33 - num38) + num2;
					num14++;
					num15++;
				}
				while (num14 + 2 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlStickSandwhich(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlStickSandwhichLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[10].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 2;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = 0;
				int num14 = startIdx - 2;
				int num15 = num3 - 2;
				do
				{
					double num16 = inClose[num14];
					double num17 = inOpen[num14];
					RangeType rangeType;
					if (!(num16 >= num17) && inClose[num14 + 1] >= inOpen[num14 + 1] && !(inClose[num14 + 2] >= inOpen[num14 + 2]) && inLow[num14 + 1] > num16)
					{
						CandleSetting candleSetting = Globals.candleSettings[10];
						double num18 = candleSetting.avgPeriod;
						double num19;
						if (num18 != 0.0)
						{
							num19 = num2 / num18;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num20;
							if (rangeType == RangeType.RealBody)
							{
								num20 = Math.Abs(num16 - num17);
							}
							else
							{
								double num21;
								if (rangeType == RangeType.HighLow)
								{
									num21 = inHigh[num14] - inLow[num14];
								}
								else
								{
									double num24;
									if (rangeType == RangeType.Shadows)
									{
										double num22 = ((!(num16 >= num17)) ? num17 : num16);
										double num23 = ((!(num16 >= num17)) ? num16 : num17);
										num24 = num23 - inLow[num14] + (inHigh[num14] - num22);
									}
									else
									{
										num24 = 0.0;
									}
									num21 = num24;
								}
								num20 = num21;
							}
							num19 = num20;
						}
						CandleSetting candleSetting2 = Globals.candleSettings[10];
						rangeType = candleSetting2.rangeType;
						double num25 = ((rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						num16 = inClose[num14];
						if (inClose[num14 + 2] <= candleSetting2.factor * num19 / num25 + num16)
						{
							num18 = candleSetting2.avgPeriod;
							double num26;
							if (num18 != 0.0)
							{
								num26 = num2 / num18;
							}
							else
							{
								double num27;
								if (rangeType == RangeType.RealBody)
								{
									num27 = Math.Abs(num16 - inOpen[num14]);
								}
								else
								{
									double num28;
									if (rangeType == RangeType.HighLow)
									{
										num28 = inHigh[num14] - inLow[num14];
									}
									else
									{
										double num31;
										if (rangeType == RangeType.Shadows)
										{
											num17 = inOpen[num14];
											double num29 = ((!(num16 >= num17)) ? num17 : num16);
											double num30 = ((!(num16 >= num17)) ? num16 : num17);
											num31 = num30 - inLow[num14] + (inHigh[num14] - num29);
										}
										else
										{
											num31 = 0.0;
										}
										num28 = num31;
									}
									num27 = num28;
								}
								num26 = num27;
							}
							CandleSetting candleSetting3 = Globals.candleSettings[10];
							double num32 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (inClose[num14 + 2] >= inClose[num14] - candleSetting3.factor * num26 / num32)
							{
								outInteger[num13] = 100;
								num13++;
								goto IL_0376;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0376;
					IL_0376:
					rangeType = Globals.candleSettings[10].rangeType;
					double num33;
					if (rangeType == RangeType.RealBody)
					{
						num33 = Math.Abs(inClose[num14] - inOpen[num14]);
					}
					else
					{
						double num34;
						if (rangeType == RangeType.HighLow)
						{
							num34 = inHigh[num14] - inLow[num14];
						}
						else
						{
							double num37;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num14];
								num17 = inOpen[num14];
								double num35 = ((!(num16 >= num17)) ? num17 : num16);
								double num36 = ((!(num16 >= num17)) ? num16 : num17);
								num37 = num36 - inLow[num14] + (inHigh[num14] - num35);
							}
							else
							{
								num37 = 0.0;
							}
							num34 = num37;
						}
						num33 = num34;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num38;
					if (rangeType == RangeType.RealBody)
					{
						num38 = Math.Abs(inClose[num15] - inOpen[num15]);
					}
					else
					{
						double num39;
						if (rangeType == RangeType.HighLow)
						{
							num39 = inHigh[num15] - inLow[num15];
						}
						else
						{
							double num44;
							if (rangeType == RangeType.Shadows)
							{
								double num40 = inClose[num15];
								double num41 = inOpen[num15];
								double num42 = ((!(num40 >= num41)) ? num41 : num40);
								double num43 = ((!(num40 >= num41)) ? num40 : num41);
								num44 = num43 - inLow[num15] + (inHigh[num15] - num42);
							}
							else
							{
								num44 = 0.0;
							}
							num39 = num44;
						}
						num38 = num39;
					}
					num2 = num33 - num38 + num2;
					num14++;
					num15++;
				}
				while (num14 + 2 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlTakuriLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[3].avgPeriod;
		int avgPeriod2 = candleSettings[7].avgPeriod;
		int num = ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod);
		int avgPeriod3 = candleSettings[5].avgPeriod;
		if (num > avgPeriod3)
		{
			return (avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod;
		}
		return avgPeriod3;
	}

	public static RetCode CdlTakuri(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTakuriLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[5].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = (float)(double)Math.Abs((float)((double)inClose[num8] - (double)inOpen[num8]));
						}
						else
						{
							float num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = (float)((double)inHigh[num8] - (double)inLow[num8]);
							}
							else
							{
								float num15;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num8];
									float num12 = inOpen[num8];
									float num13 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num14 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num15 = (float)((double)num14 - (double)inLow[num8] + ((double)inHigh[num8] - (double)num13));
								}
								else
								{
									num15 = 0f;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = (double)num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num16] - (double)inOpen[num16]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num16] - (double)inLow[num16]);
							}
							else
							{
								float num21;
								if (rangeType2 == RangeType.Shadows)
								{
									float num11 = inClose[num16];
									float num12 = inOpen[num16];
									float num19 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num20 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num21 = (float)((double)num20 - (double)inLow[num16] + ((double)inHigh[num16] - (double)num19));
								}
								else
								{
									num21 = 0f;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[5].rangeType;
						float num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num27;
								if (rangeType3 == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num25 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num26 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num27 = (float)((double)num26 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num25));
								}
								else
								{
									num27 = 0f;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = (double)num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
						}
						else
						{
							float num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = (float)((double)inHigh[num22] - (double)inLow[num22]);
							}
							else
							{
								float num35;
								if (rangeType == RangeType.Shadows)
								{
									float num11 = inClose[num22];
									float num12 = inOpen[num22];
									float num33 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
									float num34 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
									num35 = (float)((double)num34 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num33));
								}
								else
								{
									num35 = 0f;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if ((double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22])) <= candleSettings[3].factor * num30 / num36)
					{
						float num11 = inClose[num22];
						float num12 = inOpen[num22];
						float num37 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[7];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							float num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
							}
							else
							{
								float num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = (float)((double)inHigh[num22] - (double)inLow[num22]);
								}
								else
								{
									float num44;
									if (rangeType2 == RangeType.Shadows)
									{
										float num42 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
										float num43 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
										num44 = (float)((double)num43 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num42));
									}
									else
									{
										num44 = 0f;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[7];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						float num46 = inHigh[num22];
						if ((double)num46 - (double)num37 < candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							float num47 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[5];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								float num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = (float)(double)Math.Abs((float)((double)num11 - (double)num12));
								}
								else
								{
									float num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = (float)((double)num46 - (double)inLow[num22]);
									}
									else
									{
										float num54;
										if (rangeType3 == RangeType.Shadows)
										{
											float num52 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
											float num53 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
											num54 = (float)((double)num53 - (double)inLow[num22] + ((double)num46 - (double)num52));
										}
										else
										{
											num54 = 0f;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[5];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)num47 - (double)inLow[num22] > candleSetting5.factor * num49 / num55)
							{
								outInteger[num28] = 100;
								num28++;
								goto IL_0627;
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_0627;
					IL_0627:
					rangeType = Globals.candleSettings[3].rangeType;
					float num56;
					if (rangeType == RangeType.RealBody)
					{
						num56 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num57;
						if (rangeType == RangeType.HighLow)
						{
							num57 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num60;
							if (rangeType == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num58 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num59 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num60 = (float)((double)num59 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num58));
							}
							else
							{
								num60 = 0f;
							}
							num57 = num60;
						}
						num56 = num57;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num61;
					if (rangeType == RangeType.RealBody)
					{
						num61 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num62;
						if (rangeType == RangeType.HighLow)
						{
							num62 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num67;
							if (rangeType == RangeType.Shadows)
							{
								float num63 = inClose[num3];
								float num64 = inOpen[num3];
								float num65 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
								float num66 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
								num67 = (float)((double)num66 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num65));
							}
							else
							{
								num67 = 0f;
							}
							num62 = num67;
						}
						num61 = num62;
					}
					num2 = (double)(num56 - num61) + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num68;
					if (rangeType2 == RangeType.RealBody)
					{
						num68 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num69;
						if (rangeType2 == RangeType.HighLow)
						{
							num69 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num72;
							if (rangeType2 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num70 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num71 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num72 = (float)((double)num71 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num70));
							}
							else
							{
								num72 = 0f;
							}
							num69 = num72;
						}
						num68 = num69;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					float num73;
					if (rangeType2 == RangeType.RealBody)
					{
						num73 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num74;
						if (rangeType2 == RangeType.HighLow)
						{
							num74 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num79;
							if (rangeType2 == RangeType.Shadows)
							{
								float num75 = inClose[num5];
								float num76 = inOpen[num5];
								float num77 = ((!((double)num75 >= (double)num76)) ? num76 : num75);
								float num78 = ((!((double)num75 >= (double)num76)) ? num75 : num76);
								num79 = (float)((double)num78 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num77));
							}
							else
							{
								num79 = 0f;
							}
							num74 = num79;
						}
						num73 = num74;
					}
					num4 = (double)(num68 - num73) + num4;
					rangeType3 = Globals.candleSettings[5].rangeType;
					float num80;
					if (rangeType3 == RangeType.RealBody)
					{
						num80 = (float)(double)Math.Abs((float)((double)inClose[num22] - (double)inOpen[num22]));
					}
					else
					{
						float num81;
						if (rangeType3 == RangeType.HighLow)
						{
							num81 = (float)((double)inHigh[num22] - (double)inLow[num22]);
						}
						else
						{
							float num84;
							if (rangeType3 == RangeType.Shadows)
							{
								float num11 = inClose[num22];
								float num12 = inOpen[num22];
								float num82 = ((!((double)num11 >= (double)num12)) ? num12 : num11);
								float num83 = ((!((double)num11 >= (double)num12)) ? num11 : num12);
								num84 = (float)((double)num83 - (double)inLow[num22] + ((double)inHigh[num22] - (double)num82));
							}
							else
							{
								num84 = 0f;
							}
							num81 = num84;
						}
						num80 = num81;
					}
					rangeType3 = Globals.candleSettings[5].rangeType;
					float num85;
					if (rangeType3 == RangeType.RealBody)
					{
						num85 = (float)(double)Math.Abs((float)((double)inClose[num7] - (double)inOpen[num7]));
					}
					else
					{
						float num86;
						if (rangeType3 == RangeType.HighLow)
						{
							num86 = (float)((double)inHigh[num7] - (double)inLow[num7]);
						}
						else
						{
							float num91;
							if (rangeType3 == RangeType.Shadows)
							{
								float num87 = inClose[num7];
								float num88 = inOpen[num7];
								float num89 = ((!((double)num87 >= (double)num88)) ? num88 : num87);
								float num90 = ((!((double)num87 >= (double)num88)) ? num87 : num88);
								num91 = (float)((double)num90 - (double)inLow[num7] + ((double)inHigh[num7] - (double)num89));
							}
							else
							{
								num91 = 0f;
							}
							num86 = num91;
						}
						num85 = num86;
					}
					num6 = (double)(num80 - num85) + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlTakuri(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTakuriLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[3].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[7].avgPeriod;
				double num6 = 0.0;
				int num7 = startIdx - candleSettings[5].avgPeriod;
				int num8 = num3;
				if (num3 < startIdx)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num9;
						if (rangeType == RangeType.RealBody)
						{
							num9 = Math.Abs(inClose[num8] - inOpen[num8]);
						}
						else
						{
							double num10;
							if (rangeType == RangeType.HighLow)
							{
								num10 = inHigh[num8] - inLow[num8];
							}
							else
							{
								double num15;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num8];
									double num12 = inOpen[num8];
									double num13 = ((!(num11 >= num12)) ? num12 : num11);
									double num14 = ((!(num11 >= num12)) ? num11 : num12);
									num15 = num14 - inLow[num8] + (inHigh[num8] - num13);
								}
								else
								{
									num15 = 0.0;
								}
								num10 = num15;
							}
							num9 = num10;
						}
						num2 = num9 + num2;
						num8++;
					}
					while (num8 < startIdx);
				}
				int num16 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[7].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num16] - inOpen[num16]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num16] - inLow[num16];
							}
							else
							{
								double num21;
								if (rangeType2 == RangeType.Shadows)
								{
									double num11 = inClose[num16];
									double num12 = inOpen[num16];
									double num19 = ((!(num11 >= num12)) ? num12 : num11);
									double num20 = ((!(num11 >= num12)) ? num11 : num12);
									num21 = num20 - inLow[num16] + (inHigh[num16] - num19);
								}
								else
								{
									num21 = 0.0;
								}
								num18 = num21;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num16++;
					}
					while (num16 < startIdx);
				}
				int num22 = num7;
				if (num7 < startIdx)
				{
					do
					{
						RangeType rangeType3 = Globals.candleSettings[5].rangeType;
						double num23;
						if (rangeType3 == RangeType.RealBody)
						{
							num23 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num24;
							if (rangeType3 == RangeType.HighLow)
							{
								num24 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num27;
								if (rangeType3 == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num25 = ((!(num11 >= num12)) ? num12 : num11);
									double num26 = ((!(num11 >= num12)) ? num11 : num12);
									num27 = num26 - inLow[num22] + (inHigh[num22] - num25);
								}
								else
								{
									num27 = 0.0;
								}
								num24 = num27;
							}
							num23 = num24;
						}
						num6 = num23 + num6;
						num22++;
					}
					while (num22 < startIdx);
				}
				int num28 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num29 = candleSetting.avgPeriod;
					double num30;
					RangeType rangeType;
					if (num29 != 0.0)
					{
						num30 = num2 / num29;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num31;
						if (rangeType == RangeType.RealBody)
						{
							num31 = Math.Abs(inClose[num22] - inOpen[num22]);
						}
						else
						{
							double num32;
							if (rangeType == RangeType.HighLow)
							{
								num32 = inHigh[num22] - inLow[num22];
							}
							else
							{
								double num35;
								if (rangeType == RangeType.Shadows)
								{
									double num11 = inClose[num22];
									double num12 = inOpen[num22];
									double num33 = ((!(num11 >= num12)) ? num12 : num11);
									double num34 = ((!(num11 >= num12)) ? num11 : num12);
									num35 = num34 - inLow[num22] + (inHigh[num22] - num33);
								}
								else
								{
									num35 = 0.0;
								}
								num32 = num35;
							}
							num31 = num32;
						}
						num30 = num31;
					}
					double num36 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					RangeType rangeType3;
					if (Math.Abs(inClose[num22] - inOpen[num22]) <= candleSettings[3].factor * num30 / num36)
					{
						double num11 = inClose[num22];
						double num12 = inOpen[num22];
						double num37 = ((!(num11 >= num12)) ? num12 : num11);
						CandleSetting candleSetting2 = candleSettings[7];
						double num38 = candleSetting2.avgPeriod;
						double num39;
						if (num38 != 0.0)
						{
							num39 = num4 / num38;
						}
						else
						{
							rangeType2 = candleSetting2.rangeType;
							double num40;
							if (rangeType2 == RangeType.RealBody)
							{
								num40 = Math.Abs(num11 - num12);
							}
							else
							{
								double num41;
								if (rangeType2 == RangeType.HighLow)
								{
									num41 = inHigh[num22] - inLow[num22];
								}
								else
								{
									double num44;
									if (rangeType2 == RangeType.Shadows)
									{
										double num42 = ((!(num11 >= num12)) ? num12 : num11);
										double num43 = ((!(num11 >= num12)) ? num11 : num12);
										num44 = num43 - inLow[num22] + (inHigh[num22] - num42);
									}
									else
									{
										num44 = 0.0;
									}
									num41 = num44;
								}
								num40 = num41;
							}
							num39 = num40;
						}
						candleSettings = Globals.candleSettings;
						CandleSetting candleSetting3 = candleSettings[7];
						double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						double num46 = inHigh[num22];
						if (num46 - num37 < candleSetting3.factor * num39 / num45)
						{
							num11 = inClose[num22];
							num12 = inOpen[num22];
							double num47 = ((!(num11 >= num12)) ? num11 : num12);
							CandleSetting candleSetting4 = candleSettings[5];
							double num48 = candleSetting4.avgPeriod;
							double num49;
							if (num48 != 0.0)
							{
								num49 = num6 / num48;
							}
							else
							{
								rangeType3 = candleSetting4.rangeType;
								double num50;
								if (rangeType3 == RangeType.RealBody)
								{
									num50 = Math.Abs(num11 - num12);
								}
								else
								{
									double num51;
									if (rangeType3 == RangeType.HighLow)
									{
										num51 = num46 - inLow[num22];
									}
									else
									{
										double num54;
										if (rangeType3 == RangeType.Shadows)
										{
											double num52 = ((!(num11 >= num12)) ? num12 : num11);
											double num53 = ((!(num11 >= num12)) ? num11 : num12);
											num54 = num53 - inLow[num22] + (num46 - num52);
										}
										else
										{
											num54 = 0.0;
										}
										num51 = num54;
									}
									num50 = num51;
								}
								num49 = num50;
							}
							CandleSetting candleSetting5 = Globals.candleSettings[5];
							double num55 = ((candleSetting5.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (num47 - inLow[num22] > candleSetting5.factor * num49 / num55)
							{
								outInteger[num28] = 100;
								num28++;
								goto IL_05c1;
							}
						}
					}
					outInteger[num28] = 0;
					num28++;
					goto IL_05c1;
					IL_05c1:
					rangeType = Globals.candleSettings[3].rangeType;
					double num56;
					if (rangeType == RangeType.RealBody)
					{
						num56 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num57;
						if (rangeType == RangeType.HighLow)
						{
							num57 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num60;
							if (rangeType == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num58 = ((!(num11 >= num12)) ? num12 : num11);
								double num59 = ((!(num11 >= num12)) ? num11 : num12);
								num60 = num59 - inLow[num22] + (inHigh[num22] - num58);
							}
							else
							{
								num60 = 0.0;
							}
							num57 = num60;
						}
						num56 = num57;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num61;
					if (rangeType == RangeType.RealBody)
					{
						num61 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num62;
						if (rangeType == RangeType.HighLow)
						{
							num62 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num67;
							if (rangeType == RangeType.Shadows)
							{
								double num63 = inClose[num3];
								double num64 = inOpen[num3];
								double num65 = ((!(num63 >= num64)) ? num64 : num63);
								double num66 = ((!(num63 >= num64)) ? num63 : num64);
								num67 = num66 - inLow[num3] + (inHigh[num3] - num65);
							}
							else
							{
								num67 = 0.0;
							}
							num62 = num67;
						}
						num61 = num62;
					}
					num2 = num56 - num61 + num2;
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num68;
					if (rangeType2 == RangeType.RealBody)
					{
						num68 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num69;
						if (rangeType2 == RangeType.HighLow)
						{
							num69 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num72;
							if (rangeType2 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num70 = ((!(num11 >= num12)) ? num12 : num11);
								double num71 = ((!(num11 >= num12)) ? num11 : num12);
								num72 = num71 - inLow[num22] + (inHigh[num22] - num70);
							}
							else
							{
								num72 = 0.0;
							}
							num69 = num72;
						}
						num68 = num69;
					}
					rangeType2 = Globals.candleSettings[7].rangeType;
					double num73;
					if (rangeType2 == RangeType.RealBody)
					{
						num73 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num74;
						if (rangeType2 == RangeType.HighLow)
						{
							num74 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num79;
							if (rangeType2 == RangeType.Shadows)
							{
								double num75 = inClose[num5];
								double num76 = inOpen[num5];
								double num77 = ((!(num75 >= num76)) ? num76 : num75);
								double num78 = ((!(num75 >= num76)) ? num75 : num76);
								num79 = num78 - inLow[num5] + (inHigh[num5] - num77);
							}
							else
							{
								num79 = 0.0;
							}
							num74 = num79;
						}
						num73 = num74;
					}
					num4 = num68 - num73 + num4;
					rangeType3 = Globals.candleSettings[5].rangeType;
					double num80;
					if (rangeType3 == RangeType.RealBody)
					{
						num80 = Math.Abs(inClose[num22] - inOpen[num22]);
					}
					else
					{
						double num81;
						if (rangeType3 == RangeType.HighLow)
						{
							num81 = inHigh[num22] - inLow[num22];
						}
						else
						{
							double num84;
							if (rangeType3 == RangeType.Shadows)
							{
								double num11 = inClose[num22];
								double num12 = inOpen[num22];
								double num82 = ((!(num11 >= num12)) ? num12 : num11);
								double num83 = ((!(num11 >= num12)) ? num11 : num12);
								num84 = num83 - inLow[num22] + (inHigh[num22] - num82);
							}
							else
							{
								num84 = 0.0;
							}
							num81 = num84;
						}
						num80 = num81;
					}
					rangeType3 = Globals.candleSettings[5].rangeType;
					double num85;
					if (rangeType3 == RangeType.RealBody)
					{
						num85 = Math.Abs(inClose[num7] - inOpen[num7]);
					}
					else
					{
						double num86;
						if (rangeType3 == RangeType.HighLow)
						{
							num86 = inHigh[num7] - inLow[num7];
						}
						else
						{
							double num91;
							if (rangeType3 == RangeType.Shadows)
							{
								double num87 = inClose[num7];
								double num88 = inOpen[num7];
								double num89 = ((!(num87 >= num88)) ? num88 : num87);
								double num90 = ((!(num87 >= num88)) ? num87 : num88);
								num91 = num90 - inLow[num7] + (inHigh[num7] - num89);
							}
							else
							{
								num91 = 0.0;
							}
							num86 = num91;
						}
						num85 = num86;
					}
					num6 = num80 - num85 + num6;
					num22++;
					num3++;
					num5++;
					num7++;
				}
				while (num22 <= endIdx);
				outNBElement = num28;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlTasukiGapLookback()
	{
		return Globals.candleSettings[8].avgPeriod + 2;
	}

	public static RetCode CdlTasukiGap(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTasukiGapLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[8].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						float num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num12;
								if (rangeType == RangeType.Shadows)
								{
									float num8 = inClose[num4];
									float num9 = inOpen[num4];
									float num10 = ((!((double)num8 >= (double)num9)) ? num9 : num8);
									float num11 = ((!((double)num8 >= (double)num9)) ? num8 : num9);
									num12 = (float)((double)num11 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num10));
								}
								else
								{
									num12 = 0f;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = (double)num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = startIdx;
				int num14 = 0;
				do
				{
					float num15 = inOpen[num13 - 1];
					float num16 = inClose[num13 - 1];
					float num17 = ((!((double)num15 < (double)num16)) ? num16 : num15);
					float num18 = inOpen[num13 - 2];
					float num19 = inClose[num13 - 2];
					float num20 = ((!((double)num18 > (double)num19)) ? num19 : num18);
					RangeType rangeType;
					if ((double)num17 > (double)num20 && (double)num16 >= (double)num15)
					{
						float num21 = inClose[num13];
						float num22 = inOpen[num13];
						if (!((double)num21 >= (double)num22) && (double)num22 < (double)num16 && (double)num22 > (double)num15 && (double)num21 < (double)num15)
						{
							float num23 = ((!((double)num19 > (double)num18)) ? num18 : num19);
							if ((double)num21 > (double)num23)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num24 = candleSetting.avgPeriod;
								double num25;
								if (num24 != 0.0)
								{
									num25 = num2 / num24;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									float num26;
									if (rangeType == RangeType.RealBody)
									{
										num26 = (float)(double)Math.Abs((float)((double)num16 - (double)num15));
									}
									else
									{
										float num27;
										if (rangeType == RangeType.HighLow)
										{
											num27 = (float)((double)inHigh[num13 - 1] - (double)inLow[num13 - 1]);
										}
										else
										{
											float num30;
											if (rangeType == RangeType.Shadows)
											{
												float num28 = ((!((double)num16 >= (double)num15)) ? num15 : num16);
												float num29 = ((!((double)num16 >= (double)num15)) ? num16 : num15);
												num30 = (float)((double)num29 - (double)inLow[num13 - 1] + ((double)inHigh[num13 - 1] - (double)num28));
											}
											else
											{
												num30 = 0f;
											}
											num27 = num30;
										}
										num26 = num27;
									}
									num25 = num26;
								}
								double num31 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								double num32 = Math.Abs((float)((double)inClose[num13 - 1] - (double)inOpen[num13 - 1]));
								if ((double)Math.Abs((float)(num32 - (double)Math.Abs((float)((double)inClose[num13] - (double)inOpen[num13])))) < Globals.candleSettings[8].factor * num25 / num31)
								{
									goto IL_04f8;
								}
							}
						}
					}
					num15 = inOpen[num13 - 1];
					num16 = inClose[num13 - 1];
					float num33 = ((!((double)num15 > (double)num16)) ? num16 : num15);
					num18 = inOpen[num13 - 2];
					num19 = inClose[num13 - 2];
					float num34 = ((!((double)num18 < (double)num19)) ? num19 : num18);
					if ((double)num33 < (double)num34 && !((double)num16 >= (double)num15))
					{
						float num21 = inClose[num13];
						float num22 = inOpen[num13];
						if ((double)num21 >= (double)num22 && (double)num22 < (double)num15 && (double)num22 > (double)num16 && (double)num21 > (double)num15)
						{
							float num35 = ((!((double)num19 < (double)num18)) ? num18 : num19);
							if ((double)num21 < (double)num35)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num24 = candleSetting.avgPeriod;
								double num36;
								if (num24 != 0.0)
								{
									num36 = num2 / num24;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									float num37;
									if (rangeType == RangeType.RealBody)
									{
										num37 = (float)(double)Math.Abs((float)((double)num16 - (double)num15));
									}
									else
									{
										float num38;
										if (rangeType == RangeType.HighLow)
										{
											num38 = (float)((double)inHigh[num13 - 1] - (double)inLow[num13 - 1]);
										}
										else
										{
											float num41;
											if (rangeType == RangeType.Shadows)
											{
												float num39 = ((!((double)num16 >= (double)num15)) ? num15 : num16);
												float num40 = ((!((double)num16 >= (double)num15)) ? num16 : num15);
												num41 = (float)((double)num40 - (double)inLow[num13 - 1] + ((double)inHigh[num13 - 1] - (double)num39));
											}
											else
											{
												num41 = 0f;
											}
											num38 = num41;
										}
										num37 = num38;
									}
									num36 = num37;
								}
								double num42 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								double num43 = Math.Abs((float)((double)inClose[num13 - 1] - (double)inOpen[num13 - 1]));
								if ((double)Math.Abs((float)(num43 - (double)Math.Abs((float)((double)inClose[num13] - (double)inOpen[num13])))) < Globals.candleSettings[8].factor * num36 / num42)
								{
									goto IL_04f8;
								}
							}
						}
					}
					outInteger[num14] = 0;
					num14++;
					goto IL_052d;
					IL_04f8:
					int num44 = (((double)inClose[num13 - 1] >= (double)inOpen[num13 - 1]) ? 1 : (-1));
					outInteger[num14] = num44 * 100;
					num14++;
					goto IL_052d;
					IL_052d:
					rangeType = Globals.candleSettings[8].rangeType;
					float num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = (float)(double)Math.Abs((float)((double)inClose[num13 - 1] - (double)inOpen[num13 - 1]));
					}
					else
					{
						float num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = (float)((double)inHigh[num13 - 1] - (double)inLow[num13 - 1]);
						}
						else
						{
							float num49;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num13 - 1];
								num15 = inOpen[num13 - 1];
								float num47 = ((!((double)num16 >= (double)num15)) ? num15 : num16);
								float num48 = ((!((double)num16 >= (double)num15)) ? num16 : num15);
								num49 = (float)((double)num48 - (double)inLow[num13 - 1] + ((double)inHigh[num13 - 1] - (double)num47));
							}
							else
							{
								num49 = 0f;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					float num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
					}
					else
					{
						float num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
						}
						else
						{
							float num56;
							if (rangeType == RangeType.Shadows)
							{
								float num52 = inClose[num3 - 1];
								float num53 = inOpen[num3 - 1];
								float num54 = ((!((double)num52 >= (double)num53)) ? num53 : num52);
								float num55 = ((!((double)num52 >= (double)num53)) ? num52 : num53);
								num56 = (float)((double)num55 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num54));
							}
							else
							{
								num56 = 0f;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = (double)(num45 - num50) + num2;
					num13++;
					num3++;
				}
				while (num13 <= endIdx);
				outNBElement = num14;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlTasukiGap(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTasukiGapLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[8].avgPeriod;
				if (num3 < startIdx)
				{
					int num4 = num3 - 1;
					int num5 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[8].rangeType;
						double num6;
						if (rangeType == RangeType.RealBody)
						{
							num6 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num7;
							if (rangeType == RangeType.HighLow)
							{
								num7 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num12;
								if (rangeType == RangeType.Shadows)
								{
									double num8 = inClose[num4];
									double num9 = inOpen[num4];
									double num10 = ((!(num8 >= num9)) ? num9 : num8);
									double num11 = ((!(num8 >= num9)) ? num8 : num9);
									num12 = num11 - inLow[num4] + (inHigh[num4] - num10);
								}
								else
								{
									num12 = 0.0;
								}
								num7 = num12;
							}
							num6 = num7;
						}
						num2 = num6 + num2;
						num4++;
						num5--;
					}
					while (num5 != 0);
				}
				int num13 = startIdx;
				int num14 = 0;
				do
				{
					double num15 = inOpen[num13 - 1];
					double num16 = inClose[num13 - 1];
					double num17 = ((!(num15 < num16)) ? num16 : num15);
					double num18 = inOpen[num13 - 2];
					double num19 = inClose[num13 - 2];
					double num20 = ((!(num18 > num19)) ? num19 : num18);
					RangeType rangeType;
					if (num17 > num20 && num16 >= num15)
					{
						double num21 = inClose[num13];
						double num22 = inOpen[num13];
						if (!(num21 >= num22) && num22 < num16 && num22 > num15 && num21 < num15)
						{
							double num23 = ((!(num19 > num18)) ? num18 : num19);
							if (num21 > num23)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num24 = candleSetting.avgPeriod;
								double num25;
								if (num24 != 0.0)
								{
									num25 = num2 / num24;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									double num26;
									if (rangeType == RangeType.RealBody)
									{
										num26 = Math.Abs(num16 - num15);
									}
									else
									{
										double num27;
										if (rangeType == RangeType.HighLow)
										{
											num27 = inHigh[num13 - 1] - inLow[num13 - 1];
										}
										else
										{
											double num30;
											if (rangeType == RangeType.Shadows)
											{
												double num28 = num16;
												double num29 = num15;
												num30 = num29 - inLow[num13 - 1] + (inHigh[num13 - 1] - num28);
											}
											else
											{
												num30 = 0.0;
											}
											num27 = num30;
										}
										num26 = num27;
									}
									num25 = num26;
								}
								double num31 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								double num32 = Math.Abs(inClose[num13 - 1] - inOpen[num13 - 1]);
								if (Math.Abs(num32 - Math.Abs(inClose[num13] - inOpen[num13])) < Globals.candleSettings[8].factor * num25 / num31)
								{
									goto IL_047a;
								}
							}
						}
					}
					num15 = inOpen[num13 - 1];
					num16 = inClose[num13 - 1];
					double num33 = ((!(num15 > num16)) ? num16 : num15);
					num18 = inOpen[num13 - 2];
					num19 = inClose[num13 - 2];
					double num34 = ((!(num18 < num19)) ? num19 : num18);
					if (num33 < num34 && !(num16 >= num15))
					{
						double num21 = inClose[num13];
						double num22 = inOpen[num13];
						if (num21 >= num22 && num22 < num15 && num22 > num16 && num21 > num15)
						{
							double num35 = ((!(num19 < num18)) ? num18 : num19);
							if (num21 < num35)
							{
								CandleSetting candleSetting = Globals.candleSettings[8];
								double num24 = candleSetting.avgPeriod;
								double num36;
								if (num24 != 0.0)
								{
									num36 = num2 / num24;
								}
								else
								{
									rangeType = candleSetting.rangeType;
									double num37;
									if (rangeType == RangeType.RealBody)
									{
										num37 = Math.Abs(num16 - num15);
									}
									else
									{
										double num38;
										if (rangeType == RangeType.HighLow)
										{
											num38 = inHigh[num13 - 1] - inLow[num13 - 1];
										}
										else
										{
											double num41;
											if (rangeType == RangeType.Shadows)
											{
												double num39 = ((!(num16 >= num15)) ? num15 : num16);
												double num40 = ((!(num16 >= num15)) ? num16 : num15);
												num41 = num40 - inLow[num13 - 1] + (inHigh[num13 - 1] - num39);
											}
											else
											{
												num41 = 0.0;
											}
											num38 = num41;
										}
										num37 = num38;
									}
									num36 = num37;
								}
								double num42 = ((Globals.candleSettings[8].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								double num43 = Math.Abs(inClose[num13 - 1] - inOpen[num13 - 1]);
								if (Math.Abs(num43 - Math.Abs(inClose[num13] - inOpen[num13])) < Globals.candleSettings[8].factor * num36 / num42)
								{
									goto IL_047a;
								}
							}
						}
					}
					outInteger[num14] = 0;
					num14++;
					goto IL_04ad;
					IL_047a:
					int num44 = ((inClose[num13 - 1] >= inOpen[num13 - 1]) ? 1 : (-1));
					outInteger[num14] = num44 * 100;
					num14++;
					goto IL_04ad;
					IL_04ad:
					rangeType = Globals.candleSettings[8].rangeType;
					double num45;
					if (rangeType == RangeType.RealBody)
					{
						num45 = Math.Abs(inClose[num13 - 1] - inOpen[num13 - 1]);
					}
					else
					{
						double num46;
						if (rangeType == RangeType.HighLow)
						{
							num46 = inHigh[num13 - 1] - inLow[num13 - 1];
						}
						else
						{
							double num49;
							if (rangeType == RangeType.Shadows)
							{
								num16 = inClose[num13 - 1];
								num15 = inOpen[num13 - 1];
								double num47 = ((!(num16 >= num15)) ? num15 : num16);
								double num48 = ((!(num16 >= num15)) ? num16 : num15);
								num49 = num48 - inLow[num13 - 1] + (inHigh[num13 - 1] - num47);
							}
							else
							{
								num49 = 0.0;
							}
							num46 = num49;
						}
						num45 = num46;
					}
					rangeType = Globals.candleSettings[8].rangeType;
					double num50;
					if (rangeType == RangeType.RealBody)
					{
						num50 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
					}
					else
					{
						double num51;
						if (rangeType == RangeType.HighLow)
						{
							num51 = inHigh[num3 - 1] - inLow[num3 - 1];
						}
						else
						{
							double num56;
							if (rangeType == RangeType.Shadows)
							{
								double num52 = inClose[num3 - 1];
								double num53 = inOpen[num3 - 1];
								double num54 = ((!(num52 >= num53)) ? num53 : num52);
								double num55 = ((!(num52 >= num53)) ? num52 : num53);
								num56 = num55 - inLow[num3 - 1] + (inHigh[num3 - 1] - num54);
							}
							else
							{
								num56 = 0.0;
							}
							num51 = num56;
						}
						num50 = num51;
					}
					num2 = num45 - num50 + num2;
					num13++;
					num3++;
				}
				while (num13 <= endIdx);
				outNBElement = num14;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlThrustingLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[10].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 1;
	}

	public static RetCode CdlThrusting(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlThrustingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						float num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num14;
								if (rangeType == RangeType.Shadows)
								{
									float num10 = inClose[num6];
									float num11 = inOpen[num6];
									float num12 = ((!((double)num10 >= (double)num11)) ? num11 : num10);
									float num13 = ((!((double)num10 >= (double)num11)) ? num10 : num11);
									num14 = (float)((double)num13 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num12));
								}
								else
								{
									num14 = 0f;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = (double)num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						float num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = (float)(double)Math.Abs((float)((double)inClose[num15] - (double)inOpen[num15]));
						}
						else
						{
							float num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = (float)((double)inHigh[num15] - (double)inLow[num15]);
							}
							else
							{
								float num23;
								if (rangeType2 == RangeType.Shadows)
								{
									float num19 = inClose[num15];
									float num20 = inOpen[num15];
									float num21 = ((!((double)num19 >= (double)num20)) ? num20 : num19);
									float num22 = ((!((double)num19 >= (double)num20)) ? num19 : num20);
									num23 = (float)((double)num22 - (double)inLow[num15] + ((double)inHigh[num15] - (double)num21));
								}
								else
								{
									num23 = 0f;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = (double)num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					float num26 = inClose[num24 - 1];
					float num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!((double)num26 >= (double)num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							float num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = (float)(double)Math.Abs((float)((double)num26 - (double)num27));
							}
							else
							{
								float num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
								}
								else
								{
									float num34;
									if (rangeType2 == RangeType.Shadows)
									{
										float num32 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
										float num33 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
										num34 = (float)((double)num33 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num32));
									}
									else
									{
										num34 = 0f;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1])) > candleSettings[0].factor * num29 / num35)
						{
							float num36 = inOpen[num24];
							if ((double)inClose[num24] >= (double)num36)
							{
								float num37 = inLow[num24 - 1];
								if ((double)num36 < (double)num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										float num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
										}
										else
										{
											float num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = (float)((double)inHigh[num24 - 1] - (double)num37);
											}
											else
											{
												float num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													float num42 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
													float num43 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
													num44 = (float)((double)inHigh[num24 - 1] - (double)num42 + ((double)num43 - (double)num37));
												}
												else
												{
													num44 = 0f;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									float num46 = inClose[num24];
									num26 = inClose[num24 - 1];
									if ((double)num46 > candleSetting3.factor * num39 / num45 + (double)num26 && (double)num46 <= (double)Math.Abs((float)((double)num26 - (double)inOpen[num24 - 1])) * 0.5 + (double)inClose[num24 - 1])
									{
										outInteger[num25] = -100;
										num25++;
										goto IL_04f2;
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_04f2;
					IL_04f2:
					rangeType = Globals.candleSettings[10].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num51;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num49 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num50 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num51 = (float)((double)num50 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num49));
							}
							else
							{
								num51 = 0f;
							}
							num48 = num51;
						}
						num47 = num48;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					float num52;
					if (rangeType == RangeType.RealBody)
					{
						num52 = (float)(double)Math.Abs((float)((double)inClose[num3 - 1] - (double)inOpen[num3 - 1]));
					}
					else
					{
						float num53;
						if (rangeType == RangeType.HighLow)
						{
							num53 = (float)((double)inHigh[num3 - 1] - (double)inLow[num3 - 1]);
						}
						else
						{
							float num58;
							if (rangeType == RangeType.Shadows)
							{
								float num54 = inClose[num3 - 1];
								float num55 = inOpen[num3 - 1];
								float num56 = ((!((double)num54 >= (double)num55)) ? num55 : num54);
								float num57 = ((!((double)num54 >= (double)num55)) ? num54 : num55);
								num58 = (float)((double)num57 - (double)inLow[num3 - 1] + ((double)inHigh[num3 - 1] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num53 = num58;
						}
						num52 = num53;
					}
					num2 = (double)(num47 - num52) + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num24 - 1] - (double)inOpen[num24 - 1]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num24 - 1] - (double)inLow[num24 - 1]);
						}
						else
						{
							float num63;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								float num61 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num62 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num63 = (float)((double)num62 - (double)inLow[num24 - 1] + ((double)inHigh[num24 - 1] - (double)num61));
							}
							else
							{
								num63 = 0f;
							}
							num60 = num63;
						}
						num59 = num60;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					float num64;
					if (rangeType2 == RangeType.RealBody)
					{
						num64 = (float)(double)Math.Abs((float)((double)inClose[num5 - 1] - (double)inOpen[num5 - 1]));
					}
					else
					{
						float num65;
						if (rangeType2 == RangeType.HighLow)
						{
							num65 = (float)((double)inHigh[num5 - 1] - (double)inLow[num5 - 1]);
						}
						else
						{
							float num70;
							if (rangeType2 == RangeType.Shadows)
							{
								float num66 = inClose[num5 - 1];
								float num67 = inOpen[num5 - 1];
								float num68 = ((!((double)num66 >= (double)num67)) ? num67 : num66);
								float num69 = ((!((double)num66 >= (double)num67)) ? num66 : num67);
								num70 = (float)((double)num69 - (double)inLow[num5 - 1] + ((double)inHigh[num5 - 1] - (double)num68));
							}
							else
							{
								num70 = 0f;
							}
							num65 = num70;
						}
						num64 = num65;
					}
					num4 = (double)(num59 - num64) + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlThrusting(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlThrustingLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num3 = startIdx - candleSettings[10].avgPeriod;
				double num4 = 0.0;
				int num5 = startIdx - candleSettings[0].avgPeriod;
				if (num3 < startIdx)
				{
					int num6 = num3 - 1;
					int num7 = startIdx - num3;
					do
					{
						RangeType rangeType = Globals.candleSettings[10].rangeType;
						double num8;
						if (rangeType == RangeType.RealBody)
						{
							num8 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num9;
							if (rangeType == RangeType.HighLow)
							{
								num9 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num14;
								if (rangeType == RangeType.Shadows)
								{
									double num10 = inClose[num6];
									double num11 = inOpen[num6];
									double num12 = ((!(num10 >= num11)) ? num11 : num10);
									double num13 = ((!(num10 >= num11)) ? num10 : num11);
									num14 = num13 - inLow[num6] + (inHigh[num6] - num12);
								}
								else
								{
									num14 = 0.0;
								}
								num9 = num14;
							}
							num8 = num9;
						}
						num2 = num8 + num2;
						num6++;
						num7--;
					}
					while (num7 != 0);
				}
				if (num5 < startIdx)
				{
					int num15 = num5 - 1;
					int num16 = startIdx - num5;
					do
					{
						RangeType rangeType2 = Globals.candleSettings[0].rangeType;
						double num17;
						if (rangeType2 == RangeType.RealBody)
						{
							num17 = Math.Abs(inClose[num15] - inOpen[num15]);
						}
						else
						{
							double num18;
							if (rangeType2 == RangeType.HighLow)
							{
								num18 = inHigh[num15] - inLow[num15];
							}
							else
							{
								double num23;
								if (rangeType2 == RangeType.Shadows)
								{
									double num19 = inClose[num15];
									double num20 = inOpen[num15];
									double num21 = ((!(num19 >= num20)) ? num20 : num19);
									double num22 = ((!(num19 >= num20)) ? num19 : num20);
									num23 = num22 - inLow[num15] + (inHigh[num15] - num21);
								}
								else
								{
									num23 = 0.0;
								}
								num18 = num23;
							}
							num17 = num18;
						}
						num4 = num17 + num4;
						num15++;
						num16--;
					}
					while (num16 != 0);
				}
				int num24 = startIdx;
				int num25 = 0;
				do
				{
					double num26 = inClose[num24 - 1];
					double num27 = inOpen[num24 - 1];
					RangeType rangeType;
					RangeType rangeType2;
					if (!(num26 >= num27))
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num28 = candleSetting.avgPeriod;
						double num29;
						if (num28 != 0.0)
						{
							num29 = num4 / num28;
						}
						else
						{
							rangeType2 = candleSetting.rangeType;
							double num30;
							if (rangeType2 == RangeType.RealBody)
							{
								num30 = Math.Abs(num26 - num27);
							}
							else
							{
								double num31;
								if (rangeType2 == RangeType.HighLow)
								{
									num31 = inHigh[num24 - 1] - inLow[num24 - 1];
								}
								else
								{
									double num34;
									if (rangeType2 == RangeType.Shadows)
									{
										double num32 = ((!(num26 >= num27)) ? num27 : num26);
										double num33 = ((!(num26 >= num27)) ? num26 : num27);
										num34 = num33 - inLow[num24 - 1] + (inHigh[num24 - 1] - num32);
									}
									else
									{
										num34 = 0.0;
									}
									num31 = num34;
								}
								num30 = num31;
							}
							num29 = num30;
						}
						double num35 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]) > candleSettings[0].factor * num29 / num35)
						{
							double num36 = inOpen[num24];
							if (inClose[num24] >= num36)
							{
								double num37 = inLow[num24 - 1];
								if (num36 < num37)
								{
									CandleSetting candleSetting2 = candleSettings[10];
									double num38 = candleSetting2.avgPeriod;
									double num39;
									if (num38 != 0.0)
									{
										num39 = num2 / num38;
									}
									else
									{
										rangeType = candleSetting2.rangeType;
										double num40;
										if (rangeType == RangeType.RealBody)
										{
											num40 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
										}
										else
										{
											double num41;
											if (rangeType == RangeType.HighLow)
											{
												num41 = inHigh[num24 - 1] - num37;
											}
											else
											{
												double num44;
												if (rangeType == RangeType.Shadows)
												{
													num26 = inClose[num24 - 1];
													num27 = inOpen[num24 - 1];
													double num42 = ((!(num26 >= num27)) ? num27 : num26);
													double num43 = ((!(num26 >= num27)) ? num26 : num27);
													num44 = inHigh[num24 - 1] - num42 + (num43 - num37);
												}
												else
												{
													num44 = 0.0;
												}
												num41 = num44;
											}
											num40 = num41;
										}
										num39 = num40;
									}
									CandleSetting candleSetting3 = Globals.candleSettings[10];
									double num45 = ((candleSetting3.rangeType != RangeType.Shadows) ? 1.0 : 2.0);
									num26 = inClose[num24 - 1];
									if (inClose[num24] > candleSetting3.factor * num39 / num45 + num26 && inClose[num24] <= Math.Abs(num26 - inOpen[num24 - 1]) * 0.5 + inClose[num24 - 1])
									{
										outInteger[num25] = -100;
										num25++;
										goto IL_04a0;
									}
								}
							}
						}
					}
					outInteger[num25] = 0;
					num25++;
					goto IL_04a0;
					IL_04a0:
					rangeType = Globals.candleSettings[10].rangeType;
					double num46;
					if (rangeType == RangeType.RealBody)
					{
						num46 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num47;
						if (rangeType == RangeType.HighLow)
						{
							num47 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num50;
							if (rangeType == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num48 = ((!(num26 >= num27)) ? num27 : num26);
								double num49 = ((!(num26 >= num27)) ? num26 : num27);
								num50 = num49 - inLow[num24 - 1] + (inHigh[num24 - 1] - num48);
							}
							else
							{
								num50 = 0.0;
							}
							num47 = num50;
						}
						num46 = num47;
					}
					rangeType = Globals.candleSettings[10].rangeType;
					double num51;
					if (rangeType == RangeType.RealBody)
					{
						num51 = Math.Abs(inClose[num3 - 1] - inOpen[num3 - 1]);
					}
					else
					{
						double num52;
						if (rangeType == RangeType.HighLow)
						{
							num52 = inHigh[num3 - 1] - inLow[num3 - 1];
						}
						else
						{
							double num57;
							if (rangeType == RangeType.Shadows)
							{
								double num53 = inClose[num3 - 1];
								double num54 = inOpen[num3 - 1];
								double num55 = ((!(num53 >= num54)) ? num54 : num53);
								double num56 = ((!(num53 >= num54)) ? num53 : num54);
								num57 = num56 - inLow[num3 - 1] + (inHigh[num3 - 1] - num55);
							}
							else
							{
								num57 = 0.0;
							}
							num52 = num57;
						}
						num51 = num52;
					}
					num2 = num46 - num51 + num2;
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num58;
					if (rangeType2 == RangeType.RealBody)
					{
						num58 = Math.Abs(inClose[num24 - 1] - inOpen[num24 - 1]);
					}
					else
					{
						double num59;
						if (rangeType2 == RangeType.HighLow)
						{
							num59 = inHigh[num24 - 1] - inLow[num24 - 1];
						}
						else
						{
							double num62;
							if (rangeType2 == RangeType.Shadows)
							{
								num26 = inClose[num24 - 1];
								num27 = inOpen[num24 - 1];
								double num60 = ((!(num26 >= num27)) ? num27 : num26);
								double num61 = ((!(num26 >= num27)) ? num26 : num27);
								num62 = num61 - inLow[num24 - 1] + (inHigh[num24 - 1] - num60);
							}
							else
							{
								num62 = 0.0;
							}
							num59 = num62;
						}
						num58 = num59;
					}
					rangeType2 = Globals.candleSettings[0].rangeType;
					double num63;
					if (rangeType2 == RangeType.RealBody)
					{
						num63 = Math.Abs(inClose[num5 - 1] - inOpen[num5 - 1]);
					}
					else
					{
						double num64;
						if (rangeType2 == RangeType.HighLow)
						{
							num64 = inHigh[num5 - 1] - inLow[num5 - 1];
						}
						else
						{
							double num69;
							if (rangeType2 == RangeType.Shadows)
							{
								double num65 = inClose[num5 - 1];
								double num66 = inOpen[num5 - 1];
								double num67 = ((!(num65 >= num66)) ? num66 : num65);
								double num68 = ((!(num65 >= num66)) ? num65 : num66);
								num69 = num68 - inLow[num5 - 1] + (inHigh[num5 - 1] - num67);
							}
							else
							{
								num69 = 0.0;
							}
							num64 = num69;
						}
						num63 = num64;
					}
					num4 = num58 - num63 + num4;
					num24++;
					num3++;
					num5++;
				}
				while (num24 <= endIdx);
				outNBElement = num25;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlTristarLookback()
	{
		return Globals.candleSettings[3].avgPeriod + 2;
	}

	public static RetCode CdlTristar(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTristarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[3].avgPeriod - 2;
				int num4 = num3;
				if (num3 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						float num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
						}
						else
						{
							float num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = (float)((double)inHigh[num4] - (double)inLow[num4]);
							}
							else
							{
								float num11;
								if (rangeType == RangeType.Shadows)
								{
									float num7 = inClose[num4];
									float num8 = inOpen[num4];
									float num9 = ((!((double)num7 >= (double)num8)) ? num8 : num7);
									float num10 = ((!((double)num7 >= (double)num8)) ? num7 : num8);
									num11 = (float)((double)num10 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num9));
								}
								else
								{
									num11 = 0f;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = (double)num5 + num2;
						num4++;
					}
					while (num4 < startIdx - 2);
				}
				int num12 = startIdx;
				int num13 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = (float)(double)Math.Abs((float)((double)inClose[num12 - 2] - (double)inOpen[num12 - 2]));
						}
						else
						{
							float num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = (float)((double)inHigh[num12 - 2] - (double)inLow[num12 - 2]);
							}
							else
							{
								float num22;
								if (rangeType == RangeType.Shadows)
								{
									float num18 = inClose[num12 - 2];
									float num19 = inOpen[num12 - 2];
									float num20 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
									float num21 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
									num22 = (float)((double)num21 - (double)inLow[num12 - 2] + ((double)inHigh[num12 - 2] - (double)num20));
								}
								else
								{
									num22 = 0f;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num23 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					CandleSetting candleSetting2 = Globals.candleSettings[3];
					if ((double)Math.Abs((float)((double)inClose[num12 - 2] - (double)inOpen[num12 - 2])) <= candleSetting2.factor * num15 / num23)
					{
						num14 = candleSetting2.avgPeriod;
						double num24;
						if (num14 != 0.0)
						{
							num24 = num2 / num14;
						}
						else
						{
							rangeType = candleSetting2.rangeType;
							float num25;
							if (rangeType == RangeType.RealBody)
							{
								num25 = (float)(double)Math.Abs((float)((double)inClose[num12 - 2] - (double)inOpen[num12 - 2]));
							}
							else
							{
								float num26;
								if (rangeType == RangeType.HighLow)
								{
									num26 = (float)((double)inHigh[num12 - 2] - (double)inLow[num12 - 2]);
								}
								else
								{
									float num29;
									if (rangeType == RangeType.Shadows)
									{
										float num18 = inClose[num12 - 2];
										float num19 = inOpen[num12 - 2];
										float num27 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
										float num28 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
										num29 = (float)((double)num28 - (double)inLow[num12 - 2] + ((double)inHigh[num12 - 2] - (double)num27));
									}
									else
									{
										num29 = 0f;
									}
									num26 = num29;
								}
								num25 = num26;
							}
							num24 = num25;
						}
						double num30 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSetting2 = Globals.candleSettings[3];
						if ((double)Math.Abs((float)((double)inClose[num12 - 1] - (double)inOpen[num12 - 1])) <= candleSetting2.factor * num24 / num30)
						{
							num14 = candleSetting2.avgPeriod;
							double num31;
							if (num14 != 0.0)
							{
								num31 = num2 / num14;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								float num32;
								if (rangeType == RangeType.RealBody)
								{
									num32 = (float)(double)Math.Abs((float)((double)inClose[num12 - 2] - (double)inOpen[num12 - 2]));
								}
								else
								{
									float num33;
									if (rangeType == RangeType.HighLow)
									{
										num33 = (float)((double)inHigh[num12 - 2] - (double)inLow[num12 - 2]);
									}
									else
									{
										float num36;
										if (rangeType == RangeType.Shadows)
										{
											float num18 = inClose[num12 - 2];
											float num19 = inOpen[num12 - 2];
											float num34 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
											float num35 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
											num36 = (float)((double)num35 - (double)inLow[num12 - 2] + ((double)inHigh[num12 - 2] - (double)num34));
										}
										else
										{
											num36 = 0f;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							double num37 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if ((double)Math.Abs((float)((double)inClose[num12] - (double)inOpen[num12])) <= Globals.candleSettings[3].factor * num31 / num37)
							{
								outInteger[num13] = 0;
								float num38 = inOpen[num12 - 1];
								float num39 = inClose[num12 - 1];
								float num40 = ((!((double)num38 < (double)num39)) ? num39 : num38);
								float num19 = inOpen[num12 - 2];
								float num18 = inClose[num12 - 2];
								float num41 = ((!((double)num19 > (double)num18)) ? num18 : num19);
								if ((double)num40 > (double)num41)
								{
									float num8 = inOpen[num12];
									float num7 = inClose[num12];
									float num42 = ((!((double)num8 > (double)num7)) ? num7 : num8);
									float num43 = ((!((double)num38 > (double)num39)) ? num39 : num38);
									if ((double)num42 < (double)num43)
									{
										outInteger[num13] = -100;
									}
								}
								num38 = inOpen[num12 - 1];
								num39 = inClose[num12 - 1];
								float num44 = ((!((double)num38 > (double)num39)) ? num39 : num38);
								num19 = inOpen[num12 - 2];
								num18 = inClose[num12 - 2];
								float num45 = ((!((double)num19 < (double)num18)) ? num18 : num19);
								if ((double)num44 < (double)num45)
								{
									float num8 = inOpen[num12];
									float num7 = inClose[num12];
									float num46 = ((!((double)num8 < (double)num7)) ? num7 : num8);
									float num47 = ((!((double)num38 < (double)num39)) ? num39 : num38);
									if ((double)num46 > (double)num47)
									{
										outInteger[num13] = 100;
									}
								}
								num13++;
								goto IL_05dc;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_05dc;
					IL_05dc:
					rangeType = Globals.candleSettings[3].rangeType;
					float num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = (float)(double)Math.Abs((float)((double)inClose[num12 - 2] - (double)inOpen[num12 - 2]));
					}
					else
					{
						float num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = (float)((double)inHigh[num12 - 2] - (double)inLow[num12 - 2]);
						}
						else
						{
							float num52;
							if (rangeType == RangeType.Shadows)
							{
								float num18 = inClose[num12 - 2];
								float num19 = inOpen[num12 - 2];
								float num50 = ((!((double)num18 >= (double)num19)) ? num19 : num18);
								float num51 = ((!((double)num18 >= (double)num19)) ? num18 : num19);
								num52 = (float)((double)num51 - (double)inLow[num12 - 2] + ((double)inHigh[num12 - 2] - (double)num50));
							}
							else
							{
								num52 = 0f;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					float num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = (float)(double)Math.Abs((float)((double)inClose[num3] - (double)inOpen[num3]));
					}
					else
					{
						float num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = (float)((double)inHigh[num3] - (double)inLow[num3]);
						}
						else
						{
							float num59;
							if (rangeType == RangeType.Shadows)
							{
								float num55 = inClose[num3];
								float num56 = inOpen[num3];
								float num57 = ((!((double)num55 >= (double)num56)) ? num56 : num55);
								float num58 = ((!((double)num55 >= (double)num56)) ? num55 : num56);
								num59 = (float)((double)num58 - (double)inLow[num3] + ((double)inHigh[num3] - (double)num57));
							}
							else
							{
								num59 = 0f;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = (double)(num48 - num53) + num2;
					num12++;
					num3++;
				}
				while (num12 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlTristar(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlTristarLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				int num3 = startIdx - Globals.candleSettings[3].avgPeriod - 2;
				int num4 = num3;
				if (num3 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[3].rangeType;
						double num5;
						if (rangeType == RangeType.RealBody)
						{
							num5 = Math.Abs(inClose[num4] - inOpen[num4]);
						}
						else
						{
							double num6;
							if (rangeType == RangeType.HighLow)
							{
								num6 = inHigh[num4] - inLow[num4];
							}
							else
							{
								double num11;
								if (rangeType == RangeType.Shadows)
								{
									double num7 = inClose[num4];
									double num8 = inOpen[num4];
									double num9 = ((!(num7 >= num8)) ? num8 : num7);
									double num10 = ((!(num7 >= num8)) ? num7 : num8);
									num11 = num10 - inLow[num4] + (inHigh[num4] - num9);
								}
								else
								{
									num11 = 0.0;
								}
								num6 = num11;
							}
							num5 = num6;
						}
						num2 = num5 + num2;
						num4++;
					}
					while (num4 < startIdx - 2);
				}
				int num12 = startIdx;
				int num13 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[3];
					double num14 = candleSetting.avgPeriod;
					double num15;
					RangeType rangeType;
					if (num14 != 0.0)
					{
						num15 = num2 / num14;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num16;
						if (rangeType == RangeType.RealBody)
						{
							num16 = Math.Abs(inClose[num12 - 2] - inOpen[num12 - 2]);
						}
						else
						{
							double num17;
							if (rangeType == RangeType.HighLow)
							{
								num17 = inHigh[num12 - 2] - inLow[num12 - 2];
							}
							else
							{
								double num22;
								if (rangeType == RangeType.Shadows)
								{
									double num18 = inClose[num12 - 2];
									double num19 = inOpen[num12 - 2];
									double num20 = ((!(num18 >= num19)) ? num19 : num18);
									double num21 = ((!(num18 >= num19)) ? num18 : num19);
									num22 = num21 - inLow[num12 - 2] + (inHigh[num12 - 2] - num20);
								}
								else
								{
									num22 = 0.0;
								}
								num17 = num22;
							}
							num16 = num17;
						}
						num15 = num16;
					}
					double num23 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					CandleSetting candleSetting2 = Globals.candleSettings[3];
					if (Math.Abs(inClose[num12 - 2] - inOpen[num12 - 2]) <= candleSetting2.factor * num15 / num23)
					{
						num14 = candleSetting2.avgPeriod;
						double num24;
						if (num14 != 0.0)
						{
							num24 = num2 / num14;
						}
						else
						{
							rangeType = candleSetting2.rangeType;
							double num25;
							if (rangeType == RangeType.RealBody)
							{
								num25 = Math.Abs(inClose[num12 - 2] - inOpen[num12 - 2]);
							}
							else
							{
								double num26;
								if (rangeType == RangeType.HighLow)
								{
									num26 = inHigh[num12 - 2] - inLow[num12 - 2];
								}
								else
								{
									double num29;
									if (rangeType == RangeType.Shadows)
									{
										double num18 = inClose[num12 - 2];
										double num19 = inOpen[num12 - 2];
										double num27 = ((!(num18 >= num19)) ? num19 : num18);
										double num28 = ((!(num18 >= num19)) ? num18 : num19);
										num29 = num28 - inLow[num12 - 2] + (inHigh[num12 - 2] - num27);
									}
									else
									{
										num29 = 0.0;
									}
									num26 = num29;
								}
								num25 = num26;
							}
							num24 = num25;
						}
						double num30 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSetting2 = Globals.candleSettings[3];
						if (Math.Abs(inClose[num12 - 1] - inOpen[num12 - 1]) <= candleSetting2.factor * num24 / num30)
						{
							num14 = candleSetting2.avgPeriod;
							double num31;
							if (num14 != 0.0)
							{
								num31 = num2 / num14;
							}
							else
							{
								rangeType = candleSetting2.rangeType;
								double num32;
								if (rangeType == RangeType.RealBody)
								{
									num32 = Math.Abs(inClose[num12 - 2] - inOpen[num12 - 2]);
								}
								else
								{
									double num33;
									if (rangeType == RangeType.HighLow)
									{
										num33 = inHigh[num12 - 2] - inLow[num12 - 2];
									}
									else
									{
										double num36;
										if (rangeType == RangeType.Shadows)
										{
											double num18 = inClose[num12 - 2];
											double num19 = inOpen[num12 - 2];
											double num34 = ((!(num18 >= num19)) ? num19 : num18);
											double num35 = ((!(num18 >= num19)) ? num18 : num19);
											num36 = num35 - inLow[num12 - 2] + (inHigh[num12 - 2] - num34);
										}
										else
										{
											num36 = 0.0;
										}
										num33 = num36;
									}
									num32 = num33;
								}
								num31 = num32;
							}
							double num37 = ((Globals.candleSettings[3].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
							if (Math.Abs(inClose[num12] - inOpen[num12]) <= Globals.candleSettings[3].factor * num31 / num37)
							{
								outInteger[num13] = 0;
								double num38 = inOpen[num12 - 1];
								double num39 = inClose[num12 - 1];
								double num40 = ((!(num38 < num39)) ? num39 : num38);
								double num19 = inOpen[num12 - 2];
								double num18 = inClose[num12 - 2];
								double num41 = ((!(num19 > num18)) ? num18 : num19);
								if (num40 > num41)
								{
									double num8 = inOpen[num12];
									double num7 = inClose[num12];
									double num42 = ((!(num8 > num7)) ? num7 : num8);
									double num43 = ((!(num38 > num39)) ? num39 : num38);
									if (num42 < num43)
									{
										outInteger[num13] = -100;
									}
								}
								num38 = inOpen[num12 - 1];
								num39 = inClose[num12 - 1];
								double num44 = ((!(num38 > num39)) ? num39 : num38);
								num19 = inOpen[num12 - 2];
								num18 = inClose[num12 - 2];
								double num45 = ((!(num19 < num18)) ? num18 : num19);
								if (num44 < num45)
								{
									double num8 = inOpen[num12];
									double num7 = inClose[num12];
									double num46 = ((!(num8 < num7)) ? num7 : num8);
									double num47 = ((!(num38 < num39)) ? num39 : num38);
									if (num46 > num47)
									{
										outInteger[num13] = 100;
									}
								}
								num13++;
								goto IL_0574;
							}
						}
					}
					outInteger[num13] = 0;
					num13++;
					goto IL_0574;
					IL_0574:
					rangeType = Globals.candleSettings[3].rangeType;
					double num48;
					if (rangeType == RangeType.RealBody)
					{
						num48 = Math.Abs(inClose[num12 - 2] - inOpen[num12 - 2]);
					}
					else
					{
						double num49;
						if (rangeType == RangeType.HighLow)
						{
							num49 = inHigh[num12 - 2] - inLow[num12 - 2];
						}
						else
						{
							double num52;
							if (rangeType == RangeType.Shadows)
							{
								double num18 = inClose[num12 - 2];
								double num19 = inOpen[num12 - 2];
								double num50 = ((!(num18 >= num19)) ? num19 : num18);
								double num51 = ((!(num18 >= num19)) ? num18 : num19);
								num52 = num51 - inLow[num12 - 2] + (inHigh[num12 - 2] - num50);
							}
							else
							{
								num52 = 0.0;
							}
							num49 = num52;
						}
						num48 = num49;
					}
					rangeType = Globals.candleSettings[3].rangeType;
					double num53;
					if (rangeType == RangeType.RealBody)
					{
						num53 = Math.Abs(inClose[num3] - inOpen[num3]);
					}
					else
					{
						double num54;
						if (rangeType == RangeType.HighLow)
						{
							num54 = inHigh[num3] - inLow[num3];
						}
						else
						{
							double num59;
							if (rangeType == RangeType.Shadows)
							{
								double num55 = inClose[num3];
								double num56 = inOpen[num3];
								double num57 = ((!(num55 >= num56)) ? num56 : num55);
								double num58 = ((!(num55 >= num56)) ? num55 : num56);
								num59 = num58 - inLow[num3] + (inHigh[num3] - num57);
							}
							else
							{
								num59 = 0.0;
							}
							num54 = num59;
						}
						num53 = num54;
					}
					num2 = num48 - num53 + num2;
					num12++;
					num3++;
				}
				while (num12 <= endIdx);
				outNBElement = num13;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlUnique3RiverLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
	}

	public static RetCode CdlUnique3River(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlUnique3RiverLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						float num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = (float)(double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2]));
						}
						else
						{
							float num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
							}
							else
							{
								float num30;
								if (rangeType == RangeType.Shadows)
								{
									float num26 = inClose[num20 - 2];
									float num27 = inOpen[num20 - 2];
									float num28 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
									float num29 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
									num30 = (float)((double)num29 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num28));
								}
								else
								{
									num30 = 0f;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if ((double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2])) > candleSettings[0].factor * num23 / num31)
					{
						float num26 = inClose[num20 - 2];
						float num27 = inOpen[num20 - 2];
						if (!((double)num26 >= (double)num27))
						{
							float num32 = inClose[num20 - 1];
							float num33 = inOpen[num20 - 1];
							if (!((double)num32 >= (double)num33) && (double)num32 > (double)num26 && (double)num33 <= (double)num27 && (double)inLow[num20 - 1] < (double)inLow[num20 - 2])
							{
								CandleSetting candleSetting2 = candleSettings[2];
								double num34 = candleSetting2.avgPeriod;
								double num35;
								if (num34 != 0.0)
								{
									num35 = num3 / num34;
								}
								else
								{
									rangeType2 = candleSetting2.rangeType;
									float num36;
									if (rangeType2 == RangeType.RealBody)
									{
										num36 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
									}
									else
									{
										float num37;
										if (rangeType2 == RangeType.HighLow)
										{
											num37 = (float)((double)inHigh[num20] - (double)inLow[num20]);
										}
										else
										{
											float num40;
											if (rangeType2 == RangeType.Shadows)
											{
												float num9 = inClose[num20];
												float num10 = inOpen[num20];
												float num38 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
												float num39 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
												num40 = (float)((double)num39 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num38));
											}
											else
											{
												num40 = 0f;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20])) < Globals.candleSettings[2].factor * num35 / num41)
								{
									float num10 = inOpen[num20];
									if ((double)inClose[num20] >= (double)num10 && (double)num10 > (double)inLow[num20 - 1])
									{
										outInteger[num21] = 100;
										num21++;
										goto IL_04ee;
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_04ee;
					IL_04ee:
					rangeType = Globals.candleSettings[0].rangeType;
					float num42;
					if (rangeType == RangeType.RealBody)
					{
						num42 = (float)(double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2]));
					}
					else
					{
						float num43;
						if (rangeType == RangeType.HighLow)
						{
							num43 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
						}
						else
						{
							float num46;
							if (rangeType == RangeType.Shadows)
							{
								float num26 = inClose[num20 - 2];
								float num27 = inOpen[num20 - 2];
								float num44 = ((!((double)num26 >= (double)num27)) ? num27 : num26);
								float num45 = ((!((double)num26 >= (double)num27)) ? num26 : num27);
								num46 = (float)((double)num45 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num44));
							}
							else
							{
								num46 = 0f;
							}
							num43 = num46;
						}
						num42 = num43;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num53;
							if (rangeType == RangeType.Shadows)
							{
								float num49 = inClose[num4];
								float num50 = inOpen[num4];
								float num51 = ((!((double)num49 >= (double)num50)) ? num50 : num49);
								float num52 = ((!((double)num49 >= (double)num50)) ? num49 : num50);
								num53 = (float)((double)num52 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num51));
							}
							else
							{
								num53 = 0f;
							}
							num48 = num53;
						}
						num47 = num48;
					}
					num2 = (double)(num42 - num47) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num54;
					if (rangeType2 == RangeType.RealBody)
					{
						num54 = (float)(double)Math.Abs((float)((double)inClose[num20] - (double)inOpen[num20]));
					}
					else
					{
						float num55;
						if (rangeType2 == RangeType.HighLow)
						{
							num55 = (float)((double)inHigh[num20] - (double)inLow[num20]);
						}
						else
						{
							float num58;
							if (rangeType2 == RangeType.Shadows)
							{
								float num9 = inClose[num20];
								float num10 = inOpen[num20];
								float num56 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
								float num57 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
								num58 = (float)((double)num57 - (double)inLow[num20] + ((double)inHigh[num20] - (double)num56));
							}
							else
							{
								num58 = 0f;
							}
							num55 = num58;
						}
						num54 = num55;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num65;
							if (rangeType2 == RangeType.Shadows)
							{
								float num61 = inClose[num5];
								float num62 = inOpen[num5];
								float num63 = ((!((double)num61 >= (double)num62)) ? num62 : num61);
								float num64 = ((!((double)num61 >= (double)num62)) ? num61 : num62);
								num65 = (float)((double)num64 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num63));
							}
							else
							{
								num65 = 0f;
							}
							num60 = num65;
						}
						num59 = num60;
					}
					num3 = (double)(num54 - num59) + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlUnique3River(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlUnique3RiverLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					CandleSetting candleSetting = Globals.candleSettings[0];
					double num22 = candleSetting.avgPeriod;
					double num23;
					RangeType rangeType;
					if (num22 != 0.0)
					{
						num23 = num2 / num22;
					}
					else
					{
						rangeType = candleSetting.rangeType;
						double num24;
						if (rangeType == RangeType.RealBody)
						{
							num24 = Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]);
						}
						else
						{
							double num25;
							if (rangeType == RangeType.HighLow)
							{
								num25 = inHigh[num20 - 2] - inLow[num20 - 2];
							}
							else
							{
								double num30;
								if (rangeType == RangeType.Shadows)
								{
									double num26 = inClose[num20 - 2];
									double num27 = inOpen[num20 - 2];
									double num28 = ((!(num26 >= num27)) ? num27 : num26);
									double num29 = ((!(num26 >= num27)) ? num26 : num27);
									num30 = num29 - inLow[num20 - 2] + (inHigh[num20 - 2] - num28);
								}
								else
								{
									num30 = 0.0;
								}
								num25 = num30;
							}
							num24 = num25;
						}
						num23 = num24;
					}
					double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
					candleSettings = Globals.candleSettings;
					RangeType rangeType2;
					if (Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]) > candleSettings[0].factor * num23 / num31)
					{
						double num26 = inClose[num20 - 2];
						double num27 = inOpen[num20 - 2];
						if (!(num26 >= num27))
						{
							double num32 = inClose[num20 - 1];
							double num33 = inOpen[num20 - 1];
							if (!(num32 >= num33) && num32 > num26 && num33 <= num27 && inLow[num20 - 1] < inLow[num20 - 2])
							{
								CandleSetting candleSetting2 = candleSettings[2];
								double num34 = candleSetting2.avgPeriod;
								double num35;
								if (num34 != 0.0)
								{
									num35 = num3 / num34;
								}
								else
								{
									rangeType2 = candleSetting2.rangeType;
									double num36;
									if (rangeType2 == RangeType.RealBody)
									{
										num36 = Math.Abs(inClose[num20] - inOpen[num20]);
									}
									else
									{
										double num37;
										if (rangeType2 == RangeType.HighLow)
										{
											num37 = inHigh[num20] - inLow[num20];
										}
										else
										{
											double num40;
											if (rangeType2 == RangeType.Shadows)
											{
												double num9 = inClose[num20];
												double num10 = inOpen[num20];
												double num38 = ((!(num9 >= num10)) ? num10 : num9);
												double num39 = ((!(num9 >= num10)) ? num9 : num10);
												num40 = num39 - inLow[num20] + (inHigh[num20] - num38);
											}
											else
											{
												num40 = 0.0;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num20] - inOpen[num20]) < Globals.candleSettings[2].factor * num35 / num41)
								{
									double num10 = inOpen[num20];
									if (inClose[num20] >= num10 && num10 > inLow[num20 - 1])
									{
										outInteger[num21] = 100;
										num21++;
										goto IL_049d;
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_049d;
					IL_049d:
					rangeType = Globals.candleSettings[0].rangeType;
					double num42;
					if (rangeType == RangeType.RealBody)
					{
						num42 = Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]);
					}
					else
					{
						double num43;
						if (rangeType == RangeType.HighLow)
						{
							num43 = inHigh[num20 - 2] - inLow[num20 - 2];
						}
						else
						{
							double num46;
							if (rangeType == RangeType.Shadows)
							{
								double num26 = inClose[num20 - 2];
								double num27 = inOpen[num20 - 2];
								double num44 = ((!(num26 >= num27)) ? num27 : num26);
								double num45 = ((!(num26 >= num27)) ? num26 : num27);
								num46 = num45 - inLow[num20 - 2] + (inHigh[num20 - 2] - num44);
							}
							else
							{
								num46 = 0.0;
							}
							num43 = num46;
						}
						num42 = num43;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num47;
					if (rangeType == RangeType.RealBody)
					{
						num47 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num48;
						if (rangeType == RangeType.HighLow)
						{
							num48 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num53;
							if (rangeType == RangeType.Shadows)
							{
								double num49 = inClose[num4];
								double num50 = inOpen[num4];
								double num51 = ((!(num49 >= num50)) ? num50 : num49);
								double num52 = ((!(num49 >= num50)) ? num49 : num50);
								num53 = num52 - inLow[num4] + (inHigh[num4] - num51);
							}
							else
							{
								num53 = 0.0;
							}
							num48 = num53;
						}
						num47 = num48;
					}
					num2 = num42 - num47 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num54;
					if (rangeType2 == RangeType.RealBody)
					{
						num54 = Math.Abs(inClose[num20] - inOpen[num20]);
					}
					else
					{
						double num55;
						if (rangeType2 == RangeType.HighLow)
						{
							num55 = inHigh[num20] - inLow[num20];
						}
						else
						{
							double num58;
							if (rangeType2 == RangeType.Shadows)
							{
								double num9 = inClose[num20];
								double num10 = inOpen[num20];
								double num56 = ((!(num9 >= num10)) ? num10 : num9);
								double num57 = ((!(num9 >= num10)) ? num9 : num10);
								num58 = num57 - inLow[num20] + (inHigh[num20] - num56);
							}
							else
							{
								num58 = 0.0;
							}
							num55 = num58;
						}
						num54 = num55;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num59;
					if (rangeType2 == RangeType.RealBody)
					{
						num59 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num60;
						if (rangeType2 == RangeType.HighLow)
						{
							num60 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num65;
							if (rangeType2 == RangeType.Shadows)
							{
								double num61 = inClose[num5];
								double num62 = inOpen[num5];
								double num63 = ((!(num61 >= num62)) ? num62 : num61);
								double num64 = ((!(num61 >= num62)) ? num61 : num62);
								num65 = num64 - inLow[num5] + (inHigh[num5] - num63);
							}
							else
							{
								num65 = 0.0;
							}
							num60 = num65;
						}
						num59 = num60;
					}
					num3 = num54 - num59 + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlUpsideGap2CrowsLookback()
	{
		CandleSetting[] candleSettings = Globals.candleSettings;
		int avgPeriod = candleSettings[2].avgPeriod;
		int avgPeriod2 = candleSettings[0].avgPeriod;
		return ((avgPeriod <= avgPeriod2) ? avgPeriod2 : avgPeriod) + 2;
	}

	public static RetCode CdlUpsideGap2Crows(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlUpsideGap2CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod - 1;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						float num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = (float)(double)Math.Abs((float)((double)inClose[num6] - (double)inOpen[num6]));
						}
						else
						{
							float num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = (float)((double)inHigh[num6] - (double)inLow[num6]);
							}
							else
							{
								float num13;
								if (rangeType == RangeType.Shadows)
								{
									float num9 = inClose[num6];
									float num10 = inOpen[num6];
									float num11 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num12 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num13 = (float)((double)num12 - (double)inLow[num6] + ((double)inHigh[num6] - (double)num11));
								}
								else
								{
									num13 = 0f;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = (double)num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						float num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = (float)(double)Math.Abs((float)((double)inClose[num14] - (double)inOpen[num14]));
						}
						else
						{
							float num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = (float)((double)inHigh[num14] - (double)inLow[num14]);
							}
							else
							{
								float num19;
								if (rangeType2 == RangeType.Shadows)
								{
									float num9 = inClose[num14];
									float num10 = inOpen[num14];
									float num17 = ((!((double)num9 >= (double)num10)) ? num10 : num9);
									float num18 = ((!((double)num9 >= (double)num10)) ? num9 : num10);
									num19 = (float)((double)num18 - (double)inLow[num14] + ((double)inHigh[num14] - (double)num17));
								}
								else
								{
									num19 = 0f;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = (double)num15 + num3;
						num14++;
					}
					while (num14 < startIdx - 1);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					float num22 = inClose[num20 - 2];
					float num23 = inOpen[num20 - 2];
					RangeType rangeType;
					RangeType rangeType2;
					if ((double)num22 >= (double)num23)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num24 = candleSetting.avgPeriod;
						double num25;
						if (num24 != 0.0)
						{
							num25 = num2 / num24;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							float num26;
							if (rangeType == RangeType.RealBody)
							{
								num26 = (float)(double)Math.Abs((float)((double)num22 - (double)num23));
							}
							else
							{
								float num27;
								if (rangeType == RangeType.HighLow)
								{
									num27 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
								}
								else
								{
									float num30;
									if (rangeType == RangeType.Shadows)
									{
										float num28 = ((!((double)num22 >= (double)num23)) ? num23 : num22);
										float num29 = ((!((double)num22 >= (double)num23)) ? num22 : num23);
										num30 = (float)((double)num29 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num28));
									}
									else
									{
										num30 = 0f;
									}
									num27 = num30;
								}
								num26 = num27;
							}
							num25 = num26;
						}
						double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if ((double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2])) > candleSettings[0].factor * num25 / num31)
						{
							float num32 = inClose[num20 - 1];
							float num33 = inOpen[num20 - 1];
							if (!((double)num32 >= (double)num33))
							{
								CandleSetting candleSetting2 = candleSettings[2];
								double num34 = candleSetting2.avgPeriod;
								double num35;
								if (num34 != 0.0)
								{
									num35 = num3 / num34;
								}
								else
								{
									rangeType2 = candleSetting2.rangeType;
									float num36;
									if (rangeType2 == RangeType.RealBody)
									{
										num36 = (float)(double)Math.Abs((float)((double)num32 - (double)num33));
									}
									else
									{
										float num37;
										if (rangeType2 == RangeType.HighLow)
										{
											num37 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
										}
										else
										{
											float num40;
											if (rangeType2 == RangeType.Shadows)
											{
												float num38 = ((!((double)num32 >= (double)num33)) ? num33 : num32);
												float num39 = ((!((double)num32 >= (double)num33)) ? num32 : num33);
												num40 = (float)((double)num39 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num38));
											}
											else
											{
												num40 = 0f;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if ((double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1])) <= Globals.candleSettings[2].factor * num35 / num41)
								{
									num33 = inOpen[num20 - 1];
									num32 = inClose[num20 - 1];
									float num42 = ((!((double)num33 < (double)num32)) ? num32 : num33);
									num23 = inOpen[num20 - 2];
									num22 = inClose[num20 - 2];
									float num43 = ((!((double)num23 > (double)num22)) ? num22 : num23);
									if ((double)num42 > (double)num43)
									{
										float num9 = inClose[num20];
										float num10 = inOpen[num20];
										if (!((double)num9 >= (double)num10) && (double)num10 > (double)num33 && (double)num9 < (double)num32 && (double)num9 > (double)num22)
										{
											outInteger[num21] = -100;
											num21++;
											goto IL_051b;
										}
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_051b;
					IL_051b:
					rangeType = Globals.candleSettings[0].rangeType;
					float num44;
					if (rangeType == RangeType.RealBody)
					{
						num44 = (float)(double)Math.Abs((float)((double)inClose[num20 - 2] - (double)inOpen[num20 - 2]));
					}
					else
					{
						float num45;
						if (rangeType == RangeType.HighLow)
						{
							num45 = (float)((double)inHigh[num20 - 2] - (double)inLow[num20 - 2]);
						}
						else
						{
							float num48;
							if (rangeType == RangeType.Shadows)
							{
								num22 = inClose[num20 - 2];
								num23 = inOpen[num20 - 2];
								float num46 = ((!((double)num22 >= (double)num23)) ? num23 : num22);
								float num47 = ((!((double)num22 >= (double)num23)) ? num22 : num23);
								num48 = (float)((double)num47 - (double)inLow[num20 - 2] + ((double)inHigh[num20 - 2] - (double)num46));
							}
							else
							{
								num48 = 0f;
							}
							num45 = num48;
						}
						num44 = num45;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					float num49;
					if (rangeType == RangeType.RealBody)
					{
						num49 = (float)(double)Math.Abs((float)((double)inClose[num4] - (double)inOpen[num4]));
					}
					else
					{
						float num50;
						if (rangeType == RangeType.HighLow)
						{
							num50 = (float)((double)inHigh[num4] - (double)inLow[num4]);
						}
						else
						{
							float num55;
							if (rangeType == RangeType.Shadows)
							{
								float num51 = inClose[num4];
								float num52 = inOpen[num4];
								float num53 = ((!((double)num51 >= (double)num52)) ? num52 : num51);
								float num54 = ((!((double)num51 >= (double)num52)) ? num51 : num52);
								num55 = (float)((double)num54 - (double)inLow[num4] + ((double)inHigh[num4] - (double)num53));
							}
							else
							{
								num55 = 0f;
							}
							num50 = num55;
						}
						num49 = num50;
					}
					num2 = (double)(num44 - num49) + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num56;
					if (rangeType2 == RangeType.RealBody)
					{
						num56 = (float)(double)Math.Abs((float)((double)inClose[num20 - 1] - (double)inOpen[num20 - 1]));
					}
					else
					{
						float num57;
						if (rangeType2 == RangeType.HighLow)
						{
							num57 = (float)((double)inHigh[num20 - 1] - (double)inLow[num20 - 1]);
						}
						else
						{
							float num60;
							if (rangeType2 == RangeType.Shadows)
							{
								float num32 = inClose[num20 - 1];
								float num33 = inOpen[num20 - 1];
								float num58 = ((!((double)num32 >= (double)num33)) ? num33 : num32);
								float num59 = ((!((double)num32 >= (double)num33)) ? num32 : num33);
								num60 = (float)((double)num59 - (double)inLow[num20 - 1] + ((double)inHigh[num20 - 1] - (double)num58));
							}
							else
							{
								num60 = 0f;
							}
							num57 = num60;
						}
						num56 = num57;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					float num61;
					if (rangeType2 == RangeType.RealBody)
					{
						num61 = (float)(double)Math.Abs((float)((double)inClose[num5] - (double)inOpen[num5]));
					}
					else
					{
						float num62;
						if (rangeType2 == RangeType.HighLow)
						{
							num62 = (float)((double)inHigh[num5] - (double)inLow[num5]);
						}
						else
						{
							float num67;
							if (rangeType2 == RangeType.Shadows)
							{
								float num63 = inClose[num5];
								float num64 = inOpen[num5];
								float num65 = ((!((double)num63 >= (double)num64)) ? num64 : num63);
								float num66 = ((!((double)num63 >= (double)num64)) ? num63 : num64);
								num67 = (float)((double)num66 - (double)inLow[num5] + ((double)inHigh[num5] - (double)num65));
							}
							else
							{
								num67 = 0f;
							}
							num62 = num67;
						}
						num61 = num62;
					}
					num3 = (double)(num56 - num61) + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlUpsideGap2Crows(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				int num = CdlUpsideGap2CrowsLookback();
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num2 = 0.0;
				double num3 = 0.0;
				CandleSetting[] candleSettings = Globals.candleSettings;
				int num4 = startIdx - candleSettings[0].avgPeriod - 2;
				int num5 = startIdx - candleSettings[2].avgPeriod - 1;
				int num6 = num4;
				if (num4 < startIdx - 2)
				{
					do
					{
						RangeType rangeType = Globals.candleSettings[0].rangeType;
						double num7;
						if (rangeType == RangeType.RealBody)
						{
							num7 = Math.Abs(inClose[num6] - inOpen[num6]);
						}
						else
						{
							double num8;
							if (rangeType == RangeType.HighLow)
							{
								num8 = inHigh[num6] - inLow[num6];
							}
							else
							{
								double num13;
								if (rangeType == RangeType.Shadows)
								{
									double num9 = inClose[num6];
									double num10 = inOpen[num6];
									double num11 = ((!(num9 >= num10)) ? num10 : num9);
									double num12 = ((!(num9 >= num10)) ? num9 : num10);
									num13 = num12 - inLow[num6] + (inHigh[num6] - num11);
								}
								else
								{
									num13 = 0.0;
								}
								num8 = num13;
							}
							num7 = num8;
						}
						num2 = num7 + num2;
						num6++;
					}
					while (num6 < startIdx - 2);
				}
				int num14 = num5;
				if (num5 < startIdx - 1)
				{
					do
					{
						RangeType rangeType2 = Globals.candleSettings[2].rangeType;
						double num15;
						if (rangeType2 == RangeType.RealBody)
						{
							num15 = Math.Abs(inClose[num14] - inOpen[num14]);
						}
						else
						{
							double num16;
							if (rangeType2 == RangeType.HighLow)
							{
								num16 = inHigh[num14] - inLow[num14];
							}
							else
							{
								double num19;
								if (rangeType2 == RangeType.Shadows)
								{
									double num9 = inClose[num14];
									double num10 = inOpen[num14];
									double num17 = ((!(num9 >= num10)) ? num10 : num9);
									double num18 = ((!(num9 >= num10)) ? num9 : num10);
									num19 = num18 - inLow[num14] + (inHigh[num14] - num17);
								}
								else
								{
									num19 = 0.0;
								}
								num16 = num19;
							}
							num15 = num16;
						}
						num3 = num15 + num3;
						num14++;
					}
					while (num14 < startIdx - 1);
				}
				int num20 = startIdx;
				int num21 = 0;
				do
				{
					double num22 = inClose[num20 - 2];
					double num23 = inOpen[num20 - 2];
					RangeType rangeType;
					RangeType rangeType2;
					if (num22 >= num23)
					{
						CandleSetting candleSetting = Globals.candleSettings[0];
						double num24 = candleSetting.avgPeriod;
						double num25;
						if (num24 != 0.0)
						{
							num25 = num2 / num24;
						}
						else
						{
							rangeType = candleSetting.rangeType;
							double num26;
							if (rangeType == RangeType.RealBody)
							{
								num26 = Math.Abs(num22 - num23);
							}
							else
							{
								double num27;
								if (rangeType == RangeType.HighLow)
								{
									num27 = inHigh[num20 - 2] - inLow[num20 - 2];
								}
								else
								{
									double num30;
									if (rangeType == RangeType.Shadows)
									{
										double num28 = num22;
										double num29 = num23;
										num30 = num29 - inLow[num20 - 2] + (inHigh[num20 - 2] - num28);
									}
									else
									{
										num30 = 0.0;
									}
									num27 = num30;
								}
								num26 = num27;
							}
							num25 = num26;
						}
						double num31 = ((Globals.candleSettings[0].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
						candleSettings = Globals.candleSettings;
						if (Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]) > candleSettings[0].factor * num25 / num31)
						{
							double num32 = inClose[num20 - 1];
							double num33 = inOpen[num20 - 1];
							if (!(num32 >= num33))
							{
								CandleSetting candleSetting2 = candleSettings[2];
								double num34 = candleSetting2.avgPeriod;
								double num35;
								if (num34 != 0.0)
								{
									num35 = num3 / num34;
								}
								else
								{
									rangeType2 = candleSetting2.rangeType;
									double num36;
									if (rangeType2 == RangeType.RealBody)
									{
										num36 = Math.Abs(num32 - num33);
									}
									else
									{
										double num37;
										if (rangeType2 == RangeType.HighLow)
										{
											num37 = inHigh[num20 - 1] - inLow[num20 - 1];
										}
										else
										{
											double num40;
											if (rangeType2 == RangeType.Shadows)
											{
												double num38 = ((!(num32 >= num33)) ? num33 : num32);
												double num39 = ((!(num32 >= num33)) ? num32 : num33);
												num40 = num39 - inLow[num20 - 1] + (inHigh[num20 - 1] - num38);
											}
											else
											{
												num40 = 0.0;
											}
											num37 = num40;
										}
										num36 = num37;
									}
									num35 = num36;
								}
								double num41 = ((Globals.candleSettings[2].rangeType != RangeType.Shadows) ? 1.0 : 2.0);
								if (Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]) <= Globals.candleSettings[2].factor * num35 / num41)
								{
									num33 = inOpen[num20 - 1];
									num32 = inClose[num20 - 1];
									double num42 = ((!(num33 < num32)) ? num32 : num33);
									num23 = inOpen[num20 - 2];
									num22 = inClose[num20 - 2];
									double num43 = ((!(num23 > num22)) ? num22 : num23);
									if (num42 > num43)
									{
										double num9 = inClose[num20];
										double num10 = inOpen[num20];
										if (!(num9 >= num10) && num10 > num33 && num9 < num32 && num9 > num22)
										{
											outInteger[num21] = -100;
											num21++;
											goto IL_04a2;
										}
									}
								}
							}
						}
					}
					outInteger[num21] = 0;
					num21++;
					goto IL_04a2;
					IL_04a2:
					rangeType = Globals.candleSettings[0].rangeType;
					double num44;
					if (rangeType == RangeType.RealBody)
					{
						num44 = Math.Abs(inClose[num20 - 2] - inOpen[num20 - 2]);
					}
					else
					{
						double num45;
						if (rangeType == RangeType.HighLow)
						{
							num45 = inHigh[num20 - 2] - inLow[num20 - 2];
						}
						else
						{
							double num48;
							if (rangeType == RangeType.Shadows)
							{
								num22 = inClose[num20 - 2];
								num23 = inOpen[num20 - 2];
								double num46 = ((!(num22 >= num23)) ? num23 : num22);
								double num47 = ((!(num22 >= num23)) ? num22 : num23);
								num48 = num47 - inLow[num20 - 2] + (inHigh[num20 - 2] - num46);
							}
							else
							{
								num48 = 0.0;
							}
							num45 = num48;
						}
						num44 = num45;
					}
					rangeType = Globals.candleSettings[0].rangeType;
					double num49;
					if (rangeType == RangeType.RealBody)
					{
						num49 = Math.Abs(inClose[num4] - inOpen[num4]);
					}
					else
					{
						double num50;
						if (rangeType == RangeType.HighLow)
						{
							num50 = inHigh[num4] - inLow[num4];
						}
						else
						{
							double num55;
							if (rangeType == RangeType.Shadows)
							{
								double num51 = inClose[num4];
								double num52 = inOpen[num4];
								double num53 = ((!(num51 >= num52)) ? num52 : num51);
								double num54 = ((!(num51 >= num52)) ? num51 : num52);
								num55 = num54 - inLow[num4] + (inHigh[num4] - num53);
							}
							else
							{
								num55 = 0.0;
							}
							num50 = num55;
						}
						num49 = num50;
					}
					num2 = num44 - num49 + num2;
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num56;
					if (rangeType2 == RangeType.RealBody)
					{
						num56 = Math.Abs(inClose[num20 - 1] - inOpen[num20 - 1]);
					}
					else
					{
						double num57;
						if (rangeType2 == RangeType.HighLow)
						{
							num57 = inHigh[num20 - 1] - inLow[num20 - 1];
						}
						else
						{
							double num60;
							if (rangeType2 == RangeType.Shadows)
							{
								double num32 = inClose[num20 - 1];
								double num33 = inOpen[num20 - 1];
								double num58 = ((!(num32 >= num33)) ? num33 : num32);
								double num59 = ((!(num32 >= num33)) ? num32 : num33);
								num60 = num59 - inLow[num20 - 1] + (inHigh[num20 - 1] - num58);
							}
							else
							{
								num60 = 0.0;
							}
							num57 = num60;
						}
						num56 = num57;
					}
					rangeType2 = Globals.candleSettings[2].rangeType;
					double num61;
					if (rangeType2 == RangeType.RealBody)
					{
						num61 = Math.Abs(inClose[num5] - inOpen[num5]);
					}
					else
					{
						double num62;
						if (rangeType2 == RangeType.HighLow)
						{
							num62 = inHigh[num5] - inLow[num5];
						}
						else
						{
							double num67;
							if (rangeType2 == RangeType.Shadows)
							{
								double num63 = inClose[num5];
								double num64 = inOpen[num5];
								double num65 = ((!(num63 >= num64)) ? num64 : num63);
								double num66 = ((!(num63 >= num64)) ? num63 : num64);
								num67 = num66 - inLow[num5] + (inHigh[num5] - num65);
							}
							else
							{
								num67 = 0.0;
							}
							num62 = num67;
						}
						num61 = num62;
					}
					num3 = num56 - num61 + num3;
					num20++;
					num4++;
					num5++;
				}
				while (num20 <= endIdx);
				outNBElement = num21;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CdlXSideGap3MethodsLookback()
	{
		return 2;
	}

	public static RetCode CdlXSideGap3Methods(int startIdx, int endIdx, float[] inOpen, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 2)
				{
					startIdx = 2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - 2;
				do
				{
					float num3 = inClose[num2];
					float num4 = inOpen[num2];
					int num5 = (((double)num3 >= (double)num4) ? 1 : (-1));
					float num6 = inClose[num2 + 1];
					float num7 = inOpen[num2 + 1];
					int num8 = (((double)num6 >= (double)num7) ? 1 : (-1));
					if (num5 == num8)
					{
						int num9 = (((double)num6 >= (double)num7) ? 1 : (-1));
						float num10 = inClose[num2 + 2];
						float num11 = inOpen[num2 + 2];
						int num12 = (((double)num10 >= (double)num11) ? 1 : (-1));
						if (num9 == -num12)
						{
							float num13 = ((!((double)num6 > (double)num7)) ? num7 : num6);
							if ((double)num11 < (double)num13)
							{
								float num14 = ((!((double)num6 < (double)num7)) ? num7 : num6);
								if ((double)num11 > (double)num14)
								{
									float num15 = ((!((double)num3 > (double)num4)) ? num4 : num3);
									if ((double)num10 < (double)num15)
									{
										float num16 = ((!((double)num3 < (double)num4)) ? num4 : num3);
										if ((double)num10 > (double)num16)
										{
											if ((double)num3 >= (double)num4)
											{
												float num17 = ((!((double)num7 < (double)num6)) ? num6 : num7);
												float num18 = ((!((double)num4 > (double)num3)) ? num3 : num4);
												if ((double)num17 > (double)num18)
												{
													goto IL_0178;
												}
											}
											if (!((double)num3 >= (double)num4))
											{
												float num19 = ((!((double)num7 > (double)num6)) ? num6 : num7);
												float num20 = ((!((double)num4 < (double)num3)) ? num3 : num4);
												if ((double)num19 < (double)num20)
												{
													goto IL_0178;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num] = 0;
					num++;
					goto IL_01a4;
					IL_01a4:
					num2++;
					continue;
					IL_0178:
					int num21 = (((double)num3 >= (double)num4) ? 1 : (-1));
					outInteger[num] = num21 * 100;
					num++;
					goto IL_01a4;
				}
				while (num2 + 2 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode CdlXSideGap3Methods(int startIdx, int endIdx, double[] inOpen, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inOpen != null && inHigh != null && inLow != null && inClose != null)
			{
				if (outInteger == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 2)
				{
					startIdx = 2;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx - 2;
				do
				{
					double num3 = inClose[num2];
					double num4 = inOpen[num2];
					int num5 = ((num3 >= num4) ? 1 : (-1));
					double num6 = inClose[num2 + 1];
					double num7 = inOpen[num2 + 1];
					int num8 = ((num6 >= num7) ? 1 : (-1));
					if (num5 == num8)
					{
						int num9 = ((num6 >= num7) ? 1 : (-1));
						double num10 = inClose[num2 + 2];
						double num11 = inOpen[num2 + 2];
						int num12 = ((num10 >= num11) ? 1 : (-1));
						if (num9 == -num12)
						{
							double num13 = ((!(num6 > num7)) ? num7 : num6);
							if (num11 < num13)
							{
								double num14 = ((!(num6 < num7)) ? num7 : num6);
								if (num11 > num14)
								{
									double num15 = ((!(num3 > num4)) ? num4 : num3);
									if (num10 < num15)
									{
										double num16 = ((!(num3 < num4)) ? num4 : num3);
										if (num10 > num16)
										{
											if (num3 >= num4)
											{
												double num17 = ((!(num7 < num6)) ? num6 : num7);
												double num18 = ((!(num4 > num3)) ? num3 : num4);
												if (num17 > num18)
												{
													goto IL_014d;
												}
											}
											if (!(num3 >= num4))
											{
												double num19 = ((!(num7 > num6)) ? num6 : num7);
												double num20 = ((!(num4 < num3)) ? num3 : num4);
												if (num19 < num20)
												{
													goto IL_014d;
												}
											}
										}
									}
								}
							}
						}
					}
					outInteger[num] = 0;
					num++;
					goto IL_0177;
					IL_0177:
					num2++;
					continue;
					IL_014d:
					int num21 = ((num3 >= num4) ? 1 : (-1));
					outInteger[num] = num21 * 100;
					num++;
					goto IL_0177;
				}
				while (num2 + 2 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CeilLookback()
	{
		return 0;
	}

	public static RetCode Ceil(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Ceiling(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Ceil(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Ceiling(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CmoLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		int num = (int)Globals.unstablePeriod[3] + optInTimePeriod;
		if (Globals.compatibility == Compatibility.Metastock)
		{
			num--;
		}
		return num;
	}

	public static RetCode Cmo(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = CmoLookback(optInTimePeriod);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			int num2 = 0;
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num3 = startIdx - num;
			double num4 = inReal[num3];
			double num11;
			double num7;
			double num6;
			if (Globals.unstablePeriod[3] == 0 && Globals.compatibility == Compatibility.Metastock)
			{
				double num5 = num4;
				num6 = 0.0;
				num7 = 0.0;
				int num8 = optInTimePeriod;
				double num9;
				double num10;
				if (optInTimePeriod > 0)
				{
					do
					{
						num9 = inReal[num3];
						num3++;
						num10 = num9 - num4;
						num4 = num9;
						if (num10 < 0.0)
						{
							num7 -= num10;
						}
						else
						{
							num6 = num10 + num6;
						}
						num8--;
					}
					while (num8 > 0);
				}
				num11 = optInTimePeriod;
				num9 = num7 / num11;
				num10 = num6 / num11;
				double num12 = num10 - num9;
				double num13 = num10 + num9;
				if (-1E-08 < num13 && num13 < 1E-08)
				{
					outReal[0] = 0.0;
					num2 = 1;
				}
				else
				{
					outReal[0] = num12 / num13 * 100.0;
					num2 = 1;
				}
				if (num3 > endIdx)
				{
					outBegIdx = startIdx;
					outNBElement = 1;
					return RetCode.Success;
				}
				num3 -= optInTimePeriod;
				num4 = num5;
			}
			num6 = 0.0;
			num7 = 0.0;
			num3++;
			int num14 = optInTimePeriod;
			if (optInTimePeriod > 0)
			{
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num14--;
				}
				while (num14 > 0);
			}
			num11 = optInTimePeriod;
			num7 /= num11;
			num6 /= num11;
			if (num3 > startIdx)
			{
				double num9 = num7 + num6;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[num2] = 0.0;
					num2++;
				}
				else
				{
					outReal[num2] = (num6 - num7) / num9 * 100.0;
					num2++;
				}
			}
			else if (num3 < startIdx)
			{
				double num15 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num15 * num7;
					num6 = num15 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num3++;
				}
				while (num3 < startIdx);
			}
			if (num3 <= endIdx)
			{
				double num15 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num15 * num7;
					num6 = num15 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num9 = num7 + num6;
					if (-1E-08 < num9 && num9 < 1E-08)
					{
						outReal[num2] = 0.0;
						num2++;
					}
					else
					{
						outReal[num2] = (num6 - num7) / num9 * 100.0;
						num2++;
					}
				}
				while (num3 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cmo(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = CmoLookback(optInTimePeriod);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			int num2 = 0;
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num3 = startIdx - num;
			double num4 = inReal[num3];
			double num11;
			double num7;
			double num6;
			if (Globals.unstablePeriod[3] == 0 && Globals.compatibility == Compatibility.Metastock)
			{
				double num5 = num4;
				num6 = 0.0;
				num7 = 0.0;
				int num8 = optInTimePeriod;
				double num9;
				double num10;
				if (optInTimePeriod > 0)
				{
					do
					{
						num9 = inReal[num3];
						num3++;
						num10 = num9 - num4;
						num4 = num9;
						if (num10 < 0.0)
						{
							num7 -= num10;
						}
						else
						{
							num6 = num10 + num6;
						}
						num8--;
					}
					while (num8 > 0);
				}
				num11 = optInTimePeriod;
				num9 = num7 / num11;
				num10 = num6 / num11;
				double num12 = num10 - num9;
				double num13 = num10 + num9;
				if (-1E-08 < num13 && num13 < 1E-08)
				{
					outReal[0] = 0.0;
					num2 = 1;
				}
				else
				{
					outReal[0] = num12 / num13 * 100.0;
					num2 = 1;
				}
				if (num3 > endIdx)
				{
					outBegIdx = startIdx;
					outNBElement = 1;
					return RetCode.Success;
				}
				num3 -= optInTimePeriod;
				num4 = num5;
			}
			num6 = 0.0;
			num7 = 0.0;
			num3++;
			int num14 = optInTimePeriod;
			if (optInTimePeriod > 0)
			{
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num14--;
				}
				while (num14 > 0);
			}
			num11 = optInTimePeriod;
			num7 /= num11;
			num6 /= num11;
			if (num3 > startIdx)
			{
				double num9 = num7 + num6;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[num2] = 0.0;
					num2++;
				}
				else
				{
					outReal[num2] = (num6 - num7) / num9 * 100.0;
					num2++;
				}
			}
			else if (num3 < startIdx)
			{
				double num15 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num15 * num7;
					num6 = num15 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num3++;
				}
				while (num3 < startIdx);
			}
			if (num3 <= endIdx)
			{
				double num15 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num15 * num7;
					num6 = num15 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num9 = num7 + num6;
					if (-1E-08 < num9 && num9 < 1E-08)
					{
						outReal[num2] = 0.0;
						num2++;
					}
					else
					{
						outReal[num2] = (num6 - num7) / num9 * 100.0;
						num2++;
					}
				}
				while (num3 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CorrelLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Correl(int startIdx, int endIdx, float[] inReal0, float[] inReal1, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num2 = startIdx - num;
			double num3 = 0.0;
			double num4 = 0.0;
			double num5 = 0.0;
			double num6 = 0.0;
			double num7 = 0.0;
			int num8 = num2;
			if (num2 <= startIdx)
			{
				do
				{
					double num9 = inReal0[num8];
					num6 = num9 + num6;
					double num10 = num9;
					num4 = num10 * num10 + num4;
					double num11 = inReal1[num8];
					num7 = num11 * num9 + num7;
					num5 = num11 + num5;
					double num12 = num11;
					num3 = num12 * num12 + num3;
					num8++;
				}
				while (num8 <= startIdx);
			}
			double num13 = inReal0[num2];
			double num14 = inReal1[num2];
			num2++;
			double num15 = optInTimePeriod;
			double num16 = num3;
			double num17 = num5;
			double num18 = num16 - num17 * num17 / num15;
			double num19 = num4;
			double num20 = num6;
			double num21 = num18 * (num19 - num20 * num20 / num15);
			if (!(num21 < 1E-08))
			{
				outReal[0] = (num7 - num5 * num6 / num15) / Math.Sqrt(num21);
			}
			else
			{
				outReal[0] = 0.0;
			}
			int num22 = 1;
			if (num8 <= endIdx)
			{
				do
				{
					double num9 = inReal0[num8];
					num6 = num6 - num13 + num9;
					double num23 = num4;
					double num24 = num13;
					double num25 = num23 - num24 * num24;
					double num26 = num9;
					num4 = num25 + num26 * num26;
					double num11 = inReal1[num8];
					num8++;
					num7 = num7 - num14 * num13 + num11 * num9;
					num5 = num5 - num14 + num11;
					double num27 = num3;
					double num28 = num14;
					double num29 = num27 - num28 * num28;
					double num30 = num11;
					num3 = num29 + num30 * num30;
					num13 = inReal0[num2];
					num14 = inReal1[num2];
					num2++;
					double num31 = num3;
					double num32 = num5;
					double num33 = num31 - num32 * num32 / num15;
					double num34 = num4;
					double num35 = num6;
					num21 = num33 * (num34 - num35 * num35 / num15);
					if (!(num21 < 1E-08))
					{
						outReal[num22] = (num7 - num5 * num6 / num15) / Math.Sqrt(num21);
						num22++;
					}
					else
					{
						outReal[num22] = 0.0;
						num22++;
					}
				}
				while (num8 <= endIdx);
			}
			outNBElement = num22;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Correl(int startIdx, int endIdx, double[] inReal0, double[] inReal1, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num2 = startIdx - num;
			double num3 = 0.0;
			double num4 = 0.0;
			double num5 = 0.0;
			double num6 = 0.0;
			double num7 = 0.0;
			int num8 = num2;
			if (num2 <= startIdx)
			{
				do
				{
					double num9 = inReal0[num8];
					num6 = num9 + num6;
					double num10 = num9;
					num4 = num10 * num10 + num4;
					double num11 = inReal1[num8];
					num7 = num11 * num9 + num7;
					num5 = num11 + num5;
					double num12 = num11;
					num3 = num12 * num12 + num3;
					num8++;
				}
				while (num8 <= startIdx);
			}
			double num13 = inReal0[num2];
			double num14 = inReal1[num2];
			num2++;
			double num15 = optInTimePeriod;
			double num16 = num3;
			double num17 = num5;
			double num18 = num16 - num17 * num17 / num15;
			double num19 = num4;
			double num20 = num6;
			double num21 = num18 * (num19 - num20 * num20 / num15);
			if (!(num21 < 1E-08))
			{
				outReal[0] = (num7 - num5 * num6 / num15) / Math.Sqrt(num21);
			}
			else
			{
				outReal[0] = 0.0;
			}
			int num22 = 1;
			if (num8 <= endIdx)
			{
				do
				{
					double num9 = inReal0[num8];
					num6 = num6 - num13 + num9;
					double num23 = num4;
					double num24 = num13;
					double num25 = num23 - num24 * num24;
					double num26 = num9;
					num4 = num25 + num26 * num26;
					double num11 = inReal1[num8];
					num8++;
					num7 = num7 - num14 * num13 + num11 * num9;
					num5 = num5 - num14 + num11;
					double num27 = num3;
					double num28 = num14;
					double num29 = num27 - num28 * num28;
					double num30 = num11;
					num3 = num29 + num30 * num30;
					num13 = inReal0[num2];
					num14 = inReal1[num2];
					num2++;
					double num31 = num3;
					double num32 = num5;
					double num33 = num31 - num32 * num32 / num15;
					double num34 = num4;
					double num35 = num6;
					num21 = num33 * (num34 - num35 * num35 / num15);
					if (!(num21 < 1E-08))
					{
						outReal[num22] = (num7 - num5 * num6 / num15) / Math.Sqrt(num21);
						num22++;
					}
					else
					{
						outReal[num22] = 0.0;
						num22++;
					}
				}
				while (num8 <= endIdx);
			}
			outNBElement = num22;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CosLookback()
	{
		return 0;
	}

	public static RetCode Cos(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Cos(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cos(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Cos(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int CoshLookback()
	{
		return 0;
	}

	public static RetCode Cosh(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Cosh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Cosh(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Cosh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int DemaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return EmaLookback(optInTimePeriod) << 1;
	}

	public static RetCode Dema(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outNBElement = 0;
			outBegIdx = 0;
			int num = EmaLookback(optInTimePeriod);
			int num2 = num << 1;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			double[] array = new double[endIdx + (num2 - startIdx) + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - num, endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				double[] array2 = new double[outNbElement];
				if (array2 == null)
				{
					return RetCode.AllocErr;
				}
				int outBegIdx3;
				int outNbElement2;
				RetCode retCode2 = TA_INT_EMA(0, outNbElement - 1, array, optInTimePeriod, optInK_, out outBegIdx3, out outNbElement2, array2);
				if (retCode2 == RetCode.Success && outNbElement2 != 0)
				{
					int num3 = outBegIdx3;
					int num4 = 0;
					if (0 < outNbElement2)
					{
						do
						{
							outReal[num4] = array[num3] * 2.0 - array2[num4];
							num3++;
							num4++;
						}
						while (num4 < outNbElement2);
					}
					outBegIdx = outBegIdx3 + outBegIdx2;
					outNBElement = num4;
					return RetCode.Success;
				}
				return retCode2;
			}
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Dema(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outNBElement = 0;
			outBegIdx = 0;
			int num = EmaLookback(optInTimePeriod);
			int num2 = num << 1;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			double[] array;
			if (inReal == outReal)
			{
				array = outReal;
			}
			else
			{
				array = new double[endIdx + (num2 - startIdx) + 1];
				if (array == null)
				{
					return RetCode.AllocErr;
				}
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - num, endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				double[] array2 = new double[outNbElement];
				if (array2 == null)
				{
					return RetCode.AllocErr;
				}
				int outBegIdx3;
				int outNbElement2;
				RetCode retCode2 = TA_INT_EMA(0, outNbElement - 1, array, optInTimePeriod, optInK_, out outBegIdx3, out outNbElement2, array2);
				if (retCode2 == RetCode.Success && outNbElement2 != 0)
				{
					int num3 = outBegIdx3;
					int num4 = 0;
					if (0 < outNbElement2)
					{
						do
						{
							outReal[num4] = array[num3] * 2.0 - array2[num4];
							num3++;
							num4++;
						}
						while (num4 < outNbElement2);
					}
					outBegIdx = outBegIdx3 + outBegIdx2;
					outNBElement = num4;
					return RetCode.Success;
				}
				return retCode2;
			}
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int DivLookback()
	{
		return 0;
	}

	public static RetCode Div(int startIdx, int endIdx, float[] inReal0, float[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = (double)inReal0[num2] / (double)inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Div(int startIdx, int endIdx, double[] inReal0, double[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = inReal0[num2] / inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int DxLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 2;
			}
		}
		return (int)Globals.unstablePeriod[4] + optInTimePeriod;
	}

	public static RetCode Dx(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 2 : ((int)Globals.unstablePeriod[4] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				int num5 = startIdx - num;
				double num6 = inHigh[num5];
				double num7 = inLow[num5];
				double num8 = inClose[num5];
				int num9 = optInTimePeriod - 1;
				int num10 = num9;
				num9--;
				if (num10 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num4 = num11 + num4;
						num8 = inClose[num5];
						num10 = num9;
						num9--;
					}
					while (num10 > 0);
				}
				int num15 = (int)(Globals.unstablePeriod[4] + 1);
				int num16 = num15;
				num15--;
				if (num16 != 0)
				{
					double num17 = optInTimePeriod;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num18 = num2;
						num2 = num18 - num18 / num17;
						double num19 = num3;
						num3 = num19 - num19 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num20 = num4;
						num4 = num20 - num20 / num17 + num11;
						num8 = inClose[num5];
						num16 = num15;
						num15--;
					}
					while (num16 != 0);
				}
				if (-1E-08 < num4 && num4 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					double num21 = num2 / num4 * 100.0;
					double num22 = num3 / num4 * 100.0;
					double num11 = num22 + num21;
					if (-1E-08 < num11 && num11 < 1E-08)
					{
						outReal[0] = 0.0;
					}
					else
					{
						outReal[0] = Math.Abs(num21 - num22) / num11 * 100.0;
					}
				}
				int num23 = 1;
				if (num5 < endIdx)
				{
					double num17 = optInTimePeriod;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num24 = num2;
						num2 = num24 - num24 / num17;
						double num25 = num3;
						num3 = num25 - num25 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num26 = num4;
						num4 = num26 - num26 / num17 + num11;
						num8 = inClose[num5];
						if (-1E-08 < num4 && num4 < 1E-08)
						{
							outReal[num23] = outReal[num23 - 1];
						}
						else
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (-1E-08 < num11 && num11 < 1E-08)
							{
								outReal[num23] = outReal[num23 - 1];
							}
							else
							{
								outReal[num23] = Math.Abs(num21 - num22) / num11 * 100.0;
							}
						}
						num23++;
					}
					while (num5 < endIdx);
				}
				outNBElement = num23;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Dx(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 2 : ((int)Globals.unstablePeriod[4] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num2 = 0.0;
				double num3 = 0.0;
				double num4 = 0.0;
				int num5 = startIdx - num;
				double num6 = inHigh[num5];
				double num7 = inLow[num5];
				double num8 = inClose[num5];
				int num9 = optInTimePeriod - 1;
				int num10 = num9;
				num9--;
				if (num10 > 0)
				{
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num4 = num11 + num4;
						num8 = inClose[num5];
						num10 = num9;
						num9--;
					}
					while (num10 > 0);
				}
				int num15 = (int)(Globals.unstablePeriod[4] + 1);
				int num16 = num15;
				num15--;
				if (num16 != 0)
				{
					double num17 = optInTimePeriod;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num18 = num2;
						num2 = num18 - num18 / num17;
						double num19 = num3;
						num3 = num19 - num19 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num20 = num4;
						num4 = num20 - num20 / num17 + num11;
						num8 = inClose[num5];
						num16 = num15;
						num15--;
					}
					while (num16 != 0);
				}
				if (-1E-08 < num4 && num4 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					double num21 = num2 / num4 * 100.0;
					double num22 = num3 / num4 * 100.0;
					double num11 = num22 + num21;
					if (-1E-08 < num11 && num11 < 1E-08)
					{
						outReal[0] = 0.0;
					}
					else
					{
						outReal[0] = Math.Abs(num21 - num22) / num11 * 100.0;
					}
				}
				int num23 = 1;
				if (num5 < endIdx)
				{
					double num17 = optInTimePeriod;
					do
					{
						num5++;
						double num11 = inHigh[num5];
						double num12 = num11 - num6;
						num6 = num11;
						num11 = inLow[num5];
						double num13 = num7 - num11;
						num7 = num11;
						double num24 = num2;
						num2 = num24 - num24 / num17;
						double num25 = num3;
						num3 = num25 - num25 / num17;
						if (num13 > 0.0 && num12 < num13)
						{
							num2 = num13 + num2;
						}
						else if (num12 > 0.0 && num12 > num13)
						{
							num3 = num12 + num3;
						}
						num11 = num6 - num11;
						double num14 = Math.Abs(num6 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						num14 = Math.Abs(num7 - num8);
						if (num14 > num11)
						{
							num11 = num14;
						}
						double num26 = num4;
						num4 = num26 - num26 / num17 + num11;
						num8 = inClose[num5];
						if (-1E-08 < num4 && num4 < 1E-08)
						{
							outReal[num23] = outReal[num23 - 1];
						}
						else
						{
							double num21 = num2 / num4 * 100.0;
							double num22 = num3 / num4 * 100.0;
							num11 = num22 + num21;
							if (-1E-08 < num11 && num11 < 1E-08)
							{
								outReal[num23] = outReal[num23 - 1];
							}
							else
							{
								outReal[num23] = Math.Abs(num21 - num22) / num11 * 100.0;
							}
						}
						num23++;
					}
					while (num5 < endIdx);
				}
				outNBElement = num23;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int EmaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return (int)Globals.unstablePeriod[5] + optInTimePeriod - 1;
	}

	public static RetCode Ema(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_EMA(startIdx, endIdx, inReal, optInTimePeriod, 2.0 / (double)(optInTimePeriod + 1), out outBegIdx, out outNBElement, outReal);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Ema(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_EMA(startIdx, endIdx, inReal, optInTimePeriod, 2.0 / (double)(optInTimePeriod + 1), out outBegIdx, out outNBElement, outReal);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int ExpLookback()
	{
		return 0;
	}

	public static RetCode Exp(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Exp(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Exp(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Exp(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int FloorLookback()
	{
		return 0;
	}

	public static RetCode Floor(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Floor(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Floor(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Floor(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtDcPeriodLookback()
	{
		return (int)(Globals.unstablePeriod[6] + 32);
	}

	public static RetCode HtDcPeriod(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[6] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num38 = num27 * 0.075 + 0.54;
					double num39 = inReal[num5];
					num6 = num39 + num6 - num8;
					num7 = num39 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num40 = num7 * 0.1;
					num7 -= num6;
					double num46;
					double num47;
					if (num5 % 2 == 0)
					{
						double num41 = num40 * 0.0962;
						double num42 = 0.0 - array2[num10];
						array2[num10] = num41;
						num42 = num41 + num42 - num12;
						num12 = num14 * 0.5769;
						num14 = num40;
						num42 = (num12 + num42) * num38;
						num41 = num42 * 0.0962;
						double num43 = 0.0 - array4[num10];
						array4[num10] = num41;
						num43 = num41 + num43 - num16;
						num16 = num18 * 0.5769;
						num18 = num42;
						num43 = (num16 + num43) * num38;
						num41 = num33 * 0.0962;
						double num44 = 0.0 - array6[num10];
						array6[num10] = num41;
						num44 = num41 + num44 - num20;
						num20 = num22 * 0.5769;
						num22 = num33;
						num44 = (num20 + num44) * num38;
						num41 = num43 * 0.0962;
						double num45 = 0.0 - array8[num10];
						array8[num10] = num41;
						num45 = num41 + num45 - num24;
						num24 = num26 * 0.5769;
						num26 = num43;
						num45 = (num24 + num45) * num38;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num46 = (num44 + num43) * 0.2 + num29 * 0.8;
						num47 = (num33 - num45) * 0.2 + num30 * 0.8;
						num34 = num36;
						num36 = num42;
					}
					else
					{
						double num41 = num40 * 0.0962;
						double num42 = 0.0 - array[num10];
						array[num10] = num41;
						num42 = num41 + num42 - num11;
						num11 = num13 * 0.5769;
						num13 = num40;
						num42 = (num11 + num42) * num38;
						num41 = num42 * 0.0962;
						double num43 = 0.0 - array3[num10];
						array3[num10] = num41;
						num43 = num41 + num43 - num15;
						num15 = num17 * 0.5769;
						num17 = num42;
						num43 = (num15 + num43) * num38;
						num41 = num34 * 0.0962;
						double num44 = 0.0 - array5[num10];
						array5[num10] = num41;
						num44 = num41 + num44 - num19;
						num19 = num21 * 0.5769;
						num21 = num34;
						num41 = num43 * 0.0962;
						double num45 = 0.0 - array7[num10];
						array7[num10] = num41;
						num45 = num41 + num45 - num23;
						num23 = num25 * 0.5769;
						num25 = num43;
						num46 = ((num19 + num44) * num38 + num43) * 0.2 + num29 * 0.8;
						num47 = (num34 - (num23 + num45) * num38) * 0.2 + num30 * 0.8;
						num33 = num35;
						num35 = num42;
					}
					num32 = (num46 * num29 + num47 * num30) * 0.2 + num32 * 0.8;
					num31 = (num47 * num29 - num46 * num30) * 0.2 + num31 * 0.8;
					num29 = num46;
					num30 = num47;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					double num48 = num4 * 1.5;
					if (num27 > num48)
					{
						num27 = num48;
					}
					num48 = num4 * 0.67;
					if (num27 < num48)
					{
						num27 = num48;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num37 = num37 * 0.67 + num27 * 0.33;
					if (num5 >= startIdx)
					{
						outReal[num28] = num37;
						num28++;
					}
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtDcPeriod(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[6] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num38 = num27 * 0.075 + 0.54;
					double num39 = inReal[num5];
					num6 = num39 + num6 - num8;
					num7 = num39 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num40 = num7 * 0.1;
					num7 -= num6;
					double num46;
					double num47;
					if (num5 % 2 == 0)
					{
						double num41 = num40 * 0.0962;
						double num42 = 0.0 - array2[num10];
						array2[num10] = num41;
						num42 = num41 + num42 - num12;
						num12 = num14 * 0.5769;
						num14 = num40;
						num42 = (num12 + num42) * num38;
						num41 = num42 * 0.0962;
						double num43 = 0.0 - array4[num10];
						array4[num10] = num41;
						num43 = num41 + num43 - num16;
						num16 = num18 * 0.5769;
						num18 = num42;
						num43 = (num16 + num43) * num38;
						num41 = num33 * 0.0962;
						double num44 = 0.0 - array6[num10];
						array6[num10] = num41;
						num44 = num41 + num44 - num20;
						num20 = num22 * 0.5769;
						num22 = num33;
						num44 = (num20 + num44) * num38;
						num41 = num43 * 0.0962;
						double num45 = 0.0 - array8[num10];
						array8[num10] = num41;
						num45 = num41 + num45 - num24;
						num24 = num26 * 0.5769;
						num26 = num43;
						num45 = (num24 + num45) * num38;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num46 = (num44 + num43) * 0.2 + num29 * 0.8;
						num47 = (num33 - num45) * 0.2 + num30 * 0.8;
						num34 = num36;
						num36 = num42;
					}
					else
					{
						double num41 = num40 * 0.0962;
						double num42 = 0.0 - array[num10];
						array[num10] = num41;
						num42 = num41 + num42 - num11;
						num11 = num13 * 0.5769;
						num13 = num40;
						num42 = (num11 + num42) * num38;
						num41 = num42 * 0.0962;
						double num43 = 0.0 - array3[num10];
						array3[num10] = num41;
						num43 = num41 + num43 - num15;
						num15 = num17 * 0.5769;
						num17 = num42;
						num43 = (num15 + num43) * num38;
						num41 = num34 * 0.0962;
						double num44 = 0.0 - array5[num10];
						array5[num10] = num41;
						num44 = num41 + num44 - num19;
						num19 = num21 * 0.5769;
						num21 = num34;
						num41 = num43 * 0.0962;
						double num45 = 0.0 - array7[num10];
						array7[num10] = num41;
						num45 = num41 + num45 - num23;
						num23 = num25 * 0.5769;
						num25 = num43;
						num46 = ((num19 + num44) * num38 + num43) * 0.2 + num29 * 0.8;
						num47 = (num34 - (num23 + num45) * num38) * 0.2 + num30 * 0.8;
						num33 = num35;
						num35 = num42;
					}
					num32 = (num46 * num29 + num47 * num30) * 0.2 + num32 * 0.8;
					num31 = (num47 * num29 - num46 * num30) * 0.2 + num31 * 0.8;
					num29 = num46;
					num30 = num47;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					double num48 = num4 * 1.5;
					if (num27 > num48)
					{
						num27 = num48;
					}
					num48 = num4 * 0.67;
					if (num27 < num48)
					{
						num27 = num48;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num37 = num37 * 0.67 + num27 * 0.33;
					if (num5 >= startIdx)
					{
						outReal[num28] = num37;
						num28++;
					}
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtDcPhaseLookback()
	{
		return (int)(Globals.unstablePeriod[7] + 63);
	}

	public static RetCode HtDcPhase(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = Math.Atan(1.0);
			double num3 = 45.0 / num2;
			double num4 = num2 * 8.0;
			int num5 = (int)(Globals.unstablePeriod[7] + 63);
			if (startIdx < num5)
			{
				startIdx = num5;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num6 = startIdx - num5;
			num2 = inReal[num6];
			int num7 = num6 + 1;
			double num8 = num2;
			double num9 = num2;
			num2 = inReal[num7];
			num7++;
			num8 += num2;
			num9 = num2 * 2.0 + num9;
			num2 = inReal[num7];
			num7++;
			num8 += num2;
			num9 = num2 * 3.0 + num9;
			double num10 = 0.0;
			int num11 = 34;
			do
			{
				num2 = inReal[num7];
				num7++;
				num8 = num8 + num2 - num10;
				num10 = inReal[num6];
				num6++;
				num9 = num2 * 4.0 + num9 - num8;
				num11--;
			}
			while (num11 != 0);
			int num12 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			int num30 = 0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			int num40 = 0;
			do
			{
				array9[num40] = 0.0;
				num40++;
			}
			while (num40 < 50);
			double num41 = 0.0;
			if (num7 <= endIdx)
			{
				do
				{
					double num42 = num29 * 0.075 + 0.54;
					double num43 = inReal[num7];
					num8 = num43 + num8 - num10;
					num9 = num43 * 4.0 + num9;
					num10 = inReal[num6];
					num6++;
					double num44 = num9 * 0.1;
					num9 -= num8;
					array9[num] = num44;
					double num50;
					double num51;
					if (num7 % 2 == 0)
					{
						double num45 = num44 * 0.0962;
						double num46 = 0.0 - array2[num12];
						array2[num12] = num45;
						num46 = num45 + num46 - num14;
						num14 = num16 * 0.5769;
						num16 = num44;
						num46 = (num14 + num46) * num42;
						num45 = num46 * 0.0962;
						double num47 = 0.0 - array4[num12];
						array4[num12] = num45;
						num47 = num45 + num47 - num18;
						num18 = num20 * 0.5769;
						num20 = num46;
						num47 = (num18 + num47) * num42;
						num45 = num35 * 0.0962;
						double num48 = 0.0 - array6[num12];
						array6[num12] = num45;
						num48 = num45 + num48 - num22;
						num22 = num24 * 0.5769;
						num24 = num35;
						num48 = (num22 + num48) * num42;
						num45 = num47 * 0.0962;
						double num49 = 0.0 - array8[num12];
						array8[num12] = num45;
						num49 = num45 + num49 - num26;
						num26 = num28 * 0.5769;
						num28 = num47;
						num49 = (num26 + num49) * num42;
						num12++;
						if (num12 == 3)
						{
							num12 = 0;
						}
						num50 = (num48 + num47) * 0.2 + num31 * 0.8;
						num51 = (num35 - num49) * 0.2 + num32 * 0.8;
						num36 = num38;
						num38 = num46;
					}
					else
					{
						double num45 = num44 * 0.0962;
						double num46 = 0.0 - array[num12];
						array[num12] = num45;
						num46 = num45 + num46 - num13;
						num13 = num15 * 0.5769;
						num15 = num44;
						num46 = (num13 + num46) * num42;
						num45 = num46 * 0.0962;
						double num47 = 0.0 - array3[num12];
						array3[num12] = num45;
						num47 = num45 + num47 - num17;
						num17 = num19 * 0.5769;
						num19 = num46;
						num47 = (num17 + num47) * num42;
						num45 = num36 * 0.0962;
						double num48 = 0.0 - array5[num12];
						array5[num12] = num45;
						num48 = num45 + num48 - num21;
						num21 = num23 * 0.5769;
						num23 = num36;
						num45 = num47 * 0.0962;
						double num49 = 0.0 - array7[num12];
						array7[num12] = num45;
						num49 = num45 + num49 - num25;
						num25 = num27 * 0.5769;
						num27 = num47;
						num50 = ((num21 + num48) * num42 + num47) * 0.2 + num31 * 0.8;
						num51 = (num36 - (num25 + num49) * num42) * 0.2 + num32 * 0.8;
						num35 = num37;
						num37 = num46;
					}
					num34 = (num50 * num31 + num51 * num32) * 0.2 + num34 * 0.8;
					num33 = (num51 * num31 - num50 * num32) * 0.2 + num33 * 0.8;
					num31 = num50;
					num32 = num51;
					num2 = num29;
					if (num33 != 0.0 && num34 != 0.0)
					{
						num29 = 360.0 / (Math.Atan(num33 / num34) * num3);
					}
					double num52 = num2 * 1.5;
					if (num29 > num52)
					{
						num29 = num52;
					}
					num52 = num2 * 0.67;
					if (num29 < num52)
					{
						num29 = num52;
					}
					if (num29 < 6.0)
					{
						num29 = 6.0;
					}
					else if (num29 > 50.0)
					{
						num29 = 50.0;
					}
					num29 = num29 * 0.2 + num2 * 0.8;
					num39 = num39 * 0.67 + num29 * 0.33;
					int num53 = (int)(num39 + 0.5);
					double num54 = 0.0;
					double num55 = 0.0;
					int num56 = num;
					num40 = 0;
					if (0 < num53)
					{
						double num57 = num53;
						do
						{
							num2 = (double)num40 * num4 / num57;
							num52 = array9[num56];
							num54 = Math.Sin(num2) * num52 + num54;
							num55 = Math.Cos(num2) * num52 + num55;
							num56 = ((num56 != 0) ? (num56 - 1) : 49);
							num40++;
						}
						while (num40 < num53);
					}
					num2 = Math.Abs(num55);
					if (num2 > 0.0)
					{
						num41 = Math.Atan(num54 / num55) * num3;
					}
					else if (num2 <= 0.01)
					{
						if (num54 < 0.0)
						{
							num41 -= 90.0;
						}
						else if (num54 > 0.0)
						{
							num41 += 90.0;
						}
					}
					num41 = num41 + 90.0 + 360.0 / num39;
					if (num55 < 0.0)
					{
						num41 += 180.0;
					}
					if (num41 > 315.0)
					{
						num41 -= 360.0;
					}
					if (num7 >= startIdx)
					{
						outReal[num30] = num41;
						num30++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num7++;
				}
				while (num7 <= endIdx);
			}
			outNBElement = num30;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtDcPhase(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = Math.Atan(1.0);
			double num3 = 45.0 / num2;
			double num4 = num2 * 8.0;
			int num5 = (int)(Globals.unstablePeriod[7] + 63);
			if (startIdx < num5)
			{
				startIdx = num5;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num6 = startIdx - num5;
			num2 = inReal[num6];
			int num7 = num6 + 1;
			double num8 = num2;
			double num9 = num2;
			num2 = inReal[num7];
			num7++;
			num8 += num2;
			num9 = num2 * 2.0 + num9;
			num2 = inReal[num7];
			num7++;
			num8 += num2;
			num9 = num2 * 3.0 + num9;
			double num10 = 0.0;
			int num11 = 34;
			do
			{
				num2 = inReal[num7];
				num7++;
				num8 = num8 + num2 - num10;
				num10 = inReal[num6];
				num6++;
				num9 = num2 * 4.0 + num9 - num8;
				num11--;
			}
			while (num11 != 0);
			int num12 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			int num30 = 0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			int num40 = 0;
			do
			{
				array9[num40] = 0.0;
				num40++;
			}
			while (num40 < 50);
			double num41 = 0.0;
			if (num7 <= endIdx)
			{
				do
				{
					double num42 = num29 * 0.075 + 0.54;
					double num43 = inReal[num7];
					num8 = num43 + num8 - num10;
					num9 = num43 * 4.0 + num9;
					num10 = inReal[num6];
					num6++;
					double num44 = num9 * 0.1;
					num9 -= num8;
					array9[num] = num44;
					double num50;
					double num51;
					if (num7 % 2 == 0)
					{
						double num45 = num44 * 0.0962;
						double num46 = 0.0 - array2[num12];
						array2[num12] = num45;
						num46 = num45 + num46 - num14;
						num14 = num16 * 0.5769;
						num16 = num44;
						num46 = (num14 + num46) * num42;
						num45 = num46 * 0.0962;
						double num47 = 0.0 - array4[num12];
						array4[num12] = num45;
						num47 = num45 + num47 - num18;
						num18 = num20 * 0.5769;
						num20 = num46;
						num47 = (num18 + num47) * num42;
						num45 = num35 * 0.0962;
						double num48 = 0.0 - array6[num12];
						array6[num12] = num45;
						num48 = num45 + num48 - num22;
						num22 = num24 * 0.5769;
						num24 = num35;
						num48 = (num22 + num48) * num42;
						num45 = num47 * 0.0962;
						double num49 = 0.0 - array8[num12];
						array8[num12] = num45;
						num49 = num45 + num49 - num26;
						num26 = num28 * 0.5769;
						num28 = num47;
						num49 = (num26 + num49) * num42;
						num12++;
						if (num12 == 3)
						{
							num12 = 0;
						}
						num50 = (num48 + num47) * 0.2 + num31 * 0.8;
						num51 = (num35 - num49) * 0.2 + num32 * 0.8;
						num36 = num38;
						num38 = num46;
					}
					else
					{
						double num45 = num44 * 0.0962;
						double num46 = 0.0 - array[num12];
						array[num12] = num45;
						num46 = num45 + num46 - num13;
						num13 = num15 * 0.5769;
						num15 = num44;
						num46 = (num13 + num46) * num42;
						num45 = num46 * 0.0962;
						double num47 = 0.0 - array3[num12];
						array3[num12] = num45;
						num47 = num45 + num47 - num17;
						num17 = num19 * 0.5769;
						num19 = num46;
						num47 = (num17 + num47) * num42;
						num45 = num36 * 0.0962;
						double num48 = 0.0 - array5[num12];
						array5[num12] = num45;
						num48 = num45 + num48 - num21;
						num21 = num23 * 0.5769;
						num23 = num36;
						num45 = num47 * 0.0962;
						double num49 = 0.0 - array7[num12];
						array7[num12] = num45;
						num49 = num45 + num49 - num25;
						num25 = num27 * 0.5769;
						num27 = num47;
						num50 = ((num21 + num48) * num42 + num47) * 0.2 + num31 * 0.8;
						num51 = (num36 - (num25 + num49) * num42) * 0.2 + num32 * 0.8;
						num35 = num37;
						num37 = num46;
					}
					num34 = (num50 * num31 + num51 * num32) * 0.2 + num34 * 0.8;
					num33 = (num51 * num31 - num50 * num32) * 0.2 + num33 * 0.8;
					num31 = num50;
					num32 = num51;
					num2 = num29;
					if (num33 != 0.0 && num34 != 0.0)
					{
						num29 = 360.0 / (Math.Atan(num33 / num34) * num3);
					}
					double num52 = num2 * 1.5;
					if (num29 > num52)
					{
						num29 = num52;
					}
					num52 = num2 * 0.67;
					if (num29 < num52)
					{
						num29 = num52;
					}
					if (num29 < 6.0)
					{
						num29 = 6.0;
					}
					else if (num29 > 50.0)
					{
						num29 = 50.0;
					}
					num29 = num29 * 0.2 + num2 * 0.8;
					num39 = num39 * 0.67 + num29 * 0.33;
					int num53 = (int)(num39 + 0.5);
					double num54 = 0.0;
					double num55 = 0.0;
					int num56 = num;
					num40 = 0;
					if (0 < num53)
					{
						double num57 = num53;
						do
						{
							num2 = (double)num40 * num4 / num57;
							num52 = array9[num56];
							num54 = Math.Sin(num2) * num52 + num54;
							num55 = Math.Cos(num2) * num52 + num55;
							num56 = ((num56 != 0) ? (num56 - 1) : 49);
							num40++;
						}
						while (num40 < num53);
					}
					num2 = Math.Abs(num55);
					if (num2 > 0.0)
					{
						num41 = Math.Atan(num54 / num55) * num3;
					}
					else if (num2 <= 0.01)
					{
						if (num54 < 0.0)
						{
							num41 -= 90.0;
						}
						else if (num54 > 0.0)
						{
							num41 += 90.0;
						}
					}
					num41 = num41 + 90.0 + 360.0 / num39;
					if (num55 < 0.0)
					{
						num41 += 180.0;
					}
					if (num41 > 315.0)
					{
						num41 -= 360.0;
					}
					if (num7 >= startIdx)
					{
						outReal[num30] = num41;
						num30++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num7++;
				}
				while (num7 <= endIdx);
			}
			outNBElement = num30;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtPhasorLookback()
	{
		return (int)(Globals.unstablePeriod[8] + 32);
	}

	public static RetCode HtPhasor(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outInPhase, double[] outQuadrature)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outInPhase == null)
			{
				return RetCode.BadParam;
			}
			if (outQuadrature == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[8] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num37 = num27 * 0.075 + 0.54;
					double num38 = inReal[num5];
					num6 = num38 + num6 - num8;
					num7 = num38 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num39 = num7 * 0.1;
					num7 -= num6;
					double num45;
					double num46;
					if (num5 % 2 == 0)
					{
						double num40 = num39 * 0.0962;
						double num41 = 0.0 - array2[num10];
						array2[num10] = num40;
						num41 = num40 + num41 - num12;
						num12 = num14 * 0.5769;
						num14 = num39;
						num41 = (num12 + num41) * num37;
						num40 = num41 * 0.0962;
						double num42 = 0.0 - array4[num10];
						array4[num10] = num40;
						num42 = num40 + num42 - num16;
						num16 = num18 * 0.5769;
						num18 = num41;
						num42 = (num16 + num42) * num37;
						if (num5 >= startIdx)
						{
							outQuadrature[num28] = num42;
							outInPhase[num28] = num33;
							num28++;
						}
						num40 = num33 * 0.0962;
						double num43 = 0.0 - array6[num10];
						array6[num10] = num40;
						num43 = num40 + num43 - num20;
						num20 = num22 * 0.5769;
						num22 = num33;
						num43 = (num20 + num43) * num37;
						num40 = num42 * 0.0962;
						double num44 = 0.0 - array8[num10];
						array8[num10] = num40;
						num44 = num40 + num44 - num24;
						num24 = num26 * 0.5769;
						num26 = num42;
						num44 = (num24 + num44) * num37;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num45 = (num43 + num42) * 0.2 + num29 * 0.8;
						num46 = (num33 - num44) * 0.2 + num30 * 0.8;
						num34 = num36;
						num36 = num41;
					}
					else
					{
						double num40 = num39 * 0.0962;
						double num41 = 0.0 - array[num10];
						array[num10] = num40;
						num41 = num40 + num41 - num11;
						num11 = num13 * 0.5769;
						num13 = num39;
						num41 = (num11 + num41) * num37;
						num40 = num41 * 0.0962;
						double num42 = 0.0 - array3[num10];
						array3[num10] = num40;
						num42 = num40 + num42 - num15;
						num15 = num17 * 0.5769;
						num17 = num41;
						num42 = (num15 + num42) * num37;
						if (num5 >= startIdx)
						{
							outQuadrature[num28] = num42;
							outInPhase[num28] = num34;
							num28++;
						}
						num40 = num34 * 0.0962;
						double num43 = 0.0 - array5[num10];
						array5[num10] = num40;
						num43 = num40 + num43 - num19;
						num19 = num21 * 0.5769;
						num21 = num34;
						num40 = num42 * 0.0962;
						double num44 = 0.0 - array7[num10];
						array7[num10] = num40;
						num44 = num40 + num44 - num23;
						num23 = num25 * 0.5769;
						num25 = num42;
						num45 = ((num19 + num43) * num37 + num42) * 0.2 + num29 * 0.8;
						num46 = (num34 - (num23 + num44) * num37) * 0.2 + num30 * 0.8;
						num33 = num35;
						num35 = num41;
					}
					num32 = (num45 * num29 + num46 * num30) * 0.2 + num32 * 0.8;
					num31 = (num46 * num29 - num45 * num30) * 0.2 + num31 * 0.8;
					num29 = num45;
					num30 = num46;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					double num47 = num4 * 1.5;
					if (num27 > num47)
					{
						num27 = num47;
					}
					num47 = num4 * 0.67;
					if (num27 < num47)
					{
						num27 = num47;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtPhasor(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outInPhase, double[] outQuadrature)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outInPhase == null)
			{
				return RetCode.BadParam;
			}
			if (outQuadrature == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[8] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num37 = num27 * 0.075 + 0.54;
					double num38 = inReal[num5];
					num6 = num38 + num6 - num8;
					num7 = num38 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num39 = num7 * 0.1;
					num7 -= num6;
					double num45;
					double num46;
					if (num5 % 2 == 0)
					{
						double num40 = num39 * 0.0962;
						double num41 = 0.0 - array2[num10];
						array2[num10] = num40;
						num41 = num40 + num41 - num12;
						num12 = num14 * 0.5769;
						num14 = num39;
						num41 = (num12 + num41) * num37;
						num40 = num41 * 0.0962;
						double num42 = 0.0 - array4[num10];
						array4[num10] = num40;
						num42 = num40 + num42 - num16;
						num16 = num18 * 0.5769;
						num18 = num41;
						num42 = (num16 + num42) * num37;
						if (num5 >= startIdx)
						{
							outQuadrature[num28] = num42;
							outInPhase[num28] = num33;
							num28++;
						}
						num40 = num33 * 0.0962;
						double num43 = 0.0 - array6[num10];
						array6[num10] = num40;
						num43 = num40 + num43 - num20;
						num20 = num22 * 0.5769;
						num22 = num33;
						num43 = (num20 + num43) * num37;
						num40 = num42 * 0.0962;
						double num44 = 0.0 - array8[num10];
						array8[num10] = num40;
						num44 = num40 + num44 - num24;
						num24 = num26 * 0.5769;
						num26 = num42;
						num44 = (num24 + num44) * num37;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num45 = (num43 + num42) * 0.2 + num29 * 0.8;
						num46 = (num33 - num44) * 0.2 + num30 * 0.8;
						num34 = num36;
						num36 = num41;
					}
					else
					{
						double num40 = num39 * 0.0962;
						double num41 = 0.0 - array[num10];
						array[num10] = num40;
						num41 = num40 + num41 - num11;
						num11 = num13 * 0.5769;
						num13 = num39;
						num41 = (num11 + num41) * num37;
						num40 = num41 * 0.0962;
						double num42 = 0.0 - array3[num10];
						array3[num10] = num40;
						num42 = num40 + num42 - num15;
						num15 = num17 * 0.5769;
						num17 = num41;
						num42 = (num15 + num42) * num37;
						if (num5 >= startIdx)
						{
							outQuadrature[num28] = num42;
							outInPhase[num28] = num34;
							num28++;
						}
						num40 = num34 * 0.0962;
						double num43 = 0.0 - array5[num10];
						array5[num10] = num40;
						num43 = num40 + num43 - num19;
						num19 = num21 * 0.5769;
						num21 = num34;
						num40 = num42 * 0.0962;
						double num44 = 0.0 - array7[num10];
						array7[num10] = num40;
						num44 = num40 + num44 - num23;
						num23 = num25 * 0.5769;
						num25 = num42;
						num45 = ((num19 + num43) * num37 + num42) * 0.2 + num29 * 0.8;
						num46 = (num34 - (num23 + num44) * num37) * 0.2 + num30 * 0.8;
						num33 = num35;
						num35 = num41;
					}
					num32 = (num45 * num29 + num46 * num30) * 0.2 + num32 * 0.8;
					num31 = (num46 * num29 - num45 * num30) * 0.2 + num31 * 0.8;
					num29 = num45;
					num30 = num46;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					double num47 = num4 * 1.5;
					if (num27 > num47)
					{
						num27 = num47;
					}
					num47 = num4 * 0.67;
					if (num27 < num47)
					{
						num27 = num47;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtSineLookback()
	{
		return (int)(Globals.unstablePeriod[9] + 63);
	}

	public static RetCode HtSine(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outSine, double[] outLeadSine)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outSine == null)
			{
				return RetCode.BadParam;
			}
			if (outLeadSine == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = Math.Atan(1.0);
			double num3 = 45.0 / num2;
			double num4 = 1.0 / num3;
			double num5 = num2 * 8.0;
			int num6 = (int)(Globals.unstablePeriod[9] + 63);
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num7 = startIdx - num6;
			num2 = inReal[num7];
			int num8 = num7 + 1;
			double num9 = num2;
			double num10 = num2;
			num2 = inReal[num8];
			num8++;
			num9 += num2;
			num10 = num2 * 2.0 + num10;
			num2 = inReal[num8];
			num8++;
			num9 += num2;
			num10 = num2 * 3.0 + num10;
			double num11 = 0.0;
			int num12 = 34;
			do
			{
				num2 = inReal[num8];
				num8++;
				num9 = num9 + num2 - num11;
				num11 = inReal[num7];
				num7++;
				num10 = num2 * 4.0 + num10 - num9;
				num12--;
			}
			while (num12 != 0);
			int num13 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num14 = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num18 = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			int num31 = 0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			int num41 = 0;
			do
			{
				array9[num41] = 0.0;
				num41++;
			}
			while (num41 < 50);
			double num42 = 0.0;
			if (num8 <= endIdx)
			{
				do
				{
					double num43 = num30 * 0.075 + 0.54;
					double num44 = inReal[num8];
					num9 = num44 + num9 - num11;
					num10 = num44 * 4.0 + num10;
					num11 = inReal[num7];
					num7++;
					double num45 = num10 * 0.1;
					num10 -= num9;
					array9[num] = num45;
					double num51;
					double num52;
					if (num8 % 2 == 0)
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array2[num13];
						array2[num13] = num46;
						num47 = num46 + num47 - num15;
						num15 = num17 * 0.5769;
						num17 = num45;
						num47 = (num15 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array4[num13];
						array4[num13] = num46;
						num48 = num46 + num48 - num19;
						num19 = num21 * 0.5769;
						num21 = num47;
						num48 = (num19 + num48) * num43;
						num46 = num36 * 0.0962;
						double num49 = 0.0 - array6[num13];
						array6[num13] = num46;
						num49 = num46 + num49 - num23;
						num23 = num25 * 0.5769;
						num25 = num36;
						num49 = (num23 + num49) * num43;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array8[num13];
						array8[num13] = num46;
						num50 = num46 + num50 - num27;
						num27 = num29 * 0.5769;
						num29 = num48;
						num50 = (num27 + num50) * num43;
						num13++;
						if (num13 == 3)
						{
							num13 = 0;
						}
						num51 = (num49 + num48) * 0.2 + num32 * 0.8;
						num52 = (num36 - num50) * 0.2 + num33 * 0.8;
						num37 = num39;
						num39 = num47;
					}
					else
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array[num13];
						array[num13] = num46;
						num47 = num46 + num47 - num14;
						num14 = num16 * 0.5769;
						num16 = num45;
						num47 = (num14 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array3[num13];
						array3[num13] = num46;
						num48 = num46 + num48 - num18;
						num18 = num20 * 0.5769;
						num20 = num47;
						num48 = (num18 + num48) * num43;
						num46 = num37 * 0.0962;
						double num49 = 0.0 - array5[num13];
						array5[num13] = num46;
						num49 = num46 + num49 - num22;
						num22 = num24 * 0.5769;
						num24 = num37;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array7[num13];
						array7[num13] = num46;
						num50 = num46 + num50 - num26;
						num26 = num28 * 0.5769;
						num28 = num48;
						num51 = ((num22 + num49) * num43 + num48) * 0.2 + num32 * 0.8;
						num52 = (num37 - (num26 + num50) * num43) * 0.2 + num33 * 0.8;
						num36 = num38;
						num38 = num47;
					}
					num35 = (num51 * num32 + num52 * num33) * 0.2 + num35 * 0.8;
					num34 = (num52 * num32 - num51 * num33) * 0.2 + num34 * 0.8;
					num32 = num51;
					num33 = num52;
					num2 = num30;
					if (num34 != 0.0 && num35 != 0.0)
					{
						num30 = 360.0 / (Math.Atan(num34 / num35) * num3);
					}
					double num53 = num2 * 1.5;
					if (num30 > num53)
					{
						num30 = num53;
					}
					num53 = num2 * 0.67;
					if (num30 < num53)
					{
						num30 = num53;
					}
					if (num30 < 6.0)
					{
						num30 = 6.0;
					}
					else if (num30 > 50.0)
					{
						num30 = 50.0;
					}
					num30 = num30 * 0.2 + num2 * 0.8;
					num40 = num40 * 0.67 + num30 * 0.33;
					int num54 = (int)(num40 + 0.5);
					double num55 = 0.0;
					double num56 = 0.0;
					int num57 = num;
					num41 = 0;
					if (0 < num54)
					{
						double num58 = num54;
						do
						{
							num2 = (double)num41 * num5 / num58;
							num53 = array9[num57];
							num55 = Math.Sin(num2) * num53 + num55;
							num56 = Math.Cos(num2) * num53 + num56;
							num57 = ((num57 != 0) ? (num57 - 1) : 49);
							num41++;
						}
						while (num41 < num54);
					}
					num2 = Math.Abs(num56);
					if (num2 > 0.0)
					{
						num42 = Math.Atan(num55 / num56) * num3;
					}
					else if (num2 <= 0.01)
					{
						if (num55 < 0.0)
						{
							num42 -= 90.0;
						}
						else if (num55 > 0.0)
						{
							num42 += 90.0;
						}
					}
					num42 = num42 + 90.0 + 360.0 / num40;
					if (num56 < 0.0)
					{
						num42 += 180.0;
					}
					if (num42 > 315.0)
					{
						num42 -= 360.0;
					}
					if (num8 >= startIdx)
					{
						outSine[num31] = Math.Sin(num42 * num4);
						outLeadSine[num31] = Math.Sin((num42 + 45.0) * num4);
						num31++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num8++;
				}
				while (num8 <= endIdx);
			}
			outNBElement = num31;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtSine(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outSine, double[] outLeadSine)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outSine == null)
			{
				return RetCode.BadParam;
			}
			if (outLeadSine == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = Math.Atan(1.0);
			double num3 = 45.0 / num2;
			double num4 = 1.0 / num3;
			double num5 = num2 * 8.0;
			int num6 = (int)(Globals.unstablePeriod[9] + 63);
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num7 = startIdx - num6;
			num2 = inReal[num7];
			int num8 = num7 + 1;
			double num9 = num2;
			double num10 = num2;
			num2 = inReal[num8];
			num8++;
			num9 += num2;
			num10 = num2 * 2.0 + num10;
			num2 = inReal[num8];
			num8++;
			num9 += num2;
			num10 = num2 * 3.0 + num10;
			double num11 = 0.0;
			int num12 = 34;
			do
			{
				num2 = inReal[num8];
				num8++;
				num9 = num9 + num2 - num11;
				num11 = inReal[num7];
				num7++;
				num10 = num2 * 4.0 + num10 - num9;
				num12--;
			}
			while (num12 != 0);
			int num13 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num14 = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num18 = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			int num31 = 0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			int num41 = 0;
			do
			{
				array9[num41] = 0.0;
				num41++;
			}
			while (num41 < 50);
			double num42 = 0.0;
			if (num8 <= endIdx)
			{
				do
				{
					double num43 = num30 * 0.075 + 0.54;
					double num44 = inReal[num8];
					num9 = num44 + num9 - num11;
					num10 = num44 * 4.0 + num10;
					num11 = inReal[num7];
					num7++;
					double num45 = num10 * 0.1;
					num10 -= num9;
					array9[num] = num45;
					double num51;
					double num52;
					if (num8 % 2 == 0)
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array2[num13];
						array2[num13] = num46;
						num47 = num46 + num47 - num15;
						num15 = num17 * 0.5769;
						num17 = num45;
						num47 = (num15 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array4[num13];
						array4[num13] = num46;
						num48 = num46 + num48 - num19;
						num19 = num21 * 0.5769;
						num21 = num47;
						num48 = (num19 + num48) * num43;
						num46 = num36 * 0.0962;
						double num49 = 0.0 - array6[num13];
						array6[num13] = num46;
						num49 = num46 + num49 - num23;
						num23 = num25 * 0.5769;
						num25 = num36;
						num49 = (num23 + num49) * num43;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array8[num13];
						array8[num13] = num46;
						num50 = num46 + num50 - num27;
						num27 = num29 * 0.5769;
						num29 = num48;
						num50 = (num27 + num50) * num43;
						num13++;
						if (num13 == 3)
						{
							num13 = 0;
						}
						num51 = (num49 + num48) * 0.2 + num32 * 0.8;
						num52 = (num36 - num50) * 0.2 + num33 * 0.8;
						num37 = num39;
						num39 = num47;
					}
					else
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array[num13];
						array[num13] = num46;
						num47 = num46 + num47 - num14;
						num14 = num16 * 0.5769;
						num16 = num45;
						num47 = (num14 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array3[num13];
						array3[num13] = num46;
						num48 = num46 + num48 - num18;
						num18 = num20 * 0.5769;
						num20 = num47;
						num48 = (num18 + num48) * num43;
						num46 = num37 * 0.0962;
						double num49 = 0.0 - array5[num13];
						array5[num13] = num46;
						num49 = num46 + num49 - num22;
						num22 = num24 * 0.5769;
						num24 = num37;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array7[num13];
						array7[num13] = num46;
						num50 = num46 + num50 - num26;
						num26 = num28 * 0.5769;
						num28 = num48;
						num51 = ((num22 + num49) * num43 + num48) * 0.2 + num32 * 0.8;
						num52 = (num37 - (num26 + num50) * num43) * 0.2 + num33 * 0.8;
						num36 = num38;
						num38 = num47;
					}
					num35 = (num51 * num32 + num52 * num33) * 0.2 + num35 * 0.8;
					num34 = (num52 * num32 - num51 * num33) * 0.2 + num34 * 0.8;
					num32 = num51;
					num33 = num52;
					num2 = num30;
					if (num34 != 0.0 && num35 != 0.0)
					{
						num30 = 360.0 / (Math.Atan(num34 / num35) * num3);
					}
					double num53 = num2 * 1.5;
					if (num30 > num53)
					{
						num30 = num53;
					}
					num53 = num2 * 0.67;
					if (num30 < num53)
					{
						num30 = num53;
					}
					if (num30 < 6.0)
					{
						num30 = 6.0;
					}
					else if (num30 > 50.0)
					{
						num30 = 50.0;
					}
					num30 = num30 * 0.2 + num2 * 0.8;
					num40 = num40 * 0.67 + num30 * 0.33;
					int num54 = (int)(num40 + 0.5);
					double num55 = 0.0;
					double num56 = 0.0;
					int num57 = num;
					num41 = 0;
					if (0 < num54)
					{
						double num58 = num54;
						do
						{
							num2 = (double)num41 * num5 / num58;
							num53 = array9[num57];
							num55 = Math.Sin(num2) * num53 + num55;
							num56 = Math.Cos(num2) * num53 + num56;
							num57 = ((num57 != 0) ? (num57 - 1) : 49);
							num41++;
						}
						while (num41 < num54);
					}
					num2 = Math.Abs(num56);
					if (num2 > 0.0)
					{
						num42 = Math.Atan(num55 / num56) * num3;
					}
					else if (num2 <= 0.01)
					{
						if (num55 < 0.0)
						{
							num42 -= 90.0;
						}
						else if (num55 > 0.0)
						{
							num42 += 90.0;
						}
					}
					num42 = num42 + 90.0 + 360.0 / num40;
					if (num56 < 0.0)
					{
						num42 += 180.0;
					}
					if (num42 > 315.0)
					{
						num42 -= 360.0;
					}
					if (num8 >= startIdx)
					{
						outSine[num31] = Math.Sin(num42 * num4);
						outLeadSine[num31] = Math.Sin((num42 + 45.0) * num4);
						num31++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num8++;
				}
				while (num8 <= endIdx);
			}
			outNBElement = num31;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtTrendlineLookback()
	{
		return (int)(Globals.unstablePeriod[10] + 63);
	}

	public static RetCode HtTrendline(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = 0.0;
			double num3 = 0.0;
			double num4 = 0.0;
			double num5 = 45.0 / Math.Atan(1.0);
			int num6 = (int)(Globals.unstablePeriod[10] + 63);
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num7 = startIdx - num6;
			double num8 = inReal[num7];
			int num9 = num7 + 1;
			double num10 = num8;
			double num11 = num8;
			num8 = inReal[num9];
			num9++;
			num10 += num8;
			num11 = num8 * 2.0 + num11;
			num8 = inReal[num9];
			num9++;
			num10 += num8;
			num11 = num8 * 3.0 + num11;
			double num12 = 0.0;
			int num13 = 34;
			do
			{
				num8 = inReal[num9];
				num9++;
				num10 = num10 + num8 - num12;
				num12 = inReal[num7];
				num7++;
				num11 = num8 * 4.0 + num11 - num10;
				num13--;
			}
			while (num13 != 0);
			int num14 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			int num32 = 0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			double num41 = 0.0;
			int num42 = 0;
			do
			{
				array9[num42] = 0.0;
				num42++;
			}
			while (num42 < 50);
			if (num9 <= endIdx)
			{
				do
				{
					double num43 = num31 * 0.075 + 0.54;
					double num44 = inReal[num9];
					num10 = num44 + num10 - num12;
					num11 = num44 * 4.0 + num11;
					num12 = inReal[num7];
					num7++;
					double num45 = num11 * 0.1;
					num11 -= num10;
					array9[num] = num45;
					double num51;
					double num52;
					if (num9 % 2 == 0)
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array2[num14];
						array2[num14] = num46;
						num47 = num46 + num47 - num16;
						num16 = num18 * 0.5769;
						num18 = num45;
						num47 = (num16 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array4[num14];
						array4[num14] = num46;
						num48 = num46 + num48 - num20;
						num20 = num22 * 0.5769;
						num22 = num47;
						num48 = (num20 + num48) * num43;
						num46 = num37 * 0.0962;
						double num49 = 0.0 - array6[num14];
						array6[num14] = num46;
						num49 = num46 + num49 - num24;
						num24 = num26 * 0.5769;
						num26 = num37;
						num49 = (num24 + num49) * num43;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array8[num14];
						array8[num14] = num46;
						num50 = num46 + num50 - num28;
						num28 = num30 * 0.5769;
						num30 = num48;
						num50 = (num28 + num50) * num43;
						num14++;
						if (num14 == 3)
						{
							num14 = 0;
						}
						num51 = (num49 + num48) * 0.2 + num33 * 0.8;
						num52 = (num37 - num50) * 0.2 + num34 * 0.8;
						num38 = num40;
						num40 = num47;
					}
					else
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array[num14];
						array[num14] = num46;
						num47 = num46 + num47 - num15;
						num15 = num17 * 0.5769;
						num17 = num45;
						num47 = (num15 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array3[num14];
						array3[num14] = num46;
						num48 = num46 + num48 - num19;
						num19 = num21 * 0.5769;
						num21 = num47;
						num48 = (num19 + num48) * num43;
						num46 = num38 * 0.0962;
						double num49 = 0.0 - array5[num14];
						array5[num14] = num46;
						num49 = num46 + num49 - num23;
						num23 = num25 * 0.5769;
						num25 = num38;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array7[num14];
						array7[num14] = num46;
						num50 = num46 + num50 - num27;
						num27 = num29 * 0.5769;
						num29 = num48;
						num51 = ((num23 + num49) * num43 + num48) * 0.2 + num33 * 0.8;
						num52 = (num38 - (num27 + num50) * num43) * 0.2 + num34 * 0.8;
						num37 = num39;
						num39 = num47;
					}
					num36 = (num51 * num33 + num52 * num34) * 0.2 + num36 * 0.8;
					num35 = (num52 * num33 - num51 * num34) * 0.2 + num35 * 0.8;
					num33 = num51;
					num34 = num52;
					num8 = num31;
					if (num35 != 0.0 && num36 != 0.0)
					{
						num31 = 360.0 / (Math.Atan(num35 / num36) * num5);
					}
					double num53 = num8 * 1.5;
					if (num31 > num53)
					{
						num31 = num53;
					}
					num53 = num8 * 0.67;
					if (num31 < num53)
					{
						num31 = num53;
					}
					if (num31 < 6.0)
					{
						num31 = 6.0;
					}
					else if (num31 > 50.0)
					{
						num31 = 50.0;
					}
					num31 = num31 * 0.2 + num8 * 0.8;
					num41 = num41 * 0.67 + num31 * 0.33;
					int num54 = (int)(num41 + 0.5);
					int num55 = num9;
					num8 = 0.0;
					if (0 < num54)
					{
						int num56 = num54;
						do
						{
							num8 = (double)inReal[num55] + num8;
							num55--;
							num56--;
						}
						while (num56 != 0);
						if (num54 > 0)
						{
							num8 /= (double)num54;
						}
					}
					num53 = (num8 * 4.0 + num4 * 3.0 + num3 * 2.0 + num2) / 10.0;
					num2 = num3;
					num3 = num4;
					num4 = num8;
					if (num9 >= startIdx)
					{
						outReal[num32] = num53;
						num32++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num9++;
				}
				while (num9 <= endIdx);
			}
			outNBElement = num32;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtTrendline(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = 0.0;
			double num3 = 0.0;
			double num4 = 0.0;
			double num5 = 45.0 / Math.Atan(1.0);
			int num6 = (int)(Globals.unstablePeriod[10] + 63);
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num7 = startIdx - num6;
			double num8 = inReal[num7];
			int num9 = num7 + 1;
			double num10 = num8;
			double num11 = num8;
			num8 = inReal[num9];
			num9++;
			num10 += num8;
			num11 = num8 * 2.0 + num11;
			num8 = inReal[num9];
			num9++;
			num10 += num8;
			num11 = num8 * 3.0 + num11;
			double num12 = 0.0;
			int num13 = 34;
			do
			{
				num8 = inReal[num9];
				num9++;
				num10 = num10 + num8 - num12;
				num12 = inReal[num7];
				num7++;
				num11 = num8 * 4.0 + num11 - num10;
				num13--;
			}
			while (num13 != 0);
			int num14 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num27 = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			int num32 = 0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			double num41 = 0.0;
			int num42 = 0;
			do
			{
				array9[num42] = 0.0;
				num42++;
			}
			while (num42 < 50);
			if (num9 <= endIdx)
			{
				do
				{
					double num43 = num31 * 0.075 + 0.54;
					double num44 = inReal[num9];
					num10 = num44 + num10 - num12;
					num11 = num44 * 4.0 + num11;
					num12 = inReal[num7];
					num7++;
					double num45 = num11 * 0.1;
					num11 -= num10;
					array9[num] = num45;
					double num51;
					double num52;
					if (num9 % 2 == 0)
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array2[num14];
						array2[num14] = num46;
						num47 = num46 + num47 - num16;
						num16 = num18 * 0.5769;
						num18 = num45;
						num47 = (num16 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array4[num14];
						array4[num14] = num46;
						num48 = num46 + num48 - num20;
						num20 = num22 * 0.5769;
						num22 = num47;
						num48 = (num20 + num48) * num43;
						num46 = num37 * 0.0962;
						double num49 = 0.0 - array6[num14];
						array6[num14] = num46;
						num49 = num46 + num49 - num24;
						num24 = num26 * 0.5769;
						num26 = num37;
						num49 = (num24 + num49) * num43;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array8[num14];
						array8[num14] = num46;
						num50 = num46 + num50 - num28;
						num28 = num30 * 0.5769;
						num30 = num48;
						num50 = (num28 + num50) * num43;
						num14++;
						if (num14 == 3)
						{
							num14 = 0;
						}
						num51 = (num49 + num48) * 0.2 + num33 * 0.8;
						num52 = (num37 - num50) * 0.2 + num34 * 0.8;
						num38 = num40;
						num40 = num47;
					}
					else
					{
						double num46 = num45 * 0.0962;
						double num47 = 0.0 - array[num14];
						array[num14] = num46;
						num47 = num46 + num47 - num15;
						num15 = num17 * 0.5769;
						num17 = num45;
						num47 = (num15 + num47) * num43;
						num46 = num47 * 0.0962;
						double num48 = 0.0 - array3[num14];
						array3[num14] = num46;
						num48 = num46 + num48 - num19;
						num19 = num21 * 0.5769;
						num21 = num47;
						num48 = (num19 + num48) * num43;
						num46 = num38 * 0.0962;
						double num49 = 0.0 - array5[num14];
						array5[num14] = num46;
						num49 = num46 + num49 - num23;
						num23 = num25 * 0.5769;
						num25 = num38;
						num46 = num48 * 0.0962;
						double num50 = 0.0 - array7[num14];
						array7[num14] = num46;
						num50 = num46 + num50 - num27;
						num27 = num29 * 0.5769;
						num29 = num48;
						num51 = ((num23 + num49) * num43 + num48) * 0.2 + num33 * 0.8;
						num52 = (num38 - (num27 + num50) * num43) * 0.2 + num34 * 0.8;
						num37 = num39;
						num39 = num47;
					}
					num36 = (num51 * num33 + num52 * num34) * 0.2 + num36 * 0.8;
					num35 = (num52 * num33 - num51 * num34) * 0.2 + num35 * 0.8;
					num33 = num51;
					num34 = num52;
					num8 = num31;
					if (num35 != 0.0 && num36 != 0.0)
					{
						num31 = 360.0 / (Math.Atan(num35 / num36) * num5);
					}
					double num53 = num8 * 1.5;
					if (num31 > num53)
					{
						num31 = num53;
					}
					num53 = num8 * 0.67;
					if (num31 < num53)
					{
						num31 = num53;
					}
					if (num31 < 6.0)
					{
						num31 = 6.0;
					}
					else if (num31 > 50.0)
					{
						num31 = 50.0;
					}
					num31 = num31 * 0.2 + num8 * 0.8;
					num41 = num41 * 0.67 + num31 * 0.33;
					int num54 = (int)(num41 + 0.5);
					int num55 = num9;
					num8 = 0.0;
					if (0 < num54)
					{
						int num56 = num54;
						do
						{
							num8 = inReal[num55] + num8;
							num55--;
							num56--;
						}
						while (num56 != 0);
						if (num54 > 0)
						{
							num8 /= (double)num54;
						}
					}
					num53 = (num8 * 4.0 + num4 * 3.0 + num3 * 2.0 + num2) / 10.0;
					num2 = num3;
					num3 = num4;
					num4 = num8;
					if (num9 >= startIdx)
					{
						outReal[num32] = num53;
						num32++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num9++;
				}
				while (num9 <= endIdx);
			}
			outNBElement = num32;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int HtTrendModeLookback()
	{
		return (int)(Globals.unstablePeriod[11] + 63);
	}

	public static RetCode HtTrendMode(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = 0.0;
			double num3 = 0.0;
			double num4 = 0.0;
			int num5 = 0;
			double num6 = 0.0;
			double num7 = 0.0;
			double num8 = Math.Atan(1.0);
			double num9 = 45.0 / num8;
			double num10 = 1.0 / num9;
			double num11 = num8 * 8.0;
			int num12 = (int)(Globals.unstablePeriod[11] + 63);
			if (startIdx < num12)
			{
				startIdx = num12;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num13 = startIdx - num12;
			num8 = inReal[num13];
			int num14 = num13 + 1;
			double num15 = num8;
			double num16 = num8;
			num8 = inReal[num14];
			num14++;
			num15 += num8;
			num16 = num8 * 2.0 + num16;
			num8 = inReal[num14];
			num14++;
			num15 += num8;
			num16 = num8 * 3.0 + num16;
			double num17 = 0.0;
			int num18 = 34;
			do
			{
				num8 = inReal[num14];
				num14++;
				num15 = num15 + num8 - num17;
				num17 = inReal[num13];
				num13++;
				num16 = num8 * 4.0 + num16 - num15;
				num18--;
			}
			while (num18 != 0);
			int num19 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			int num37 = 0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			double num41 = 0.0;
			double num42 = 0.0;
			double num43 = 0.0;
			double num44 = 0.0;
			double num45 = 0.0;
			double num46 = 0.0;
			int num47 = 0;
			do
			{
				array9[num47] = 0.0;
				num47++;
			}
			while (num47 < 50);
			double num48 = 0.0;
			if (num14 <= endIdx)
			{
				do
				{
					double num49 = num36 * 0.075 + 0.54;
					double num50 = inReal[num14];
					num15 = num50 + num15 - num17;
					num16 = num50 * 4.0 + num16;
					num17 = inReal[num13];
					num13++;
					double num51 = num16 * 0.1;
					num16 -= num15;
					array9[num] = num51;
					double num57;
					double num58;
					if (num14 % 2 == 0)
					{
						double num52 = num51 * 0.0962;
						double num53 = 0.0 - array2[num19];
						array2[num19] = num52;
						num53 = num52 + num53 - num21;
						num21 = num23 * 0.5769;
						num23 = num51;
						num53 = (num21 + num53) * num49;
						num52 = num53 * 0.0962;
						double num54 = 0.0 - array4[num19];
						array4[num19] = num52;
						num54 = num52 + num54 - num25;
						num25 = num27 * 0.5769;
						num27 = num53;
						num54 = (num25 + num54) * num49;
						num52 = num42 * 0.0962;
						double num55 = 0.0 - array6[num19];
						array6[num19] = num52;
						num55 = num52 + num55 - num29;
						num29 = num31 * 0.5769;
						num31 = num42;
						num55 = (num29 + num55) * num49;
						num52 = num54 * 0.0962;
						double num56 = 0.0 - array8[num19];
						array8[num19] = num52;
						num56 = num52 + num56 - num33;
						num33 = num35 * 0.5769;
						num35 = num54;
						num56 = (num33 + num56) * num49;
						num19++;
						if (num19 == 3)
						{
							num19 = 0;
						}
						num57 = (num55 + num54) * 0.2 + num38 * 0.8;
						num58 = (num42 - num56) * 0.2 + num39 * 0.8;
						num43 = num45;
						num45 = num53;
					}
					else
					{
						double num52 = num51 * 0.0962;
						double num53 = 0.0 - array[num19];
						array[num19] = num52;
						num53 = num52 + num53 - num20;
						num20 = num22 * 0.5769;
						num22 = num51;
						num53 = (num20 + num53) * num49;
						num52 = num53 * 0.0962;
						double num54 = 0.0 - array3[num19];
						array3[num19] = num52;
						num54 = num52 + num54 - num24;
						num24 = num26 * 0.5769;
						num26 = num53;
						num54 = (num24 + num54) * num49;
						num52 = num43 * 0.0962;
						double num55 = 0.0 - array5[num19];
						array5[num19] = num52;
						num55 = num52 + num55 - num28;
						num28 = num30 * 0.5769;
						num30 = num43;
						num52 = num54 * 0.0962;
						double num56 = 0.0 - array7[num19];
						array7[num19] = num52;
						num56 = num52 + num56 - num32;
						num32 = num34 * 0.5769;
						num34 = num54;
						num57 = ((num28 + num55) * num49 + num54) * 0.2 + num38 * 0.8;
						num58 = (num43 - (num32 + num56) * num49) * 0.2 + num39 * 0.8;
						num42 = num44;
						num44 = num53;
					}
					num41 = (num57 * num38 + num58 * num39) * 0.2 + num41 * 0.8;
					num40 = (num58 * num38 - num57 * num39) * 0.2 + num40 * 0.8;
					num38 = num57;
					num39 = num58;
					num8 = num36;
					if (num40 != 0.0 && num41 != 0.0)
					{
						num36 = 360.0 / (Math.Atan(num40 / num41) * num9);
					}
					double num59 = num8 * 1.5;
					if (num36 > num59)
					{
						num36 = num59;
					}
					num59 = num8 * 0.67;
					if (num36 < num59)
					{
						num36 = num59;
					}
					if (num36 < 6.0)
					{
						num36 = 6.0;
					}
					else if (num36 > 50.0)
					{
						num36 = 50.0;
					}
					num36 = num36 * 0.2 + num8 * 0.8;
					num46 = num46 * 0.67 + num36 * 0.33;
					double num60 = num48;
					int num61 = (int)(num46 + 0.5);
					int num62 = num61;
					double num63 = 0.0;
					double num64 = 0.0;
					int num65 = num;
					num47 = 0;
					if (0 < num62)
					{
						double num66 = num62;
						do
						{
							num8 = (double)num47 * num11 / num66;
							num59 = array9[num65];
							num63 = Math.Sin(num8) * num59 + num63;
							num64 = Math.Cos(num8) * num59 + num64;
							num65 = ((num65 != 0) ? (num65 - 1) : 49);
							num47++;
						}
						while (num47 < num62);
					}
					num8 = Math.Abs(num64);
					if (num8 > 0.0)
					{
						num48 = Math.Atan(num63 / num64) * num9;
					}
					else if (num8 <= 0.01)
					{
						if (num63 < 0.0)
						{
							num48 -= 90.0;
						}
						else if (num63 > 0.0)
						{
							num48 += 90.0;
						}
					}
					num48 = num48 + 90.0 + 360.0 / num46;
					if (num64 < 0.0)
					{
						num48 += 180.0;
					}
					if (num48 > 315.0)
					{
						num48 -= 360.0;
					}
					double num67 = num6;
					double num68 = num7;
					num6 = Math.Sin(num10 * num48);
					num7 = Math.Sin((num48 + 45.0) * num10);
					int num69 = num61;
					int num70 = num14;
					num8 = 0.0;
					if (0 < num69)
					{
						int num71 = num69;
						do
						{
							num8 = (double)inReal[num70] + num8;
							num70--;
							num71--;
						}
						while (num71 != 0);
						if (num69 > 0)
						{
							num8 /= (double)num69;
						}
					}
					double num72 = (num8 * 4.0 + num4 * 3.0 + num3 * 2.0 + num2) / 10.0;
					num2 = num3;
					num3 = num4;
					num4 = num8;
					int num73 = 1;
					if ((num6 > num7 && num67 <= num68) || (num6 < num7 && num67 >= num68))
					{
						num5 = 0;
						num73 = 0;
					}
					num5++;
					if ((double)num5 < num46 * 0.5)
					{
						num73 = 0;
					}
					num8 = num48 - num60;
					if (num46 != 0.0 && num8 > 241.20000000000002 / num46 && num8 < 540.0 / num46)
					{
						num73 = 0;
					}
					num8 = array9[num];
					if (num72 != 0.0 && Math.Abs((num8 - num72) / num72) >= 0.015)
					{
						num73 = 1;
					}
					if (num14 >= startIdx)
					{
						outInteger[num37] = num73;
						num37++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num14++;
				}
				while (num14 <= endIdx);
			}
			outNBElement = num37;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode HtTrendMode(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			double[] array9 = new double[50];
			if (array9 == null)
			{
				return RetCode.AllocErr;
			}
			double num2 = 0.0;
			double num3 = 0.0;
			double num4 = 0.0;
			int num5 = 0;
			double num6 = 0.0;
			double num7 = 0.0;
			double num8 = Math.Atan(1.0);
			double num9 = 45.0 / num8;
			double num10 = 1.0 / num9;
			double num11 = num8 * 8.0;
			int num12 = (int)(Globals.unstablePeriod[11] + 63);
			if (startIdx < num12)
			{
				startIdx = num12;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num13 = startIdx - num12;
			num8 = inReal[num13];
			int num14 = num13 + 1;
			double num15 = num8;
			double num16 = num8;
			num8 = inReal[num14];
			num14++;
			num15 += num8;
			num16 = num8 * 2.0 + num16;
			num8 = inReal[num14];
			num14++;
			num15 += num8;
			num16 = num8 * 3.0 + num16;
			double num17 = 0.0;
			int num18 = 34;
			do
			{
				num8 = inReal[num14];
				num14++;
				num15 = num15 + num8 - num17;
				num17 = inReal[num13];
				num13++;
				num16 = num8 * 4.0 + num16 - num15;
				num18--;
			}
			while (num18 != 0);
			int num19 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			double num23 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num28 = 0.0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			int num37 = 0;
			double num38 = 0.0;
			double num39 = 0.0;
			double num40 = 0.0;
			double num41 = 0.0;
			double num42 = 0.0;
			double num43 = 0.0;
			double num44 = 0.0;
			double num45 = 0.0;
			double num46 = 0.0;
			int num47 = 0;
			do
			{
				array9[num47] = 0.0;
				num47++;
			}
			while (num47 < 50);
			double num48 = 0.0;
			if (num14 <= endIdx)
			{
				do
				{
					double num49 = num36 * 0.075 + 0.54;
					double num50 = inReal[num14];
					num15 = num50 + num15 - num17;
					num16 = num50 * 4.0 + num16;
					num17 = inReal[num13];
					num13++;
					double num51 = num16 * 0.1;
					num16 -= num15;
					array9[num] = num51;
					double num57;
					double num58;
					if (num14 % 2 == 0)
					{
						double num52 = num51 * 0.0962;
						double num53 = 0.0 - array2[num19];
						array2[num19] = num52;
						num53 = num52 + num53 - num21;
						num21 = num23 * 0.5769;
						num23 = num51;
						num53 = (num21 + num53) * num49;
						num52 = num53 * 0.0962;
						double num54 = 0.0 - array4[num19];
						array4[num19] = num52;
						num54 = num52 + num54 - num25;
						num25 = num27 * 0.5769;
						num27 = num53;
						num54 = (num25 + num54) * num49;
						num52 = num42 * 0.0962;
						double num55 = 0.0 - array6[num19];
						array6[num19] = num52;
						num55 = num52 + num55 - num29;
						num29 = num31 * 0.5769;
						num31 = num42;
						num55 = (num29 + num55) * num49;
						num52 = num54 * 0.0962;
						double num56 = 0.0 - array8[num19];
						array8[num19] = num52;
						num56 = num52 + num56 - num33;
						num33 = num35 * 0.5769;
						num35 = num54;
						num56 = (num33 + num56) * num49;
						num19++;
						if (num19 == 3)
						{
							num19 = 0;
						}
						num57 = (num55 + num54) * 0.2 + num38 * 0.8;
						num58 = (num42 - num56) * 0.2 + num39 * 0.8;
						num43 = num45;
						num45 = num53;
					}
					else
					{
						double num52 = num51 * 0.0962;
						double num53 = 0.0 - array[num19];
						array[num19] = num52;
						num53 = num52 + num53 - num20;
						num20 = num22 * 0.5769;
						num22 = num51;
						num53 = (num20 + num53) * num49;
						num52 = num53 * 0.0962;
						double num54 = 0.0 - array3[num19];
						array3[num19] = num52;
						num54 = num52 + num54 - num24;
						num24 = num26 * 0.5769;
						num26 = num53;
						num54 = (num24 + num54) * num49;
						num52 = num43 * 0.0962;
						double num55 = 0.0 - array5[num19];
						array5[num19] = num52;
						num55 = num52 + num55 - num28;
						num28 = num30 * 0.5769;
						num30 = num43;
						num52 = num54 * 0.0962;
						double num56 = 0.0 - array7[num19];
						array7[num19] = num52;
						num56 = num52 + num56 - num32;
						num32 = num34 * 0.5769;
						num34 = num54;
						num57 = ((num28 + num55) * num49 + num54) * 0.2 + num38 * 0.8;
						num58 = (num43 - (num32 + num56) * num49) * 0.2 + num39 * 0.8;
						num42 = num44;
						num44 = num53;
					}
					num41 = (num57 * num38 + num58 * num39) * 0.2 + num41 * 0.8;
					num40 = (num58 * num38 - num57 * num39) * 0.2 + num40 * 0.8;
					num38 = num57;
					num39 = num58;
					num8 = num36;
					if (num40 != 0.0 && num41 != 0.0)
					{
						num36 = 360.0 / (Math.Atan(num40 / num41) * num9);
					}
					double num59 = num8 * 1.5;
					if (num36 > num59)
					{
						num36 = num59;
					}
					num59 = num8 * 0.67;
					if (num36 < num59)
					{
						num36 = num59;
					}
					if (num36 < 6.0)
					{
						num36 = 6.0;
					}
					else if (num36 > 50.0)
					{
						num36 = 50.0;
					}
					num36 = num36 * 0.2 + num8 * 0.8;
					num46 = num46 * 0.67 + num36 * 0.33;
					double num60 = num48;
					int num61 = (int)(num46 + 0.5);
					int num62 = num61;
					double num63 = 0.0;
					double num64 = 0.0;
					int num65 = num;
					num47 = 0;
					if (0 < num62)
					{
						double num66 = num62;
						do
						{
							num8 = (double)num47 * num11 / num66;
							num59 = array9[num65];
							num63 = Math.Sin(num8) * num59 + num63;
							num64 = Math.Cos(num8) * num59 + num64;
							num65 = ((num65 != 0) ? (num65 - 1) : 49);
							num47++;
						}
						while (num47 < num62);
					}
					num8 = Math.Abs(num64);
					if (num8 > 0.0)
					{
						num48 = Math.Atan(num63 / num64) * num9;
					}
					else if (num8 <= 0.01)
					{
						if (num63 < 0.0)
						{
							num48 -= 90.0;
						}
						else if (num63 > 0.0)
						{
							num48 += 90.0;
						}
					}
					num48 = num48 + 90.0 + 360.0 / num46;
					if (num64 < 0.0)
					{
						num48 += 180.0;
					}
					if (num48 > 315.0)
					{
						num48 -= 360.0;
					}
					double num67 = num6;
					double num68 = num7;
					num6 = Math.Sin(num10 * num48);
					num7 = Math.Sin((num48 + 45.0) * num10);
					int num69 = num61;
					int num70 = num14;
					num8 = 0.0;
					if (0 < num69)
					{
						int num71 = num69;
						do
						{
							num8 = inReal[num70] + num8;
							num70--;
							num71--;
						}
						while (num71 != 0);
						if (num69 > 0)
						{
							num8 /= (double)num69;
						}
					}
					double num72 = (num8 * 4.0 + num4 * 3.0 + num3 * 2.0 + num2) / 10.0;
					num2 = num3;
					num3 = num4;
					num4 = num8;
					int num73 = 1;
					if ((num6 > num7 && num67 <= num68) || (num6 < num7 && num67 >= num68))
					{
						num5 = 0;
						num73 = 0;
					}
					num5++;
					if ((double)num5 < num46 * 0.5)
					{
						num73 = 0;
					}
					num8 = num48 - num60;
					if (num46 != 0.0 && num8 > 241.20000000000002 / num46 && num8 < 540.0 / num46)
					{
						num73 = 0;
					}
					num8 = array9[num];
					if (num72 != 0.0 && Math.Abs((num8 - num72) / num72) >= 0.015)
					{
						num73 = 1;
					}
					if (num14 >= startIdx)
					{
						outInteger[num37] = num73;
						num37++;
					}
					num++;
					if (num > 49)
					{
						num = 0;
					}
					num14++;
				}
				while (num14 <= endIdx);
			}
			outNBElement = num37;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int KamaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return (int)Globals.unstablePeriod[12] + optInTimePeriod;
	}

	public static RetCode Kama(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = (int)Globals.unstablePeriod[12] + optInTimePeriod;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			double num2 = 0.0;
			int num3 = startIdx - num;
			int num4 = num3;
			int num5 = optInTimePeriod - 1;
			double num6;
			if (optInTimePeriod > 0)
			{
				int num7;
				do
				{
					num6 = inReal[num3];
					num3++;
					num6 -= (double)inReal[num3];
					num2 = Math.Abs(num6) + num2;
					num7 = num5;
					num5--;
				}
				while (num7 > 0);
			}
			double num8 = inReal[num3 - 1];
			double num9 = inReal[num4];
			num4++;
			double num10 = (double)inReal[num3] - num9;
			double num11 = num9;
			num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
			num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
			double num12 = (double)inReal[num3] - num8;
			double num13 = num6;
			num8 = num12 * (num13 * num13) + num8;
			num3++;
			if (num3 <= startIdx)
			{
				do
				{
					num6 = inReal[num3];
					num9 = inReal[num4];
					num4++;
					num10 = num6 - num9;
					num2 -= Math.Abs(num11 - num9);
					num2 = Math.Abs(num6 - (double)inReal[num3 - 1]) + num2;
					num11 = num9;
					num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
					num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
					double num14 = (double)inReal[num3] - num8;
					double num15 = num6;
					num8 = num14 * (num15 * num15) + num8;
					num3++;
				}
				while (num3 <= startIdx);
			}
			outReal[0] = num8;
			int num16 = 1;
			outBegIdx = num3 - 1;
			if (num3 <= endIdx)
			{
				do
				{
					num6 = inReal[num3];
					num9 = inReal[num4];
					num4++;
					num10 = num6 - num9;
					num2 -= Math.Abs(num11 - num9);
					num2 = Math.Abs(num6 - (double)inReal[num3 - 1]) + num2;
					num11 = num9;
					num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
					num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
					double num17 = (double)inReal[num3] - num8;
					double num18 = num6;
					num8 = num17 * (num18 * num18) + num8;
					num3++;
					outReal[num16] = num8;
					num16++;
				}
				while (num3 <= endIdx);
			}
			outNBElement = num16;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Kama(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = (int)Globals.unstablePeriod[12] + optInTimePeriod;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			double num2 = 0.0;
			int num3 = startIdx - num;
			int num4 = num3;
			int num5 = optInTimePeriod - 1;
			double num6;
			if (optInTimePeriod > 0)
			{
				int num7;
				do
				{
					num6 = inReal[num3];
					num3++;
					num6 -= inReal[num3];
					num2 = Math.Abs(num6) + num2;
					num7 = num5;
					num5--;
				}
				while (num7 > 0);
			}
			double num8 = inReal[num3 - 1];
			double num9 = inReal[num4];
			num4++;
			double num10 = inReal[num3] - num9;
			double num11 = num9;
			num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
			num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
			double num12 = inReal[num3] - num8;
			double num13 = num6;
			num8 = num12 * (num13 * num13) + num8;
			num3++;
			if (num3 <= startIdx)
			{
				do
				{
					num6 = inReal[num3];
					num9 = inReal[num4];
					num4++;
					num10 = num6 - num9;
					num2 -= Math.Abs(num11 - num9);
					num2 = Math.Abs(num6 - inReal[num3 - 1]) + num2;
					num11 = num9;
					num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
					num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
					double num14 = inReal[num3] - num8;
					double num15 = num6;
					num8 = num14 * (num15 * num15) + num8;
					num3++;
				}
				while (num3 <= startIdx);
			}
			outReal[0] = num8;
			int num16 = 1;
			outBegIdx = num3 - 1;
			if (num3 <= endIdx)
			{
				do
				{
					num6 = inReal[num3];
					num9 = inReal[num4];
					num4++;
					num10 = num6 - num9;
					num2 -= Math.Abs(num11 - num9);
					num2 = Math.Abs(num6 - inReal[num3 - 1]) + num2;
					num11 = num9;
					num6 = ((num2 <= num10 || (-1E-08 < num2 && num2 < 1E-08)) ? 1.0 : Math.Abs(num10 / num2));
					num6 = num6 * 0.6021505376344085 + 0.06451612903225806;
					double num17 = inReal[num3] - num8;
					double num18 = num6;
					num8 = num17 * (num18 * num18) + num8;
					num3++;
					outReal[num16] = num8;
					num16++;
				}
				while (num3 <= endIdx);
			}
			outNBElement = num16;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int LinearRegLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode LinearReg(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		double num8 = optInTimePeriod - 1;
		do
		{
			double num9 = 0.0;
			double num10 = 0.0;
			int num11 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num12 = num4 - num11;
				int num14;
				do
				{
					double num13 = inReal[num12];
					num10 = num13 + num10;
					num9 = (double)num11 * num13 + num9;
					num14 = num11;
					num11--;
					num12++;
				}
				while (num14 != 0);
			}
			double num15 = (num6 * num9 - num10 * num5) / num7;
			outReal[num3] = (num10 - num15 * num5) / num6 + num8 * num15;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static RetCode LinearReg(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		double num8 = optInTimePeriod - 1;
		do
		{
			double num9 = 0.0;
			double num10 = 0.0;
			int num11 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num12 = num4 - num11;
				int num14;
				do
				{
					double num13 = inReal[num12];
					num10 = num13 + num10;
					num9 = (double)num11 * num13 + num9;
					num14 = num11;
					num11--;
					num12++;
				}
				while (num14 != 0);
			}
			double num15 = (num6 * num9 - num10 * num5) / num7;
			outReal[num3] = (num10 - num15 * num5) / num6 + num8 * num15;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static int LinearRegAngleLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode LinearRegAngle(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = Math.Atan((num6 * num8 - num9 * num5) / num7) * (180.0 / Math.PI);
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static RetCode LinearRegAngle(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = Math.Atan((num6 * num8 - num9 * num5) / num7) * (180.0 / Math.PI);
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static int LinearRegInterceptLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode LinearRegIntercept(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = (num9 - (num6 * num8 - num9 * num5) / num7 * num5) / num6;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static RetCode LinearRegIntercept(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = (num9 - (num6 * num8 - num9 * num5) / num7 * num5) / num6;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static int LinearRegSlopeLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode LinearRegSlope(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = (num6 * num8 - num9 * num5) / num7;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static RetCode LinearRegSlope(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			outReal[num3] = (num6 * num8 - num9 * num5) / num7;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static int LnLookback()
	{
		return 0;
	}

	public static RetCode Ln(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Log(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Ln(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Log(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int Log10Lookback()
	{
		return 0;
	}

	public static RetCode Log10(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Log10(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Log10(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Log10(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MovingAverageLookback(int optInTimePeriod, MAType optInMAType)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else
		{
			if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 0;
			}
		}
		return optInMAType switch
		{
			MAType.Sma => SmaLookback(optInTimePeriod), 
			MAType.Ema => EmaLookback(optInTimePeriod), 
			MAType.Wma => WmaLookback(optInTimePeriod), 
			MAType.Dema => DemaLookback(optInTimePeriod), 
			MAType.Tema => TemaLookback(optInTimePeriod), 
			MAType.Trima => TrimaLookback(optInTimePeriod), 
			MAType.Kama => KamaLookback(optInTimePeriod), 
			MAType.Mama => MamaLookback(0.5, 0.05), 
			MAType.T3 => T3Lookback(optInTimePeriod, 0.7), 
			_ => 0, 
		};
	}

	public static RetCode MovingAverage(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == 1)
			{
				int num = (outNBElement = endIdx - startIdx + 1);
				int num2 = 0;
				if (0 < num)
				{
					do
					{
						outReal[num2] = inReal[num2 + startIdx];
						num2++;
					}
					while (num2 < num);
				}
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			switch (optInMAType)
			{
			case MAType.Sma:
				return Sma(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Ema:
				return Ema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Wma:
				return Wma(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Dema:
				return Dema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Tema:
				return Tema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Trima:
				return Trima(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Kama:
				return Kama(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Mama:
			{
				double[] array = new double[endIdx - startIdx + 1];
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				return Mama(startIdx, endIdx, inReal, 0.5, 0.05, out outBegIdx, out outNBElement, outReal, array);
			}
			case MAType.T3:
				return T3(startIdx, endIdx, inReal, optInTimePeriod, 0.7, out outBegIdx, out outNBElement, outReal);
			default:
				return RetCode.BadParam;
			}
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MovingAverage(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == 1)
			{
				int num = (outNBElement = endIdx - startIdx + 1);
				int num2 = 0;
				if (0 < num)
				{
					do
					{
						outReal[num2] = inReal[num2 + startIdx];
						num2++;
					}
					while (num2 < num);
				}
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			switch (optInMAType)
			{
			case MAType.Sma:
				return Sma(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Ema:
				return Ema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Wma:
				return Wma(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Dema:
				return Dema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Tema:
				return Tema(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Trima:
				return Trima(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Kama:
				return Kama(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			case MAType.Mama:
			{
				double[] array = new double[endIdx - startIdx + 1];
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				return Mama(startIdx, endIdx, inReal, 0.5, 0.05, out outBegIdx, out outNBElement, outReal, array);
			}
			case MAType.T3:
				return T3(startIdx, endIdx, inReal, optInTimePeriod, 0.7, out outBegIdx, out outNBElement, outReal);
			default:
				return RetCode.BadParam;
			}
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MacdLookback(int optInFastPeriod, int optInSlowPeriod, int optInSignalPeriod)
	{
		if (optInFastPeriod == int.MinValue)
		{
			optInFastPeriod = 12;
		}
		else if ((uint)(optInFastPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSlowPeriod == int.MinValue)
		{
			optInSlowPeriod = 26;
		}
		else if ((uint)(optInSlowPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSignalPeriod == int.MinValue)
		{
			optInSignalPeriod = 9;
		}
		else if ((uint)(optInSignalPeriod - 1) > 99999u)
		{
			return -1;
		}
		if (optInSlowPeriod < optInFastPeriod)
		{
			optInSlowPeriod = optInFastPeriod;
		}
		return EmaLookback(optInSlowPeriod) + EmaLookback(optInSignalPeriod);
	}

	public static RetCode Macd(int startIdx, int endIdx, float[] inReal, int optInFastPeriod, int optInSlowPeriod, int optInSignalPeriod, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_MACD(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInSignalPeriod, out outBegIdx, out outNBElement, outMACD, outMACDSignal, outMACDHist);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Macd(int startIdx, int endIdx, double[] inReal, int optInFastPeriod, int optInSlowPeriod, int optInSignalPeriod, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_MACD(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInSignalPeriod, out outBegIdx, out outNBElement, outMACD, outMACDSignal, outMACDHist);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MacdExtLookback(int optInFastPeriod, MAType optInFastMAType, int optInSlowPeriod, MAType optInSlowMAType, int optInSignalPeriod, MAType optInSignalMAType)
	{
		if (optInFastPeriod == int.MinValue)
		{
			optInFastPeriod = 12;
		}
		else if ((uint)(optInFastPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSlowPeriod == int.MinValue)
		{
			optInSlowPeriod = 26;
		}
		else if ((uint)(optInSlowPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSignalPeriod == int.MinValue)
		{
			optInSignalPeriod = 9;
		}
		else if ((uint)(optInSignalPeriod - 1) > 99999u)
		{
			return -1;
		}
		int num = MovingAverageLookback(optInFastPeriod, optInFastMAType);
		int num2 = MovingAverageLookback(optInSlowPeriod, optInSlowMAType);
		if (num2 > num)
		{
			num = num2;
		}
		return MovingAverageLookback(optInSignalPeriod, optInSignalMAType) + num;
	}

	public static RetCode MacdExt(int startIdx, int endIdx, float[] inReal, int optInFastPeriod, MAType optInFastMAType, int optInSlowPeriod, MAType optInSlowMAType, int optInSignalPeriod, MAType optInSignalMAType, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod < optInFastPeriod)
			{
				int num = optInSlowPeriod;
				optInSlowPeriod = optInFastPeriod;
				optInFastPeriod = num;
				MAType num2 = optInSlowMAType;
				optInSlowMAType = optInFastMAType;
				optInFastMAType = num2;
			}
			int num3 = MovingAverageLookback(optInFastPeriod, optInFastMAType);
			int num4 = MovingAverageLookback(optInSlowPeriod, optInSlowMAType);
			if (num4 > num3)
			{
				num3 = num4;
			}
			int num5 = MovingAverageLookback(optInSignalPeriod, optInSignalMAType);
			int num6 = num5 + num3;
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num7 = endIdx + (num5 - startIdx) + 1;
			int num8 = num7;
			double[] array = new double[num8];
			if (array == null)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.AllocErr;
			}
			double[] array2 = new double[num8];
			if (array2 == null)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.AllocErr;
			}
			int num9 = startIdx - num5;
			int outBegIdx2;
			int outNBElement2;
			RetCode retCode = MovingAverage(num9, endIdx, inReal, optInSlowPeriod, optInSlowMAType, out outBegIdx2, out outNBElement2, array2);
			if (retCode != RetCode.Success)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			int outBegIdx3;
			int outNBElement3;
			RetCode retCode2 = MovingAverage(num9, endIdx, inReal, optInFastPeriod, optInFastMAType, out outBegIdx3, out outNBElement3, array);
			if (retCode2 != RetCode.Success)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return retCode2;
			}
			if (outBegIdx2 == num9 && outBegIdx3 == num9 && outNBElement2 == outNBElement3 && outNBElement2 == num7)
			{
				int num10 = 0;
				if (0 < outNBElement2)
				{
					do
					{
						array[num10] -= array2[num10];
						num10++;
					}
					while (num10 < outNBElement2);
				}
				Array.Copy(array, num5, outMACD, 0, endIdx - startIdx + 1);
				RetCode retCode3 = MovingAverage(0, outNBElement2 - 1, array, optInSignalPeriod, optInSignalMAType, out outBegIdx3, out outNBElement3, outMACDSignal);
				if (retCode3 != RetCode.Success)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return retCode3;
				}
				int num11 = 0;
				if (0 < outNBElement3)
				{
					do
					{
						outMACDHist[num11] = outMACD[num11] - outMACDSignal[num11];
						num11++;
					}
					while (num11 < outNBElement3);
				}
				outBegIdx = startIdx;
				outNBElement = outNBElement3;
				return RetCode.Success;
			}
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.InternalError;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MacdExt(int startIdx, int endIdx, double[] inReal, int optInFastPeriod, MAType optInFastMAType, int optInSlowPeriod, MAType optInSlowMAType, int optInSignalPeriod, MAType optInSignalMAType, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod < optInFastPeriod)
			{
				int num = optInSlowPeriod;
				optInSlowPeriod = optInFastPeriod;
				optInFastPeriod = num;
				MAType num2 = optInSlowMAType;
				optInSlowMAType = optInFastMAType;
				optInFastMAType = num2;
			}
			int num3 = MovingAverageLookback(optInFastPeriod, optInFastMAType);
			int num4 = MovingAverageLookback(optInSlowPeriod, optInSlowMAType);
			if (num4 > num3)
			{
				num3 = num4;
			}
			int num5 = MovingAverageLookback(optInSignalPeriod, optInSignalMAType);
			int num6 = num5 + num3;
			if (startIdx < num6)
			{
				startIdx = num6;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num7 = endIdx + (num5 - startIdx) + 1;
			int num8 = num7;
			double[] array = new double[num8];
			if (array == null)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.AllocErr;
			}
			double[] array2 = new double[num8];
			if (array2 == null)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.AllocErr;
			}
			int num9 = startIdx - num5;
			int outBegIdx2;
			int outNBElement2;
			RetCode retCode = MovingAverage(num9, endIdx, inReal, optInSlowPeriod, optInSlowMAType, out outBegIdx2, out outNBElement2, array2);
			if (retCode != RetCode.Success)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			int outBegIdx3;
			int outNBElement3;
			RetCode retCode2 = MovingAverage(num9, endIdx, inReal, optInFastPeriod, optInFastMAType, out outBegIdx3, out outNBElement3, array);
			if (retCode2 != RetCode.Success)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return retCode2;
			}
			if (outBegIdx2 == num9 && outBegIdx3 == num9 && outNBElement2 == outNBElement3 && outNBElement2 == num7)
			{
				int num10 = 0;
				if (0 < outNBElement2)
				{
					do
					{
						array[num10] -= array2[num10];
						num10++;
					}
					while (num10 < outNBElement2);
				}
				Array.Copy(array, num5, outMACD, 0, endIdx - startIdx + 1);
				RetCode retCode3 = MovingAverage(0, outNBElement2 - 1, array, optInSignalPeriod, optInSignalMAType, out outBegIdx3, out outNBElement3, outMACDSignal);
				if (retCode3 != RetCode.Success)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return retCode3;
				}
				int num11 = 0;
				if (0 < outNBElement3)
				{
					do
					{
						outMACDHist[num11] = outMACD[num11] - outMACDSignal[num11];
						num11++;
					}
					while (num11 < outNBElement3);
				}
				outBegIdx = startIdx;
				outNBElement = outNBElement3;
				return RetCode.Success;
			}
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.InternalError;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MacdFixLookback(int optInSignalPeriod)
	{
		if (optInSignalPeriod == int.MinValue)
		{
			optInSignalPeriod = 9;
		}
		else if ((uint)(optInSignalPeriod - 1) > 99999u)
		{
			return -1;
		}
		return EmaLookback(optInSignalPeriod) + EmaLookback(26);
	}

	public static RetCode MacdFix(int startIdx, int endIdx, float[] inReal, int optInSignalPeriod, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_MACD(startIdx, endIdx, inReal, 0, 0, optInSignalPeriod, out outBegIdx, out outNBElement, outMACD, outMACDSignal, outMACDHist);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MacdFix(int startIdx, int endIdx, double[] inReal, int optInSignalPeriod, out int outBegIdx, out int outNBElement, double[] outMACD, double[] outMACDSignal, double[] outMACDHist)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInSignalPeriod == int.MinValue)
			{
				optInSignalPeriod = 9;
			}
			else if ((uint)(optInSignalPeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outMACD == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDSignal == null)
			{
				return RetCode.BadParam;
			}
			if (outMACDHist == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_MACD(startIdx, endIdx, inReal, 0, 0, optInSignalPeriod, out outBegIdx, out outNBElement, outMACD, outMACDSignal, outMACDHist);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MamaLookback(double optInFastLimit, double optInSlowLimit)
	{
		if (optInFastLimit == -4E+37 || (!(optInFastLimit < 0.01) && !(optInFastLimit > 0.99)))
		{
			if (optInSlowLimit == -4E+37 || (!(optInSlowLimit < 0.01) && !(optInSlowLimit > 0.99)))
			{
				return (int)(Globals.unstablePeriod[13] + 32);
			}
			return -1;
		}
		return -1;
	}

	public static RetCode Mama(int startIdx, int endIdx, float[] inReal, double optInFastLimit, double optInSlowLimit, out int outBegIdx, out int outNBElement, double[] outMAMA, double[] outFAMA)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastLimit == -4E+37)
			{
				optInFastLimit = 0.5;
			}
			else if (optInFastLimit < 0.01 || optInFastLimit > 0.99)
			{
				return RetCode.BadParam;
			}
			if (optInSlowLimit == -4E+37)
			{
				optInSlowLimit = 0.05;
			}
			else if (optInSlowLimit < 0.01 || optInSlowLimit > 0.99)
			{
				return RetCode.BadParam;
			}
			if (outMAMA == null)
			{
				return RetCode.BadParam;
			}
			if (outFAMA == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[13] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num40 = num27 * 0.075 + 0.54;
					double num41 = inReal[num5];
					num6 = num41 + num6 - num8;
					num7 = num41 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num42 = num7 * 0.1;
					num7 -= num6;
					double num48;
					double num49;
					double num50;
					if (num5 % 2 == 0)
					{
						double num43 = num42 * 0.0962;
						double num44 = 0.0 - array2[num10];
						array2[num10] = num43;
						num44 = num43 + num44 - num12;
						num12 = num14 * 0.5769;
						num14 = num42;
						num44 = (num12 + num44) * num40;
						num43 = num44 * 0.0962;
						double num45 = 0.0 - array4[num10];
						array4[num10] = num43;
						num45 = num43 + num45 - num16;
						num16 = num18 * 0.5769;
						num18 = num44;
						num45 = (num16 + num45) * num40;
						num43 = num35 * 0.0962;
						double num46 = 0.0 - array6[num10];
						array6[num10] = num43;
						num46 = num43 + num46 - num20;
						num20 = num22 * 0.5769;
						num22 = num35;
						num46 = (num20 + num46) * num40;
						num43 = num45 * 0.0962;
						double num47 = 0.0 - array8[num10];
						array8[num10] = num43;
						num47 = num43 + num47 - num24;
						num24 = num26 * 0.5769;
						num26 = num45;
						num47 = (num24 + num47) * num40;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num48 = (num46 + num45) * 0.2 + num29 * 0.8;
						num49 = (num35 - num47) * 0.2 + num30 * 0.8;
						num36 = num38;
						num38 = num44;
						num50 = ((num35 == 0.0) ? 0.0 : (Math.Atan(num45 / num35) * num));
					}
					else
					{
						double num43 = num42 * 0.0962;
						double num44 = 0.0 - array[num10];
						array[num10] = num43;
						num44 = num43 + num44 - num11;
						num11 = num13 * 0.5769;
						num13 = num42;
						num44 = (num11 + num44) * num40;
						num43 = num44 * 0.0962;
						double num45 = 0.0 - array3[num10];
						array3[num10] = num43;
						num45 = num43 + num45 - num15;
						num15 = num17 * 0.5769;
						num17 = num44;
						num45 = (num15 + num45) * num40;
						num43 = num36 * 0.0962;
						double num46 = 0.0 - array5[num10];
						array5[num10] = num43;
						num46 = num43 + num46 - num19;
						num19 = num21 * 0.5769;
						num21 = num36;
						num43 = num45 * 0.0962;
						double num47 = 0.0 - array7[num10];
						array7[num10] = num43;
						num47 = num43 + num47 - num23;
						num23 = num25 * 0.5769;
						num25 = num45;
						num48 = ((num19 + num46) * num40 + num45) * 0.2 + num29 * 0.8;
						num49 = (num36 - (num23 + num47) * num40) * 0.2 + num30 * 0.8;
						num35 = num37;
						num37 = num44;
						num50 = ((num36 == 0.0) ? 0.0 : (Math.Atan(num45 / num36) * num));
					}
					num4 = num39 - num50;
					num39 = num50;
					if (!(num4 < 1.0) && num4 > 1.0)
					{
						num4 = optInFastLimit / num4;
						if (num4 < optInSlowLimit)
						{
							num4 = optInSlowLimit;
						}
					}
					else
					{
						num4 = optInFastLimit;
					}
					num34 = (1.0 - num4) * num34 + num41 * num4;
					num4 *= 0.5;
					num33 = (1.0 - num4) * num33 + num34 * num4;
					if (num5 >= startIdx)
					{
						outMAMA[num28] = num34;
						outFAMA[num28] = num33;
						num28++;
					}
					num32 = (num48 * num29 + num49 * num30) * 0.2 + num32 * 0.8;
					num31 = (num49 * num29 - num48 * num30) * 0.2 + num31 * 0.8;
					num29 = num48;
					num30 = num49;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					num50 = num4 * 1.5;
					if (num27 > num50)
					{
						num27 = num50;
					}
					num50 = num4 * 0.67;
					if (num27 < num50)
					{
						num27 = num50;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Mama(int startIdx, int endIdx, double[] inReal, double optInFastLimit, double optInSlowLimit, out int outBegIdx, out int outNBElement, double[] outMAMA, double[] outFAMA)
	{
		double[] array = new double[3];
		double[] array2 = new double[3];
		double[] array3 = new double[3];
		double[] array4 = new double[3];
		double[] array5 = new double[3];
		double[] array6 = new double[3];
		double[] array7 = new double[3];
		double[] array8 = new double[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastLimit == -4E+37)
			{
				optInFastLimit = 0.5;
			}
			else if (optInFastLimit < 0.01 || optInFastLimit > 0.99)
			{
				return RetCode.BadParam;
			}
			if (optInSlowLimit == -4E+37)
			{
				optInSlowLimit = 0.05;
			}
			else if (optInSlowLimit < 0.01 || optInSlowLimit > 0.99)
			{
				return RetCode.BadParam;
			}
			if (outMAMA == null)
			{
				return RetCode.BadParam;
			}
			if (outFAMA == null)
			{
				return RetCode.BadParam;
			}
			double num = 180.0 / (Math.Atan(1.0) * 4.0);
			int num2 = (int)(Globals.unstablePeriod[13] + 32);
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = startIdx - num2;
			double num4 = inReal[num3];
			int num5 = num3 + 1;
			double num6 = num4;
			double num7 = num4;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 2.0 + num7;
			num4 = inReal[num5];
			num5++;
			num6 += num4;
			num7 = num4 * 3.0 + num7;
			double num8 = 0.0;
			int num9 = 9;
			do
			{
				num4 = inReal[num5];
				num5++;
				num6 = num6 + num4 - num8;
				num8 = inReal[num3];
				num3++;
				num7 = num4 * 4.0 + num7 - num6;
				num9--;
			}
			while (num9 != 0);
			int num10 = 0;
			array[0] = 0.0;
			array[1] = 0.0;
			array[2] = 0.0;
			array2[0] = 0.0;
			array2[1] = 0.0;
			array2[2] = 0.0;
			double num11 = 0.0;
			double num12 = 0.0;
			double num13 = 0.0;
			double num14 = 0.0;
			array3[0] = 0.0;
			array3[1] = 0.0;
			array3[2] = 0.0;
			array4[0] = 0.0;
			array4[1] = 0.0;
			array4[2] = 0.0;
			double num15 = 0.0;
			double num16 = 0.0;
			double num17 = 0.0;
			double num18 = 0.0;
			array5[0] = 0.0;
			array5[1] = 0.0;
			array5[2] = 0.0;
			array6[0] = 0.0;
			array6[1] = 0.0;
			array6[2] = 0.0;
			double num19 = 0.0;
			double num20 = 0.0;
			double num21 = 0.0;
			double num22 = 0.0;
			array7[0] = 0.0;
			array7[1] = 0.0;
			array7[2] = 0.0;
			array8[0] = 0.0;
			array8[1] = 0.0;
			array8[2] = 0.0;
			double num23 = 0.0;
			double num24 = 0.0;
			double num25 = 0.0;
			double num26 = 0.0;
			double num27 = 0.0;
			int num28 = 0;
			double num29 = 0.0;
			double num30 = 0.0;
			double num31 = 0.0;
			double num32 = 0.0;
			double num33 = 0.0;
			double num34 = 0.0;
			double num35 = 0.0;
			double num36 = 0.0;
			double num37 = 0.0;
			double num38 = 0.0;
			double num39 = 0.0;
			if (num5 <= endIdx)
			{
				do
				{
					double num40 = num27 * 0.075 + 0.54;
					double num41 = inReal[num5];
					num6 = num41 + num6 - num8;
					num7 = num41 * 4.0 + num7;
					num8 = inReal[num3];
					num3++;
					double num42 = num7 * 0.1;
					num7 -= num6;
					double num48;
					double num49;
					double num50;
					if (num5 % 2 == 0)
					{
						double num43 = num42 * 0.0962;
						double num44 = 0.0 - array2[num10];
						array2[num10] = num43;
						num44 = num43 + num44 - num12;
						num12 = num14 * 0.5769;
						num14 = num42;
						num44 = (num12 + num44) * num40;
						num43 = num44 * 0.0962;
						double num45 = 0.0 - array4[num10];
						array4[num10] = num43;
						num45 = num43 + num45 - num16;
						num16 = num18 * 0.5769;
						num18 = num44;
						num45 = (num16 + num45) * num40;
						num43 = num35 * 0.0962;
						double num46 = 0.0 - array6[num10];
						array6[num10] = num43;
						num46 = num43 + num46 - num20;
						num20 = num22 * 0.5769;
						num22 = num35;
						num46 = (num20 + num46) * num40;
						num43 = num45 * 0.0962;
						double num47 = 0.0 - array8[num10];
						array8[num10] = num43;
						num47 = num43 + num47 - num24;
						num24 = num26 * 0.5769;
						num26 = num45;
						num47 = (num24 + num47) * num40;
						num10++;
						if (num10 == 3)
						{
							num10 = 0;
						}
						num48 = (num46 + num45) * 0.2 + num29 * 0.8;
						num49 = (num35 - num47) * 0.2 + num30 * 0.8;
						num36 = num38;
						num38 = num44;
						num50 = ((num35 == 0.0) ? 0.0 : (Math.Atan(num45 / num35) * num));
					}
					else
					{
						double num43 = num42 * 0.0962;
						double num44 = 0.0 - array[num10];
						array[num10] = num43;
						num44 = num43 + num44 - num11;
						num11 = num13 * 0.5769;
						num13 = num42;
						num44 = (num11 + num44) * num40;
						num43 = num44 * 0.0962;
						double num45 = 0.0 - array3[num10];
						array3[num10] = num43;
						num45 = num43 + num45 - num15;
						num15 = num17 * 0.5769;
						num17 = num44;
						num45 = (num15 + num45) * num40;
						num43 = num36 * 0.0962;
						double num46 = 0.0 - array5[num10];
						array5[num10] = num43;
						num46 = num43 + num46 - num19;
						num19 = num21 * 0.5769;
						num21 = num36;
						num43 = num45 * 0.0962;
						double num47 = 0.0 - array7[num10];
						array7[num10] = num43;
						num47 = num43 + num47 - num23;
						num23 = num25 * 0.5769;
						num25 = num45;
						num48 = ((num19 + num46) * num40 + num45) * 0.2 + num29 * 0.8;
						num49 = (num36 - (num23 + num47) * num40) * 0.2 + num30 * 0.8;
						num35 = num37;
						num37 = num44;
						num50 = ((num36 == 0.0) ? 0.0 : (Math.Atan(num45 / num36) * num));
					}
					num4 = num39 - num50;
					num39 = num50;
					if (!(num4 < 1.0) && num4 > 1.0)
					{
						num4 = optInFastLimit / num4;
						if (num4 < optInSlowLimit)
						{
							num4 = optInSlowLimit;
						}
					}
					else
					{
						num4 = optInFastLimit;
					}
					num34 = (1.0 - num4) * num34 + num41 * num4;
					num4 *= 0.5;
					num33 = (1.0 - num4) * num33 + num34 * num4;
					if (num5 >= startIdx)
					{
						outMAMA[num28] = num34;
						outFAMA[num28] = num33;
						num28++;
					}
					num32 = (num48 * num29 + num49 * num30) * 0.2 + num32 * 0.8;
					num31 = (num49 * num29 - num48 * num30) * 0.2 + num31 * 0.8;
					num29 = num48;
					num30 = num49;
					num4 = num27;
					if (num31 != 0.0 && num32 != 0.0)
					{
						num27 = 360.0 / (Math.Atan(num31 / num32) * num);
					}
					num50 = num4 * 1.5;
					if (num27 > num50)
					{
						num27 = num50;
					}
					num50 = num4 * 0.67;
					if (num27 < num50)
					{
						num27 = num50;
					}
					if (num27 < 6.0)
					{
						num27 = 6.0;
					}
					else if (num27 > 50.0)
					{
						num27 = 50.0;
					}
					num27 = num27 * 0.2 + num4 * 0.8;
					num5++;
				}
				while (num5 <= endIdx);
			}
			outNBElement = num28;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MovingAverageVariablePeriodLookback(int optInMinPeriod, int optInMaxPeriod, MAType optInMAType)
	{
		if (optInMinPeriod == int.MinValue || (uint)(optInMinPeriod - 2) <= 99998u)
		{
			if (optInMaxPeriod == int.MinValue)
			{
				optInMaxPeriod = 30;
			}
			else if ((uint)(optInMaxPeriod - 2) > 99998u)
			{
				return -1;
			}
			return MovingAverageLookback(optInMaxPeriod, optInMAType);
		}
		return -1;
	}

	public static RetCode MovingAverageVariablePeriod(int startIdx, int endIdx, float[] inReal, float[] inPeriods, int optInMinPeriod, int optInMaxPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (inPeriods == null)
			{
				return RetCode.BadParam;
			}
			if (optInMinPeriod == int.MinValue)
			{
				optInMinPeriod = 2;
			}
			else if ((uint)(optInMinPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInMaxPeriod == int.MinValue)
			{
				optInMaxPeriod = 30;
			}
			else if ((uint)(optInMaxPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = MovingAverageLookback(optInMaxPeriod, optInMAType);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = ((num <= startIdx) ? startIdx : num);
			if (num2 > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num3 = endIdx - num2 + 1;
			double[] array = new double[num3];
			int[] array2 = new int[num3];
			int num4 = 0;
			if (0 < num3)
			{
				do
				{
					num2 = (int)(double)inPeriods[num4 + startIdx];
					if (num2 < optInMinPeriod)
					{
						num2 = optInMinPeriod;
					}
					else if (num2 > optInMaxPeriod)
					{
						num2 = optInMaxPeriod;
					}
					array2[num4] = num2;
					num4++;
				}
				while (num4 < num3);
			}
			int num5 = 0;
			if (0 < num3)
			{
				do
				{
					int num6 = array2[num5];
					if (num6 != 0)
					{
						int outBegIdx2;
						int outNBElement2;
						RetCode retCode = MovingAverage(startIdx, endIdx, inReal, num6, optInMAType, out outBegIdx2, out outNBElement2, array);
						if (retCode != RetCode.Success)
						{
							outBegIdx = 0;
							outNBElement = 0;
							return retCode;
						}
						outReal[num5] = array[num5];
						int num7 = num5 + 1;
						if (num5 + 1 < num3)
						{
							do
							{
								if (array2[num7] == num6)
								{
									array2[num7] = 0;
									outReal[num7] = array[num7];
								}
								num7++;
							}
							while (num7 < num3);
						}
					}
					num5++;
				}
				while (num5 < num3);
			}
			outBegIdx = startIdx;
			outNBElement = num3;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MovingAverageVariablePeriod(int startIdx, int endIdx, double[] inReal, double[] inPeriods, int optInMinPeriod, int optInMaxPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (inPeriods == null)
			{
				return RetCode.BadParam;
			}
			if (optInMinPeriod == int.MinValue)
			{
				optInMinPeriod = 2;
			}
			else if ((uint)(optInMinPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInMaxPeriod == int.MinValue)
			{
				optInMaxPeriod = 30;
			}
			else if ((uint)(optInMaxPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = MovingAverageLookback(optInMaxPeriod, optInMAType);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = ((num <= startIdx) ? startIdx : num);
			if (num2 > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num3 = endIdx - num2 + 1;
			double[] array = new double[num3];
			int[] array2 = new int[num3];
			int num4 = 0;
			if (0 < num3)
			{
				do
				{
					num2 = (int)inPeriods[num4 + startIdx];
					if (num2 < optInMinPeriod)
					{
						num2 = optInMinPeriod;
					}
					else if (num2 > optInMaxPeriod)
					{
						num2 = optInMaxPeriod;
					}
					array2[num4] = num2;
					num4++;
				}
				while (num4 < num3);
			}
			int num5 = 0;
			if (0 < num3)
			{
				do
				{
					int num6 = array2[num5];
					if (num6 != 0)
					{
						int outBegIdx2;
						int outNBElement2;
						RetCode retCode = MovingAverage(startIdx, endIdx, inReal, num6, optInMAType, out outBegIdx2, out outNBElement2, array);
						if (retCode != RetCode.Success)
						{
							outBegIdx = 0;
							outNBElement = 0;
							return retCode;
						}
						outReal[num5] = array[num5];
						int num7 = num5 + 1;
						if (num5 + 1 < num3)
						{
							do
							{
								if (array2[num7] == num6)
								{
									array2[num7] = 0;
									outReal[num7] = array[num7];
								}
								num7++;
							}
							while (num7 < num3);
						}
					}
					num5++;
				}
				while (num5 < num3);
			}
			outBegIdx = startIdx;
			outNBElement = num3;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MaxLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Max(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 > num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 >= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outReal[num2] = num6;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Max(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 > num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 >= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outReal[num2] = num6;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MaxIndexLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MaxIndex(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 > num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 >= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outInteger[num2] = num5;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MaxIndex(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 > num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 >= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outInteger[num2] = num5;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MedPriceLookback()
	{
		return 0;
	}

	public static RetCode MedPrice(int startIdx, int endIdx, float[] inHigh, float[] inLow, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = ((double)inHigh[num2] + (double)inLow[num2]) * 0.5;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MedPrice(int startIdx, int endIdx, double[] inHigh, double[] inLow, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = (inHigh[num2] + inLow[num2]) * 0.5;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MfiLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return (int)Globals.unstablePeriod[14] + optInTimePeriod;
	}

	public static RetCode Mfi(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, float[] inVolume, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod <= 0)
				{
					return RetCode.AllocErr;
				}
				MoneyFlow[] array = new MoneyFlow[optInTimePeriod];
				int num2 = 0;
				if (0 < (nint)array.LongLength)
				{
					do
					{
						array[num2] = new MoneyFlow();
						num2++;
					}
					while (num2 < (nint)array.LongLength);
				}
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				int num3 = optInTimePeriod - 1;
				outBegIdx = 0;
				outNBElement = 0;
				int num4 = (int)Globals.unstablePeriod[14] + optInTimePeriod;
				if (startIdx < num4)
				{
					startIdx = num4;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				int num5 = 0;
				int num6 = startIdx - num4;
				double num7 = ((double)inHigh[num6] + (double)inLow[num6] + (double)inClose[num6]) / 3.0;
				double num8 = 0.0;
				double num9 = 0.0;
				num6++;
				int num10 = optInTimePeriod;
				do
				{
					double num11 = ((double)inHigh[num6] + (double)inLow[num6] + (double)inClose[num6]) / 3.0;
					double num12 = num11 - num7;
					num7 = num11;
					num11 = (double)inVolume[num6] * num11;
					num6++;
					if (num12 < 0.0)
					{
						array[num].negative = num11;
						num9 = num11 + num9;
						array[num].positive = 0.0;
					}
					else if (num12 > 0.0)
					{
						array[num].positive = num11;
						num8 = num11 + num8;
						array[num].negative = 0.0;
					}
					else
					{
						array[num].positive = 0.0;
						array[num].negative = 0.0;
					}
					num++;
					if (num > num3)
					{
						num = 0;
					}
					num10--;
				}
				while (num10 > 0);
				if (num6 > startIdx)
				{
					double num11 = num9 + num8;
					if (num11 < 1.0)
					{
						outReal[0] = 0.0;
						num5 = 1;
					}
					else
					{
						outReal[0] = num8 / num11 * 100.0;
						num5 = 1;
					}
				}
				else if (num6 < startIdx)
				{
					do
					{
						MoneyFlow moneyFlow = array[num];
						num8 -= moneyFlow.positive;
						num9 -= moneyFlow.negative;
						double num11 = ((double)inHigh[num6] + (double)inLow[num6] + (double)inClose[num6]) / 3.0;
						double num12 = num11 - num7;
						num7 = num11;
						num11 = (double)inVolume[num6] * num11;
						num6++;
						if (num12 < 0.0)
						{
							moneyFlow.negative = num11;
							num9 = num11 + num9;
							array[num].positive = 0.0;
						}
						else if (num12 > 0.0)
						{
							moneyFlow.positive = num11;
							num8 = num11 + num8;
							array[num].negative = 0.0;
						}
						else
						{
							moneyFlow.positive = 0.0;
							array[num].negative = 0.0;
						}
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num6 < startIdx);
				}
				if (num6 <= endIdx)
				{
					do
					{
						MoneyFlow moneyFlow2 = array[num];
						num8 -= moneyFlow2.positive;
						num9 -= moneyFlow2.negative;
						double num11 = ((double)inHigh[num6] + (double)inLow[num6] + (double)inClose[num6]) / 3.0;
						double num12 = num11 - num7;
						num7 = num11;
						num11 = (double)inVolume[num6] * num11;
						num6++;
						if (num12 < 0.0)
						{
							moneyFlow2.negative = num11;
							num9 = num11 + num9;
							array[num].positive = 0.0;
						}
						else if (num12 > 0.0)
						{
							moneyFlow2.positive = num11;
							num8 = num11 + num8;
							array[num].negative = 0.0;
						}
						else
						{
							moneyFlow2.positive = 0.0;
							array[num].negative = 0.0;
						}
						num11 = num9 + num8;
						if (num11 < 1.0)
						{
							outReal[num5] = 0.0;
							num5++;
						}
						else
						{
							outReal[num5] = num8 / num11 * 100.0;
							num5++;
						}
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num6 <= endIdx);
				}
				outBegIdx = startIdx;
				outNBElement = num5;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Mfi(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, double[] inVolume, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int num = 0;
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null && inVolume != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod <= 0)
				{
					return RetCode.AllocErr;
				}
				MoneyFlow[] array = new MoneyFlow[optInTimePeriod];
				int num2 = 0;
				if (0 < (nint)array.LongLength)
				{
					do
					{
						array[num2] = new MoneyFlow();
						num2++;
					}
					while (num2 < (nint)array.LongLength);
				}
				if (array == null)
				{
					return RetCode.AllocErr;
				}
				int num3 = optInTimePeriod - 1;
				outBegIdx = 0;
				outNBElement = 0;
				int num4 = (int)Globals.unstablePeriod[14] + optInTimePeriod;
				if (startIdx < num4)
				{
					startIdx = num4;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				int num5 = 0;
				int num6 = startIdx - num4;
				double num7 = (inHigh[num6] + inLow[num6] + inClose[num6]) / 3.0;
				double num8 = 0.0;
				double num9 = 0.0;
				num6++;
				int num10 = optInTimePeriod;
				do
				{
					double num11 = (inHigh[num6] + inLow[num6] + inClose[num6]) / 3.0;
					double num12 = num11 - num7;
					num7 = num11;
					num11 = inVolume[num6] * num11;
					num6++;
					if (num12 < 0.0)
					{
						array[num].negative = num11;
						num9 = num11 + num9;
						array[num].positive = 0.0;
					}
					else if (num12 > 0.0)
					{
						array[num].positive = num11;
						num8 = num11 + num8;
						array[num].negative = 0.0;
					}
					else
					{
						array[num].positive = 0.0;
						array[num].negative = 0.0;
					}
					num++;
					if (num > num3)
					{
						num = 0;
					}
					num10--;
				}
				while (num10 > 0);
				if (num6 > startIdx)
				{
					double num11 = num9 + num8;
					if (num11 < 1.0)
					{
						outReal[0] = 0.0;
						num5 = 1;
					}
					else
					{
						outReal[0] = num8 / num11 * 100.0;
						num5 = 1;
					}
				}
				else if (num6 < startIdx)
				{
					do
					{
						MoneyFlow moneyFlow = array[num];
						num8 -= moneyFlow.positive;
						num9 -= moneyFlow.negative;
						double num11 = (inHigh[num6] + inLow[num6] + inClose[num6]) / 3.0;
						double num12 = num11 - num7;
						num7 = num11;
						num11 = inVolume[num6] * num11;
						num6++;
						if (num12 < 0.0)
						{
							moneyFlow.negative = num11;
							num9 = num11 + num9;
							array[num].positive = 0.0;
						}
						else if (num12 > 0.0)
						{
							moneyFlow.positive = num11;
							num8 = num11 + num8;
							array[num].negative = 0.0;
						}
						else
						{
							moneyFlow.positive = 0.0;
							array[num].negative = 0.0;
						}
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num6 < startIdx);
				}
				if (num6 <= endIdx)
				{
					do
					{
						MoneyFlow moneyFlow2 = array[num];
						num8 -= moneyFlow2.positive;
						num9 -= moneyFlow2.negative;
						double num11 = (inHigh[num6] + inLow[num6] + inClose[num6]) / 3.0;
						double num12 = num11 - num7;
						num7 = num11;
						num11 = inVolume[num6] * num11;
						num6++;
						if (num12 < 0.0)
						{
							moneyFlow2.negative = num11;
							num9 = num11 + num9;
							array[num].positive = 0.0;
						}
						else if (num12 > 0.0)
						{
							moneyFlow2.positive = num11;
							num8 = num11 + num8;
							array[num].negative = 0.0;
						}
						else
						{
							moneyFlow2.positive = 0.0;
							array[num].negative = 0.0;
						}
						num11 = num9 + num8;
						if (num11 < 1.0)
						{
							outReal[num5] = 0.0;
							num5++;
						}
						else
						{
							outReal[num5] = num8 / num11 * 100.0;
							num5++;
						}
						num++;
						if (num > num3)
						{
							num = 0;
						}
					}
					while (num6 <= endIdx);
				}
				outBegIdx = startIdx;
				outNBElement = num5;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MidPointLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MidPoint(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			do
			{
				double num5 = inReal[num4];
				num4++;
				double num6 = num5;
				int num7 = num4;
				if (num4 <= num3)
				{
					do
					{
						double num8 = inReal[num7];
						if (num8 < num5)
						{
							num5 = num8;
						}
						else if (num8 > num6)
						{
							num6 = num8;
						}
						num7++;
					}
					while (num7 <= num3);
				}
				outReal[num2] = (num6 + num5) * 0.5;
				num2++;
				num3++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MidPoint(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			do
			{
				double num5 = inReal[num4];
				num4++;
				double num6 = num5;
				int num7 = num4;
				if (num4 <= num3)
				{
					do
					{
						double num8 = inReal[num7];
						if (num8 < num5)
						{
							num5 = num8;
						}
						else if (num8 > num6)
						{
							num6 = num8;
						}
						num7++;
					}
					while (num7 <= num3);
				}
				outReal[num2] = (num6 + num5) * 0.5;
				num2++;
				num3++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MidPriceLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MidPrice(int startIdx, int endIdx, float[] inHigh, float[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				int num3 = startIdx;
				int num4 = startIdx - num;
				do
				{
					double num5 = inLow[num4];
					double num6 = inHigh[num4];
					num4++;
					int num7 = num4;
					if (num4 <= num3)
					{
						do
						{
							double num8 = inLow[num7];
							if (num8 < num5)
							{
								num5 = num8;
							}
							num8 = inHigh[num7];
							if (num8 > num6)
							{
								num6 = num8;
							}
							num7++;
						}
						while (num7 <= num3);
					}
					outReal[num2] = (num6 + num5) * 0.5;
					num2++;
					num3++;
				}
				while (num3 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num2;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MidPrice(int startIdx, int endIdx, double[] inHigh, double[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				int num3 = startIdx;
				int num4 = startIdx - num;
				do
				{
					double num5 = inLow[num4];
					double num6 = inHigh[num4];
					num4++;
					int num7 = num4;
					if (num4 <= num3)
					{
						do
						{
							double num8 = inLow[num7];
							if (num8 < num5)
							{
								num5 = num8;
							}
							num8 = inHigh[num7];
							if (num8 > num6)
							{
								num6 = num8;
							}
							num7++;
						}
						while (num7 <= num3);
					}
					outReal[num2] = (num6 + num5) * 0.5;
					num2++;
					num3++;
				}
				while (num3 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num2;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Min(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 < num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 <= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outReal[num2] = num6;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Min(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 < num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 <= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outReal[num2] = num6;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinIndexLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MinIndex(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 < num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 <= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outInteger[num2] = num5;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MinIndex(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outInteger)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outInteger == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx;
			int num4 = startIdx - num;
			int num5 = -1;
			double num6 = 0.0;
			int num7 = num4;
			do
			{
				double num8 = inReal[num3];
				if (num5 < num7)
				{
					num5 = num7;
					num6 = inReal[num7];
					int num9 = num7 + 1;
					if (num7 + 1 <= num3)
					{
						do
						{
							num8 = inReal[num9];
							if (num8 < num6)
							{
								num5 = num9;
								num6 = num8;
							}
							num9++;
						}
						while (num9 <= num3);
					}
				}
				else if (num8 <= num6)
				{
					num5 = num3;
					num6 = num8;
				}
				outInteger[num2] = num5;
				num2++;
				num3++;
				num7++;
			}
			while (num3 <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinMaxLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MinMax(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outMin, double[] outMax)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outMin == null)
			{
				return RetCode.BadParam;
			}
			if (outMax == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx - num;
			int num4 = -1;
			double num5 = 0.0;
			int num6 = -1;
			double num7 = 0.0;
			int num8 = num3;
			do
			{
				double num9 = inReal[num + num8];
				double num10 = num9;
				if (num4 < num8)
				{
					num4 = num8;
					num5 = inReal[num8];
					int num11 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num9 = inReal[num11];
							if (num9 > num5)
							{
								num4 = num11;
								num5 = num9;
							}
							num11++;
						}
						while (num11 <= num + num8);
					}
				}
				else if (num9 >= num5)
				{
					num4 = num + num8;
					num5 = num9;
				}
				if (num6 < num8)
				{
					num6 = num8;
					num7 = inReal[num8];
					int num12 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num10 = inReal[num12];
							if (num10 < num7)
							{
								num6 = num12;
								num7 = num10;
							}
							num12++;
						}
						while (num12 <= num + num8);
					}
				}
				else if (num10 <= num7)
				{
					num6 = num + num8;
					num7 = num10;
				}
				outMax[num2] = num5;
				outMin[num2] = num7;
				num2++;
				num8++;
			}
			while (num8 + num <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MinMax(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outMin, double[] outMax)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outMin == null)
			{
				return RetCode.BadParam;
			}
			if (outMax == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx - num;
			int num4 = -1;
			double num5 = 0.0;
			int num6 = -1;
			double num7 = 0.0;
			int num8 = num3;
			do
			{
				double num9 = inReal[num + num8];
				double num10 = num9;
				if (num4 < num8)
				{
					num4 = num8;
					num5 = inReal[num8];
					int num11 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num9 = inReal[num11];
							if (num9 > num5)
							{
								num4 = num11;
								num5 = num9;
							}
							num11++;
						}
						while (num11 <= num + num8);
					}
				}
				else if (num9 >= num5)
				{
					num4 = num + num8;
					num5 = num9;
				}
				if (num6 < num8)
				{
					num6 = num8;
					num7 = inReal[num8];
					int num12 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num10 = inReal[num12];
							if (num10 < num7)
							{
								num6 = num12;
								num7 = num10;
							}
							num12++;
						}
						while (num12 <= num + num8);
					}
				}
				else if (num10 <= num7)
				{
					num6 = num + num8;
					num7 = num10;
				}
				outMax[num2] = num5;
				outMin[num2] = num7;
				num2++;
				num8++;
			}
			while (num8 + num <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinMaxIndexLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode MinMaxIndex(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outMinIdx, int[] outMaxIdx)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outMinIdx == null)
			{
				return RetCode.BadParam;
			}
			if (outMaxIdx == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx - num;
			int num4 = -1;
			double num5 = 0.0;
			int num6 = -1;
			double num7 = 0.0;
			int num8 = num3;
			do
			{
				double num9 = inReal[num + num8];
				double num10 = num9;
				if (num4 < num8)
				{
					num4 = num8;
					num5 = inReal[num8];
					int num11 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num9 = inReal[num11];
							if (num9 > num5)
							{
								num4 = num11;
								num5 = num9;
							}
							num11++;
						}
						while (num11 <= num + num8);
					}
				}
				else if (num9 >= num5)
				{
					num4 = num + num8;
					num5 = num9;
				}
				if (num6 < num8)
				{
					num6 = num8;
					num7 = inReal[num8];
					int num12 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num10 = inReal[num12];
							if (num10 < num7)
							{
								num6 = num12;
								num7 = num10;
							}
							num12++;
						}
						while (num12 <= num + num8);
					}
				}
				else if (num10 <= num7)
				{
					num6 = num + num8;
					num7 = num10;
				}
				outMaxIdx[num2] = num4;
				outMinIdx[num2] = num6;
				num2++;
				num8++;
			}
			while (num8 + num <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MinMaxIndex(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, int[] outMinIdx, int[] outMaxIdx)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outMinIdx == null)
			{
				return RetCode.BadParam;
			}
			if (outMaxIdx == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num2 = 0;
			int num3 = startIdx - num;
			int num4 = -1;
			double num5 = 0.0;
			int num6 = -1;
			double num7 = 0.0;
			int num8 = num3;
			do
			{
				double num9 = inReal[num + num8];
				double num10 = num9;
				if (num4 < num8)
				{
					num4 = num8;
					num5 = inReal[num8];
					int num11 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num9 = inReal[num11];
							if (num9 > num5)
							{
								num4 = num11;
								num5 = num9;
							}
							num11++;
						}
						while (num11 <= num + num8);
					}
				}
				else if (num9 >= num5)
				{
					num4 = num + num8;
					num5 = num9;
				}
				if (num6 < num8)
				{
					num6 = num8;
					num7 = inReal[num8];
					int num12 = num8 + 1;
					if (num8 + 1 <= num + num8)
					{
						do
						{
							num10 = inReal[num12];
							if (num10 < num7)
							{
								num6 = num12;
								num7 = num10;
							}
							num12++;
						}
						while (num12 <= num + num8);
					}
				}
				else if (num10 <= num7)
				{
					num6 = num + num8;
					num7 = num10;
				}
				outMaxIdx[num2] = num4;
				outMinIdx[num2] = num6;
				num2++;
				num8++;
			}
			while (num8 + num <= endIdx);
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinusDILookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 1;
			}
		}
		return (int)Globals.unstablePeriod[15] + optInTimePeriod;
	}

	public static RetCode MinusDI(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[15] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				double num6;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					num6 = inClose[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num7 = inHigh[num3];
							double num8 = num7 - num4;
							num4 = num7;
							num7 = inLow[num3];
							double num9 = num5 - num7;
							num5 = num7;
							if (num9 > 0.0 && num8 < num9)
							{
								num7 = num4 - num7;
								double num10 = Math.Abs(num4 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								num10 = Math.Abs(num5 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								if (-1E-08 < num7 && num7 < 1E-08)
								{
									outReal[num2] = 0.0;
									num2++;
								}
								else
								{
									outReal[num2] = num9 / num7;
									num2++;
								}
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
							num6 = inClose[num3];
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num11 = 0.0;
				double num12 = 0.0;
				int num13 = startIdx - num;
				num4 = inHigh[num13];
				num5 = inLow[num13];
				num6 = inClose[num13];
				int num14 = optInTimePeriod - 1;
				int num15 = num14;
				num14--;
				if (num15 > 0)
				{
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							num11 += num9;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num12 += num7;
						num6 = inClose[num13];
						num15 = num14;
						num14--;
					}
					while (num15 > 0);
				}
				int num16 = (int)(Globals.unstablePeriod[15] + 1);
				int num17 = num16;
				num16--;
				if (num17 != 0)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							double num19 = num11;
							num11 = num19 - num19 / num18 + num9;
						}
						else
						{
							double num20 = num11;
							num11 = num20 - num20 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num21 = num12;
						num12 = num21 - num21 / num18 + num7;
						num6 = inClose[num13];
						num17 = num16;
						num16--;
					}
					while (num17 != 0);
				}
				if (-1E-08 < num12 && num12 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num11 / num12 * 100.0;
				}
				int num22 = 1;
				if (num13 < endIdx)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							double num23 = num11;
							num11 = num23 - num23 / num18 + num9;
						}
						else
						{
							double num24 = num11;
							num11 = num24 - num24 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num25 = num12;
						num12 = num25 - num25 / num18 + num7;
						num6 = inClose[num13];
						if (-1E-08 < num12 && num12 < 1E-08)
						{
							outReal[num22] = 0.0;
							num22++;
						}
						else
						{
							outReal[num22] = num11 / num12 * 100.0;
							num22++;
						}
					}
					while (num13 < endIdx);
				}
				outNBElement = num22;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MinusDI(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[15] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				double num6;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					num6 = inClose[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num7 = inHigh[num3];
							double num8 = num7 - num4;
							num4 = num7;
							num7 = inLow[num3];
							double num9 = num5 - num7;
							num5 = num7;
							if (num9 > 0.0 && num8 < num9)
							{
								num7 = num4 - num7;
								double num10 = Math.Abs(num4 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								num10 = Math.Abs(num5 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								if (-1E-08 < num7 && num7 < 1E-08)
								{
									outReal[num2] = 0.0;
									num2++;
								}
								else
								{
									outReal[num2] = num9 / num7;
									num2++;
								}
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
							num6 = inClose[num3];
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num11 = 0.0;
				double num12 = 0.0;
				int num13 = startIdx - num;
				num4 = inHigh[num13];
				num5 = inLow[num13];
				num6 = inClose[num13];
				int num14 = optInTimePeriod - 1;
				int num15 = num14;
				num14--;
				if (num15 > 0)
				{
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							num11 += num9;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num12 += num7;
						num6 = inClose[num13];
						num15 = num14;
						num14--;
					}
					while (num15 > 0);
				}
				int num16 = (int)(Globals.unstablePeriod[15] + 1);
				int num17 = num16;
				num16--;
				if (num17 != 0)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							double num19 = num11;
							num11 = num19 - num19 / num18 + num9;
						}
						else
						{
							double num20 = num11;
							num11 = num20 - num20 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num21 = num12;
						num12 = num21 - num21 / num18 + num7;
						num6 = inClose[num13];
						num17 = num16;
						num16--;
					}
					while (num17 != 0);
				}
				if (-1E-08 < num12 && num12 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num11 / num12 * 100.0;
				}
				int num22 = 1;
				if (num13 < endIdx)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num9 > 0.0 && num8 < num9)
						{
							double num23 = num11;
							num11 = num23 - num23 / num18 + num9;
						}
						else
						{
							double num24 = num11;
							num11 = num24 - num24 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num25 = num12;
						num12 = num25 - num25 / num18 + num7;
						num6 = inClose[num13];
						if (-1E-08 < num12 && num12 < 1E-08)
						{
							outReal[num22] = 0.0;
							num22++;
						}
						else
						{
							outReal[num22] = num11 / num12 * 100.0;
							num22++;
						}
					}
					while (num13 < endIdx);
				}
				outNBElement = num22;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MinusDMLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 1;
			}
		}
		return (int)Globals.unstablePeriod[16] + optInTimePeriod - 1;
	}

	public static RetCode MinusDM(int startIdx, int endIdx, float[] inHigh, float[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[16] + optInTimePeriod - 1));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num6 = inHigh[num3];
							double num7 = num6 - num4;
							num4 = num6;
							num6 = inLow[num3];
							double num8 = num5 - num6;
							num5 = num6;
							if (num8 > 0.0 && num7 < num8)
							{
								outReal[num2] = num8;
								num2++;
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num9 = 0.0;
				int num10 = startIdx - num;
				num4 = inHigh[num10];
				num5 = inLow[num10];
				int num11 = optInTimePeriod - 1;
				int num12 = num11;
				num11--;
				if (num12 > 0)
				{
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							num9 += num8;
						}
						num12 = num11;
						num11--;
					}
					while (num12 > 0);
				}
				int num13 = (int)Globals.unstablePeriod[16];
				int num14 = num13;
				num13--;
				if (num14 != 0)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							double num16 = num9;
							num9 = num16 - num16 / num15 + num8;
						}
						else
						{
							double num17 = num9;
							num9 = num17 - num17 / num15;
						}
						num14 = num13;
						num13--;
					}
					while (num14 != 0);
				}
				outReal[0] = num9;
				int num18 = 1;
				if (num10 < endIdx)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							double num19 = num9;
							num9 = num19 - num19 / num15 + num8;
						}
						else
						{
							double num20 = num9;
							num9 = num20 - num20 / num15;
						}
						outReal[num18] = num9;
						num18++;
					}
					while (num10 < endIdx);
				}
				outNBElement = num18;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode MinusDM(int startIdx, int endIdx, double[] inHigh, double[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[16] + optInTimePeriod - 1));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num6 = inHigh[num3];
							double num7 = num6 - num4;
							num4 = num6;
							num6 = inLow[num3];
							double num8 = num5 - num6;
							num5 = num6;
							if (num8 > 0.0 && num7 < num8)
							{
								outReal[num2] = num8;
								num2++;
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num9 = 0.0;
				int num10 = startIdx - num;
				num4 = inHigh[num10];
				num5 = inLow[num10];
				int num11 = optInTimePeriod - 1;
				int num12 = num11;
				num11--;
				if (num12 > 0)
				{
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							num9 += num8;
						}
						num12 = num11;
						num11--;
					}
					while (num12 > 0);
				}
				int num13 = (int)Globals.unstablePeriod[16];
				int num14 = num13;
				num13--;
				if (num14 != 0)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							double num16 = num9;
							num9 = num16 - num16 / num15 + num8;
						}
						else
						{
							double num17 = num9;
							num9 = num17 - num17 / num15;
						}
						num14 = num13;
						num13--;
					}
					while (num14 != 0);
				}
				outReal[0] = num9;
				int num18 = 1;
				if (num10 < endIdx)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num8 > 0.0 && num7 < num8)
						{
							double num19 = num9;
							num9 = num19 - num19 / num15 + num8;
						}
						else
						{
							double num20 = num9;
							num9 = num20 - num20 / num15;
						}
						outReal[num18] = num9;
						num18++;
					}
					while (num10 < endIdx);
				}
				outNBElement = num18;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MomLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 10;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode Mom(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx - optInTimePeriod;
			do
			{
				outReal[num] = (double)inReal[num + startIdx] - (double)inReal[num2 + num];
				num++;
			}
			while (num + startIdx <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Mom(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx - optInTimePeriod;
			do
			{
				outReal[num] = inReal[num + startIdx] - inReal[num2 + num];
				num++;
			}
			while (num + startIdx <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int MultLookback()
	{
		return 0;
	}

	public static RetCode Mult(int startIdx, int endIdx, float[] inReal0, float[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = (double)inReal0[num2] * (double)inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Mult(int startIdx, int endIdx, double[] inReal0, double[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = inReal0[num2] * inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int NatrLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return (int)Globals.unstablePeriod[17] + optInTimePeriod;
	}

	public static RetCode Natr(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				int num = NatrLookback(optInTimePeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				if (optInTimePeriod <= 1)
				{
					return TrueRange(startIdx, endIdx, inHigh, inLow, inClose, out outBegIdx, out outNBElement, outReal);
				}
				double[] array2 = new double[endIdx + (num - startIdx) + 1];
				int outBegIdx2;
				int outNBElement2;
				RetCode retCode = TrueRange(startIdx - num + 1, endIdx, inHigh, inLow, inClose, out outBegIdx2, out outNBElement2, array2);
				if (retCode != RetCode.Success)
				{
					return retCode;
				}
				RetCode retCode2 = TA_INT_SMA(optInTimePeriod - 1, optInTimePeriod - 1, array2, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
				if (retCode2 != RetCode.Success)
				{
					return retCode2;
				}
				double num2 = array[0];
				int num3 = optInTimePeriod;
				int num4 = (int)Globals.unstablePeriod[17];
				if (num4 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num4--;
					}
					while (num4 != 0);
				}
				int num7 = 1;
				double num8 = inClose[num3];
				if (-1E-08 < num8 && num8 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num2 / num8 * 100.0;
				}
				int num9 = endIdx - startIdx;
				if (num9 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num8 = inClose[num3];
						if (-1E-08 < num8 && num8 < 1E-08)
						{
							outReal[0] = 0.0;
						}
						else
						{
							outReal[num7] = num2 / num8 * 100.0;
						}
						num7++;
						num9--;
					}
					while (num9 != 0);
				}
				outBegIdx = startIdx;
				outNBElement = num7;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Natr(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				int num = NatrLookback(optInTimePeriod);
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				if (optInTimePeriod <= 1)
				{
					return TrueRange(startIdx, endIdx, inHigh, inLow, inClose, out outBegIdx, out outNBElement, outReal);
				}
				double[] array2 = new double[endIdx + (num - startIdx) + 1];
				int outBegIdx2;
				int outNBElement2;
				RetCode retCode = TrueRange(startIdx - num + 1, endIdx, inHigh, inLow, inClose, out outBegIdx2, out outNBElement2, array2);
				if (retCode != RetCode.Success)
				{
					return retCode;
				}
				RetCode retCode2 = TA_INT_SMA(optInTimePeriod - 1, optInTimePeriod - 1, array2, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
				if (retCode2 != RetCode.Success)
				{
					return retCode2;
				}
				double num2 = array[0];
				int num3 = optInTimePeriod;
				int num4 = (int)Globals.unstablePeriod[17];
				if (num4 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num4--;
					}
					while (num4 != 0);
				}
				int num7 = 1;
				double num8 = inClose[num3];
				if (-1E-08 < num8 && num8 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num2 / num8 * 100.0;
				}
				int num9 = endIdx - startIdx;
				if (num9 != 0)
				{
					double num5 = optInTimePeriod - 1;
					double num6 = optInTimePeriod;
					do
					{
						num2 = array2[num3] + num5 * num2;
						num3++;
						num2 /= num6;
						num8 = inClose[num3];
						if (-1E-08 < num8 && num8 < 1E-08)
						{
							outReal[0] = 0.0;
						}
						else
						{
							outReal[num7] = num2 / num8 * 100.0;
						}
						num7++;
						num9--;
					}
					while (num9 != 0);
				}
				outBegIdx = startIdx;
				outNBElement = num7;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int ObvLookback()
	{
		return 0;
	}

	public static RetCode Obv(int startIdx, int endIdx, float[] inReal, float[] inVolume, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (inVolume == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double num = inVolume[startIdx];
			double num2 = inReal[startIdx];
			int num3 = 0;
			int num4 = startIdx;
			if (startIdx <= endIdx)
			{
				do
				{
					double num5 = inReal[num4];
					if (num5 > num2)
					{
						num = (double)inVolume[num4] + num;
					}
					else if (num5 < num2)
					{
						num -= (double)inVolume[num4];
					}
					outReal[num3] = num;
					num3++;
					num2 = num5;
					num4++;
				}
				while (num4 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num3;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Obv(int startIdx, int endIdx, double[] inReal, double[] inVolume, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (inVolume == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double num = inVolume[startIdx];
			double num2 = inReal[startIdx];
			int num3 = 0;
			int num4 = startIdx;
			if (startIdx <= endIdx)
			{
				do
				{
					double num5 = inReal[num4];
					if (num5 > num2)
					{
						num = inVolume[num4] + num;
					}
					else if (num5 < num2)
					{
						num -= inVolume[num4];
					}
					outReal[num3] = num;
					num3++;
					num2 = num5;
					num4++;
				}
				while (num4 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num3;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int PlusDILookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 1;
			}
		}
		return (int)Globals.unstablePeriod[18] + optInTimePeriod;
	}

	public static RetCode PlusDI(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[18] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				double num6;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					num6 = inClose[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num7 = inHigh[num3];
							double num8 = num7 - num4;
							num4 = num7;
							num7 = inLow[num3];
							double num9 = num5 - num7;
							num5 = num7;
							if (num8 > 0.0 && num8 > num9)
							{
								num7 = num4 - num7;
								double num10 = Math.Abs(num4 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								num10 = Math.Abs(num5 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								if (-1E-08 < num7 && num7 < 1E-08)
								{
									outReal[num2] = 0.0;
									num2++;
								}
								else
								{
									outReal[num2] = num8 / num7;
									num2++;
								}
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
							num6 = inClose[num3];
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num11 = 0.0;
				double num12 = 0.0;
				int num13 = startIdx - num;
				num4 = inHigh[num13];
				num5 = inLow[num13];
				num6 = inClose[num13];
				int num14 = optInTimePeriod - 1;
				int num15 = num14;
				num14--;
				if (num15 > 0)
				{
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							num11 += num8;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num12 += num7;
						num6 = inClose[num13];
						num15 = num14;
						num14--;
					}
					while (num15 > 0);
				}
				int num16 = (int)(Globals.unstablePeriod[18] + 1);
				int num17 = num16;
				num16--;
				if (num17 != 0)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							double num19 = num11;
							num11 = num19 - num19 / num18 + num8;
						}
						else
						{
							double num20 = num11;
							num11 = num20 - num20 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num21 = num12;
						num12 = num21 - num21 / num18 + num7;
						num6 = inClose[num13];
						num17 = num16;
						num16--;
					}
					while (num17 != 0);
				}
				if (-1E-08 < num12 && num12 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num11 / num12 * 100.0;
				}
				int num22 = 1;
				if (num13 < endIdx)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							double num23 = num11;
							num11 = num23 - num23 / num18 + num8;
						}
						else
						{
							double num24 = num11;
							num11 = num24 - num24 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num25 = num12;
						num12 = num25 - num25 / num18 + num7;
						num6 = inClose[num13];
						if (-1E-08 < num12 && num12 < 1E-08)
						{
							outReal[num22] = 0.0;
							num22++;
						}
						else
						{
							outReal[num22] = num11 / num12 * 100.0;
							num22++;
						}
					}
					while (num13 < endIdx);
				}
				outNBElement = num22;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode PlusDI(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[18] + optInTimePeriod));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				double num6;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					num6 = inClose[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num7 = inHigh[num3];
							double num8 = num7 - num4;
							num4 = num7;
							num7 = inLow[num3];
							double num9 = num5 - num7;
							num5 = num7;
							if (num8 > 0.0 && num8 > num9)
							{
								num7 = num4 - num7;
								double num10 = Math.Abs(num4 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								num10 = Math.Abs(num5 - num6);
								if (num10 > num7)
								{
									num7 = num10;
								}
								if (-1E-08 < num7 && num7 < 1E-08)
								{
									outReal[num2] = 0.0;
									num2++;
								}
								else
								{
									outReal[num2] = num8 / num7;
									num2++;
								}
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
							num6 = inClose[num3];
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num11 = 0.0;
				double num12 = 0.0;
				int num13 = startIdx - num;
				num4 = inHigh[num13];
				num5 = inLow[num13];
				num6 = inClose[num13];
				int num14 = optInTimePeriod - 1;
				int num15 = num14;
				num14--;
				if (num15 > 0)
				{
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							num11 += num8;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num12 += num7;
						num6 = inClose[num13];
						num15 = num14;
						num14--;
					}
					while (num15 > 0);
				}
				int num16 = (int)(Globals.unstablePeriod[18] + 1);
				int num17 = num16;
				num16--;
				if (num17 != 0)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							double num19 = num11;
							num11 = num19 - num19 / num18 + num8;
						}
						else
						{
							double num20 = num11;
							num11 = num20 - num20 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num21 = num12;
						num12 = num21 - num21 / num18 + num7;
						num6 = inClose[num13];
						num17 = num16;
						num16--;
					}
					while (num17 != 0);
				}
				if (-1E-08 < num12 && num12 < 1E-08)
				{
					outReal[0] = 0.0;
				}
				else
				{
					outReal[0] = num11 / num12 * 100.0;
				}
				int num22 = 1;
				if (num13 < endIdx)
				{
					double num18 = optInTimePeriod;
					do
					{
						num13++;
						double num7 = inHigh[num13];
						double num8 = num7 - num4;
						num4 = num7;
						num7 = inLow[num13];
						double num9 = num5 - num7;
						num5 = num7;
						if (num8 > 0.0 && num8 > num9)
						{
							double num23 = num11;
							num11 = num23 - num23 / num18 + num8;
						}
						else
						{
							double num24 = num11;
							num11 = num24 - num24 / num18;
						}
						num7 = num4 - num7;
						double num10 = Math.Abs(num4 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						num10 = Math.Abs(num5 - num6);
						if (num10 > num7)
						{
							num7 = num10;
						}
						double num25 = num12;
						num12 = num25 - num25 / num18 + num7;
						num6 = inClose[num13];
						if (-1E-08 < num12 && num12 < 1E-08)
						{
							outReal[num22] = 0.0;
							num22++;
						}
						else
						{
							outReal[num22] = num11 / num12 * 100.0;
							num22++;
						}
					}
					while (num13 < endIdx);
				}
				outNBElement = num22;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int PlusDMLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else
		{
			if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return -1;
			}
			if (optInTimePeriod <= 1)
			{
				return 1;
			}
		}
		return (int)Globals.unstablePeriod[19] + optInTimePeriod - 1;
	}

	public static RetCode PlusDM(int startIdx, int endIdx, float[] inHigh, float[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[19] + optInTimePeriod - 1));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num6 = inHigh[num3];
							double num7 = num6 - num4;
							num4 = num6;
							num6 = inLow[num3];
							double num8 = num5 - num6;
							num5 = num6;
							if (num7 > 0.0 && num7 > num8)
							{
								outReal[num2] = num7;
								num2++;
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num9 = 0.0;
				int num10 = startIdx - num;
				num4 = inHigh[num10];
				num5 = inLow[num10];
				int num11 = optInTimePeriod - 1;
				int num12 = num11;
				num11--;
				if (num12 > 0)
				{
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							num9 += num7;
						}
						num12 = num11;
						num11--;
					}
					while (num12 > 0);
				}
				int num13 = (int)Globals.unstablePeriod[19];
				int num14 = num13;
				num13--;
				if (num14 != 0)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							double num16 = num9;
							num9 = num16 - num16 / num15 + num7;
						}
						else
						{
							double num17 = num9;
							num9 = num17 - num17 / num15;
						}
						num14 = num13;
						num13--;
					}
					while (num14 != 0);
				}
				outReal[0] = num9;
				int num18 = 1;
				if (num10 < endIdx)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							double num19 = num9;
							num9 = num19 - num19 / num15 + num7;
						}
						else
						{
							double num20 = num9;
							num9 = num20 - num20 / num15;
						}
						outReal[num18] = num9;
						num18++;
					}
					while (num10 < endIdx);
				}
				outNBElement = num18;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode PlusDM(int startIdx, int endIdx, double[] inHigh, double[] inLow, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = ((optInTimePeriod <= 1) ? 1 : ((int)Globals.unstablePeriod[19] + optInTimePeriod - 1));
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				double num4;
				double num5;
				if (optInTimePeriod <= 1)
				{
					outBegIdx = startIdx;
					int num3 = startIdx - 1;
					num4 = inHigh[num3];
					num5 = inLow[num3];
					if (num3 < endIdx)
					{
						do
						{
							num3++;
							double num6 = inHigh[num3];
							double num7 = num6 - num4;
							num4 = num6;
							num6 = inLow[num3];
							double num8 = num5 - num6;
							num5 = num6;
							if (num7 > 0.0 && num7 > num8)
							{
								outReal[num2] = num7;
								num2++;
							}
							else
							{
								outReal[num2] = 0.0;
								num2++;
							}
						}
						while (num3 < endIdx);
					}
					outNBElement = num2;
					return RetCode.Success;
				}
				outBegIdx = startIdx;
				double num9 = 0.0;
				int num10 = startIdx - num;
				num4 = inHigh[num10];
				num5 = inLow[num10];
				int num11 = optInTimePeriod - 1;
				int num12 = num11;
				num11--;
				if (num12 > 0)
				{
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							num9 += num7;
						}
						num12 = num11;
						num11--;
					}
					while (num12 > 0);
				}
				int num13 = (int)Globals.unstablePeriod[19];
				int num14 = num13;
				num13--;
				if (num14 != 0)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							double num16 = num9;
							num9 = num16 - num16 / num15 + num7;
						}
						else
						{
							double num17 = num9;
							num9 = num17 - num17 / num15;
						}
						num14 = num13;
						num13--;
					}
					while (num14 != 0);
				}
				outReal[0] = num9;
				int num18 = 1;
				if (num10 < endIdx)
				{
					double num15 = optInTimePeriod;
					do
					{
						num10++;
						double num6 = inHigh[num10];
						double num7 = num6 - num4;
						num4 = num6;
						num6 = inLow[num10];
						double num8 = num5 - num6;
						num5 = num6;
						if (num7 > 0.0 && num7 > num8)
						{
							double num19 = num9;
							num9 = num19 - num19 / num15 + num7;
						}
						else
						{
							double num20 = num9;
							num9 = num20 - num20 / num15;
						}
						outReal[num18] = num9;
						num18++;
					}
					while (num10 < endIdx);
				}
				outNBElement = num18;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int PpoLookback(int optInFastPeriod, int optInSlowPeriod, MAType optInMAType)
	{
		if (optInFastPeriod == int.MinValue)
		{
			optInFastPeriod = 12;
		}
		else if ((uint)(optInFastPeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInSlowPeriod == int.MinValue)
		{
			optInSlowPeriod = 26;
		}
		else if ((uint)(optInSlowPeriod - 2) > 99998u)
		{
			return -1;
		}
		return MovingAverageLookback((optInSlowPeriod <= optInFastPeriod) ? optInFastPeriod : optInSlowPeriod, optInMAType);
	}

	public static RetCode Ppo(int startIdx, int endIdx, float[] inReal, int optInFastPeriod, int optInSlowPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array = new double[endIdx - startIdx + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			return TA_INT_PO(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInMAType, out outBegIdx, out outNBElement, outReal, array, 1);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Ppo(int startIdx, int endIdx, double[] inReal, int optInFastPeriod, int optInSlowPeriod, MAType optInMAType, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInFastPeriod == int.MinValue)
			{
				optInFastPeriod = 12;
			}
			else if ((uint)(optInFastPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInSlowPeriod == int.MinValue)
			{
				optInSlowPeriod = 26;
			}
			else if ((uint)(optInSlowPeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			double[] array = new double[endIdx - startIdx + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			return TA_INT_PO(startIdx, endIdx, inReal, optInFastPeriod, optInSlowPeriod, optInMAType, out outBegIdx, out outNBElement, outReal, array, 1);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int RocLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 10;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode Roc(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = ((double)inReal[num2] / num4 - 1.0) * 100.0;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Roc(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = (inReal[num2] / num4 - 1.0) * 100.0;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int RocPLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 10;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode RocP(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = ((double)inReal[num2] - num4) / num4;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode RocP(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = (inReal[num2] - num4) / num4;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int RocRLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 10;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode RocR(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = (double)inReal[num2] / num4;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode RocR(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = inReal[num2] / num4;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int RocR100Lookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 10;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		return optInTimePeriod;
	}

	public static RetCode RocR100(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = (double)inReal[num2] / num4 * 100.0;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode RocR100(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 10;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			if (startIdx < optInTimePeriod)
			{
				startIdx = optInTimePeriod;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num = 0;
			int num2 = startIdx;
			int num3 = startIdx - optInTimePeriod;
			do
			{
				double num4 = inReal[num3];
				num3++;
				if (num4 != 0.0)
				{
					outReal[num] = inReal[num2] / num4 * 100.0;
					num++;
				}
				else
				{
					outReal[num] = 0.0;
					num++;
				}
				num2++;
			}
			while (num2 <= endIdx);
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int RsiLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		int num = (int)Globals.unstablePeriod[20] + optInTimePeriod;
		if (Globals.compatibility == Compatibility.Metastock)
		{
			num--;
		}
		return num;
	}

	public static RetCode Rsi(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = RsiLookback(optInTimePeriod);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			int num2 = 0;
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num3 = startIdx - num;
			double num4 = inReal[num3];
			double num11;
			double num7;
			double num6;
			if (Globals.unstablePeriod[20] == 0 && Globals.compatibility == Compatibility.Metastock)
			{
				double num5 = num4;
				num6 = 0.0;
				num7 = 0.0;
				int num8 = optInTimePeriod;
				double num10;
				double num9;
				if (optInTimePeriod > 0)
				{
					do
					{
						num9 = inReal[num3];
						num3++;
						num10 = num9 - num4;
						num4 = num9;
						if (num10 < 0.0)
						{
							num7 -= num10;
						}
						else
						{
							num6 = num10 + num6;
						}
						num8--;
					}
					while (num8 > 0);
				}
				num11 = optInTimePeriod;
				num10 = num6 / num11;
				num9 = num7 / num11 + num10;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[0] = 0.0;
					num2 = 1;
				}
				else
				{
					outReal[0] = num10 / num9 * 100.0;
					num2 = 1;
				}
				if (num3 > endIdx)
				{
					outBegIdx = startIdx;
					outNBElement = 1;
					return RetCode.Success;
				}
				num3 -= optInTimePeriod;
				num4 = num5;
			}
			num6 = 0.0;
			num7 = 0.0;
			num3++;
			int num12 = optInTimePeriod;
			if (optInTimePeriod > 0)
			{
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num12--;
				}
				while (num12 > 0);
			}
			num11 = optInTimePeriod;
			num7 /= num11;
			num6 /= num11;
			if (num3 > startIdx)
			{
				double num9 = num7 + num6;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[num2] = 0.0;
					num2++;
				}
				else
				{
					outReal[num2] = num6 / num9 * 100.0;
					num2++;
				}
			}
			else if (num3 < startIdx)
			{
				double num13 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num13 * num7;
					num6 = num13 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num3++;
				}
				while (num3 < startIdx);
			}
			if (num3 <= endIdx)
			{
				double num13 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num13 * num7;
					num6 = num13 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num9 = num7 + num6;
					if (-1E-08 < num9 && num9 < 1E-08)
					{
						outReal[num2] = 0.0;
						num2++;
					}
					else
					{
						outReal[num2] = num6 / num9 * 100.0;
						num2++;
					}
				}
				while (num3 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Rsi(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = RsiLookback(optInTimePeriod);
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			int num2 = 0;
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num3 = startIdx - num;
			double num4 = inReal[num3];
			double num11;
			double num7;
			double num6;
			if (Globals.unstablePeriod[20] == 0 && Globals.compatibility == Compatibility.Metastock)
			{
				double num5 = num4;
				num6 = 0.0;
				num7 = 0.0;
				int num8 = optInTimePeriod;
				double num10;
				double num9;
				if (optInTimePeriod > 0)
				{
					do
					{
						num9 = inReal[num3];
						num3++;
						num10 = num9 - num4;
						num4 = num9;
						if (num10 < 0.0)
						{
							num7 -= num10;
						}
						else
						{
							num6 = num10 + num6;
						}
						num8--;
					}
					while (num8 > 0);
				}
				num11 = optInTimePeriod;
				num10 = num6 / num11;
				num9 = num7 / num11 + num10;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[0] = 0.0;
					num2 = 1;
				}
				else
				{
					outReal[0] = num10 / num9 * 100.0;
					num2 = 1;
				}
				if (num3 > endIdx)
				{
					outBegIdx = startIdx;
					outNBElement = 1;
					return RetCode.Success;
				}
				num3 -= optInTimePeriod;
				num4 = num5;
			}
			num6 = 0.0;
			num7 = 0.0;
			num3++;
			int num12 = optInTimePeriod;
			if (optInTimePeriod > 0)
			{
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num12--;
				}
				while (num12 > 0);
			}
			num11 = optInTimePeriod;
			num7 /= num11;
			num6 /= num11;
			if (num3 > startIdx)
			{
				double num9 = num7 + num6;
				if (-1E-08 < num9 && num9 < 1E-08)
				{
					outReal[num2] = 0.0;
					num2++;
				}
				else
				{
					outReal[num2] = num6 / num9 * 100.0;
					num2++;
				}
			}
			else if (num3 < startIdx)
			{
				double num13 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num13 * num7;
					num6 = num13 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num3++;
				}
				while (num3 < startIdx);
			}
			if (num3 <= endIdx)
			{
				double num13 = optInTimePeriod - 1;
				do
				{
					double num9 = inReal[num3];
					num3++;
					double num10 = num9 - num4;
					num4 = num9;
					num7 = num13 * num7;
					num6 = num13 * num6;
					if (num10 < 0.0)
					{
						num7 -= num10;
					}
					else
					{
						num6 = num10 + num6;
					}
					num7 /= num11;
					num6 /= num11;
					num9 = num7 + num6;
					if (-1E-08 < num9 && num9 < 1E-08)
					{
						outReal[num2] = 0.0;
						num2++;
					}
					else
					{
						outReal[num2] = num6 / num9 * 100.0;
						num2++;
					}
				}
				while (num3 <= endIdx);
			}
			outBegIdx = startIdx;
			outNBElement = num2;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SarLookback(double optInAcceleration, double optInMaximum)
	{
		if (optInAcceleration == -4E+37 || (!(optInAcceleration < 0.0) && !(optInAcceleration > 3E+37)))
		{
			if (optInMaximum == -4E+37 || (!(optInMaximum < 0.0) && !(optInMaximum > 3E+37)))
			{
				return 1;
			}
			return -1;
		}
		return -1;
	}

	public static RetCode Sar(int startIdx, int endIdx, float[] inHigh, float[] inLow, double optInAcceleration, double optInMaximum, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInAcceleration == -4E+37)
				{
					optInAcceleration = 0.02;
				}
				else if (optInAcceleration < 0.0 || optInAcceleration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInMaximum == -4E+37)
				{
					optInMaximum = 0.2;
				}
				else if (optInMaximum < 0.0 || optInMaximum > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num = optInAcceleration;
				if (optInAcceleration > optInMaximum)
				{
					optInAcceleration = optInMaximum;
					num = optInMaximum;
				}
				int num2 = startIdx;
				int outBegIdx2;
				RetCode retCode = MinusDM(num2, num2, inHigh, inLow, 1, out outBegIdx2, out outBegIdx2, array);
				int num3 = ((!(array[0] > 0.0)) ? 1 : 0);
				if (retCode != RetCode.Success)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return retCode;
				}
				outBegIdx = startIdx;
				int num4 = 0;
				int num5 = startIdx;
				double num6;
				double num7;
				if (num3 == 1)
				{
					num6 = inHigh[startIdx];
					num7 = inLow[startIdx - 1];
				}
				else
				{
					num6 = inLow[startIdx];
					num7 = inHigh[startIdx - 1];
				}
				double num8 = inLow[startIdx];
				double num9 = inHigh[startIdx];
				do
				{
					double num10 = num8;
					double num11 = num9;
					num8 = inLow[num5];
					num9 = inHigh[num5];
					num5++;
					if (num3 == 1)
					{
						if (num8 <= num7)
						{
							num3 = 0;
							num7 = num6;
							if (num6 < num11)
							{
								num7 = num11;
							}
							if (num7 < num9)
							{
								num7 = num9;
							}
							outReal[num4] = num7;
							num4++;
							num = optInAcceleration;
							num6 = num8;
							num7 = (num8 - num7) * optInAcceleration + num7;
							if (num7 < num11)
							{
								num7 = num11;
							}
							if (num7 < num9)
							{
								num7 = num9;
							}
							continue;
						}
						outReal[num4] = num7;
						num4++;
						if (num9 > num6)
						{
							num6 = num9;
							num += optInAcceleration;
							if (num > optInMaximum)
							{
								num = optInMaximum;
							}
						}
						num7 = (num6 - num7) * num + num7;
						if (num7 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						continue;
					}
					if (num9 >= num7)
					{
						num3 = 1;
						num7 = num6;
						if (num6 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						outReal[num4] = num7;
						num4++;
						num = optInAcceleration;
						num6 = num9;
						num7 = (num9 - num7) * optInAcceleration + num7;
						if (num7 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						continue;
					}
					outReal[num4] = num7;
					num4++;
					if (num8 < num6)
					{
						num6 = num8;
						num += optInAcceleration;
						if (num > optInMaximum)
						{
							num = optInMaximum;
						}
					}
					num7 = (num6 - num7) * num + num7;
					if (num7 < num11)
					{
						num7 = num11;
					}
					if (num7 < num9)
					{
						num7 = num9;
					}
				}
				while (num5 <= endIdx);
				outNBElement = num4;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sar(int startIdx, int endIdx, double[] inHigh, double[] inLow, double optInAcceleration, double optInMaximum, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInAcceleration == -4E+37)
				{
					optInAcceleration = 0.02;
				}
				else if (optInAcceleration < 0.0 || optInAcceleration > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInMaximum == -4E+37)
				{
					optInMaximum = 0.2;
				}
				else if (optInMaximum < 0.0 || optInMaximum > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num = optInAcceleration;
				if (optInAcceleration > optInMaximum)
				{
					optInAcceleration = optInMaximum;
					num = optInMaximum;
				}
				int num2 = startIdx;
				int outBegIdx2;
				RetCode retCode = MinusDM(num2, num2, inHigh, inLow, 1, out outBegIdx2, out outBegIdx2, array);
				int num3 = ((!(array[0] > 0.0)) ? 1 : 0);
				if (retCode != RetCode.Success)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return retCode;
				}
				outBegIdx = startIdx;
				int num4 = 0;
				int num5 = startIdx;
				double num6;
				double num7;
				if (num3 == 1)
				{
					num6 = inHigh[startIdx];
					num7 = inLow[startIdx - 1];
				}
				else
				{
					num6 = inLow[startIdx];
					num7 = inHigh[startIdx - 1];
				}
				double num8 = inLow[startIdx];
				double num9 = inHigh[startIdx];
				do
				{
					double num10 = num8;
					double num11 = num9;
					num8 = inLow[num5];
					num9 = inHigh[num5];
					num5++;
					if (num3 == 1)
					{
						if (num8 <= num7)
						{
							num3 = 0;
							num7 = num6;
							if (num6 < num11)
							{
								num7 = num11;
							}
							if (num7 < num9)
							{
								num7 = num9;
							}
							outReal[num4] = num7;
							num4++;
							num = optInAcceleration;
							num6 = num8;
							num7 = (num8 - num7) * optInAcceleration + num7;
							if (num7 < num11)
							{
								num7 = num11;
							}
							if (num7 < num9)
							{
								num7 = num9;
							}
							continue;
						}
						outReal[num4] = num7;
						num4++;
						if (num9 > num6)
						{
							num6 = num9;
							num += optInAcceleration;
							if (num > optInMaximum)
							{
								num = optInMaximum;
							}
						}
						num7 = (num6 - num7) * num + num7;
						if (num7 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						continue;
					}
					if (num9 >= num7)
					{
						num3 = 1;
						num7 = num6;
						if (num6 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						outReal[num4] = num7;
						num4++;
						num = optInAcceleration;
						num6 = num9;
						num7 = (num9 - num7) * optInAcceleration + num7;
						if (num7 > num10)
						{
							num7 = num10;
						}
						if (num7 > num8)
						{
							num7 = num8;
						}
						continue;
					}
					outReal[num4] = num7;
					num4++;
					if (num8 < num6)
					{
						num6 = num8;
						num += optInAcceleration;
						if (num > optInMaximum)
						{
							num = optInMaximum;
						}
					}
					num7 = (num6 - num7) * num + num7;
					if (num7 < num11)
					{
						num7 = num11;
					}
					if (num7 < num9)
					{
						num7 = num9;
					}
				}
				while (num5 <= endIdx);
				outNBElement = num4;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SarExtLookback(double optInStartValue, double optInOffsetOnReverse, double optInAccelerationInitLong, double optInAccelerationLong, double optInAccelerationMaxLong, double optInAccelerationInitShort, double optInAccelerationShort, double optInAccelerationMaxShort)
	{
		if (optInStartValue == -4E+37 || (!(optInStartValue < -3E+37) && !(optInStartValue > 3E+37)))
		{
			if (optInOffsetOnReverse == -4E+37 || (!(optInOffsetOnReverse < 0.0) && !(optInOffsetOnReverse > 3E+37)))
			{
				if (optInAccelerationInitLong == -4E+37 || (!(optInAccelerationInitLong < 0.0) && !(optInAccelerationInitLong > 3E+37)))
				{
					if (optInAccelerationLong == -4E+37 || (!(optInAccelerationLong < 0.0) && !(optInAccelerationLong > 3E+37)))
					{
						if (optInAccelerationMaxLong == -4E+37 || (!(optInAccelerationMaxLong < 0.0) && !(optInAccelerationMaxLong > 3E+37)))
						{
							if (optInAccelerationInitShort == -4E+37 || (!(optInAccelerationInitShort < 0.0) && !(optInAccelerationInitShort > 3E+37)))
							{
								if (optInAccelerationShort == -4E+37 || (!(optInAccelerationShort < 0.0) && !(optInAccelerationShort > 3E+37)))
								{
									if (optInAccelerationMaxShort == -4E+37 || (!(optInAccelerationMaxShort < 0.0) && !(optInAccelerationMaxShort > 3E+37)))
									{
										return 1;
									}
									return -1;
								}
								return -1;
							}
							return -1;
						}
						return -1;
					}
					return -1;
				}
				return -1;
			}
			return -1;
		}
		return -1;
	}

	public static RetCode SarExt(int startIdx, int endIdx, float[] inHigh, float[] inLow, double optInStartValue, double optInOffsetOnReverse, double optInAccelerationInitLong, double optInAccelerationLong, double optInAccelerationMaxLong, double optInAccelerationInitShort, double optInAccelerationShort, double optInAccelerationMaxShort, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInStartValue == -4E+37)
				{
					optInStartValue = 0.0;
				}
				else if (optInStartValue < -3E+37 || optInStartValue > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInOffsetOnReverse == -4E+37)
				{
					optInOffsetOnReverse = 0.0;
				}
				else if (optInOffsetOnReverse < 0.0 || optInOffsetOnReverse > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationInitLong == -4E+37)
				{
					optInAccelerationInitLong = 0.02;
				}
				else if (optInAccelerationInitLong < 0.0 || optInAccelerationInitLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationLong == -4E+37)
				{
					optInAccelerationLong = 0.02;
				}
				else if (optInAccelerationLong < 0.0 || optInAccelerationLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationMaxLong == -4E+37)
				{
					optInAccelerationMaxLong = 0.2;
				}
				else if (optInAccelerationMaxLong < 0.0 || optInAccelerationMaxLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationInitShort == -4E+37)
				{
					optInAccelerationInitShort = 0.02;
				}
				else if (optInAccelerationInitShort < 0.0 || optInAccelerationInitShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationShort == -4E+37)
				{
					optInAccelerationShort = 0.02;
				}
				else if (optInAccelerationShort < 0.0 || optInAccelerationShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationMaxShort == -4E+37)
				{
					optInAccelerationMaxShort = 0.2;
				}
				else if (optInAccelerationMaxShort < 0.0 || optInAccelerationMaxShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num = optInAccelerationInitLong;
				double num2 = optInAccelerationInitShort;
				if (optInAccelerationInitLong > optInAccelerationMaxLong)
				{
					optInAccelerationInitLong = optInAccelerationMaxLong;
					num = optInAccelerationMaxLong;
				}
				if (optInAccelerationLong > optInAccelerationMaxLong)
				{
					optInAccelerationLong = optInAccelerationMaxLong;
				}
				if (optInAccelerationInitShort > optInAccelerationMaxShort)
				{
					optInAccelerationInitShort = optInAccelerationMaxShort;
					num2 = optInAccelerationMaxShort;
				}
				if (optInAccelerationShort > optInAccelerationMaxShort)
				{
					optInAccelerationShort = optInAccelerationMaxShort;
				}
				int num3;
				if (optInStartValue != 0.0)
				{
					num3 = ((optInStartValue > 0.0) ? 1 : 0);
				}
				else
				{
					int num4 = startIdx;
					int outBegIdx2;
					RetCode retCode = MinusDM(num4, num4, inHigh, inLow, 1, out outBegIdx2, out outBegIdx2, array);
					num3 = ((!(array[0] > 0.0)) ? 1 : 0);
					if (retCode != RetCode.Success)
					{
						outBegIdx = 0;
						outNBElement = 0;
						return retCode;
					}
				}
				outBegIdx = startIdx;
				int num5 = 0;
				int num6 = startIdx;
				double num7;
				double num8;
				if (optInStartValue == 0.0)
				{
					if (num3 == 1)
					{
						num7 = inHigh[startIdx];
						num8 = inLow[startIdx - 1];
					}
					else
					{
						num7 = inLow[startIdx];
						num8 = inHigh[startIdx - 1];
					}
				}
				else if (optInStartValue > 0.0)
				{
					num7 = inHigh[startIdx];
					num8 = optInStartValue;
				}
				else
				{
					num7 = inLow[startIdx];
					num8 = Math.Abs(optInStartValue);
				}
				double num9 = inLow[startIdx];
				double num10 = inHigh[startIdx];
				do
				{
					double num11 = num9;
					double num12 = num10;
					num9 = inLow[num6];
					num10 = inHigh[num6];
					num6++;
					if (num3 == 1)
					{
						if (num9 <= num8)
						{
							num3 = 0;
							num8 = num7;
							if (num7 < num12)
							{
								num8 = num12;
							}
							if (num8 < num10)
							{
								num8 = num10;
							}
							if (optInOffsetOnReverse != 0.0)
							{
								num8 = num8 * optInOffsetOnReverse + num8;
							}
							outReal[num5] = 0.0 - num8;
							num5++;
							num2 = optInAccelerationInitShort;
							num7 = num9;
							num8 = (num9 - num8) * optInAccelerationInitShort + num8;
							if (num8 < num12)
							{
								num8 = num12;
							}
							if (num8 < num10)
							{
								num8 = num10;
							}
							continue;
						}
						outReal[num5] = num8;
						num5++;
						if (num10 > num7)
						{
							num7 = num10;
							num += optInAccelerationLong;
							if (num > optInAccelerationMaxLong)
							{
								num = optInAccelerationMaxLong;
							}
						}
						num8 = (num7 - num8) * num + num8;
						if (num8 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						continue;
					}
					if (num10 >= num8)
					{
						num3 = 1;
						num8 = num7;
						if (num7 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						if (optInOffsetOnReverse != 0.0)
						{
							double num13 = num8;
							num8 = num13 - num13 * optInOffsetOnReverse;
						}
						outReal[num5] = num8;
						num5++;
						num = optInAccelerationInitLong;
						num7 = num10;
						num8 = (num10 - num8) * optInAccelerationInitLong + num8;
						if (num8 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						continue;
					}
					outReal[num5] = 0.0 - num8;
					num5++;
					if (num9 < num7)
					{
						num7 = num9;
						num2 += optInAccelerationShort;
						if (num2 > optInAccelerationMaxShort)
						{
							num2 = optInAccelerationMaxShort;
						}
					}
					num8 = (num7 - num8) * num2 + num8;
					if (num8 < num12)
					{
						num8 = num12;
					}
					if (num8 < num10)
					{
						num8 = num10;
					}
				}
				while (num6 <= endIdx);
				outNBElement = num5;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode SarExt(int startIdx, int endIdx, double[] inHigh, double[] inLow, double optInStartValue, double optInOffsetOnReverse, double optInAccelerationInitLong, double optInAccelerationLong, double optInAccelerationMaxLong, double optInAccelerationInitShort, double optInAccelerationShort, double optInAccelerationMaxShort, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		double[] array = new double[1];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null)
			{
				if (optInStartValue == -4E+37)
				{
					optInStartValue = 0.0;
				}
				else if (optInStartValue < -3E+37 || optInStartValue > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInOffsetOnReverse == -4E+37)
				{
					optInOffsetOnReverse = 0.0;
				}
				else if (optInOffsetOnReverse < 0.0 || optInOffsetOnReverse > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationInitLong == -4E+37)
				{
					optInAccelerationInitLong = 0.02;
				}
				else if (optInAccelerationInitLong < 0.0 || optInAccelerationInitLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationLong == -4E+37)
				{
					optInAccelerationLong = 0.02;
				}
				else if (optInAccelerationLong < 0.0 || optInAccelerationLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationMaxLong == -4E+37)
				{
					optInAccelerationMaxLong = 0.2;
				}
				else if (optInAccelerationMaxLong < 0.0 || optInAccelerationMaxLong > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationInitShort == -4E+37)
				{
					optInAccelerationInitShort = 0.02;
				}
				else if (optInAccelerationInitShort < 0.0 || optInAccelerationInitShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationShort == -4E+37)
				{
					optInAccelerationShort = 0.02;
				}
				else if (optInAccelerationShort < 0.0 || optInAccelerationShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (optInAccelerationMaxShort == -4E+37)
				{
					optInAccelerationMaxShort = 0.2;
				}
				else if (optInAccelerationMaxShort < 0.0 || optInAccelerationMaxShort > 3E+37)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				double num = optInAccelerationInitLong;
				double num2 = optInAccelerationInitShort;
				if (optInAccelerationInitLong > optInAccelerationMaxLong)
				{
					optInAccelerationInitLong = optInAccelerationMaxLong;
					num = optInAccelerationMaxLong;
				}
				if (optInAccelerationLong > optInAccelerationMaxLong)
				{
					optInAccelerationLong = optInAccelerationMaxLong;
				}
				if (optInAccelerationInitShort > optInAccelerationMaxShort)
				{
					optInAccelerationInitShort = optInAccelerationMaxShort;
					num2 = optInAccelerationMaxShort;
				}
				if (optInAccelerationShort > optInAccelerationMaxShort)
				{
					optInAccelerationShort = optInAccelerationMaxShort;
				}
				int num3;
				if (optInStartValue != 0.0)
				{
					num3 = ((optInStartValue > 0.0) ? 1 : 0);
				}
				else
				{
					int num4 = startIdx;
					int outBegIdx2;
					RetCode retCode = MinusDM(num4, num4, inHigh, inLow, 1, out outBegIdx2, out outBegIdx2, array);
					num3 = ((!(array[0] > 0.0)) ? 1 : 0);
					if (retCode != RetCode.Success)
					{
						outBegIdx = 0;
						outNBElement = 0;
						return retCode;
					}
				}
				outBegIdx = startIdx;
				int num5 = 0;
				int num6 = startIdx;
				double num7;
				double num8;
				if (optInStartValue == 0.0)
				{
					if (num3 == 1)
					{
						num7 = inHigh[startIdx];
						num8 = inLow[startIdx - 1];
					}
					else
					{
						num7 = inLow[startIdx];
						num8 = inHigh[startIdx - 1];
					}
				}
				else if (optInStartValue > 0.0)
				{
					num7 = inHigh[startIdx];
					num8 = optInStartValue;
				}
				else
				{
					num7 = inLow[startIdx];
					num8 = Math.Abs(optInStartValue);
				}
				double num9 = inLow[startIdx];
				double num10 = inHigh[startIdx];
				do
				{
					double num11 = num9;
					double num12 = num10;
					num9 = inLow[num6];
					num10 = inHigh[num6];
					num6++;
					if (num3 == 1)
					{
						if (num9 <= num8)
						{
							num3 = 0;
							num8 = num7;
							if (num7 < num12)
							{
								num8 = num12;
							}
							if (num8 < num10)
							{
								num8 = num10;
							}
							if (optInOffsetOnReverse != 0.0)
							{
								num8 = num8 * optInOffsetOnReverse + num8;
							}
							outReal[num5] = 0.0 - num8;
							num5++;
							num2 = optInAccelerationInitShort;
							num7 = num9;
							num8 = (num9 - num8) * optInAccelerationInitShort + num8;
							if (num8 < num12)
							{
								num8 = num12;
							}
							if (num8 < num10)
							{
								num8 = num10;
							}
							continue;
						}
						outReal[num5] = num8;
						num5++;
						if (num10 > num7)
						{
							num7 = num10;
							num += optInAccelerationLong;
							if (num > optInAccelerationMaxLong)
							{
								num = optInAccelerationMaxLong;
							}
						}
						num8 = (num7 - num8) * num + num8;
						if (num8 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						continue;
					}
					if (num10 >= num8)
					{
						num3 = 1;
						num8 = num7;
						if (num7 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						if (optInOffsetOnReverse != 0.0)
						{
							double num13 = num8;
							num8 = num13 - num13 * optInOffsetOnReverse;
						}
						outReal[num5] = num8;
						num5++;
						num = optInAccelerationInitLong;
						num7 = num10;
						num8 = (num10 - num8) * optInAccelerationInitLong + num8;
						if (num8 > num11)
						{
							num8 = num11;
						}
						if (num8 > num9)
						{
							num8 = num9;
						}
						continue;
					}
					outReal[num5] = 0.0 - num8;
					num5++;
					if (num9 < num7)
					{
						num7 = num9;
						num2 += optInAccelerationShort;
						if (num2 > optInAccelerationMaxShort)
						{
							num2 = optInAccelerationMaxShort;
						}
					}
					num8 = (num7 - num8) * num2 + num8;
					if (num8 < num12)
					{
						num8 = num12;
					}
					if (num8 < num10)
					{
						num8 = num10;
					}
				}
				while (num6 <= endIdx);
				outNBElement = num5;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SinLookback()
	{
		return 0;
	}

	public static RetCode Sin(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sin(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sin(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sin(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SinhLookback()
	{
		return 0;
	}

	public static RetCode Sinh(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sinh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sinh(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sinh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SmaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Sma(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_SMA(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sma(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			return TA_INT_SMA(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SqrtLookback()
	{
		return 0;
	}

	public static RetCode Sqrt(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sqrt(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sqrt(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Sqrt(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int StdDevLookback(int optInTimePeriod, double optInNbDev)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 5;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInNbDev == -4E+37)
		{
			optInNbDev = 1.0;
		}
		else if (optInNbDev < -3E+37 || optInNbDev > 3E+37)
		{
			return -1;
		}
		return VarianceLookback(optInTimePeriod, optInNbDev);
	}

	public static RetCode StdDev(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, double optInNbDev, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDev == -4E+37)
			{
				optInNbDev = 1.0;
			}
			else if (optInNbDev < -3E+37 || optInNbDev > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			RetCode retCode = TA_INT_VAR(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			if (retCode != RetCode.Success)
			{
				return retCode;
			}
			if (optInNbDev != 1.0)
			{
				int num = 0;
				if (0 < outNBElement)
				{
					do
					{
						double num2 = outReal[num];
						if (!(num2 < 1E-08))
						{
							outReal[num] = Math.Sqrt(num2) * optInNbDev;
						}
						else
						{
							outReal[num] = 0.0;
						}
						num++;
					}
					while (num < outNBElement);
				}
			}
			else
			{
				int num = 0;
				if (0 < outNBElement)
				{
					do
					{
						double num2 = outReal[num];
						if (!(num2 < 1E-08))
						{
							outReal[num] = Math.Sqrt(num2);
						}
						else
						{
							outReal[num] = 0.0;
						}
						num++;
					}
					while (num < outNBElement);
				}
			}
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode StdDev(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, double optInNbDev, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDev == -4E+37)
			{
				optInNbDev = 1.0;
			}
			else if (optInNbDev < -3E+37 || optInNbDev > 3E+37)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			RetCode retCode = TA_INT_VAR(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			if (retCode != RetCode.Success)
			{
				return retCode;
			}
			if (optInNbDev != 1.0)
			{
				int num = 0;
				if (0 < outNBElement)
				{
					do
					{
						double num2 = outReal[num];
						if (!(num2 < 1E-08))
						{
							outReal[num] = Math.Sqrt(num2) * optInNbDev;
						}
						else
						{
							outReal[num] = 0.0;
						}
						num++;
					}
					while (num < outNBElement);
				}
			}
			else
			{
				int num = 0;
				if (0 < outNBElement)
				{
					do
					{
						double num2 = outReal[num];
						if (!(num2 < 1E-08))
						{
							outReal[num] = Math.Sqrt(num2);
						}
						else
						{
							outReal[num] = 0.0;
						}
						num++;
					}
					while (num < outNBElement);
				}
			}
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int StochLookback(int optInFastK_Period, int optInSlowK_Period, MAType optInSlowK_MAType, int optInSlowD_Period, MAType optInSlowD_MAType)
	{
		if (optInFastK_Period == int.MinValue)
		{
			optInFastK_Period = 5;
		}
		else if ((uint)(optInFastK_Period - 1) > 99999u)
		{
			return -1;
		}
		if (optInSlowK_Period == int.MinValue)
		{
			optInSlowK_Period = 3;
		}
		else if ((uint)(optInSlowK_Period - 1) > 99999u)
		{
			return -1;
		}
		if (optInSlowD_Period == int.MinValue)
		{
			optInSlowD_Period = 3;
		}
		else if ((uint)(optInSlowD_Period - 1) > 99999u)
		{
			return -1;
		}
		int num = optInFastK_Period + MovingAverageLookback(optInSlowK_Period, optInSlowK_MAType) - 1;
		return MovingAverageLookback(optInSlowD_Period, optInSlowD_MAType) + num;
	}

	public static RetCode Stoch(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInFastK_Period, int optInSlowK_Period, MAType optInSlowK_MAType, int optInSlowD_Period, MAType optInSlowD_MAType, out int outBegIdx, out int outNBElement, double[] outSlowK, double[] outSlowD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInFastK_Period == int.MinValue)
				{
					optInFastK_Period = 5;
				}
				else if ((uint)(optInFastK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowK_Period == int.MinValue)
				{
					optInSlowK_Period = 3;
				}
				else if ((uint)(optInSlowK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowD_Period == int.MinValue)
				{
					optInSlowD_Period = 3;
				}
				else if ((uint)(optInSlowD_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outSlowK == null)
				{
					return RetCode.BadParam;
				}
				if (outSlowD == null)
				{
					return RetCode.BadParam;
				}
				int num = optInFastK_Period - 1;
				int num2 = MovingAverageLookback(optInSlowK_Period, optInSlowK_MAType);
				int num3 = MovingAverageLookback(optInSlowD_Period, optInSlowD_MAType);
				int num4 = num3 + num2 + num;
				if (startIdx < num4)
				{
					startIdx = num4;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num5 = 0;
				int num6 = startIdx - num4;
				int num7 = num6 + num;
				int num8 = -1;
				int num9 = -1;
				double num10 = 0.0;
				double num11 = 0.0;
				double num12 = 0.0;
				double[] array = new double[endIdx - num7 + 1];
				if (num7 <= endIdx)
				{
					int num13 = num6 + 1;
					do
					{
						double num14 = inLow[num7];
						if (num9 < num6)
						{
							num9 = num6;
							num10 = inLow[num6];
							int num15 = num13;
							if (num13 <= num7)
							{
								do
								{
									num14 = inLow[num15];
									if (num14 < num10)
									{
										num9 = num15;
										num10 = num14;
									}
									num15++;
								}
								while (num15 <= num7);
							}
							num12 = (num11 - num10) / 100.0;
						}
						else if (num14 <= num10)
						{
							num9 = num7;
							num10 = num14;
							num12 = (num11 - num14) / 100.0;
						}
						num14 = inHigh[num7];
						if (num8 < num6)
						{
							num8 = num6;
							num11 = inHigh[num6];
							int num16 = num13;
							if (num13 <= num7)
							{
								do
								{
									num14 = inHigh[num16];
									if (num14 > num11)
									{
										num8 = num16;
										num11 = num14;
									}
									num16++;
								}
								while (num16 <= num7);
							}
							num12 = (num11 - num10) / 100.0;
						}
						else if (num14 >= num11)
						{
							num8 = num7;
							num11 = num14;
							num12 = (num14 - num10) / 100.0;
						}
						if (num12 != 0.0)
						{
							array[num5] = ((double)inClose[num7] - num10) / num12;
							num5++;
						}
						else
						{
							array[num5] = 0.0;
							num5++;
						}
						num6++;
						num13++;
						num7++;
					}
					while (num7 <= endIdx);
				}
				RetCode retCode = MovingAverage(0, num5 - 1, array, optInSlowK_Period, optInSlowK_MAType, out outBegIdx, out outNBElement, array);
				if (retCode == RetCode.Success)
				{
					int num17 = outNBElement;
					if (num17 != 0)
					{
						RetCode retCode2 = MovingAverage(0, num17 - 1, array, optInSlowD_Period, optInSlowD_MAType, out outBegIdx, out outNBElement, outSlowD);
						Array.Copy(array, num3, outSlowK, 0, outNBElement);
						if (retCode2 != RetCode.Success)
						{
							outBegIdx = 0;
							outNBElement = 0;
							return retCode2;
						}
						outBegIdx = startIdx;
						return RetCode.Success;
					}
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Stoch(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInFastK_Period, int optInSlowK_Period, MAType optInSlowK_MAType, int optInSlowD_Period, MAType optInSlowD_MAType, out int outBegIdx, out int outNBElement, double[] outSlowK, double[] outSlowD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInFastK_Period == int.MinValue)
				{
					optInFastK_Period = 5;
				}
				else if ((uint)(optInFastK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowK_Period == int.MinValue)
				{
					optInSlowK_Period = 3;
				}
				else if ((uint)(optInSlowK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInSlowD_Period == int.MinValue)
				{
					optInSlowD_Period = 3;
				}
				else if ((uint)(optInSlowD_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outSlowK == null)
				{
					return RetCode.BadParam;
				}
				if (outSlowD == null)
				{
					return RetCode.BadParam;
				}
				int num = optInFastK_Period - 1;
				int num2 = MovingAverageLookback(optInSlowK_Period, optInSlowK_MAType);
				int num3 = MovingAverageLookback(optInSlowD_Period, optInSlowD_MAType);
				int num4 = num3 + num2 + num;
				if (startIdx < num4)
				{
					startIdx = num4;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num5 = 0;
				int num6 = startIdx - num4;
				int num7 = num6 + num;
				int num8 = -1;
				int num9 = -1;
				double num10 = 0.0;
				double num11 = 0.0;
				double num12 = 0.0;
				double[] array = ((outSlowK == inHigh || outSlowK == inLow || outSlowK == inClose) ? outSlowK : ((outSlowD == inHigh || outSlowD == inLow || outSlowD == inClose) ? outSlowD : new double[endIdx - num7 + 1]));
				if (num7 <= endIdx)
				{
					int num13 = num6 + 1;
					do
					{
						double num14 = inLow[num7];
						if (num9 < num6)
						{
							num9 = num6;
							num10 = inLow[num6];
							int num15 = num13;
							if (num13 <= num7)
							{
								do
								{
									num14 = inLow[num15];
									if (num14 < num10)
									{
										num9 = num15;
										num10 = num14;
									}
									num15++;
								}
								while (num15 <= num7);
							}
							num12 = (num11 - num10) / 100.0;
						}
						else if (num14 <= num10)
						{
							num9 = num7;
							num10 = num14;
							num12 = (num11 - num14) / 100.0;
						}
						num14 = inHigh[num7];
						if (num8 < num6)
						{
							num8 = num6;
							num11 = inHigh[num6];
							int num16 = num13;
							if (num13 <= num7)
							{
								do
								{
									num14 = inHigh[num16];
									if (num14 > num11)
									{
										num8 = num16;
										num11 = num14;
									}
									num16++;
								}
								while (num16 <= num7);
							}
							num12 = (num11 - num10) / 100.0;
						}
						else if (num14 >= num11)
						{
							num8 = num7;
							num11 = num14;
							num12 = (num14 - num10) / 100.0;
						}
						if (num12 != 0.0)
						{
							array[num5] = (inClose[num7] - num10) / num12;
							num5++;
						}
						else
						{
							array[num5] = 0.0;
							num5++;
						}
						num6++;
						num13++;
						num7++;
					}
					while (num7 <= endIdx);
				}
				RetCode retCode = MovingAverage(0, num5 - 1, array, optInSlowK_Period, optInSlowK_MAType, out outBegIdx, out outNBElement, array);
				if (retCode == RetCode.Success)
				{
					int num17 = outNBElement;
					if (num17 != 0)
					{
						RetCode retCode2 = MovingAverage(0, num17 - 1, array, optInSlowD_Period, optInSlowD_MAType, out outBegIdx, out outNBElement, outSlowD);
						Array.Copy(array, num3, outSlowK, 0, outNBElement);
						if (retCode2 != RetCode.Success)
						{
							outBegIdx = 0;
							outNBElement = 0;
							return retCode2;
						}
						outBegIdx = startIdx;
						return RetCode.Success;
					}
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int StochFLookback(int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType)
	{
		if (optInFastK_Period == int.MinValue)
		{
			optInFastK_Period = 5;
		}
		else if ((uint)(optInFastK_Period - 1) > 99999u)
		{
			return -1;
		}
		if (optInFastD_Period == int.MinValue)
		{
			optInFastD_Period = 3;
		}
		else if ((uint)(optInFastD_Period - 1) > 99999u)
		{
			return -1;
		}
		return optInFastK_Period + MovingAverageLookback(optInFastD_Period, optInFastD_MAType) - 1;
	}

	public static RetCode StochF(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType, out int outBegIdx, out int outNBElement, double[] outFastK, double[] outFastD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInFastK_Period == int.MinValue)
				{
					optInFastK_Period = 5;
				}
				else if ((uint)(optInFastK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInFastD_Period == int.MinValue)
				{
					optInFastD_Period = 3;
				}
				else if ((uint)(optInFastD_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outFastK == null)
				{
					return RetCode.BadParam;
				}
				if (outFastD == null)
				{
					return RetCode.BadParam;
				}
				int num = optInFastK_Period - 1;
				int num2 = MovingAverageLookback(optInFastD_Period, optInFastD_MAType);
				int num3 = num2 + num;
				if (startIdx < num3)
				{
					startIdx = num3;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num4 = 0;
				int num5 = startIdx - num3;
				int num6 = num5 + num;
				int num7 = -1;
				int num8 = -1;
				double num9 = 0.0;
				double num10 = 0.0;
				double num11 = 0.0;
				double[] array = new double[endIdx - num6 + 1];
				if (num6 <= endIdx)
				{
					int num12 = num5 + 1;
					do
					{
						double num13 = inLow[num6];
						if (num8 < num5)
						{
							num8 = num5;
							num9 = inLow[num5];
							int num14 = num12;
							if (num12 <= num6)
							{
								do
								{
									num13 = inLow[num14];
									if (num13 < num9)
									{
										num8 = num14;
										num9 = num13;
									}
									num14++;
								}
								while (num14 <= num6);
							}
							num11 = (num10 - num9) / 100.0;
						}
						else if (num13 <= num9)
						{
							num8 = num6;
							num9 = num13;
							num11 = (num10 - num13) / 100.0;
						}
						num13 = inHigh[num6];
						if (num7 < num5)
						{
							num7 = num5;
							num10 = inHigh[num5];
							int num15 = num12;
							if (num12 <= num6)
							{
								do
								{
									num13 = inHigh[num15];
									if (num13 > num10)
									{
										num7 = num15;
										num10 = num13;
									}
									num15++;
								}
								while (num15 <= num6);
							}
							num11 = (num10 - num9) / 100.0;
						}
						else if (num13 >= num10)
						{
							num7 = num6;
							num10 = num13;
							num11 = (num13 - num9) / 100.0;
						}
						if (num11 != 0.0)
						{
							array[num4] = ((double)inClose[num6] - num9) / num11;
							num4++;
						}
						else
						{
							array[num4] = 0.0;
							num4++;
						}
						num5++;
						num12++;
						num6++;
					}
					while (num6 <= endIdx);
				}
				RetCode retCode = MovingAverage(0, num4 - 1, array, optInFastD_Period, optInFastD_MAType, out outBegIdx, out outNBElement, outFastD);
				if (retCode == RetCode.Success)
				{
					int num16 = outNBElement;
					if (num16 != 0)
					{
						Array.Copy(array, num2, outFastK, 0, num16);
						outBegIdx = startIdx;
						return RetCode.Success;
					}
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode StochF(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType, out int outBegIdx, out int outNBElement, double[] outFastK, double[] outFastD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInFastK_Period == int.MinValue)
				{
					optInFastK_Period = 5;
				}
				else if ((uint)(optInFastK_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInFastD_Period == int.MinValue)
				{
					optInFastD_Period = 3;
				}
				else if ((uint)(optInFastD_Period - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outFastK == null)
				{
					return RetCode.BadParam;
				}
				if (outFastD == null)
				{
					return RetCode.BadParam;
				}
				int num = optInFastK_Period - 1;
				int num2 = MovingAverageLookback(optInFastD_Period, optInFastD_MAType);
				int num3 = num2 + num;
				if (startIdx < num3)
				{
					startIdx = num3;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num4 = 0;
				int num5 = startIdx - num3;
				int num6 = num5 + num;
				int num7 = -1;
				int num8 = -1;
				double num9 = 0.0;
				double num10 = 0.0;
				double num11 = 0.0;
				double[] array = ((outFastK == inHigh || outFastK == inLow || outFastK == inClose) ? outFastK : ((outFastD == inHigh || outFastD == inLow || outFastD == inClose) ? outFastD : new double[endIdx - num6 + 1]));
				if (num6 <= endIdx)
				{
					int num12 = num5 + 1;
					do
					{
						double num13 = inLow[num6];
						if (num8 < num5)
						{
							num8 = num5;
							num9 = inLow[num5];
							int num14 = num12;
							if (num12 <= num6)
							{
								do
								{
									num13 = inLow[num14];
									if (num13 < num9)
									{
										num8 = num14;
										num9 = num13;
									}
									num14++;
								}
								while (num14 <= num6);
							}
							num11 = (num10 - num9) / 100.0;
						}
						else if (num13 <= num9)
						{
							num8 = num6;
							num9 = num13;
							num11 = (num10 - num13) / 100.0;
						}
						num13 = inHigh[num6];
						if (num7 < num5)
						{
							num7 = num5;
							num10 = inHigh[num5];
							int num15 = num12;
							if (num12 <= num6)
							{
								do
								{
									num13 = inHigh[num15];
									if (num13 > num10)
									{
										num7 = num15;
										num10 = num13;
									}
									num15++;
								}
								while (num15 <= num6);
							}
							num11 = (num10 - num9) / 100.0;
						}
						else if (num13 >= num10)
						{
							num7 = num6;
							num10 = num13;
							num11 = (num13 - num9) / 100.0;
						}
						if (num11 != 0.0)
						{
							array[num4] = (inClose[num6] - num9) / num11;
							num4++;
						}
						else
						{
							array[num4] = 0.0;
							num4++;
						}
						num5++;
						num12++;
						num6++;
					}
					while (num6 <= endIdx);
				}
				RetCode retCode = MovingAverage(0, num4 - 1, array, optInFastD_Period, optInFastD_MAType, out outBegIdx, out outNBElement, outFastD);
				if (retCode == RetCode.Success)
				{
					int num16 = outNBElement;
					if (num16 != 0)
					{
						Array.Copy(array, num2, outFastK, 0, num16);
						outBegIdx = startIdx;
						return RetCode.Success;
					}
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int StochRsiLookback(int optInTimePeriod, int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInFastK_Period == int.MinValue)
		{
			optInFastK_Period = 5;
		}
		else if ((uint)(optInFastK_Period - 1) > 99999u)
		{
			return -1;
		}
		if (optInFastD_Period == int.MinValue)
		{
			optInFastD_Period = 3;
		}
		else if ((uint)(optInFastD_Period - 1) > 99999u)
		{
			return -1;
		}
		return StochFLookback(optInFastK_Period, optInFastD_Period, optInFastD_MAType) + RsiLookback(optInTimePeriod);
	}

	public static RetCode StochRsi(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType, out int outBegIdx, out int outNBElement, double[] outFastK, double[] outFastD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInFastK_Period == int.MinValue)
			{
				optInFastK_Period = 5;
			}
			else if ((uint)(optInFastK_Period - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (optInFastD_Period == int.MinValue)
			{
				optInFastD_Period = 3;
			}
			else if ((uint)(optInFastD_Period - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outFastK == null)
			{
				return RetCode.BadParam;
			}
			if (outFastD == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = StochFLookback(optInFastK_Period, optInFastD_Period, optInFastD_MAType);
			int num2 = RsiLookback(optInTimePeriod) + num;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = endIdx + (num - startIdx) + 1;
			double[] array = new double[num3];
			int outBegIdx2;
			int outNBElement2;
			RetCode retCode = Rsi(startIdx - num, endIdx, inReal, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
			if (retCode == RetCode.Success && outNBElement2 != 0)
			{
				int outBegIdx3;
				RetCode retCode2 = StochF(0, num3 - 1, array, array, array, optInFastK_Period, optInFastD_Period, optInFastD_MAType, out outBegIdx3, out outNBElement, outFastK, outFastD);
				if (retCode2 == RetCode.Success && outNBElement != 0)
				{
					return RetCode.Success;
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode2;
			}
			outBegIdx = 0;
			outNBElement = 0;
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode StochRsi(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, int optInFastK_Period, int optInFastD_Period, MAType optInFastD_MAType, out int outBegIdx, out int outNBElement, double[] outFastK, double[] outFastD)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInFastK_Period == int.MinValue)
			{
				optInFastK_Period = 5;
			}
			else if ((uint)(optInFastK_Period - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (optInFastD_Period == int.MinValue)
			{
				optInFastD_Period = 3;
			}
			else if ((uint)(optInFastD_Period - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outFastK == null)
			{
				return RetCode.BadParam;
			}
			if (outFastD == null)
			{
				return RetCode.BadParam;
			}
			outBegIdx = 0;
			outNBElement = 0;
			int num = StochFLookback(optInFastK_Period, optInFastD_Period, optInFastD_MAType);
			int num2 = RsiLookback(optInTimePeriod) + num;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = endIdx + (num - startIdx) + 1;
			double[] array = new double[num3];
			int outBegIdx2;
			int outNBElement2;
			RetCode retCode = Rsi(startIdx - num, endIdx, inReal, optInTimePeriod, out outBegIdx2, out outNBElement2, array);
			if (retCode == RetCode.Success && outNBElement2 != 0)
			{
				int outBegIdx3;
				RetCode retCode2 = StochF(0, num3 - 1, array, array, array, optInFastK_Period, optInFastD_Period, optInFastD_MAType, out outBegIdx3, out outNBElement, outFastK, outFastD);
				if (retCode2 == RetCode.Success && outNBElement != 0)
				{
					return RetCode.Success;
				}
				outBegIdx = 0;
				outNBElement = 0;
				return retCode2;
			}
			outBegIdx = 0;
			outNBElement = 0;
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SubLookback()
	{
		return 0;
	}

	public static RetCode Sub(int startIdx, int endIdx, float[] inReal0, float[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = (double)inReal0[num2] - (double)inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sub(int startIdx, int endIdx, double[] inReal0, double[] inReal1, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal0 == null)
			{
				return RetCode.BadParam;
			}
			if (inReal1 == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = inReal0[num2] - inReal1[num2];
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int SumLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Sum(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			double num2 = 0.0;
			int num3 = startIdx - num;
			int num4 = num3;
			int num5 = num4;
			if (optInTimePeriod > 1 && num4 < startIdx)
			{
				do
				{
					num2 = (double)inReal[num5] + num2;
					num5++;
				}
				while (num5 < startIdx);
			}
			int num6 = 0;
			do
			{
				num2 = (double)inReal[num5] + num2;
				num5++;
				double num7 = num2;
				num2 -= (double)inReal[num3 + num6];
				outReal[num6] = num7;
				num6++;
			}
			while (num5 <= endIdx);
			outNBElement = num6;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Sum(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			double num2 = 0.0;
			int num3 = startIdx - num;
			int num4 = num3;
			int num5 = num4;
			if (optInTimePeriod > 1 && num4 < startIdx)
			{
				do
				{
					num2 = inReal[num5] + num2;
					num5++;
				}
				while (num5 < startIdx);
			}
			int num6 = 0;
			do
			{
				num2 = inReal[num5] + num2;
				num5++;
				double num7 = num2;
				num2 -= inReal[num3 + num6];
				outReal[num6] = num7;
				num6++;
			}
			while (num5 <= endIdx);
			outNBElement = num6;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int T3Lookback(int optInTimePeriod, double optInVFactor)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 5;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		if (optInVFactor == -4E+37 || (!(optInVFactor < 0.0) && !(optInVFactor > 1.0)))
		{
			return (optInTimePeriod - 1) * 6 + (int)Globals.unstablePeriod[22];
		}
		return -1;
	}

	public static RetCode T3(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, double optInVFactor, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInVFactor == -4E+37)
			{
				optInVFactor = 0.7;
			}
			else if (optInVFactor < 0.0 || optInVFactor > 1.0)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = (int)Globals.unstablePeriod[22] + optInTimePeriod * 6 - 6;
			if (startIdx <= num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num2 = startIdx - num;
			double num3 = optInTimePeriod;
			double num4 = 2.0 / (num3 + 1.0);
			double num5 = 1.0 - num4;
			double num6 = inReal[num2];
			num2++;
			int num7 = optInTimePeriod - 1;
			if (num7 > 0)
			{
				do
				{
					num6 = (double)inReal[num2] + num6;
					num2++;
					num7--;
				}
				while (num7 > 0);
			}
			double num8 = num6 / num3;
			num6 = num8;
			int num9 = optInTimePeriod - 1;
			if (num9 > 0)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num6 = num8 + num6;
					num9--;
				}
				while (num9 > 0);
			}
			double num10 = num6 / num3;
			num6 = num10;
			int num11 = optInTimePeriod - 1;
			if (num11 > 0)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num6 = num10 + num6;
					num11--;
				}
				while (num11 > 0);
			}
			double num12 = num6 / num3;
			num6 = num12;
			int num13 = optInTimePeriod - 1;
			if (num13 > 0)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num6 = num12 + num6;
					num13--;
				}
				while (num13 > 0);
			}
			double num14 = num6 / num3;
			num6 = num14;
			int num15 = optInTimePeriod - 1;
			if (num15 > 0)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num6 = num14 + num6;
					num15--;
				}
				while (num15 > 0);
			}
			double num16 = num6 / num3;
			num6 = num16;
			int num17 = optInTimePeriod - 1;
			if (num17 > 0)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num6 = num16 + num6;
					num17--;
				}
				while (num17 > 0);
			}
			double num18 = num6 / num3;
			if (num2 <= startIdx)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num18 = num18 * num5 + num16 * num4;
				}
				while (num2 <= startIdx);
			}
			double num19 = optInVFactor;
			num6 = num19 * num19;
			double num20 = 0.0 - num6 * optInVFactor;
			double num21 = (num6 - num20) * 3.0;
			double num22 = num6 * -6.0 - (optInVFactor - num20) * 3.0;
			double num23 = optInVFactor * 3.0 + 1.0 - num20 + num6 * 3.0;
			outReal[0] = num20 * num18 + num21 * num16 + num22 * num14 + num23 * num12;
			int num24 = 1;
			if (num2 <= endIdx)
			{
				do
				{
					num8 = (double)inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num18 = num18 * num5 + num16 * num4;
					outReal[num24] = num20 * num18 + num21 * num16 + num22 * num14 + num23 * num12;
					num24++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num24;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode T3(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, double optInVFactor, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (optInVFactor == -4E+37)
			{
				optInVFactor = 0.7;
			}
			else if (optInVFactor < 0.0 || optInVFactor > 1.0)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = (int)Globals.unstablePeriod[22] + optInTimePeriod * 6 - 6;
			if (startIdx <= num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num2 = startIdx - num;
			double num3 = optInTimePeriod;
			double num4 = 2.0 / (num3 + 1.0);
			double num5 = 1.0 - num4;
			double num6 = inReal[num2];
			num2++;
			int num7 = optInTimePeriod - 1;
			if (num7 > 0)
			{
				do
				{
					num6 = inReal[num2] + num6;
					num2++;
					num7--;
				}
				while (num7 > 0);
			}
			double num8 = num6 / num3;
			num6 = num8;
			int num9 = optInTimePeriod - 1;
			if (num9 > 0)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num6 = num8 + num6;
					num9--;
				}
				while (num9 > 0);
			}
			double num10 = num6 / num3;
			num6 = num10;
			int num11 = optInTimePeriod - 1;
			if (num11 > 0)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num6 = num10 + num6;
					num11--;
				}
				while (num11 > 0);
			}
			double num12 = num6 / num3;
			num6 = num12;
			int num13 = optInTimePeriod - 1;
			if (num13 > 0)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num6 = num12 + num6;
					num13--;
				}
				while (num13 > 0);
			}
			double num14 = num6 / num3;
			num6 = num14;
			int num15 = optInTimePeriod - 1;
			if (num15 > 0)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num6 = num14 + num6;
					num15--;
				}
				while (num15 > 0);
			}
			double num16 = num6 / num3;
			num6 = num16;
			int num17 = optInTimePeriod - 1;
			if (num17 > 0)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num6 = num16 + num6;
					num17--;
				}
				while (num17 > 0);
			}
			double num18 = num6 / num3;
			if (num2 <= startIdx)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num18 = num18 * num5 + num16 * num4;
				}
				while (num2 <= startIdx);
			}
			double num19 = optInVFactor;
			num6 = num19 * num19;
			double num20 = 0.0 - num6 * optInVFactor;
			double num21 = (num6 - num20) * 3.0;
			double num22 = num6 * -6.0 - (optInVFactor - num20) * 3.0;
			double num23 = optInVFactor * 3.0 + 1.0 - num20 + num6 * 3.0;
			outReal[0] = num20 * num18 + num21 * num16 + num22 * num14 + num23 * num12;
			int num24 = 1;
			if (num2 <= endIdx)
			{
				do
				{
					num8 = inReal[num2] * num4 + num8 * num5;
					num2++;
					num10 = num10 * num5 + num8 * num4;
					num12 = num12 * num5 + num10 * num4;
					num14 = num14 * num5 + num12 * num4;
					num16 = num16 * num5 + num14 * num4;
					num18 = num18 * num5 + num16 * num4;
					outReal[num24] = num20 * num18 + num21 * num16 + num22 * num14 + num23 * num12;
					num24++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num24;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TanLookback()
	{
		return 0;
	}

	public static RetCode Tan(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Tan(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Tan(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Tan(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TanhLookback()
	{
		return 0;
	}

	public static RetCode Tanh(int startIdx, int endIdx, float[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Tanh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Tanh(int startIdx, int endIdx, double[] inReal, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = 0;
			if (startIdx <= endIdx)
			{
				int num2 = startIdx;
				do
				{
					outReal[num] = Math.Tanh(inReal[num2]);
					num++;
					num2++;
				}
				while (num2 <= endIdx);
			}
			outNBElement = num;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TemaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return EmaLookback(optInTimePeriod) * 3;
	}

	public static RetCode Tema(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outNBElement = 0;
			outBegIdx = 0;
			int num = EmaLookback(optInTimePeriod);
			int num2 = num * 3;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			double[] array = new double[endIdx + (num2 - startIdx) + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - (num << 1), endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				double[] array2 = new double[outNbElement];
				if (array2 == null)
				{
					return RetCode.AllocErr;
				}
				int outBegIdx3;
				int outNbElement2;
				RetCode retCode2 = TA_INT_EMA(0, outNbElement - 1, array, optInTimePeriod, optInK_, out outBegIdx3, out outNbElement2, array2);
				if (retCode2 == RetCode.Success && outNbElement2 != 0)
				{
					int outBegIdx4;
					int outNbElement3;
					RetCode retCode3 = TA_INT_EMA(0, outNbElement2 - 1, array2, optInTimePeriod, optInK_, out outBegIdx4, out outNbElement3, outReal);
					if (retCode3 == RetCode.Success && outNbElement3 != 0)
					{
						int num3 = outBegIdx4 + outBegIdx3;
						int num4 = outBegIdx4;
						outBegIdx = num3 + outBegIdx2;
						int num5 = 0;
						if (0 < outNbElement3)
						{
							do
							{
								outReal[num5] = array[num3] * 3.0 - array2[num4] * 3.0 + outReal[num5];
								num4++;
								num3++;
								num5++;
							}
							while (num5 < outNbElement3);
						}
						outNBElement = num5;
						return RetCode.Success;
					}
					return retCode3;
				}
				return retCode2;
			}
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Tema(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			outNBElement = 0;
			outBegIdx = 0;
			int num = EmaLookback(optInTimePeriod);
			int num2 = num * 3;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				return RetCode.Success;
			}
			double[] array = new double[endIdx + (num2 - startIdx) + 1];
			if (array == null)
			{
				return RetCode.AllocErr;
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - (num << 1), endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				double[] array2 = new double[outNbElement];
				if (array2 == null)
				{
					return RetCode.AllocErr;
				}
				int outBegIdx3;
				int outNbElement2;
				RetCode retCode2 = TA_INT_EMA(0, outNbElement - 1, array, optInTimePeriod, optInK_, out outBegIdx3, out outNbElement2, array2);
				if (retCode2 == RetCode.Success && outNbElement2 != 0)
				{
					int outBegIdx4;
					int outNbElement3;
					RetCode retCode3 = TA_INT_EMA(0, outNbElement2 - 1, array2, optInTimePeriod, optInK_, out outBegIdx4, out outNbElement3, outReal);
					if (retCode3 == RetCode.Success && outNbElement3 != 0)
					{
						int num3 = outBegIdx4 + outBegIdx3;
						int num4 = outBegIdx4;
						outBegIdx = num3 + outBegIdx2;
						int num5 = 0;
						if (0 < outNbElement3)
						{
							do
							{
								outReal[num5] = array[num3] * 3.0 - array2[num4] * 3.0 + outReal[num5];
								num4++;
								num3++;
								num5++;
							}
							while (num5 < outNbElement3);
						}
						outNBElement = num5;
						return RetCode.Success;
					}
					return retCode3;
				}
				return retCode2;
			}
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TrueRangeLookback()
	{
		return 1;
	}

	public static RetCode TrueRange(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx;
				do
				{
					double num3 = inLow[num2];
					double num4 = inHigh[num2];
					double num5 = inClose[num2 - 1];
					double num6 = num4 - num3;
					double num7 = Math.Abs(num5 - num4);
					if (num7 > num6)
					{
						num6 = num7;
					}
					double num8 = Math.Abs(num5 - num3);
					if (num8 > num6)
					{
						num6 = num8;
					}
					outReal[num] = num6;
					num++;
					num2++;
				}
				while (num2 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode TrueRange(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				if (startIdx < 1)
				{
					startIdx = 1;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num = 0;
				int num2 = startIdx;
				do
				{
					double num3 = inLow[num2];
					double num4 = inHigh[num2];
					double num5 = inClose[num2 - 1];
					double num6 = num4 - num3;
					double num7 = Math.Abs(num5 - num4);
					if (num7 > num6)
					{
						num6 = num7;
					}
					double num8 = Math.Abs(num5 - num3);
					if (num8 > num6)
					{
						num6 = num8;
					}
					outReal[num] = num6;
					num++;
					num2++;
				}
				while (num2 <= endIdx);
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TrimaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Trima(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num13;
			if (optInTimePeriod % 2 == 1)
			{
				int num2 = optInTimePeriod >> 1;
				double num3 = 1.0 / (double)((num2 + 1) * (num2 + 1));
				int num4 = startIdx - num;
				int num5 = num4 + num2;
				int num6 = num5 + num2;
				double num7 = 0.0;
				double num8 = 0.0;
				int num9 = num5;
				if (num5 >= num4)
				{
					do
					{
						num8 = (double)inReal[num9] + num8;
						num7 = num8 + num7;
						num9--;
					}
					while (num9 >= num4);
				}
				double num10 = 0.0;
				num5++;
				int num11 = num5;
				if (num5 <= num6)
				{
					do
					{
						num10 = (double)inReal[num11] + num10;
						num7 = num10 + num7;
						num11++;
					}
					while (num11 <= num6);
				}
				double num12 = inReal[num4];
				num4++;
				outReal[0] = num7 * num3;
				num13 = 1;
				num6++;
				if (num6 <= endIdx)
				{
					do
					{
						num7 -= num8;
						num8 -= num12;
						num12 = inReal[num5];
						num5++;
						num8 = num12 + num8;
						num7 = num10 + num7;
						num10 -= num12;
						num12 = inReal[num6];
						num6++;
						num10 += num12;
						num7 = num12 + num7;
						num12 = inReal[num4];
						num4++;
						outReal[num13] = num7 * num3;
						num13++;
					}
					while (num6 <= endIdx);
				}
			}
			else
			{
				int num14 = optInTimePeriod >> 1;
				double num3 = 1.0 / (double)((num14 + 1) * num14);
				int num4 = startIdx - num;
				int num5 = num14 + num4 - 1;
				int num6 = num5 + num14;
				double num7 = 0.0;
				double num8 = 0.0;
				int num15 = num5;
				if (num5 >= num4)
				{
					do
					{
						num8 = (double)inReal[num15] + num8;
						num7 = num8 + num7;
						num15--;
					}
					while (num15 >= num4);
				}
				double num10 = 0.0;
				num5++;
				int num11 = num5;
				if (num5 <= num6)
				{
					do
					{
						num10 = (double)inReal[num11] + num10;
						num7 = num10 + num7;
						num11++;
					}
					while (num11 <= num6);
				}
				double num12 = inReal[num4];
				num4++;
				outReal[0] = num7 * num3;
				num13 = 1;
				num6++;
				if (num6 <= endIdx)
				{
					do
					{
						num7 -= num8;
						num8 -= num12;
						num12 = inReal[num5];
						num5++;
						num8 = num12 + num8;
						num10 -= num12;
						num7 = num10 + num7;
						num12 = inReal[num6];
						num6++;
						num10 += num12;
						num7 = num12 + num7;
						num12 = inReal[num4];
						num4++;
						outReal[num13] = num7 * num3;
						num13++;
					}
					while (num6 <= endIdx);
				}
			}
			outNBElement = num13;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Trima(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			int num13;
			if (optInTimePeriod % 2 == 1)
			{
				int num2 = optInTimePeriod >> 1;
				double num3 = 1.0 / (double)((num2 + 1) * (num2 + 1));
				int num4 = startIdx - num;
				int num5 = num4 + num2;
				int num6 = num5 + num2;
				double num7 = 0.0;
				double num8 = 0.0;
				int num9 = num5;
				if (num5 >= num4)
				{
					do
					{
						num8 = inReal[num9] + num8;
						num7 = num8 + num7;
						num9--;
					}
					while (num9 >= num4);
				}
				double num10 = 0.0;
				num5++;
				int num11 = num5;
				if (num5 <= num6)
				{
					do
					{
						num10 = inReal[num11] + num10;
						num7 = num10 + num7;
						num11++;
					}
					while (num11 <= num6);
				}
				double num12 = inReal[num4];
				num4++;
				outReal[0] = num7 * num3;
				num13 = 1;
				num6++;
				if (num6 <= endIdx)
				{
					do
					{
						num7 -= num8;
						num8 -= num12;
						num12 = inReal[num5];
						num5++;
						num8 = num12 + num8;
						num7 = num10 + num7;
						num10 -= num12;
						num12 = inReal[num6];
						num6++;
						num10 += num12;
						num7 = num12 + num7;
						num12 = inReal[num4];
						num4++;
						outReal[num13] = num7 * num3;
						num13++;
					}
					while (num6 <= endIdx);
				}
			}
			else
			{
				int num14 = optInTimePeriod >> 1;
				double num3 = 1.0 / (double)((num14 + 1) * num14);
				int num4 = startIdx - num;
				int num5 = num14 + num4 - 1;
				int num6 = num5 + num14;
				double num7 = 0.0;
				double num8 = 0.0;
				int num15 = num5;
				if (num5 >= num4)
				{
					do
					{
						num8 = inReal[num15] + num8;
						num7 = num8 + num7;
						num15--;
					}
					while (num15 >= num4);
				}
				double num10 = 0.0;
				num5++;
				int num11 = num5;
				if (num5 <= num6)
				{
					do
					{
						num10 = inReal[num11] + num10;
						num7 = num10 + num7;
						num11++;
					}
					while (num11 <= num6);
				}
				double num12 = inReal[num4];
				num4++;
				outReal[0] = num7 * num3;
				num13 = 1;
				num6++;
				if (num6 <= endIdx)
				{
					do
					{
						num7 -= num8;
						num8 -= num12;
						num12 = inReal[num5];
						num5++;
						num8 = num12 + num8;
						num10 -= num12;
						num7 = num10 + num7;
						num12 = inReal[num6];
						num6++;
						num10 += num12;
						num7 = num12 + num7;
						num12 = inReal[num4];
						num4++;
						outReal[num13] = num7 * num3;
						num13++;
					}
					while (num6 <= endIdx);
				}
			}
			outNBElement = num13;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TrixLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		int num = EmaLookback(optInTimePeriod);
		return RocRLookback(1) + num * 3;
	}

	public static RetCode Trix(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = EmaLookback(optInTimePeriod);
			int num2 = RocRLookback(1) + num * 3;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = endIdx + (num2 - startIdx) + 1;
			double[] array = new double[num3];
			if (array == null)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.AllocErr;
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - num2, endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				num3 = -1 - num + num3;
				RetCode retCode2 = TA_INT_EMA(0, num3, array, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
				if (retCode2 == RetCode.Success && outNbElement != 0)
				{
					num3 -= num;
					RetCode retCode3 = TA_INT_EMA(0, num3, array, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
					if (retCode3 == RetCode.Success && outNbElement != 0)
					{
						RetCode retCode4 = Roc(0, num3 - num, array, 1, out outBegIdx2, out outNBElement, outReal);
						if (retCode4 == RetCode.Success && outNBElement != 0)
						{
							return RetCode.Success;
						}
						outNBElement = 0;
						outBegIdx = 0;
						return retCode4;
					}
					outNBElement = 0;
					outBegIdx = 0;
					return retCode3;
				}
				outNBElement = 0;
				outBegIdx = 0;
				return retCode2;
			}
			outNBElement = 0;
			outBegIdx = 0;
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Trix(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = EmaLookback(optInTimePeriod);
			int num2 = RocRLookback(1) + num * 3;
			if (startIdx < num2)
			{
				startIdx = num2;
			}
			if (startIdx > endIdx)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.Success;
			}
			outBegIdx = startIdx;
			int num3 = endIdx + (num2 - startIdx) + 1;
			double[] array = new double[num3];
			if (array == null)
			{
				outNBElement = 0;
				outBegIdx = 0;
				return RetCode.AllocErr;
			}
			double optInK_ = 2.0 / (double)(optInTimePeriod + 1);
			int outBegIdx2;
			int outNbElement;
			RetCode retCode = TA_INT_EMA(startIdx - num2, endIdx, inReal, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
			if (retCode == RetCode.Success && outNbElement != 0)
			{
				num3 = -1 - num + num3;
				RetCode retCode2 = TA_INT_EMA(0, num3, array, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
				if (retCode2 == RetCode.Success && outNbElement != 0)
				{
					num3 -= num;
					RetCode retCode3 = TA_INT_EMA(0, num3, array, optInTimePeriod, optInK_, out outBegIdx2, out outNbElement, array);
					if (retCode3 == RetCode.Success && outNbElement != 0)
					{
						RetCode retCode4 = Roc(0, num3 - num, array, 1, out outBegIdx2, out outNBElement, outReal);
						if (retCode4 == RetCode.Success && outNBElement != 0)
						{
							return RetCode.Success;
						}
						outNBElement = 0;
						outBegIdx = 0;
						return retCode4;
					}
					outNBElement = 0;
					outBegIdx = 0;
					return retCode3;
				}
				outNBElement = 0;
				outBegIdx = 0;
				return retCode2;
			}
			outNBElement = 0;
			outBegIdx = 0;
			return retCode;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int TsfLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Tsf(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			double num14 = (num6 * num8 - num9 * num5) / num7;
			outReal[num3] = (num9 - num14 * num5) / num6 + num6 * num14;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static RetCode Tsf(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		int num2;
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod;
			if (optInTimePeriod == int.MinValue)
			{
				num = 14;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				num2 = -1;
				goto IL_0061;
			}
			num2 = num - 1;
			goto IL_0061;
		}
		return RetCode.OutOfRangeEndIndex;
		IL_0061:
		if (startIdx < num2)
		{
			startIdx = num2;
		}
		if (startIdx > endIdx)
		{
			outBegIdx = 0;
			outNBElement = 0;
			return RetCode.Success;
		}
		int num3 = 0;
		int num4 = startIdx;
		double num5 = (double)((optInTimePeriod - 1) * optInTimePeriod) * 0.5;
		double num6 = optInTimePeriod;
		double num7 = num5 * num5 - (double)((optInTimePeriod * 2 - 1) * (optInTimePeriod - 1) * optInTimePeriod / 6) * num6;
		do
		{
			double num8 = 0.0;
			double num9 = 0.0;
			int num10 = optInTimePeriod - 1;
			if (optInTimePeriod != 0)
			{
				int num11 = num4 - num10;
				int num13;
				do
				{
					double num12 = inReal[num11];
					num9 = num12 + num9;
					num8 = (double)num10 * num12 + num8;
					num13 = num10;
					num10--;
					num11++;
				}
				while (num13 != 0);
			}
			double num14 = (num6 * num8 - num9 * num5) / num7;
			outReal[num3] = (num9 - num14 * num5) / num6 + num6 * num14;
			num3++;
			num4++;
		}
		while (num4 <= endIdx);
		outBegIdx = startIdx;
		outNBElement = num3;
		return RetCode.Success;
	}

	public static int TypPriceLookback()
	{
		return 0;
	}

	public static RetCode TypPrice(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = ((double)inHigh[num2] + (double)inLow[num2] + (double)inClose[num2]) / 3.0;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode TypPrice(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = (inHigh[num2] + inLow[num2] + inClose[num2]) / 3.0;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int UltOscLookback(int optInTimePeriod1, int optInTimePeriod2, int optInTimePeriod3)
	{
		if (optInTimePeriod1 == int.MinValue)
		{
			optInTimePeriod1 = 7;
		}
		else if ((uint)(optInTimePeriod1 - 1) > 99999u)
		{
			return -1;
		}
		if (optInTimePeriod2 == int.MinValue)
		{
			optInTimePeriod2 = 14;
		}
		else if ((uint)(optInTimePeriod2 - 1) > 99999u)
		{
			return -1;
		}
		if (optInTimePeriod3 == int.MinValue)
		{
			optInTimePeriod3 = 28;
		}
		else if ((uint)(optInTimePeriod3 - 1) > 99999u)
		{
			return -1;
		}
		int optInTimePeriod4 = ((((optInTimePeriod1 <= optInTimePeriod2) ? optInTimePeriod2 : optInTimePeriod1) <= optInTimePeriod3) ? optInTimePeriod3 : ((optInTimePeriod1 <= optInTimePeriod2) ? optInTimePeriod2 : optInTimePeriod1));
		return SmaLookback(optInTimePeriod4) + 1;
	}

	public static RetCode UltOsc(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod1, int optInTimePeriod2, int optInTimePeriod3, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int[] array = new int[3];
		int[] array2 = new int[3];
		int[] array3 = new int[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod1 == int.MinValue)
				{
					optInTimePeriod1 = 7;
				}
				else if ((uint)(optInTimePeriod1 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod2 == int.MinValue)
				{
					optInTimePeriod2 = 14;
				}
				else if ((uint)(optInTimePeriod2 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod3 == int.MinValue)
				{
					optInTimePeriod3 = 28;
				}
				else if ((uint)(optInTimePeriod3 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				array2[0] = optInTimePeriod1;
				array2[1] = optInTimePeriod2;
				array2[2] = optInTimePeriod3;
				array[0] = 0;
				array[1] = 0;
				array[2] = 0;
				int num = 0;
				do
				{
					int num2 = 0;
					int num3 = 0;
					int num4 = 0;
					do
					{
						if (array[num4] == 0)
						{
							int num5 = array2[num4];
							if (num5 > num2)
							{
								num2 = num5;
								num3 = num4;
							}
						}
						num4++;
					}
					while (num4 < 3);
					array[num3] = 1;
					array3[num] = num2;
					num++;
				}
				while (num < 3);
				optInTimePeriod1 = array3[2];
				optInTimePeriod2 = array3[1];
				optInTimePeriod3 = array3[0];
				int num6 = UltOscLookback(optInTimePeriod1, optInTimePeriod2, optInTimePeriod3);
				if (startIdx < num6)
				{
					startIdx = num6;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				double num7 = 0.0;
				double num8 = 0.0;
				int num9 = startIdx - optInTimePeriod1 + 1;
				if (num9 < startIdx)
				{
					do
					{
						double num10 = inLow[num9];
						double num11 = inHigh[num9];
						double num12 = inClose[num9 - 1];
						double num13 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = (double)inClose[num9] - num13;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num7 = num14 + num7;
						num8 = num15 + num8;
						num9++;
					}
					while (num9 < startIdx);
				}
				double num17 = 0.0;
				double num18 = 0.0;
				int num19 = startIdx - optInTimePeriod2 + 1;
				int num20 = num19;
				if (num20 < startIdx)
				{
					do
					{
						double num10 = inLow[num20];
						double num11 = inHigh[num20];
						double num12 = inClose[num20 - 1];
						double num21 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = (double)inClose[num20] - num21;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num17 += num14;
						num18 += num15;
						num20++;
					}
					while (num20 < startIdx);
				}
				double num22 = 0.0;
				double num23 = 0.0;
				int num24 = startIdx - optInTimePeriod3 + 1;
				if (num24 < startIdx)
				{
					do
					{
						double num10 = inLow[num24];
						double num11 = inHigh[num24];
						double num12 = inClose[num24 - 1];
						double num25 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = (double)inClose[num24] - num25;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num22 += num14;
						num23 += num15;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num26 = 0;
				int num27 = num19;
				int num28 = num27 - optInTimePeriod1 + optInTimePeriod2;
				int num29 = optInTimePeriod1 - optInTimePeriod3;
				do
				{
					int num30 = optInTimePeriod1 - 1 + num28;
					double num10 = inLow[num30];
					double num11 = inHigh[num30];
					double num12 = inClose[num28 - 1 + (optInTimePeriod1 - 1)];
					double num31 = ((!(num10 < num12)) ? num12 : num10);
					double num14 = (double)inClose[num30] - num31;
					double num15 = num11 - num10;
					double num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num7 = num14 + num7;
					num17 += num14;
					num22 += num14;
					num8 = num15 + num8;
					num18 += num15;
					num23 += num15;
					double num32 = 0.0;
					if (!(-1E-08 < num8) || !(num8 < 1E-08))
					{
						num32 = num7 / num8 * 4.0 + 0.0;
					}
					if (!(-1E-08 < num18) || !(num18 < 1E-08))
					{
						num32 = num17 / num18 * 2.0 + num32;
					}
					if (!(-1E-08 < num23) || !(num23 < 1E-08))
					{
						num32 = num22 / num23 + num32;
					}
					num10 = inLow[num28];
					num11 = inHigh[num28];
					num12 = inClose[num28 - 1];
					double num33 = ((!(num10 < num12)) ? num12 : num10);
					num14 = (double)inClose[num28] - num33;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num7 -= num14;
					num8 -= num15;
					num10 = inLow[num27];
					num11 = inHigh[num27];
					num12 = inClose[num27 - 1];
					double num34 = ((!(num10 < num12)) ? num12 : num10);
					num14 = (double)inClose[num27] - num34;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num17 -= num14;
					num18 -= num15;
					num10 = inLow[num28 + num29];
					num11 = inHigh[num28 + num29];
					num12 = inClose[num29 + (num28 - 1)];
					double num35 = ((!(num10 < num12)) ? num12 : num10);
					num14 = (double)inClose[num28 + num29] - num35;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num22 -= num14;
					num23 -= num15;
					outReal[num26] = num32 / 7.0 * 100.0;
					num26++;
					num27++;
					num28++;
				}
				while (num28 + (optInTimePeriod1 - 1) <= endIdx);
				outNBElement = num26;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode UltOsc(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod1, int optInTimePeriod2, int optInTimePeriod3, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		int[] array = new int[3];
		int[] array2 = new int[3];
		int[] array3 = new int[3];
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod1 == int.MinValue)
				{
					optInTimePeriod1 = 7;
				}
				else if ((uint)(optInTimePeriod1 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod2 == int.MinValue)
				{
					optInTimePeriod2 = 14;
				}
				else if ((uint)(optInTimePeriod2 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (optInTimePeriod3 == int.MinValue)
				{
					optInTimePeriod3 = 28;
				}
				else if ((uint)(optInTimePeriod3 - 1) > 99999u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				outBegIdx = 0;
				outNBElement = 0;
				array2[0] = optInTimePeriod1;
				array2[1] = optInTimePeriod2;
				array2[2] = optInTimePeriod3;
				array[0] = 0;
				array[1] = 0;
				array[2] = 0;
				int num = 0;
				do
				{
					int num2 = 0;
					int num3 = 0;
					int num4 = 0;
					do
					{
						if (array[num4] == 0)
						{
							int num5 = array2[num4];
							if (num5 > num2)
							{
								num2 = num5;
								num3 = num4;
							}
						}
						num4++;
					}
					while (num4 < 3);
					array[num3] = 1;
					array3[num] = num2;
					num++;
				}
				while (num < 3);
				optInTimePeriod1 = array3[2];
				optInTimePeriod2 = array3[1];
				optInTimePeriod3 = array3[0];
				int num6 = UltOscLookback(optInTimePeriod1, optInTimePeriod2, optInTimePeriod3);
				if (startIdx < num6)
				{
					startIdx = num6;
				}
				if (startIdx > endIdx)
				{
					return RetCode.Success;
				}
				double num7 = 0.0;
				double num8 = 0.0;
				int num9 = startIdx - optInTimePeriod1 + 1;
				if (num9 < startIdx)
				{
					do
					{
						double num10 = inLow[num9];
						double num11 = inHigh[num9];
						double num12 = inClose[num9 - 1];
						double num13 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = inClose[num9] - num13;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num7 = num14 + num7;
						num8 = num15 + num8;
						num9++;
					}
					while (num9 < startIdx);
				}
				double num17 = 0.0;
				double num18 = 0.0;
				int num19 = startIdx - optInTimePeriod2 + 1;
				int num20 = num19;
				if (num20 < startIdx)
				{
					do
					{
						double num10 = inLow[num20];
						double num11 = inHigh[num20];
						double num12 = inClose[num20 - 1];
						double num21 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = inClose[num20] - num21;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num17 += num14;
						num18 += num15;
						num20++;
					}
					while (num20 < startIdx);
				}
				double num22 = 0.0;
				double num23 = 0.0;
				int num24 = startIdx - optInTimePeriod3 + 1;
				if (num24 < startIdx)
				{
					do
					{
						double num10 = inLow[num24];
						double num11 = inHigh[num24];
						double num12 = inClose[num24 - 1];
						double num25 = ((!(num10 < num12)) ? num12 : num10);
						double num14 = inClose[num24] - num25;
						double num15 = num11 - num10;
						double num16 = Math.Abs(num12 - num11);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num16 = Math.Abs(num12 - num10);
						if (num16 > num15)
						{
							num15 = num16;
						}
						num22 += num14;
						num23 += num15;
						num24++;
					}
					while (num24 < startIdx);
				}
				int num26 = 0;
				int num27 = num19;
				int num28 = num27 - optInTimePeriod1 + optInTimePeriod2;
				int num29 = optInTimePeriod1 - optInTimePeriod3;
				do
				{
					int num30 = num28 + (optInTimePeriod1 - 1);
					double num10 = inLow[num30];
					double num11 = inHigh[num30];
					double num12 = inClose[optInTimePeriod1 - 1 + (num28 - 1)];
					double num31 = ((!(num10 < num12)) ? num12 : num10);
					double num14 = inClose[num30] - num31;
					double num15 = num11 - num10;
					double num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num7 = num14 + num7;
					num17 += num14;
					num22 += num14;
					num8 = num15 + num8;
					num18 += num15;
					num23 += num15;
					double num32 = 0.0;
					if (!(-1E-08 < num8) || !(num8 < 1E-08))
					{
						num32 = num7 / num8 * 4.0 + 0.0;
					}
					if (!(-1E-08 < num18) || !(num18 < 1E-08))
					{
						num32 = num17 / num18 * 2.0 + num32;
					}
					if (!(-1E-08 < num23) || !(num23 < 1E-08))
					{
						num32 = num22 / num23 + num32;
					}
					num10 = inLow[num28];
					num11 = inHigh[num28];
					num12 = inClose[num28 - 1];
					double num33 = ((!(num10 < num12)) ? num12 : num10);
					num14 = inClose[num28] - num33;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num7 -= num14;
					num8 -= num15;
					num10 = inLow[num27];
					num11 = inHigh[num27];
					num12 = inClose[num27 - 1];
					double num34 = ((!(num10 < num12)) ? num12 : num10);
					num14 = inClose[num27] - num34;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num17 -= num14;
					num18 -= num15;
					num10 = inLow[num28 + num29];
					num11 = inHigh[num28 + num29];
					num12 = inClose[num29 + (num28 - 1)];
					double num35 = ((!(num10 < num12)) ? num12 : num10);
					num14 = inClose[num28 + num29] - num35;
					num15 = num11 - num10;
					num16 = Math.Abs(num12 - num11);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num16 = Math.Abs(num12 - num10);
					if (num16 > num15)
					{
						num15 = num16;
					}
					num22 -= num14;
					num23 -= num15;
					outReal[num26] = num32 / 7.0 * 100.0;
					num26++;
					num27++;
					num28++;
				}
				while (optInTimePeriod1 - 1 + num28 <= endIdx);
				outNBElement = num26;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int VarianceLookback(int optInTimePeriod, double optInNbDev)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 5;
		}
		else if ((uint)(optInTimePeriod - 1) > 99999u)
		{
			return -1;
		}
		if (optInNbDev == -4E+37 || (!(optInNbDev < -3E+37) && !(optInNbDev > 3E+37)))
		{
			return optInTimePeriod - 1;
		}
		return -1;
	}

	public static RetCode Variance(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, double optInNbDev, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDev == -4E+37 || (!(optInNbDev < -3E+37) && !(optInNbDev > 3E+37)))
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				return TA_INT_VAR(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Variance(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, double optInNbDev, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 5;
			}
			else if ((uint)(optInTimePeriod - 1) > 99999u)
			{
				return RetCode.BadParam;
			}
			if (optInNbDev == -4E+37 || (!(optInNbDev < -3E+37) && !(optInNbDev > 3E+37)))
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				return TA_INT_VAR(startIdx, endIdx, inReal, optInTimePeriod, out outBegIdx, out outNBElement, outReal);
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int WclPriceLookback()
	{
		return 0;
	}

	public static RetCode WclPrice(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = ((double)inHigh[num2] + (double)inLow[num2] + (double)inClose[num2] * 2.0) * 0.25;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode WclPrice(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = 0;
				int num2 = startIdx;
				if (startIdx <= endIdx)
				{
					do
					{
						outReal[num] = (inHigh[num2] + inLow[num2] + inClose[num2] * 2.0) * 0.25;
						num++;
						num2++;
					}
					while (num2 <= endIdx);
				}
				outNBElement = num;
				outBegIdx = startIdx;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int WillRLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 14;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode WillR(int startIdx, int endIdx, float[] inHigh, float[] inLow, float[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				int num3 = startIdx;
				int num4 = startIdx - num;
				int num5 = -1;
				int num6 = -1;
				double num7 = 0.0;
				double num8 = 0.0;
				double num9 = 0.0;
				int num10 = num4;
				do
				{
					double num11 = inLow[num3];
					if (num6 < num10)
					{
						num6 = num10;
						num7 = inLow[num10];
						int num12 = num10 + 1;
						if (num10 + 1 <= num3)
						{
							do
							{
								num11 = inLow[num12];
								if (num11 < num7)
								{
									num6 = num12;
									num7 = num11;
								}
								num12++;
							}
							while (num12 <= num3);
						}
						num9 = (num8 - num7) / -100.0;
					}
					else if (num11 <= num7)
					{
						num6 = num3;
						num7 = num11;
						num9 = (num8 - num11) / -100.0;
					}
					num11 = inHigh[num3];
					if (num5 < num10)
					{
						num5 = num10;
						num8 = inHigh[num10];
						int num13 = num10 + 1;
						if (num10 + 1 <= num3)
						{
							do
							{
								num11 = inHigh[num13];
								if (num11 > num8)
								{
									num5 = num13;
									num8 = num11;
								}
								num13++;
							}
							while (num13 <= num3);
						}
						num9 = (num8 - num7) / -100.0;
					}
					else if (num11 >= num8)
					{
						num5 = num3;
						num8 = num11;
						num9 = (num11 - num7) / -100.0;
					}
					if (num9 != 0.0)
					{
						outReal[num2] = (num8 - (double)inClose[num3]) / num9;
						num2++;
					}
					else
					{
						outReal[num2] = 0.0;
						num2++;
					}
					num3++;
					num10++;
				}
				while (num3 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num2;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode WillR(int startIdx, int endIdx, double[] inHigh, double[] inLow, double[] inClose, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inHigh != null && inLow != null && inClose != null)
			{
				if (optInTimePeriod == int.MinValue)
				{
					optInTimePeriod = 14;
				}
				else if ((uint)(optInTimePeriod - 2) > 99998u)
				{
					return RetCode.BadParam;
				}
				if (outReal == null)
				{
					return RetCode.BadParam;
				}
				int num = optInTimePeriod - 1;
				if (startIdx < num)
				{
					startIdx = num;
				}
				if (startIdx > endIdx)
				{
					outBegIdx = 0;
					outNBElement = 0;
					return RetCode.Success;
				}
				int num2 = 0;
				int num3 = startIdx;
				int num4 = startIdx - num;
				int num5 = -1;
				int num6 = -1;
				double num7 = 0.0;
				double num8 = 0.0;
				double num9 = 0.0;
				int num10 = num4;
				do
				{
					double num11 = inLow[num3];
					if (num6 < num10)
					{
						num6 = num10;
						num7 = inLow[num10];
						int num12 = num10 + 1;
						if (num10 + 1 <= num3)
						{
							do
							{
								num11 = inLow[num12];
								if (num11 < num7)
								{
									num6 = num12;
									num7 = num11;
								}
								num12++;
							}
							while (num12 <= num3);
						}
						num9 = (num8 - num7) / -100.0;
					}
					else if (num11 <= num7)
					{
						num6 = num3;
						num7 = num11;
						num9 = (num8 - num11) / -100.0;
					}
					num11 = inHigh[num3];
					if (num5 < num10)
					{
						num5 = num10;
						num8 = inHigh[num10];
						int num13 = num10 + 1;
						if (num10 + 1 <= num3)
						{
							do
							{
								num11 = inHigh[num13];
								if (num11 > num8)
								{
									num5 = num13;
									num8 = num11;
								}
								num13++;
							}
							while (num13 <= num3);
						}
						num9 = (num8 - num7) / -100.0;
					}
					else if (num11 >= num8)
					{
						num5 = num3;
						num8 = num11;
						num9 = (num11 - num7) / -100.0;
					}
					if (num9 != 0.0)
					{
						outReal[num2] = (num8 - inClose[num3]) / num9;
						num2++;
					}
					else
					{
						outReal[num2] = 0.0;
						num2++;
					}
					num3++;
					num10++;
				}
				while (num3 <= endIdx);
				outBegIdx = startIdx;
				outNBElement = num2;
				return RetCode.Success;
			}
			return RetCode.BadParam;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static int WmaLookback(int optInTimePeriod)
	{
		if (optInTimePeriod == int.MinValue)
		{
			optInTimePeriod = 30;
		}
		else if ((uint)(optInTimePeriod - 2) > 99998u)
		{
			return -1;
		}
		return optInTimePeriod - 1;
	}

	public static RetCode Wma(int startIdx, int endIdx, float[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num2 = (optInTimePeriod + 1) * optInTimePeriod >> 1;
			int num3 = 0;
			int num4 = startIdx - num;
			int num5 = num4;
			double num6 = 0.0;
			double num7 = 0.0;
			int num8 = num5;
			int num9 = 1;
			if (num5 < startIdx)
			{
				do
				{
					double num10 = inReal[num8];
					num8++;
					num6 = num10 + num6;
					num7 = (double)num9 * num10 + num7;
					num9++;
				}
				while (num8 < startIdx);
			}
			double num11 = 0.0;
			if (num8 <= endIdx)
			{
				double num12 = optInTimePeriod;
				double num13 = num2;
				do
				{
					double num10 = inReal[num8];
					num8++;
					num6 = num10 + num6 - num11;
					num7 = num12 * num10 + num7;
					num11 = inReal[num4 + num3];
					outReal[num3] = num7 / num13;
					num3++;
					num7 -= num6;
				}
				while (num8 <= endIdx);
			}
			outNBElement = num3;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}

	public static RetCode Wma(int startIdx, int endIdx, double[] inReal, int optInTimePeriod, out int outBegIdx, out int outNBElement, double[] outReal)
	{
		if (startIdx < 0)
		{
			return RetCode.OutOfRangeStartIndex;
		}
		if (endIdx >= 0 && endIdx >= startIdx)
		{
			if (inReal == null)
			{
				return RetCode.BadParam;
			}
			if (optInTimePeriod == int.MinValue)
			{
				optInTimePeriod = 30;
			}
			else if ((uint)(optInTimePeriod - 2) > 99998u)
			{
				return RetCode.BadParam;
			}
			if (outReal == null)
			{
				return RetCode.BadParam;
			}
			int num = optInTimePeriod - 1;
			if (startIdx < num)
			{
				startIdx = num;
			}
			if (startIdx > endIdx)
			{
				outBegIdx = 0;
				outNBElement = 0;
				return RetCode.Success;
			}
			if (optInTimePeriod == 1)
			{
				outBegIdx = startIdx;
				Array.Copy(inReal, startIdx, outReal, 0, outNBElement = endIdx - startIdx + 1);
				return RetCode.Success;
			}
			int num2 = (optInTimePeriod + 1) * optInTimePeriod >> 1;
			int num3 = 0;
			int num4 = startIdx - num;
			int num5 = num4;
			double num6 = 0.0;
			double num7 = 0.0;
			int num8 = num5;
			int num9 = 1;
			if (num5 < startIdx)
			{
				do
				{
					double num10 = inReal[num8];
					num8++;
					num6 = num10 + num6;
					num7 = (double)num9 * num10 + num7;
					num9++;
				}
				while (num8 < startIdx);
			}
			double num11 = 0.0;
			if (num8 <= endIdx)
			{
				double num12 = optInTimePeriod;
				double num13 = num2;
				do
				{
					double num10 = inReal[num8];
					num8++;
					num6 = num10 + num6 - num11;
					num7 = num12 * num10 + num7;
					num11 = inReal[num4 + num3];
					outReal[num3] = num7 / num13;
					num3++;
					num7 -= num6;
				}
				while (num8 <= endIdx);
			}
			outNBElement = num3;
			outBegIdx = startIdx;
			return RetCode.Success;
		}
		return RetCode.OutOfRangeEndIndex;
	}
}
