<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:system="clr-namespace:System;assembly=mscorlib" xmlns:controls="clr-namespace:ActiproSoftware.Windows.Controls">
  <Style x:Key="{x:Type controls:RadioButtonList}" TargetType="{x:Type controls:RadioButtonList}">
    <Setter Property="BorderBrush" Value="#00FFFFFF" />
    <Setter Property="Background" Value="#00FFFFFF" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type controls:RadioButtonList}">
          <FrameworkTemplate.Resources>
            <ResourceDictionary>
              <Style x:Key="{x:Type ListBoxItem}" TargetType="{x:Type ListBoxItem}">
                <Setter Property="Margin" Value="2, 2, 2, 0" />
                <Setter Property="controls:RadioButtonList.BulletMargin" Value="{Binding Path=BulletMargin, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:RadioButtonList}}}" />
                <Setter Property="controls:RadioButtonList.BulletVerticalAlignment" Value="{Binding Path=BulletVerticalAlignment, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:RadioButtonList}}}" />
                <Setter Property="Template">
                  <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                      <DockPanel Background="#00FFFFFF">
                        <RadioButton DockPanel.Dock="Left" IsTabStop="False" Focusable="False" IsChecked="{Binding Path=IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Margin="{Binding Path=(controls:RadioButtonList.BulletMargin), RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="{Binding Path=(controls:RadioButtonList.BulletVerticalAlignment), RelativeSource={RelativeSource TemplatedParent}}" />
                        <ContentPresenter Name="presenter" Content="{TemplateBinding ContentPresenter.Content}" ContentTemplate="{TemplateBinding ContentPresenter.ContentTemplate}" ContentTemplateSelector="{TemplateBinding ContentPresenter.ContentTemplateSelector}" RecognizesAccessKey="True" />
                      </DockPanel>
                      <ControlTemplate.Triggers>
                        <MultiDataTrigger>
                          <MultiDataTrigger.Conditions>
                            <Condition Value="True" Binding="{Binding Path=AutoDisableNonSelectedItemContent, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type controls:RadioButtonList}}}" />
                            <Condition Value="False" Binding="{Binding Path=IsSelected, RelativeSource={RelativeSource Self}}" />
                          </MultiDataTrigger.Conditions>
                          <Setter TargetName="presenter" Property="IsEnabled" Value="False" />
                        </MultiDataTrigger>
                      </ControlTemplate.Triggers>
                    </ControlTemplate>
                  </Setter.Value>
                </Setter>
              </Style>
            </ResourceDictionary>
          </FrameworkTemplate.Resources>
          <Border Name="Bd" BorderBrush="{TemplateBinding Border.BorderBrush}" BorderThickness="{TemplateBinding Border.BorderThickness}" Background="{TemplateBinding Panel.Background}" SnapsToDevicePixels="True" Padding="1,1,1,1">
            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="controls:RadioButtonList.Orientation" Value="Horizontal">
        <Setter Property="ItemsPanel">
          <Setter.Value>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal" IsItemsHost="True" />
            </ItemsPanelTemplate>
          </Setter.Value>
        </Setter>
      </Trigger>
    </Style.Triggers>
  </Style>
</ResourceDictionary>