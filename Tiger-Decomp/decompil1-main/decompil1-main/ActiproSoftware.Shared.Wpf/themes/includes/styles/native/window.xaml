<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:ActiproSoftware.Windows.Controls" xmlns:controlsPrimitives="clr-namespace:ActiproSoftware.Windows.Controls.Primitives" xmlns:data="clr-namespace:ActiproSoftware.Windows.Data" xmlns:media="clr-namespace:ActiproSoftware.Windows.Media" xmlns:productsShared="clr-namespace:ActiproSoftware.Products.Shared" xmlns:themes="clr-namespace:ActiproSoftware.Windows.Themes">
  <data:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
  <data:CornerRadiusConverter x:Key="CornerRadiusConverter" />
  <media:IconFrameConverter x:Key="IconFrameConverter" DesiredWidth="16" DesiredHeight="16" />
  <data:ThicknessConverter x:Key="ThicknessConverter" />
  <Style x:Key="{x:Static themes:SharedResourceKeys.WindowStyleKey}" TargetType="{x:Type Window}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowBackgroundNormalBrushKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowForegroundNormalBrushKey}}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Window}">
          <Border Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}">
            <AdornerDecorator>
              <ContentPresenter />
            </AdornerDecorator>
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="Window.ResizeMode" Value="CanResizeWithGrip">
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type Window}">
              <Border Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}">
                <Grid>
                  <AdornerDecorator>
                    <ContentPresenter />
                  </AdornerDecorator>
                  <ResizeGrip Name="WindowResizeGrip" HorizontalAlignment="Right" VerticalAlignment="Bottom" Visibility="Collapsed" IsTabStop="false" Style="{DynamicResource {x:Static themes:SharedResourceKeys.StatusBarEmbeddedResizeGripStyleKey}}" />
                </Grid>
              </Border>
              <ControlTemplate.Triggers>
                <MultiTrigger>
                  <MultiTrigger.Conditions>
                    <Condition Property="Window.ResizeMode" Value="CanResizeWithGrip" />
                    <Condition Property="Window.WindowState" Value="Normal" />
                  </MultiTrigger.Conditions>
                  <Setter TargetName="WindowResizeGrip" Property="Visibility" Value="Visible" />
                </MultiTrigger>
              </ControlTemplate.Triggers>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Trigger>
    </Style.Triggers>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.WindowChromeStyleKey}" TargetType="{x:Type Window}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowBorderActiveBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowResizeBorderNormalThicknessKey}}" />
    <Setter Property="FontFamily" Value="{DynamicResource {x:Static SystemFonts.MessageFontFamilyKey}}" />
    <Setter Property="FontSize" Value="{DynamicResource {x:Static themes:AssetResourceKeys.DefaultFontSizeDoubleKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowForegroundNormalBrushKey}}" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowBorderNormalCornerRadiusKey}}" />
    <Setter Property="themes:WindowChrome.ElementKind" Value="ClientArea" />
    <Setter Property="themes:WindowChrome.TitleBarMinHeight" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarMinHeightNormalDoubleKey}}" />
    <Setter Property="themes:WindowChrome.ThemeName" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ThemeNameStringKey}}" />
    <Setter Property="themes:WindowChrome.TitleBarHeader" Value="{Binding Path=Title, Mode=OneWay, RelativeSource={RelativeSource Self}}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Window}">
          <AdornerDecorator themes:WindowChrome.ElementKind="NonClientArea">
            <Grid Name="outerGrid" themes:WindowChrome.ElementKind="NonClientArea">
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Name="titleBarRowDefinition" Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>
              <Rectangle Name="contentBackground" Grid.Row="2" Grid.Column="1" Fill="{TemplateBinding Control.Background}" />
              <Border Name="innerBorderTop" Grid.Row="0" Grid.ColumnSpan="3" Background="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderTopActiveBrushKey}}" Height="{Binding Path=BorderThickness.Top, RelativeSource={RelativeSource TemplatedParent}}" CornerRadius="{Binding Path=(themes:ThemeProperties.CornerRadius), ConverterParameter=Top, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource CornerRadiusConverter}}" />
              <Rectangle Name="innerBorderLeft" Grid.Row="1" Grid.RowSpan="2" Grid.Column="0" Fill="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderLeftActiveBrushKey}}" Width="{Binding Path=BorderThickness.Left, RelativeSource={RelativeSource TemplatedParent}}" />
              <Rectangle Name="innerBorderRight" Grid.Row="1" Grid.RowSpan="2" Grid.Column="2" Fill="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderRightActiveBrushKey}}" Width="{Binding Path=BorderThickness.Right, RelativeSource={RelativeSource TemplatedParent}}" />
              <Rectangle Name="titleBarBackground" Grid.Row="1" Grid.Column="1" Margin="0,0,0,-1" Fill="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarBackgroundActiveBrushKey}}" themes:WindowChrome.ElementKind="TitleBar" />
              <Border Name="innerBorderBottom" Grid.Row="3" Grid.ColumnSpan="3" Background="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderBottomActiveBrushKey}}" Height="{Binding Path=BorderThickness.Bottom, RelativeSource={RelativeSource TemplatedParent}}" CornerRadius="{Binding Path=(themes:ThemeProperties.CornerRadius), ConverterParameter=Bottom, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource CornerRadiusConverter}}" />
              <ContentPresenter Name="contentPresenter" Grid.Row="2" Grid.Column="1" Margin="{TemplateBinding Control.Padding}" themes:WindowChrome.ElementKind="{TemplateBinding themes:WindowChrome.ElementKind}" TextElement.Foreground="{TemplateBinding Control.Foreground}" RenderOptions.ClearTypeHint="Enabled" ContentTemplateSelector="{Binding Path=ContentTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplate="{Binding Path=ContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" Content="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}" />
              <ContentControl Name="overlayContent" Grid.Row="1" Grid.RowSpan="2" Grid.ColumnSpan="3" themes:WindowChrome.ElementKind="OverlayClientArea" FocusManager.IsFocusScope="True" Focusable="False" KeyboardNavigation.TabNavigation="Cycle" KeyboardNavigation.ControlTabNavigation="Cycle" KeyboardNavigation.DirectionalNavigation="Cycle" TextElement.Foreground="{TemplateBinding Control.Foreground}" ContentTemplateSelector="{Binding Path=(themes:WindowChrome.Chrome).OverlayContentTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplate="{Binding Path=(themes:WindowChrome.Chrome).OverlayContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" Content="{Binding Path=(themes:WindowChrome.OverlayContent), RelativeSource={RelativeSource TemplatedParent}}" Visibility="{Binding Path=(themes:WindowChrome.IsOverlayVisible), RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                <UIElement.RenderTransform>
                  <TranslateTransform />
                </UIElement.RenderTransform>
              </ContentControl>
              <Rectangle Name="overlayTitleBarGripperBackground" Grid.Row="1" Grid.Column="1" Fill="#00FFFFFF" themes:WindowChrome.ElementKind="TitleBar" Visibility="{Binding Path=(themes:WindowChrome.IsOverlayVisible), RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
              <controlsPrimitives:WindowChromeTitleBarPanel x:Name="titleBarPanel" Grid.Row="1" Grid.Column="1" themes:WindowChrome.ElementKind="NonClientArea" MinHeight="{Binding Path=(themes:WindowChrome.TitleBarMinHeight), RelativeSource={RelativeSource TemplatedParent}}" HeaderAlignment="{Binding Path=(themes:WindowChrome.Chrome).TitleBarHeaderAlignment, RelativeSource={RelativeSource TemplatedParent}}" HeaderMargin="{Binding Path=(themes:WindowChrome.Chrome).TitleBarHeaderMargin, RelativeSource={RelativeSource TemplatedParent}}" HeaderMinWidth="{Binding Path=(themes:WindowChrome.Chrome).TitleBarHeaderMinWidth, RelativeSource={RelativeSource TemplatedParent}}" LeftContentMaxWidthOverflowPercentage="{Binding Path=(themes:WindowChrome.Chrome).TitleBarLeftContentMaxWidthOverflowPercentage, RelativeSource={RelativeSource TemplatedParent}}" RightContentMaxWidthOverflowPercentage="{Binding Path=(themes:WindowChrome.Chrome).TitleBarRightContentMaxWidthOverflowPercentage, RelativeSource={RelativeSource TemplatedParent}}">
                <ContentControl Name="titleBarHeader" controlsPrimitives:WindowChromeTitleBarPanel.SlotAlignment="Stretch" themes:WindowChrome.ElementKind="NonClientArea" FocusManager.IsFocusScope="True" Focusable="False" Foreground="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundActiveBrushKey}}" FontSize="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleFontSizeDoubleKey}}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" ContentTemplateSelector="{Binding Path=(themes:WindowChrome.Chrome).TitleBarHeaderTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplate="{Binding Path=(themes:WindowChrome.Chrome).TitleBarHeaderTemplate, RelativeSource={RelativeSource TemplatedParent}}" Content="{Binding Path=(themes:WindowChrome.TitleBarHeader), RelativeSource={RelativeSource TemplatedParent}}" />
                <Border Name="iconBorder" MinWidth="16" MinHeight="16" Background="#00FFFFFF" controlsPrimitives:WindowChromeTitleBarPanel.SlotAlignment="Left" themes:WindowChrome.ElementKind="SystemMenu" Margin="{Binding Path=(themes:WindowChrome.Chrome).IconMargin, RelativeSource={RelativeSource TemplatedParent}}">
                  <Grid>
                    <controls:DynamicImage x:Name="dynamicIcon" Stretch="None" VerticalAlignment="Center" Foreground="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundActiveBrushKey}}" Source="{Binding Path=(themes:WindowChrome.Chrome).IconSource, RelativeSource={RelativeSource TemplatedParent}}" />
                    <Image Name="icon" Width="16" Height="16" Stretch="Uniform" VerticalAlignment="Center" Visibility="Collapsed" Source="{Binding Path=Icon, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource IconFrameConverter}}" />
                  </Grid>
                </Border>
                <ContentControl Name="titleBarLeftContent" controlsPrimitives:WindowChromeTitleBarPanel.SlotAlignment="Left" themes:WindowChrome.ElementKind="NonClientArea" FocusManager.IsFocusScope="True" Focusable="False" Foreground="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundActiveBrushKey}}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" ContentTemplateSelector="{Binding Path=(themes:WindowChrome.Chrome).TitleBarLeftContentTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplate="{Binding Path=(themes:WindowChrome.Chrome).TitleBarLeftContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" Content="{Binding Path=(themes:WindowChrome.TitleBarLeftContent), RelativeSource={RelativeSource TemplatedParent}}" />
                <ContentControl Name="titleBarRightContent" themes:WindowChrome.ElementKind="NonClientArea" FocusManager.IsFocusScope="True" Focusable="False" Foreground="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundActiveBrushKey}}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" ContentTemplateSelector="{Binding Path=(themes:WindowChrome.Chrome).TitleBarRightContentTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplate="{Binding Path=(themes:WindowChrome.Chrome).TitleBarRightContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" Content="{Binding Path=(themes:WindowChrome.TitleBarRightContent), RelativeSource={RelativeSource TemplatedParent}}" />
                <Button Name="minimizeButton" AutomationProperties.Name="Minimize" themes:WindowChrome.ElementKind="TitleBarButton" Style="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonBaseStyleKey}}" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonMinimizeGlyphTemplateKey}}" Command="{x:Static themes:WindowChrome.MinimizeCommand}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" themes:ThemeProperties.UseAlternateStyle="{Binding Path=(themes:WindowChrome.UseAlternateTitleBarStyle), RelativeSource={RelativeSource TemplatedParent}}" ToolTip="{productsShared:SR UICommandMinimizeWindowText}" />
                <Button Name="restoreButton" AutomationProperties.Name="Restore" themes:WindowChrome.ElementKind="TitleBarButton" Style="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonBaseStyleKey}}" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonRestoreGlyphTemplateKey}}" Visibility="Collapsed" Command="{x:Static themes:WindowChrome.RestoreCommand}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" themes:ThemeProperties.UseAlternateStyle="{Binding Path=(themes:WindowChrome.UseAlternateTitleBarStyle), RelativeSource={RelativeSource TemplatedParent}}" ToolTip="{productsShared:SR UICommandRestoreWindowText}" />
                <Button Name="maximizeButton" AutomationProperties.Name="Maximize" themes:WindowChrome.ElementKind="TitleBarButton" Style="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonBaseStyleKey}}" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonMaximizeGlyphTemplateKey}}" Command="{x:Static themes:WindowChrome.MaximizeCommand}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" themes:ThemeProperties.UseAlternateStyle="{Binding Path=(themes:WindowChrome.UseAlternateTitleBarStyle), RelativeSource={RelativeSource TemplatedParent}}" ToolTip="{productsShared:SR UICommandMaximizeWindowText}" />
                <Button Name="closeButton" AutomationProperties.Name="Close" themes:WindowChrome.ElementKind="TitleBarButton" Style="{DynamicResource {x:Static themes:SharedResourceKeys.CloseWindowTitleBarButtonBaseStyleKey}}" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.WindowTitleBarButtonCloseGlyphTemplateKey}}" Command="{x:Static themes:WindowChrome.CloseCommand}" themes:ThemeProperties.IsActive="{TemplateBinding Window.IsActive}" themes:ThemeProperties.UseAlternateStyle="{Binding Path=(themes:WindowChrome.UseAlternateTitleBarStyle), RelativeSource={RelativeSource TemplatedParent}}" ToolTip="{productsShared:SR UICommandCloseWindowText}" />
              </controlsPrimitives:WindowChromeTitleBarPanel>
              <ResizeGrip Name="resizeGrip" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Bottom" Visibility="Collapsed" IsTabStop="false" Style="{DynamicResource {x:Static themes:SharedResourceKeys.StatusBarEmbeddedResizeGripStyleKey}}" themes:WindowChrome.ElementKind="ResizeGrip" />
              <Border Name="outerBorder" Grid.RowSpan="4" Grid.ColumnSpan="3" BorderThickness="1" BorderBrush="{TemplateBinding Control.BorderBrush}" CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" />
            </Grid>
          </AdornerDecorator>
          <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=(themes:WindowChrome.Chrome).IconSource, RelativeSource={RelativeSource Mode=Self}}" Value="{x:Null}">
              <Setter TargetName="dynamicIcon" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="icon" Property="Visibility" Value="Visible" />
            </DataTrigger>
            <MultiDataTrigger>
              <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Path=(themes:WindowChrome.Chrome).IconSource, RelativeSource={RelativeSource Mode=Self}}" Value="{x:Null}" />
                <Condition Binding="{Binding Path=Icon, RelativeSource={RelativeSource Mode=Self}}" Value="{x:Null}" />
              </MultiDataTrigger.Conditions>
              <Setter TargetName="iconBorder" Property="Visibility" Value="Collapsed" />
            </MultiDataTrigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasIcon, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="iconBorder" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <Trigger Property="Window.IsActive" Value="False">
              <Setter TargetName="outerBorder" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowBorderInactiveBrushKey}}" Property="Border.BorderBrush" />
              <Setter TargetName="innerBorderTop" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderTopInactiveBrushKey}}" Property="Border.Background" />
              <Setter TargetName="innerBorderLeft" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderLeftInactiveBrushKey}}" Property="Shape.Fill" />
              <Setter TargetName="innerBorderRight" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderRightInactiveBrushKey}}" Property="Shape.Fill" />
              <Setter TargetName="innerBorderBottom" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowInnerBorderBottomInactiveBrushKey}}" Property="Border.Background" />
              <Setter TargetName="titleBarBackground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarBackgroundInactiveBrushKey}}" Property="Shape.Fill" />
              <Setter TargetName="titleBarHeader" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarLeftContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarRightContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="dynamicIcon" Value="{DynamicResource {x:Static themes:AssetResourceKeys.WindowTitleBarForegroundInactiveBrushKey}}" Property="controls:DynamicImage.Foreground" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Window.IsActive" Value="False" />
                <Condition Property="themes:WindowChrome.UseAlternateTitleBarStyle" Value="True" />
              </MultiTrigger.Conditions>
              <Setter TargetName="titleBarBackground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarBackgroundInactiveBrushKey}}" Property="Shape.Fill" />
              <Setter TargetName="titleBarHeader" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarLeftContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarRightContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundInactiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="dynamicIcon" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundInactiveBrushKey}}" Property="controls:DynamicImage.Foreground" />
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Window.IsActive" Value="True" />
                <Condition Property="themes:WindowChrome.UseAlternateTitleBarStyle" Value="True" />
              </MultiTrigger.Conditions>
              <Setter TargetName="titleBarBackground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarBackgroundActiveBrushKey}}" Property="Shape.Fill" />
              <Setter TargetName="titleBarHeader" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundActiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarLeftContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundActiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="titleBarRightContent" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundActiveBrushKey}}" Property="Foreground" />
              <Setter TargetName="dynamicIcon" Value="{DynamicResource {x:Static themes:AssetResourceKeys.AlternateWindowTitleBarForegroundActiveBrushKey}}" Property="controls:DynamicImage.Foreground" />
            </MultiTrigger>
            <Trigger Property="BorderThickness" Value="0">
              <Setter TargetName="outerBorder" Property="Border.BorderThickness" Value="0" />
            </Trigger>
            <Trigger Property="Window.WindowState" Value="Maximized">
              <Setter TargetName="maximizeButton" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="restoreButton" Property="Visibility" Value="Visible" />
              <Setter TargetName="outerBorder" Property="Border.BorderThickness" Value="0" />
              <Setter TargetName="innerBorderTop" Property="Height" Value="0" />
              <Setter TargetName="innerBorderLeft" Property="Width" Value="0" />
              <Setter TargetName="innerBorderRight" Property="Width" Value="0" />
              <Setter TargetName="innerBorderBottom" Property="Height" Value="0" />
              <Setter TargetName="iconBorder" Property="Border.Padding" Value="{Binding Path=(themes:WindowChrome.Chrome).IconMargin, ConverterParameter=Left,Top,Bottom, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ThicknessConverter}}" />
              <Setter TargetName="iconBorder" Property="Margin" Value="{Binding Path=(themes:WindowChrome.Chrome).IconMargin, ConverterParameter=Right, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ThicknessConverter}}" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Window.WindowState" Value="Maximized" />
                <Condition Property="themes:WindowChrome.IsTaskbarAutoHidden" Value="False" />
              </MultiTrigger.Conditions>
              <Setter TargetName="outerGrid" Value="{x:Static themes:WindowChrome.SystemResizeBorderThickness}" Property="Margin" />
            </MultiTrigger>
            <Trigger Property="Window.WindowStyle" Value="None">
              <Setter TargetName="outerGrid" Property="Margin" Value="0" />
              <Setter TargetName="titleBarPanel" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="titleBarRowDefinition" Property="RowDefinition.Height" Value="0" />
            </Trigger>
            <Trigger Property="Window.WindowStyle" Value="ToolWindow">
              <Setter TargetName="iconBorder" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Window.ResizeMode" Value="CanResizeWithGrip" />
                <Condition Property="Window.WindowState" Value="Normal" />
              </MultiTrigger.Conditions>
              <Setter TargetName="resizeGrip" Property="Visibility" Value="Visible" />
            </MultiTrigger>
            <Trigger Property="Window.ResizeMode" Value="CanMinimize">
              <Setter TargetName="maximizeButton" Property="IsEnabled" Value="False" />
              <Setter TargetName="restoreButton" Property="IsEnabled" Value="False" />
            </Trigger>
            <Trigger Property="Window.ResizeMode" Value="NoResize">
              <Setter TargetName="minimizeButton" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="maximizeButton" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="restoreButton" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasTitleBar, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="titleBarPanel" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasMinimizeButton, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="minimizeButton" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasRestoreButton, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="restoreButton" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasMaximizeButton, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="maximizeButton" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Value="False" Binding="{Binding Path=(themes:WindowChrome.Chrome).HasCloseButton, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="closeButton" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Value="BackgroundOnly" Binding="{Binding Path=(themes:WindowChrome.Chrome).TitleBarMergeKind, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="titleBarBackground" Property="Shape.Fill" Value="#00FFFFFF" />
              <Setter TargetName="contentBackground" Property="Grid.Row" Value="1" />
              <Setter TargetName="contentBackground" Property="Grid.RowSpan" Value="2" />
            </DataTrigger>
            <DataTrigger Value="ContentOnly" Binding="{Binding Path=(themes:WindowChrome.Chrome).TitleBarMergeKind, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="contentPresenter" Property="Grid.Row" Value="1" />
              <Setter TargetName="contentPresenter" Property="Grid.RowSpan" Value="2" />
              <Setter Property="themes:WindowChrome.ElementKind" Value="NonClientArea" />
            </DataTrigger>
            <DataTrigger Value="Full" Binding="{Binding Path=(themes:WindowChrome.Chrome).TitleBarMergeKind, RelativeSource={RelativeSource Mode=Self}}">
              <Setter TargetName="titleBarBackground" Property="Shape.Fill" Value="#00FFFFFF" />
              <Setter TargetName="contentBackground" Property="Grid.Row" Value="1" />
              <Setter TargetName="contentBackground" Property="Grid.RowSpan" Value="2" />
              <Setter TargetName="contentPresenter" Property="Grid.Row" Value="1" />
              <Setter TargetName="contentPresenter" Property="Grid.RowSpan" Value="2" />
              <Setter Property="themes:WindowChrome.ElementKind" Value="NonClientArea" />
            </DataTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>