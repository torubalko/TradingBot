<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:ActiproSoftware.Windows.Controls" xmlns:controlsPrimitives="clr-namespace:ActiproSoftware.Windows.Controls.Primitives" xmlns:data="clr-namespace:ActiproSoftware.Windows.Data" xmlns:themes="clr-namespace:ActiproSoftware.Windows.Themes">
  <data:ThicknessConverter x:Key="ThicknessConverter" />
  <Style x:Key="ComboBoxTransparentButtonStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="Background" Value="#00FFFFFF" />
    <Setter Property="BorderBrush" Value="#00FFFFFF" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.DropDownGlyphBackgroundNormalBrushKey}}" />
    <Setter Property="Width" Value="Auto" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="MinHeight" Value="0" />
    <Setter Property="Focusable" Value="False" />
    <Setter Property="ButtonBase.ClickMode" Value="Press" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
          <Grid Background="#00FFFFFF">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" SharedSizeGroup="ToolBarComboBoxButton" />
            </Grid.ColumnDefinitions>
            <Border Name="chrome" Grid.Column="1" Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" CornerRadius="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarDropDownBorderNormalCornerRadiusKey}}" SnapsToDevicePixels="True">
              <Grid>
                <Border Name="innerBorder" BorderThickness="1" SnapsToDevicePixels="True" CornerRadius="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarDropDownBorderNormalCornerRadiusKey}}" />
                <ContentPresenter Name="presenter" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.SmallDropDownArrowGlyphTemplateKey}}" VerticalAlignment="Center" />
              </Grid>
            </Border>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="FrameworkElement.Tag" Value="Hover">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditDropDownButtonBorderHoverBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
              <Setter TargetName="innerBorder" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonInnerBorderHoverBrushKey}}" Property="Border.BorderBrush" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="UIElement.IsMouseOver" Value="True" />
                <Condition Property="ToggleButton.IsChecked" Value="False" />
              </MultiTrigger.Conditions>
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditDropDownButtonBorderHoverBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
              <Setter TargetName="innerBorder" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonInnerBorderHoverBrushKey}}" Property="Border.BorderBrush" />
            </MultiTrigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Background" Value="{x:Null}" />
              <Setter Property="BorderBrush" Value="{x:Null}" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderDisabledBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="ToggleButton.IsChecked" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundPressedBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditDropDownButtonBorderPressedBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
              <Setter TargetName="innerBorder" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonInnerBorderPressedBrushKey}}" Property="Border.BorderBrush" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundPressedBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditDropDownButtonBorderPressedBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
              <Setter TargetName="innerBorder" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonInnerBorderPressedBrushKey}}" Property="Border.BorderBrush" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ComboBoxEditableTextBoxKey" TargetType="{x:Type TextBox}">
    <Setter Property="TextBoxBase.CaretBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.EditCaretBackgroundNormalBrushKey}}" />
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="MinHeight" Value="0" />
    <Setter Property="UIElement.AllowDrop" Value="True" />
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst" />
    <Setter Property="Stylus.IsFlicksEnabled" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TextBox}">
          <ScrollViewer Name="PART_ContentHost" Background="#00FFFFFF" Focusable="False" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.ToolBarEmbeddedComboBoxStyleKey}" TargetType="{x:Type ComboBox}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalThicknessKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundNormalBrushKey}}" />
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="ItemContainerStyle" Value="{DynamicResource {x:Static themes:SharedResourceKeys.ComboBoxItemStyleKey}}" />
    <Setter Property="MinHeight" Value="22" />
    <Setter Property="Padding" Value="2,1,2,1" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalCornerRadiusKey}}" />
    <Setter Property="HorizontalAlignment" Value="Center" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
    <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ComboBox}">
          <Grid SnapsToDevicePixels="True">
            <Grid IsSharedSizeScope="True">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" SharedSizeGroup="ToolBarComboBoxButton" />
              </Grid.ColumnDefinitions>
              <Border Name="backgroundBorder" Grid.ColumnSpan="2" Background="{TemplateBinding Control.Background}" CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" />
              <Border Name="contentBorder" Margin="2,2,1,2">
                <ContentPresenter Name="contentPresenter" Content="{TemplateBinding ComboBox.SelectionBoxItem}" ContentTemplate="{TemplateBinding ComboBox.SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemsControl.ItemTemplateSelector}" Margin="{TemplateBinding Control.Padding}" VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
              </Border>
              <Border Name="border" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" />
              <ToggleButton Name="dropDownButton" Grid.ColumnSpan="2" Style="{StaticResource ComboBoxTransparentButtonStyle}" IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
              <TextBox Name="PART_EditableTextBox" Padding="{TemplateBinding Control.Padding}" Margin="1,1,0,1" MinHeight="18" VerticalAlignment="Center" Visibility="Collapsed" Style="{StaticResource ComboBoxEditableTextBoxKey}" IsReadOnly="{Binding Path=IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}" />
            </Grid>
            <Popup Name="PART_Popup" AllowsTransparency="True" Placement="Bottom" Focusable="False" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" IsOpen="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}">
              <controlsPrimitives:ShadowChrome x:Name="shadow" Direction="{DynamicResource {x:Static themes:AssetResourceKeys.PopupShadowDirectionDoubleKey}}" ShadowOpacity="{DynamicResource {x:Static themes:AssetResourceKeys.ShadowOpacityNormalDoubleKey}}" SnapsToDevicePixels="True">
                <Border Name="dropDownBorder" MinWidth="{TemplateBinding FrameworkElement.ActualWidth}" MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}" Background="{TemplateBinding Control.Background}" BorderBrush="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarDropDownBorderNormalBrushKey}}" BorderThickness="1">
                  <ScrollViewer Name="dropDownScrollViewer">
                    <Grid RenderOptions.ClearTypeHint="Enabled">
                      <Canvas Height="0" Width="0" HorizontalAlignment="Left" VerticalAlignment="Top">
                        <Rectangle Name="opaqueRect" Height="{Binding ElementName=dropDownBorder, Path=ActualHeight}" Width="{Binding ElementName=dropDownBorder, Path=ActualWidth}" Fill="{Binding ElementName=dropDownBorder, Path=Background}" />
                      </Canvas>
                      <ItemsPresenter Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" />
                    </Grid>
                  </ScrollViewer>
                </Border>
              </controlsPrimitives:ShadowChrome>
            </Popup>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundDisabledBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderDisabledBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="ComboBox.IsEditable" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditForegroundNormalBrushKey}}" Property="Foreground" />
              <Setter Property="IsTabStop" Value="False" />
              <Setter Property="Padding" Value="2" />
              <Setter TargetName="contentPresenter" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible" />
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderHoverBrushKey}}" Property="BorderBrush" />
              <Setter TargetName="dropDownButton" Property="FrameworkElement.Tag" Value="Hover" />
            </Trigger>
            <Trigger Property="UIElement.IsKeyboardFocusWithin" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderHoverBrushKey}}" Property="BorderBrush" />
              <Setter TargetName="dropDownButton" Property="FrameworkElement.Tag" Value="Hover" />
            </Trigger>
            <Trigger SourceName="PART_Popup" Property="Popup.HasDropShadow" Value="True">
              <Setter TargetName="shadow" Value="{DynamicResource {x:Static themes:AssetResourceKeys.PopupShadowElevationInt32Key}}" Property="controlsPrimitives:ShadowChrome.Elevation" />
              <Setter TargetName="shadow" Property="Margin" Value="{Binding ElementName=shadow, Path=ShadowThickness, ConverterParameter=Left,Right,Bottom, Converter={StaticResource ThicknessConverter}}" />
            </Trigger>
            <Trigger Property="ItemsControl.HasItems" Value="False">
              <Setter TargetName="dropDownBorder" Property="MinHeight" Value="95" />
            </Trigger>
            <Trigger SourceName="dropDownScrollViewer" Property="ScrollViewer.CanContentScroll" Value="False">
              <Setter TargetName="opaqueRect" Property="Canvas.Top" Value="{Binding ElementName=dropDownScrollViewer, Path=VerticalOffset}" />
              <Setter TargetName="opaqueRect" Property="Canvas.Left" Value="{Binding ElementName=dropDownScrollViewer, Path=HorizontalOffset}" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="ItemsControl.IsGrouping" Value="true" />
                <Condition Property="VirtualizingPanel.IsVirtualizingWhenGrouping" Value="false" />
              </MultiTrigger.Conditions>
              <Setter Property="ScrollViewer.CanContentScroll" Value="false" />
            </MultiTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.ToolBarEmbeddedTextBoxStyleKey}" TargetType="{x:Type TextBox}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalThicknessKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditForegroundNormalBrushKey}}" />
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="MinHeight" Value="22" />
    <Setter Property="Padding" Value="2" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderNormalCornerRadiusKey}}" />
    <Setter Property="HorizontalAlignment" Value="Center" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TextBox}">
          <Border Background="{TemplateBinding Control.Background}" BorderThickness="{TemplateBinding Control.BorderThickness}" BorderBrush="{TemplateBinding Control.BorderBrush}" CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" SnapsToDevicePixels="True">
            <ScrollViewer Name="PART_ContentHost" VerticalAlignment="Center" MinHeight="18" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundDisabledBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderDisabledBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderHoverBrushKey}}" Property="BorderBrush" />
            </Trigger>
            <Trigger Property="UIElement.IsKeyboardFocusWithin" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarEditBorderHoverBrushKey}}" Property="BorderBrush" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.ToolBarEmbeddedSeparatorStyleKey}" TargetType="{x:Type Separator}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarSeparatorBackgroundNormalBrushKey}}" />
    <Setter Property="MinWidth" Value="1" />
    <Setter Property="MinHeight" Value="1" />
    <Setter Property="Margin" Value="2" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Separator}">
          <Border Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" SnapsToDevicePixels="True" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ToolBarThumbStyle" TargetType="{x:Type Thumb}">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Thumb}">
          <Border Background="#00FFFFFF" Padding="{TemplateBinding Control.Padding}" SnapsToDevicePixels="True">
            <Rectangle>
              <Shape.Fill>
                <DrawingBrush Viewbox="0,0,4,4" Viewport="0,0,4,4" TileMode="Tile" ViewportUnits="Absolute" ViewboxUnits="Absolute">
                  <DrawingBrush.Drawing>
                    <DrawingGroup>
                      <DrawingGroup.Children>
                        <GeometryDrawing Geometry="M0,0 L1,0 L1,1 L0,1" Brush="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarGripperForegroundNormalBrushKey}}" />
                        <GeometryDrawing Geometry="M2,2 L3,2 L3,3 L2,3" Brush="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarGripperForegroundNormalBrushKey}}" />
                      </DrawingGroup.Children>
                    </DrawingGroup>
                  </DrawingBrush.Drawing>
                </DrawingBrush>
              </Shape.Fill>
            </Rectangle>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter Property="FrameworkElement.Cursor" Value="SizeAll" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ToolBarHorizontalOverflowButtonStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarOverflowButtonHorizontalBackgroundNormalBrushKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarOverflowButtonForegroundNormalBrushKey}}" />
    <Setter Property="MinHeight" Value="0" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="Padding" Value="6,1,3,5" />
    <Setter Property="HorizontalContentAlignment" Value="Center" />
    <Setter Property="VerticalContentAlignment" Value="Bottom" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="0,3,3,0" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
          <Border CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" Background="{TemplateBinding Control.Background}" Padding="{TemplateBinding Control.Padding}" SnapsToDevicePixels="True">
            <ContentPresenter Name="presenter" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.ToolBarOverflowDropDownArrowGlyphTemplateKey}}" HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="UIElement.IsKeyboardFocused" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="ToggleButton.IsChecked" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundPressedBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter TargetName="presenter" Property="UIElement.Opacity" Value="0.4" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ToolBarVerticalOverflowButtonStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarOverflowButtonVerticalBackgroundNormalBrushKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarOverflowButtonForegroundNormalBrushKey}}" />
    <Setter Property="MinHeight" Value="0" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="Padding" Value="1,5,6,2" />
    <Setter Property="HorizontalContentAlignment" Value="Right" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="0,0,3,3" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
          <Border CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}" Background="{TemplateBinding Control.Background}" Padding="{TemplateBinding Control.Padding}" SnapsToDevicePixels="True">
            <ContentPresenter Name="presenter" ContentTemplate="{DynamicResource {x:Static themes:SharedResourceKeys.ToolBarOverflowDropDownArrowGlyphTemplateKey}}" HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}" RenderTransformOrigin="0.5,0.5">
              <UIElement.RenderTransform>
                <TransformGroup>
                  <RotateTransform Angle="-90" />
                  <ScaleTransform ScaleY="-1" />
                </TransformGroup>
              </UIElement.RenderTransform>
            </ContentPresenter>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="UIElement.IsKeyboardFocused" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundHoverBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="ToggleButton.IsChecked" Value="True">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonBackgroundPressedBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarButtonForegroundHoverBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter TargetName="presenter" Property="UIElement.Opacity" Value="0.4" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.ToolBarStyleKey}" TargetType="{x:Type ToolBar}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarHorizontalBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarHorizontalBorderNormalBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarBorderNormalThicknessKey}}" />
    <Setter Property="Margin" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarHorizontalMarginNormalThicknessKey}}" />
    <Setter Property="Padding" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarHorizontalPaddingNormalThicknessKey}}" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarBorderNormalCornerRadiusKey}}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToolBar}">
          <DockPanel SnapsToDevicePixels="True">
            <Grid Name="overflowGrid" DockPanel.Dock="Right" Margin="-3,0,0,0">
              <ToggleButton Name="overflowButton" IsEnabled="{TemplateBinding ToolBar.HasOverflowItems}" ClickMode="Press" Style="{StaticResource ToolBarHorizontalOverflowButtonStyle}" FocusVisualStyle="{x:Null}" IsChecked="{Binding Path=IsOverflowOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
              <Popup Name="overflowPopup" AllowsTransparency="True" Placement="Bottom" StaysOpen="False" Focusable="False" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" IsOpen="{Binding Path=IsOverflowOpen, RelativeSource={RelativeSource TemplatedParent}}">
                <controlsPrimitives:ShadowChrome x:Name="shadow" Direction="{DynamicResource {x:Static themes:AssetResourceKeys.PopupShadowDirectionDoubleKey}}" ShadowOpacity="{DynamicResource {x:Static themes:AssetResourceKeys.ShadowOpacityNormalDoubleKey}}" SnapsToDevicePixels="True">
                  <Border Background="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarDropDownBackgroundNormalBrushKey}}" BorderBrush="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarDropDownBorderNormalBrushKey}}" BorderThickness="1" RenderOptions.ClearTypeHint="Enabled">
                    <ToolBarOverflowPanel Name="PART_ToolBarOverflowPanel" Margin="2" WrapWidth="200" Focusable="True" KeyboardNavigation.TabNavigation="Cycle" KeyboardNavigation.DirectionalNavigation="Cycle" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" FocusVisualStyle="{x:Null}" />
                  </Border>
                </controlsPrimitives:ShadowChrome>
              </Popup>
            </Grid>
            <Border Name="border" Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" CornerRadius="{TemplateBinding themes:ThemeProperties.CornerRadius}">
              <controls:PixelSnapper x:Name="pixelSnapper" VerticalRoundMode="CeilingToEven">
                <DockPanel KeyboardNavigation.TabIndex="1" KeyboardNavigation.TabNavigation="Local">
                  <Thumb Name="thumb" Margin="2,0,0,0" Width="11" Padding="3" Style="{StaticResource ToolBarThumbStyle}" />
                  <ContentPresenter Name="header" Margin="4,0,4,0" ContentSource="Header" HorizontalAlignment="Center" VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                  <ToolBarPanel Name="PART_ToolBarPanel" Margin="{TemplateBinding Control.Padding}" IsItemsHost="True" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                </DockPanel>
              </controls:PixelSnapper>
            </Border>
          </DockPanel>
          <ControlTemplate.Triggers>
            <Trigger Property="ToolBar.IsOverflowOpen" Value="True">
              <Setter TargetName="thumb" Property="IsEnabled" Value="False" />
            </Trigger>
            <Trigger Property="Header" Value="{x:Null}">
              <Setter TargetName="header" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <Trigger Property="ToolBarTray.IsLocked" Value="True">
              <Setter TargetName="thumb" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <Trigger SourceName="overflowPopup" Property="Popup.HasDropShadow" Value="True">
              <Setter TargetName="shadow" Value="{DynamicResource {x:Static themes:AssetResourceKeys.PopupShadowElevationInt32Key}}" Property="controlsPrimitives:ShadowChrome.Elevation" />
              <Setter TargetName="shadow" Property="Margin" Value="{Binding ElementName=shadow, Path=ShadowThickness}" />
            </Trigger>
            <Trigger Property="ToolBar.Orientation" Value="Vertical">
              <Setter TargetName="overflowGrid" Property="Margin" Value="0,-3,0,0" />
              <Setter TargetName="overflowGrid" Property="DockPanel.Dock" Value="Bottom" />
              <Setter TargetName="overflowButton" Property="Style" Value="{StaticResource ToolBarVerticalOverflowButtonStyle}" />
              <Setter TargetName="overflowPopup" Property="Popup.Placement" Value="Right" />
              <Setter TargetName="pixelSnapper" Property="controls:PixelSnapper.HorizontalRoundMode" Value="CeilingToEven" />
              <Setter TargetName="pixelSnapper" Property="controls:PixelSnapper.VerticalRoundMode" Value="Ceiling" />
              <Setter TargetName="thumb" Property="DockPanel.Dock" Value="Top" />
              <Setter TargetName="thumb" Property="Margin" Value="0,2,0,0" />
              <Setter TargetName="thumb" Property="Width" Value="Auto" />
              <Setter TargetName="thumb" Property="Height" Value="11" />
              <Setter TargetName="header" Property="Margin" Value="0,4,0,4" />
              <Setter TargetName="header" Property="DockPanel.Dock" Value="Top" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarVerticalBackgroundNormalBrushKey}}" Property="Background" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarVerticalBorderNormalBrushKey}}" Property="BorderBrush" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarVerticalMarginNormalThicknessKey}}" Property="Margin" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarVerticalPaddingNormalThicknessKey}}" Property="Padding" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" Property="Foreground" />
            </Trigger>
            <Trigger Property="themes:ThemeProperties.UseAlternateStyle" Value="True">
              <Setter Property="Margin" Value="0" />
              <Setter Property="themes:ThemeProperties.CornerRadius" Value="0" />
              <Setter TargetName="thumb" Property="Width" Value="3" />
              <Setter TargetName="thumb" Property="Height" Value="3" />
              <Setter TargetName="thumb" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="themes:ThemeProperties.UseAlternateStyle" Value="True" />
                <Condition Property="ToolBar.HasOverflowItems" Value="False" />
              </MultiTrigger.Conditions>
              <Setter TargetName="overflowGrid" Property="Visibility" Value="Collapsed" />
            </MultiTrigger>
            <Trigger Property="themes:ThemeProperties.CornerRadius" Value="0">
              <Setter TargetName="overflowButton" Property="themes:ThemeProperties.CornerRadius" Value="0" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.ToolBarTrayStyleKey}" TargetType="{x:Type ToolBarTray}">
    <Setter Property="ToolBarTray.Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ToolBarTrayBackgroundNormalBrushKey}}" />
  </Style>
</ResourceDictionary>