<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:ActiproSoftware.Windows.Controls" xmlns:controlsPrimitives="clr-namespace:ActiproSoftware.Windows.Controls.Primitives" xmlns:data="clr-namespace:ActiproSoftware.Windows.Data" xmlns:themes="clr-namespace:ActiproSoftware.Windows.Themes">
  <data:CornerRadiusConverter x:Key="CornerRadiusConverter" />
  <Style x:Key="TabItemFocusVisual">
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate>
          <Rectangle Margin="3,3,3,1" StrokeThickness="1" Stroke="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" StrokeDashArray="1 2" SnapsToDevicePixels="true" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.TabItemStyleKey}" TargetType="{x:Type TabItem}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderNormalBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderNormalThicknessKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowNormalBrushKey}}" />
    <Setter Property="themes:ThemeProperties.CornerRadius" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderNormalCornerRadiusKey}}" />
    <Setter Property="ClipToBounds" Value="True" />
    <Setter Property="Padding" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemPaddingNormalThicknessKey}}" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Stretch" />
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{StaticResource TabItemFocusVisual}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TabItem}">
          <Grid>
            <controlsPrimitives:ElementChrome x:Name="chrome" Background="{TemplateBinding Control.Background}" BackgroundDisabled="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBackgroundDisabledBrushKey}}" BackgroundHover="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBackgroundHoverBrushKey}}" BackgroundFocused="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBackgroundSelectedNormalBrushKey}}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderBrushDisabled="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderDisabledBrushKey}}" BorderBrushHover="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderHoverBrushKey}}" BorderBrushFocused="{DynamicResource {x:Static themes:AssetResourceKeys.TabItemBorderSelectedNormalBrushKey}}" BorderThickness="{TemplateBinding Control.BorderThickness}" SnapsToDevicePixels="True" CornerRadius="{Binding Path=(themes:ThemeProperties.CornerRadius), ConverterParameter=Top, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource CornerRadiusConverter}}" />
            <Border BorderThickness="{TemplateBinding Control.BorderThickness}" Padding="{TemplateBinding Control.Padding}">
              <controls:PixelSnapper>
                <ContentPresenter Name="contentPresenter" ContentSource="Header" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" RecognizesAccessKey="True" HorizontalAlignment="{Binding Path=HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" VerticalAlignment="{Binding Path=VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" />
              </controls:PixelSnapper>
            </Border>
          </Grid>
          <ControlTemplate.Triggers>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="TabItem.IsSelected" Value="false" />
                <Condition Property="UIElement.IsMouseOver" Value="true" />
              </MultiTrigger.Conditions>
              <Setter TargetName="chrome" Property="controlsPrimitives:ElementChrome.State" Value="Hover" />
            </MultiTrigger>
            <Trigger Property="TabItem.IsSelected" Value="true">
              <Setter Property="Panel.ZIndex" Value="1" />
              <Setter TargetName="chrome" Property="controlsPrimitives:ElementChrome.State" Value="Focused" />
            </Trigger>
            <Trigger Property="TabItem.TabStripPlacement" Value="Bottom">
              <Setter TargetName="chrome" Property="FrameworkElement.LayoutTransform">
                <Setter.Value>
                  <ScaleTransform ScaleX="1" ScaleY="-1" />
                </Setter.Value>
              </Setter>
            </Trigger>
            <Trigger Property="TabItem.TabStripPlacement" Value="Left">
              <Setter TargetName="chrome" Property="FrameworkElement.LayoutTransform">
                <Setter.Value>
                  <RotateTransform Angle="-90" />
                </Setter.Value>
              </Setter>
            </Trigger>
            <Trigger Property="TabItem.TabStripPlacement" Value="Right">
              <Setter TargetName="chrome" Property="FrameworkElement.LayoutTransform">
                <Setter.Value>
                  <RotateTransform Angle="90" />
                </Setter.Value>
              </Setter>
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="TabItem.IsSelected" Value="true" />
                <Condition Property="TabItem.TabStripPlacement" Value="Top" />
              </MultiTrigger.Conditions>
              <Setter Property="Margin" Value="-2,-2,-2,-1" />
              <Setter TargetName="contentPresenter" Property="Margin" Value="0,0,0,1" />
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="TabItem.IsSelected" Value="true" />
                <Condition Property="TabItem.TabStripPlacement" Value="Bottom" />
              </MultiTrigger.Conditions>
              <Setter Property="Margin" Value="-2,-1,-2,-2" />
              <Setter TargetName="contentPresenter" Property="Margin" Value="0,1,0,0" />
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="TabItem.IsSelected" Value="true" />
                <Condition Property="TabItem.TabStripPlacement" Value="Left" />
              </MultiTrigger.Conditions>
              <Setter Property="Margin" Value="-2,-2,-1,-2" />
              <Setter TargetName="contentPresenter" Property="Margin" Value="0,0,1,0" />
            </MultiTrigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="TabItem.IsSelected" Value="true" />
                <Condition Property="TabItem.TabStripPlacement" Value="Right" />
              </MultiTrigger.Conditions>
              <Setter Property="Margin" Value="-1,-2,-2,-2" />
              <Setter TargetName="contentPresenter" Property="Margin" Value="1,0,0,0" />
            </MultiTrigger>
            <Trigger Property="IsEnabled" Value="false">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" Property="Foreground" />
              <Setter TargetName="chrome" Property="controlsPrimitives:ElementChrome.State" Value="Disabled" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="{x:Static themes:SharedResourceKeys.TabControlStyleKey}" TargetType="{x:Type TabControl}">
    <Setter Property="Background" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlTopBackgroundNormalBrushKey}}" />
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlBorderNormalBrushKey}}" />
    <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlBorderNormalThicknessKey}}" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowNormalBrushKey}}" />
    <Setter Property="Margin" Value="0" />
    <Setter Property="Padding" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlPaddingNormalThicknessKey}}" />
    <Setter Property="HorizontalContentAlignment" Value="Center" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TabControl}">
          <Grid KeyboardNavigation.TabNavigation="Local" SnapsToDevicePixels="true" ClipToBounds="true">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Name="column0" />
              <ColumnDefinition Name="column1" Width="0" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Name="row0" Height="Auto" />
              <RowDefinition Name="row1" Height="*" />
            </Grid.RowDefinitions>
            <TabPanel Name="headerPanel" ZIndex="1" KeyboardNavigation.TabIndex="1" Grid.Column="0" Grid.Row="0" Margin="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlHeaderTopMarginNormalThicknessKey}}" IsItemsHost="true" />
            <controlsPrimitives:ElementChrome x:Name="contentBorder" Grid.Column="0" Grid.Row="1" Background="{TemplateBinding Control.Background}" BorderThickness="{TemplateBinding Control.BorderThickness}" BorderBrush="{TemplateBinding Control.BorderBrush}" KeyboardNavigation.TabNavigation="Local" KeyboardNavigation.DirectionalNavigation="Contained" KeyboardNavigation.TabIndex="2">
              <ContentPresenter Name="PART_SelectedContentHost" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" Margin="{TemplateBinding Control.Padding}" ContentSource="SelectedContent" />
            </controlsPrimitives:ElementChrome>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger SourceName="contentBorder" Property="controlsPrimitives:ElementChrome.BorderBrush" Value="#00FFFFFF">
              <Setter TargetName="contentBorder" Property="controlsPrimitives:ElementChrome.BorderThickness" Value="0" />
            </Trigger>
            <Trigger Property="TabControl.TabStripPlacement" Value="Bottom">
              <Setter TargetName="headerPanel" Property="Grid.Row" Value="1" />
              <Setter TargetName="contentBorder" Property="Grid.Row" Value="0" />
              <Setter TargetName="row0" Property="RowDefinition.Height" Value="*" />
              <Setter TargetName="row1" Property="RowDefinition.Height" Value="Auto" />
              <Setter TargetName="headerPanel" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlHeaderBottomMarginNormalThicknessKey}}" Property="Margin" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlBottomBackgroundNormalBrushKey}}" Property="Background" />
            </Trigger>
            <Trigger Property="TabControl.TabStripPlacement" Value="Left">
              <Setter TargetName="headerPanel" Property="Grid.Row" Value="0" />
              <Setter TargetName="contentBorder" Property="Grid.Row" Value="0" />
              <Setter TargetName="headerPanel" Property="Grid.Column" Value="0" />
              <Setter TargetName="contentBorder" Property="Grid.Column" Value="1" />
              <Setter TargetName="column0" Property="ColumnDefinition.Width" Value="Auto" />
              <Setter TargetName="column1" Property="ColumnDefinition.Width" Value="*" />
              <Setter TargetName="row0" Property="RowDefinition.Height" Value="*" />
              <Setter TargetName="row1" Property="RowDefinition.Height" Value="0" />
              <Setter TargetName="headerPanel" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlHeaderLeftMarginNormalThicknessKey}}" Property="Margin" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlLeftBackgroundNormalBrushKey}}" Property="Background" />
            </Trigger>
            <Trigger Property="TabControl.TabStripPlacement" Value="Right">
              <Setter TargetName="headerPanel" Property="Grid.Row" Value="0" />
              <Setter TargetName="contentBorder" Property="Grid.Row" Value="0" />
              <Setter TargetName="headerPanel" Property="Grid.Column" Value="1" />
              <Setter TargetName="contentBorder" Property="Grid.Column" Value="0" />
              <Setter TargetName="column0" Property="ColumnDefinition.Width" Value="*" />
              <Setter TargetName="column1" Property="ColumnDefinition.Width" Value="Auto" />
              <Setter TargetName="row0" Property="RowDefinition.Height" Value="*" />
              <Setter TargetName="row1" Property="RowDefinition.Height" Value="0" />
              <Setter TargetName="headerPanel" Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlHeaderRightMarginNormalThicknessKey}}" Property="Margin" />
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.TabControlRightBackgroundNormalBrushKey}}" Property="Background" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
              <Setter Value="{DynamicResource {x:Static themes:AssetResourceKeys.ContainerForegroundLowDisabledBrushKey}}" Property="Foreground" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>