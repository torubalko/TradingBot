<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:colorSelection="clr-namespace:ActiproSoftware.Windows.Controls.ColorSelection">
  <Style x:Key="{x:Type colorSelection:SpectrumColorPicker}" TargetType="{x:Type colorSelection:SpectrumColorPicker}">
    <Setter Property="Background" Value="#00FFFFFF" />
    <Setter Property="BorderBrush" Value="#FF000000" />
    <Setter Property="Height" Value="270" />
    <Setter Property="UIElement.SnapsToDevicePixels" Value="True" />
    <Setter Property="Width" Value="270" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type colorSelection:SpectrumColorPicker}">
          <FrameworkTemplate.Resources>
            <ResourceDictionary>
              <DrawingBrush x:Key="CheckerBackgroundBrush" Viewport="0,0,10,10" TileMode="Tile" ViewportUnits="Absolute">
                <DrawingBrush.Drawing>
                  <DrawingGroup>
                    <GeometryDrawing Brush="#FFFFFFFF">
                      <GeometryDrawing.Geometry>
                        <RectangleGeometry Rect="0,0 100,100" />
                      </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="#FFD3D3D3">
                      <GeometryDrawing.Geometry>
                        <GeometryGroup>
                          <RectangleGeometry Rect="0,0 50,50" />
                          <RectangleGeometry Rect="50,50 50,50" />
                        </GeometryGroup>
                      </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                  </DrawingGroup>
                </DrawingBrush.Drawing>
              </DrawingBrush>
            </ResourceDictionary>
          </FrameworkTemplate.Resources>
          <Border Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="1,1,0,0">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="1" />
                <RowDefinition Name="swatchRow" Height="20" />
                <RowDefinition Name="borderRow" Height="1" />
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="1" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="1" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="1" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="1" />
              </Grid.ColumnDefinitions>
              <colorSelection:SpectrumSlice x:Name="PART_Slice" Grid.ColumnSpan="5" />
              <Rectangle Grid.Column="5" Grid.RowSpan="4" Width="1" Fill="{TemplateBinding Control.BorderBrush}" />
              <colorSelection:SpectrumSlider x:Name="PART_Slider" Grid.Column="6" />
              <Rectangle Grid.Column="7" Grid.RowSpan="2" Width="1" Fill="{TemplateBinding Control.BorderBrush}" />
              <Rectangle Grid.Row="1" Grid.ColumnSpan="7" Height="1" Fill="{TemplateBinding Control.BorderBrush}" />
              <Rectangle Grid.Row="2" Grid.ColumnSpan="5" Fill="{StaticResource CheckerBackgroundBrush}" />
              <Button Name="InitialColorSwatch" Grid.Row="2" IsTabStop="False" Focusable="False" Command="{x:Static colorSelection:SpectrumColorPicker.SetColor}" Background="{TemplateBinding colorSelection:SpectrumColorPicker.InitialColorBrush}" CommandParameter="{Binding Path=InitialColor, RelativeSource={RelativeSource TemplatedParent}}">
                <Control.Template>
                  <ControlTemplate TargetType="{x:Type Button}">
                    <Border Background="{TemplateBinding Control.Background}">
                      <Border BorderBrush="#40FFFFFF" BorderThickness="1">
                        <ContentPresenter />
                      </Border>
                    </Border>
                  </ControlTemplate>
                </Control.Template>
              </Button>
              <Rectangle Grid.Row="2" Grid.Column="1" Width="1" Fill="{TemplateBinding Control.BorderBrush}" />
              <Border Name="MarkedColorSwatch" Grid.Row="2" Grid.Column="2" Background="{Binding ElementName=PART_Slice, Path=MarkedColorBrush}">
                <Border BorderBrush="#40FFFFFF" BorderThickness="1" />
              </Border>
              <Rectangle Grid.Row="2" Grid.Column="3" Width="1" Fill="{TemplateBinding Control.BorderBrush}" />
              <Border Grid.Row="2" Grid.Column="4" Background="{TemplateBinding colorSelection:SpectrumColorPicker.SelectedColorBrush}">
                <Border BorderBrush="#40FFFFFF" BorderThickness="1" />
              </Border>
              <Rectangle Grid.Row="3" Grid.ColumnSpan="6" Height="1" Fill="{TemplateBinding Control.BorderBrush}" />
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="colorSelection:SpectrumColorPicker.IsInitialColorVisible" Value="False">
              <Setter TargetName="InitialColorSwatch" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="MarkedColorSwatch" Property="Grid.Column" Value="0" />
              <Setter TargetName="MarkedColorSwatch" Property="Grid.ColumnSpan" Value="3" />
            </Trigger>
            <Trigger Property="colorSelection:SpectrumColorPicker.IsColorSwatchRowVisible" Value="False">
              <Setter TargetName="swatchRow" Property="RowDefinition.Height" Value="0" />
              <Setter TargetName="borderRow" Property="RowDefinition.Height" Value="0" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="IsEnabled" Value="False">
        <Setter Property="UIElement.Opacity" Value="{Binding DisabledOpacity, RelativeSource={RelativeSource Self}}" />
      </Trigger>
    </Style.Triggers>
  </Style>
</ResourceDictionary>