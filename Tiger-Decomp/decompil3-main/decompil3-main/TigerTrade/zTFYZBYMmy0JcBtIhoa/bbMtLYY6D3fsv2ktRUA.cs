using System;
using System.Collections;
using System.Collections.Generic;
using System.Runtime.CompilerServices;
using aEpmU09nz6MEoNmc0pGJ;
using aeXChk9vAhkf7Zm8SpOk;
using ECOEgqlSad8NUJZ2Dr9n;
using isnQObHkoBLhLETXDS3X;
using o8rG8jYJaX1AsbMm6sM;
using reuqbSHkyZtO3nPa1eKn;
using TigerTrade.Tc.Data;
using TigerTrade.Tc.Manager;
using TuAMtrl1Nd3XoZQQUXf0;

namespace zTFYZBYMmy0JcBtIhoa;

internal sealed class bbMtLYY6D3fsv2ktRUA : xRgq7gHkTVINiHGAKc0y
{
	[CompilerGenerated]
	private readonly LOaTZ5HkYs6IUi82qZ8y<qvF510YP9saQf2tcISw> JjuYh2JTM9;

	private readonly Dictionary<string, qvF510YP9saQf2tcISw> dZsYw4bIBn;

	private qvF510YP9saQf2tcISw LsGY7eVlKB;

	public bool beDY8Hq5Ys;

	private int Q4vYAXk31m;

	private static bbMtLYY6D3fsv2ktRUA QEJ5lNlwmQUaljm8RIUP;

	public LOaTZ5HkYs6IUi82qZ8y<qvF510YP9saQf2tcISw> Orders
	{
		[CompilerGenerated]
		get
		{
			return JjuYh2JTM9;
		}
	}

	public qvF510YP9saQf2tcISw SelectedOrder
	{
		get
		{
			return LsGY7eVlKB;
		}
		set
		{
			if (!object.Equals(qvF510YP9saQf2tcISw, LsGY7eVlKB))
			{
				LsGY7eVlKB = qvF510YP9saQf2tcISw;
				JZYHkZsWiJ6((string)soSuKmlw7DQJSDmvZC8M(-991861155 ^ -991869899));
				int num = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_8bfdb836a7624a05a8616bddcf22e146 == 0)
				{
					num = 1;
				}
				switch (num)
				{
				case 0:
					break;
				case 1:
					JZYHkZsWiJ6(stmj4Ul1bF7178khnjLy.BC1l1WXFcAt(-490987856 ^ -490980298));
					break;
				}
			}
		}
	}

	public bool OnlyActiveOrders
	{
		get
		{
			return beDY8Hq5Ys;
		}
		set
		{
			if (flag == beDY8Hq5Ys)
			{
				return;
			}
			beDY8Hq5Ys = flag;
			int num = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_0b22b597497745f5ab911eaabff065eb != 0)
			{
				num = 0;
			}
			while (true)
			{
				switch (num)
				{
				case 1:
					JZYHkZsWiJ6(stmj4Ul1bF7178khnjLy.BC1l1WXFcAt(0x2D3134C9 ^ 0x2D311655));
					num = 0;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_84569ba2345a4be7ac2af6ab5d67eaf9 == 0)
					{
						num = 0;
					}
					break;
				default:
					SelectedOrder = null;
					tDaYtxBXHr();
					return;
				}
			}
		}
	}

	public int OrderTypeIndex
	{
		get
		{
			return Q4vYAXk31m;
		}
		set
		{
			num = Math.Max(0, num);
			if (num == Q4vYAXk31m)
			{
				return;
			}
			Q4vYAXk31m = num;
			int num2 = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_5350e02b39f542f78529ac5e3c3f8ec6 == 0)
			{
				num2 = 1;
			}
			while (true)
			{
				switch (num2)
				{
				default:
					return;
				case 0:
					return;
				case 1:
					JZYHkZsWiJ6((string)soSuKmlw7DQJSDmvZC8M(-530053095 ^ -530044199));
					tDaYtxBXHr();
					num2 = 0;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_a93c63471a5d4726b3bdf40a69cdb422 != 0)
					{
						num2 = 0;
					}
					break;
				}
			}
		}
	}

	public bool CanCancel
	{
		get
		{
			if (SelectedOrder != null)
			{
				return OSCYqnsYW8(SelectedOrder.Order);
			}
			return false;
		}
	}

	public bbMtLYY6D3fsv2ktRUA()
	{
		p5WoC1lw8ex0AWr6Ft10();
		dZsYw4bIBn = new Dictionary<string, qvF510YP9saQf2tcISw>();
		base._002Ector();
		int num = 0;
		if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_ba87d68105604f98a891a0549ef4b7f9 != 0)
		{
			num = 0;
		}
		while (true)
		{
			switch (num)
			{
			case 1:
				return;
			}
			JjuYh2JTM9 = new LOaTZ5HkYs6IUi82qZ8y<qvF510YP9saQf2tcISw>
			{
				Capacity = JUMpMflwAScbMtldcTXv(j18iDj9nukSCmEyZs5lH.Settings)
			};
			DataManager.OnOrders += ec0YOJYXDw;
			DataManager.OnUpdateFilters += delegate
			{
				SelectedOrder = null;
				tDaYtxBXHr();
			};
			num = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_6938a97537c94834bed9381eb4051eec != 0)
			{
				num = 1;
			}
		}
	}

	private void ec0YOJYXDw(IEnumerable<Order> P_0)
	{
		Orders.rf8HkBEyiZ3();
		foreach (Order item in P_0)
		{
			Order(item);
		}
		Orders.qnkHka9KJbR();
	}

	private void Order(Order order)
	{
		qvF510YP9saQf2tcISw qvF510YP9saQf2tcISw = default(qvF510YP9saQf2tcISw);
		int num;
		if (!dZsYw4bIBn.TryGetValue(order.ID, out var value))
		{
			qvF510YP9saQf2tcISw = new qvF510YP9saQf2tcISw(order);
			num = 2;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_8a9257c2b61741afa02a8ceb1f69ad69 != 0)
			{
				num = 2;
			}
		}
		else
		{
			HXswRflwPpONkFvNY7vw(value, Filter(value));
			num = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_53f0c1974ed349c3831704ecb4d3ce13 == 0)
			{
				num = 0;
			}
		}
		while (true)
		{
			switch (num)
			{
			default:
				return;
			case 1:
				value.qVvYFiKQ0D(order);
				num = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_bcda8c444ccc4b27895bae9f13596743 == 0)
				{
					num = 0;
				}
				break;
			case 2:
				qvF510YP9saQf2tcISw.IsVisible = Filter(qvF510YP9saQf2tcISw);
				dZsYw4bIBn.Add(order.ID, qvF510YP9saQf2tcISw);
				Orders.Add(qvF510YP9saQf2tcISw);
				return;
			case 0:
				return;
			}
		}
	}

	public static bool OSCYqnsYW8(Order P_0)
	{
		return P_0.IsActive;
	}

	public static void jFaYIhdO4Q(Order P_0)
	{
		int num = 1;
		int num2 = num;
		while (true)
		{
			switch (num2)
			{
			default:
				P_0.SlTpClose = true;
				OQB6kslwJ2MQDacfpXNM(P_0);
				return;
			case 1:
				P_0.CancelInitiator = (string)soSuKmlw7DQJSDmvZC8M(0x2C8374E4 ^ 0x2C835604);
				num2 = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_267ca8254fa648cbaa1ba685784f79c7 != 0)
				{
					num2 = 0;
				}
				break;
			}
		}
	}

	public void k50YWETkUd()
	{
		if (SelectedOrder != null)
		{
			jFaYIhdO4Q(SelectedOrder.Order);
		}
	}

	public void CancelAllOrders()
	{
		int num;
		switch (OrderTypeIndex)
		{
		case 3:
			DataManager.ClientCancelAllOrders(OrderGroup.Trigger);
			num = 0;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_e5dcb5c2a8274adf87bda91d76616538 != 0)
			{
				num = 0;
			}
			goto IL_0009;
		case 2:
			DataManager.ClientCancelAllOrders(OrderGroup.StopAndStopLimit);
			break;
		case 0:
			NjVN0DlwF7mO3UmuWWx1(OrderGroup.All);
			break;
		case 1:
			{
				NjVN0DlwF7mO3UmuWWx1(OrderGroup.MarketAndLimit);
				num = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_9cec884f01d949d294f11a9fcceef609 == 0)
				{
					num = 1;
				}
				goto IL_0009;
			}
			IL_0009:
			switch (num)
			{
			case 0:
				break;
			case 1:
				break;
			}
			break;
		}
	}

	public bool Filter(object obj)
	{
		int num = 5;
		int num2 = num;
		qvF510YP9saQf2tcISw qvF510YP9saQf2tcISw = default(qvF510YP9saQf2tcISw);
		OrderType type = default(OrderType);
		while (true)
		{
			switch (num2)
			{
			case 4:
				if (qvF510YP9saQf2tcISw == null)
				{
					return false;
				}
				if (!DataManager.FilterAccount((Account)Kkv2f6lw3EsQNaQClU0B(qvF510YP9saQf2tcISw.Order)))
				{
					num2 = 2;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_51aff79eb7764aeaade80ae2d6638ab5 != 0)
					{
						num2 = 0;
					}
					break;
				}
				type = qvF510YP9saQf2tcISw.Order.Type;
				num2 = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_6d365c300683408da8d70007bc278f93 == 0)
				{
					num2 = 0;
				}
				break;
			case 3:
				return false;
			case 5:
				qvF510YP9saQf2tcISw = obj as qvF510YP9saQf2tcISw;
				num2 = 4;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_152544ed8bd2470d8638a522e4a24d02 == 0)
				{
					num2 = 3;
				}
				break;
			case 2:
				return false;
			default:
				switch (OrderTypeIndex)
				{
				case 2:
					if (type != OrderType.Stop && type != OrderType.StopLimit)
					{
						return false;
					}
					break;
				case 3:
					if (type == OrderType.Trigger)
					{
						break;
					}
					num2 = 3;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_35216e71f4e34e739f4a05a1213f3579 != 0)
					{
						num2 = 2;
					}
					goto end_IL_0012;
				case 1:
					if (type == OrderType.Limit)
					{
						break;
					}
					num2 = 0;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_51aff79eb7764aeaade80ae2d6638ab5 == 0)
					{
						num2 = 1;
					}
					goto end_IL_0012;
				}
				goto IL_008b;
			case 1:
				{
					if (type != OrderType.Market)
					{
						return false;
					}
					goto IL_008b;
				}
				IL_008b:
				if (OnlyActiveOrders)
				{
					return qvF510YP9saQf2tcISw.Order.IsActive;
				}
				return true;
				end_IL_0012:
				break;
			}
		}
	}

	public void tDaYtxBXHr()
	{
		using IEnumerator<qvF510YP9saQf2tcISw> enumerator = Orders.GetEnumerator();
		while (GuMKsAlwpAHtL2ENaAUM(enumerator))
		{
			qvF510YP9saQf2tcISw current = enumerator.Current;
			int num = 0;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_2fa91f76013747d9b5f0073a2a323201 == 0)
			{
				num = 0;
			}
			switch (num)
			{
			}
			current.IsVisible = Filter(current);
		}
	}

	[CompilerGenerated]
	private void al3YUK8SCs()
	{
		SelectedOrder = null;
		tDaYtxBXHr();
	}

	static bbMtLYY6D3fsv2ktRUA()
	{
		stmj4Ul1bF7178khnjLy.nWrl1glAtDi();
	}

	internal static object soSuKmlw7DQJSDmvZC8M(int P_0)
	{
		return stmj4Ul1bF7178khnjLy.BC1l1WXFcAt(P_0);
	}

	internal static bool GtxwjWlwhD7TfrIpEMHI()
	{
		return QEJ5lNlwmQUaljm8RIUP == null;
	}

	internal static bbMtLYY6D3fsv2ktRUA XWpoGQlwwRwxaYxXteOb()
	{
		return QEJ5lNlwmQUaljm8RIUP;
	}

	internal static void p5WoC1lw8ex0AWr6Ft10()
	{
		bjBp4DlSBZNrmYFiJ2P5.uAtNhrIAcgj();
	}

	internal static int JUMpMflwAScbMtldcTXv(object P_0)
	{
		return ((MhMDPU9v8rkigy1ao0Th)P_0).OrdersTableCapacity;
	}

	internal static void HXswRflwPpONkFvNY7vw(object P_0, bool P_1)
	{
		((qvF510YP9saQf2tcISw)P_0).IsVisible = P_1;
	}

	internal static void OQB6kslwJ2MQDacfpXNM(object P_0)
	{
		DataManager.ClientCancelOrder((Order)P_0);
	}

	internal static void NjVN0DlwF7mO3UmuWWx1(OrderGroup P_0)
	{
		DataManager.ClientCancelAllOrders(P_0);
	}

	internal static object Kkv2f6lw3EsQNaQClU0B(object P_0)
	{
		return ((Order)P_0).Account;
	}

	internal static bool GuMKsAlwpAHtL2ENaAUM(object P_0)
	{
		return ((IEnumerator)P_0).MoveNext();
	}
}
