using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.CompilerServices;
using aEpmU09nz6MEoNmc0pGJ;
using aeXChk9vAhkf7Zm8SpOk;
using bCF6lN93DYUQekkH6ASv;
using BeZUmLHycXdIKSy1sjhT;
using bFLVeaGpb14YNScYcv2Q;
using ECOEgqlSad8NUJZ2Dr9n;
using ESfWR89rpJGqlpJwL5ej;
using qIgqPC9A93cIlwDNLN9h;
using TigerTrade.Config.Common;
using TigerTrade.Core.Utils.Logging;
using TigerTrade.Tc.Connectors.Simulator.Player;
using TigerTrade.Tc.History;
using TigerTrade.Tc.Manager;
using TuAMtrl1Nd3XoZQQUXf0;
using U8g4nM9JuZySteT7noel;
using uxiQFaHI8Xw6xYBKwmCA;
using zy8uls9AtRKGi5l5tZKJ;

namespace sVwVKy9FYOZIpZm4aWby;

internal sealed class AKirmj9FGdu3ItVlRUSu : qt9C3B9AWZP5dEmJcrrj
{
	private di4qtL934mPa9IaLig73[] CaM9Fac6ik0;

	private readonly U2sMUm9r39JSXDgxgx8p q2D9FSa3ihD;

	private string Okd9FxaYqip;

	private bool Fhn9FLWyDQy;

	private bool yrY9FetsxEy;

	private DateTime MpC9FsxRy6G;

	private static AKirmj9FGdu3ItVlRUSu AWlCY0bKAnKkq0ahrnVR;

	public AKirmj9FGdu3ItVlRUSu(U2sMUm9r39JSXDgxgx8p P_0)
	{
		bjBp4DlSBZNrmYFiJ2P5.uAtNhrIAcgj();
		Okd9FxaYqip = "";
		MpC9FsxRy6G = DateTime.MinValue;
		base._002Ector();
		int num = 0;
		if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_03c20a54a7dc45f8a5130d4984fa4aea != 0)
		{
			num = 1;
		}
		while (true)
		{
			switch (num)
			{
			default:
				CaM9Fac6ik0 = new di4qtL934mPa9IaLig73[8];
				return;
			case 1:
				q2D9FSa3ihD = P_0;
				num = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_409738fae61f4f058345c98b7cfbcbac == 0)
				{
					num = 0;
				}
				break;
			}
		}
	}

	public void cfU9Fo3XS03(TickEvent P_0)
	{
		int num = 1;
		int num2 = num;
		while (true)
		{
			switch (num2)
			{
			default:
				CaM9Fac6ik0[7]?.UoF93x29qlD(P_0, null, VBetXgbKFKES9EYYWqy9(q2D9FSa3ihD), _0020: false);
				return;
			case 4:
				return;
			case 3:
			{
				di4qtL934mPa9IaLig73 obj3 = CaM9Fac6ik0[0];
				if (obj3 == null)
				{
					return;
				}
				obj3.UoF93x29qlD(P_0, null, VBetXgbKFKES9EYYWqy9(q2D9FSa3ihD), _0020: false);
				num2 = 4;
				break;
			}
			case 1:
				if (j18iDj9nukSCmEyZs5lH.Settings.TradeMode != AppTradeMode.Player)
				{
					CaM9Fac6ik0[6]?.UoF93x29qlD(P_0, null, VBetXgbKFKES9EYYWqy9(q2D9FSa3ihD), _0020: false);
					di4qtL934mPa9IaLig73 obj = CaM9Fac6ik0[4];
					if (obj == null)
					{
						goto case 2;
					}
					obj.UoF93x29qlD(P_0, null, q2D9FSa3ihD.UJElnHayjot, _0020: false);
					num2 = 2;
					if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_43d123ebfe574af38268397bb0ae2d1a != 0)
					{
						num2 = 2;
					}
					break;
				}
				num2 = 0;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_5b6218c32bbf4af5965485469fa12538 == 0)
				{
					num2 = 0;
				}
				break;
			case 2:
			{
				di4qtL934mPa9IaLig73 obj2 = CaM9Fac6ik0[2];
				if (obj2 == null)
				{
					num2 = 3;
					break;
				}
				obj2.UoF93x29qlD(P_0, null, q2D9FSa3ihD.UJElnHayjot, _0020: false);
				goto case 3;
			}
			}
		}
	}

	public di4qtL934mPa9IaLig73 yBB9Fv92GNY(sOa57v9Jprw32ZFaJ5BM P_0)
	{
		int num;
		if (yrY9FetsxEy)
		{
			switch (P_0)
			{
			case (sOa57v9Jprw32ZFaJ5BM)1:
				return CaM9Fac6ik0[5];
			case (sOa57v9Jprw32ZFaJ5BM)2:
				return CaM9Fac6ik0[4];
			case (sOa57v9Jprw32ZFaJ5BM)3:
				return CaM9Fac6ik0[3];
			case (sOa57v9Jprw32ZFaJ5BM)4:
				return CaM9Fac6ik0[2];
			case (sOa57v9Jprw32ZFaJ5BM)5:
				return CaM9Fac6ik0[1];
			case (sOa57v9Jprw32ZFaJ5BM)6:
				return CaM9Fac6ik0[0];
			default:
				return null;
			case (sOa57v9Jprw32ZFaJ5BM)0:
				break;
			}
			if (qnsNvpbK3muStp3LGfC4(j18iDj9nukSCmEyZs5lH.Settings) != AppTradeMode.Player)
			{
				return CaM9Fac6ik0[6];
			}
			num = 0;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_9cec884f01d949d294f11a9fcceef609 != 0)
			{
				num = 0;
			}
		}
		else
		{
			RequestData();
			num = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_dbdafa2a3c4c4a799fde97744d4aedd0 == 0)
			{
				num = 0;
			}
		}
		return num switch
		{
			1 => null, 
			_ => CaM9Fac6ik0[7], 
		};
	}

	public void Clear()
	{
		CaM9Fac6ik0 = new di4qtL934mPa9IaLig73[8];
		yrY9FetsxEy = false;
	}

	private void RequestData()
	{
		if (j18iDj9nukSCmEyZs5lH.Settings.TradeMode == AppTradeMode.Player)
		{
			CaM9Fac6ik0[7] = new di4qtL934mPa9IaLig73(DateTime.MinValue);
		}
		if (Fhn9FLWyDQy)
		{
			return;
		}
		int num = 0;
		if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_ebf7ae5938c3406ea71c3b7147ea041c != 0)
		{
			num = 0;
		}
		while (true)
		{
			switch (num)
			{
			case 1:
				return;
			case 2:
			{
				lWM0DY9AfkjRdT0eDbpk lWM0DY9AfkjRdT0eDbpk = new lWM0DY9AfkjRdT0eDbpk(Pj2YaCbKuF6uMnYhHtsg() && jfieDmbKzckRqmZ8GRG1(HistoryPlayerModule.RecordDate, DateTime.MinValue));
				q2D9FSa3ihD.GGGlnaVMwtf(Okd9FxaYqip, lWM0DY9AfkjRdT0eDbpk, this);
				num = 1;
				if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_e38cca27b4f843e0acda58c2d2606b17 != 0)
				{
					num = 1;
				}
				continue;
			}
			case 3:
				return;
			}
			if (q2D9FSa3ihD.Count == 0)
			{
				num = 3;
				continue;
			}
			q2D9FSa3ihD.og0lnBFfnMH(Okd9FxaYqip);
			Okd9FxaYqip = d9rbQ1bKpmPYJl8F3FwN().ToString();
			Fhn9FLWyDQy = true;
			num = 1;
			if (_003CModule_003E_007Bce1afb0d_002D8724_002D4a3c_002D8977_002Dc81e93990fb1_007D.m_2264c03640a14c8f930261fd70e85d60 == 0)
			{
				num = 2;
			}
		}
	}

	public void V6Hl9CmUBcW(string P_0, ICollection<byte[]> P_1)
	{
		if (Okd9FxaYqip != P_0 || P_1.Count == 0)
		{
			return;
		}
		int num = 0;
		Action<string> onError = delegate(string text)
		{
			LogManager.WriteError((string)J7c6xobm0GB9aZrf6IBD(stmj4Ul1bF7178khnjLy.BC1l1WXFcAt(-673683647 ^ -673440917), new object[4]
			{
				q2D9FSa3ihD.Symbol.Code,
				q2D9FSa3ihD.DataCycle,
				q2D9FSa3ihD.UJElnHayjot,
				text
			}));
		};
		VxkM3iHI7Qo0Is57GIwk vxkM3iHI7Qo0Is57GIwk = new VxkM3iHI7Qo0Is57GIwk(P_1.First(), q2D9FSa3ihD.Step, q2D9FSa3ihD.SizeStep, onError, q2D9FSa3ihD.Symbol.HistoryCorrectSizeFactor);
		while (vxkM3iHI7Qo0Is57GIwk.Read() && CaM9Fac6ik0.Length > num)
		{
			Ai3xtDHyXEfq3el8VjlP lastItem = vxkM3iHI7Qo0Is57GIwk.LastItem;
			if (lastItem != null)
			{
				CaM9Fac6ik0[num++] = new di4qtL934mPa9IaLig73(lastItem, lastItem.Time);
				MpC9FsxRy6G = lastItem.CloseTime;
			}
		}
		if (j18iDj9nukSCmEyZs5lH.Settings.TradeMode == AppTradeMode.Player)
		{
			CaM9Fac6ik0[7].QSy93bSeJ5h(CaM9Fac6ik0[6]);
		}
		di4qtL934mPa9IaLig73[] caM9Fac6ik = CaM9Fac6ik0;
		for (int num2 = 0; num2 < caM9Fac6ik.Length; num2++)
		{
			caM9Fac6ik[num2]?.DXS93LfTJDU();
		}
		Fhn9FLWyDQy = false;
		yrY9FetsxEy = true;
	}

	public void jn1l9rlHE2X(string P_0, IDataReader<TickEvent> P_1)
	{
		while (P_1.Read())
		{
			TickEvent lastItem = P_1.LastItem;
			if (lastItem != null && !(lastItem.Time < MpC9FsxRy6G))
			{
				CaM9Fac6ik0[6]?.UoF93x29qlD(lastItem, null, q2D9FSa3ihD.UJElnHayjot, _0020: true);
				CaM9Fac6ik0[4]?.UoF93x29qlD(lastItem, null, q2D9FSa3ihD.UJElnHayjot, _0020: true);
				CaM9Fac6ik0[2]?.UoF93x29qlD(lastItem, null, q2D9FSa3ihD.UJElnHayjot, _0020: true);
				CaM9Fac6ik0[0]?.UoF93x29qlD(lastItem, null, q2D9FSa3ihD.UJElnHayjot, _0020: true);
			}
		}
		di4qtL934mPa9IaLig73[] caM9Fac6ik = CaM9Fac6ik0;
		for (int i = 0; i < caM9Fac6ik.Length; i++)
		{
			caM9Fac6ik[i]?.DXS93LfTJDU();
		}
	}

	public void LTel9KrLkYM()
	{
	}

	[CompilerGenerated]
	private void aPV9FBUYBts(string P_0)
	{
		LogManager.WriteError((string)J7c6xobm0GB9aZrf6IBD(stmj4Ul1bF7178khnjLy.BC1l1WXFcAt(-673683647 ^ -673440917), new object[4]
		{
			q2D9FSa3ihD.Symbol.Code,
			q2D9FSa3ihD.DataCycle,
			q2D9FSa3ihD.UJElnHayjot,
			P_0
		}));
	}

	static AKirmj9FGdu3ItVlRUSu()
	{
		stmj4Ul1bF7178khnjLy.nWrl1glAtDi();
	}

	internal static bool lUBOxtbKPe61XU3MjOQu()
	{
		return AWlCY0bKAnKkq0ahrnVR == null;
	}

	internal static AKirmj9FGdu3ItVlRUSu NJPEDYbKJGKVrUZUl1dK()
	{
		return AWlCY0bKAnKkq0ahrnVR;
	}

	internal static int VBetXgbKFKES9EYYWqy9(object P_0)
	{
		return ((U2sMUm9r39JSXDgxgx8p)P_0).UJElnHayjot;
	}

	internal static AppTradeMode qnsNvpbK3muStp3LGfC4(object P_0)
	{
		return ((MhMDPU9v8rkigy1ao0Th)P_0).TradeMode;
	}

	internal static Guid d9rbQ1bKpmPYJl8F3FwN()
	{
		return Guid.NewGuid();
	}

	internal static bool Pj2YaCbKuF6uMnYhHtsg()
	{
		return DataManager.Player;
	}

	internal static bool jfieDmbKzckRqmZ8GRG1(DateTime P_0, DateTime P_1)
	{
		return P_0 != P_1;
	}

	internal static object J7c6xobm0GB9aZrf6IBD(object P_0, object P_1)
	{
		return string.Format((string)P_0, (object[])P_1);
	}
}
