using System;
using System.Collections.Generic;
using System.Threading;
using BfZtb759KlUg4482QKym;
using c0MHhToamHULoqAC8ldx;
using cvbYuioiYy5DUwW89Uxt;
using EyD6NKGhRYBSlyBqPfrJ;
using gQ80RYoF52Cr7su4JSBU;
using HVPJvOoSBSEDmHoxJgqx;
using K1GcsD5GTtMSlaiJI0Xh;
using lFFs11G39ohaRVknaFPC;
using Newtonsoft.Json.Linq;
using sIFWheGF3OYNVQk97tur;
using TigerTrade.Tc.Data;
using x97CE55GhEYKgt7TSVZT;

namespace mV9y7loDS1OdZbIExIG1;

internal sealed class rJkPoOoD5Rvt2742WnFb : vdq7k7oF1bjOLTKJ5ZnM
{
	private long vXdoDsgyKFR;

	private long AgFoDXXcEtf;

	private long cn0oDcOJWBL;

	private int zFZoDjK9JZb;

	private readonly List<JKiJRyoaKDmkFpOUPDi9> pAGoDEj0uIu;

	private bool ujToDQoJJty;

	private bool GhMoDd5W4pF;

	private readonly object A87oDgGkHC6;

	private static rJkPoOoD5Rvt2742WnFb h764N7SZgvjYXrp64EiQ;

	public rJkPoOoD5Rvt2742WnFb()
	{
		itlbck5GUdCiQcy9cfLX.MSJLykDwaZf();
		pAGoDEj0uIu = new List<JKiJRyoaKDmkFpOUPDi9>();
		A87oDgGkHC6 = new object();
		base._002Ector();
		int num = 1;
		if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_04ffa74e86424225b1da01f05c8e1ee9 == 0)
		{
			num = 0;
		}
		while (true)
		{
			switch (num)
			{
			case 1:
				ujToDQoJJty = false;
				num = 0;
				if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_ca333d1f5b544c679e2f04abd45bbe97 == 0)
				{
					num = 0;
				}
				break;
			default:
				GhMoDd5W4pF = false;
				return;
			}
		}
	}

	public void oEOoDxMlVwG()
	{
		lock (A87oDgGkHC6)
		{
			GhMoDd5W4pF = true;
		}
	}

	protected override long m23lvbn47Kv(decimal P_0, Symbol P_1)
	{
		return (long)KOe5eKSZO495EY065ZvJ(P_0, (decimal)u2M3iPSZM1DVRPeCJySl(P_1));
	}

	protected override long DNflvNiDi2o(decimal P_0, Symbol P_1)
	{
		return xuTRI9SZqKqdoPOLg8Ql(P_0 / (decimal)P_1.Step);
	}

	protected override long ScaleValue(long value, long scale, bool byLower)
	{
		return value;
	}

	public bool ALZoDLwr4Df(lEa2hGoSvF3S7lY1ZaNU P_0, long P_1)
	{
		int num = 1;
		int num2 = num;
		object a87oDgGkHC = default(object);
		bool result = default(bool);
		bool flag = default(bool);
		IEnumerator<JArray> enumerator2 = default(IEnumerator<JArray>);
		List<JKiJRyoaKDmkFpOUPDi9>.Enumerator enumerator = default(List<JKiJRyoaKDmkFpOUPDi9>.Enumerator);
		while (true)
		{
			switch (num2)
			{
			case 1:
				a87oDgGkHC = A87oDgGkHC6;
				num2 = 0;
				if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_e37b704f00fd438985274655b11b16b4 != 0)
				{
					num2 = 0;
				}
				continue;
			}
			bool lockTaken = false;
			try
			{
				Monitor.Enter(a87oDgGkHC, ref lockTaken);
				int num3;
				if (P_0 != null)
				{
					num3 = 0;
					if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_9db030806b504c748b649e391f655c9f == 0)
					{
						num3 = 7;
					}
				}
				else
				{
					result = false;
					num3 = 1;
					if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_5557066a01244f8e812ce68a3370995c == 0)
					{
						num3 = 0;
					}
				}
				while (true)
				{
					switch (num3)
					{
					case 1:
						break;
					case 3:
						result = flag;
						break;
					case 8:
						ujToDQoJJty = true;
						num3 = 4;
						continue;
					case 6:
						try
						{
							while (enumerator2.MoveNext())
							{
								JArray current3 = enumerator2.Current;
								i5KoFxXiln5(((JToken)NlhI5WSZtq2Ew7cxm7IR(current3, 0)).ToObject<double>(), ((JToken)NlhI5WSZtq2Ew7cxm7IR(current3, 1)).ToObject<double>());
							}
							int num5 = 0;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_ce4051eadf70452db4b28dca356319d1 == 0)
							{
								num5 = 0;
							}
							switch (num5)
							{
							case 0:
								break;
							}
						}
						finally
						{
							enumerator2?.Dispose();
						}
						flag = true;
						num3 = 3;
						if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_13e7dc070b7c4c79a18cbee083c6ec1e != 0)
						{
							num3 = 8;
						}
						continue;
					default:
						enumerator2 = P_0.Bids.GetEnumerator();
						num3 = 2;
						continue;
					case 2:
					{
						try
						{
							while (enumerator2.MoveNext())
							{
								JArray current2 = enumerator2.Current;
								U4ioFLPLW7Z(current2[0].ToObject<double>(), current2[1].ToObject<double>());
							}
						}
						finally
						{
							enumerator2?.Dispose();
						}
						enumerator2 = P_0.Asks.GetEnumerator();
						int num4 = 6;
						num3 = num4;
						continue;
					}
					case 7:
						flag = false;
						if (LTNpv3SZIoWt3PNxJy4n(pAGoDEj0uIu) <= 0 || (PrrMvSSZWe9xIwKYCtyy(P_0) >= vXdoDsgyKFR - 1 && P_0.LastUpdateId <= AgFoDXXcEtf))
						{
							cn0oDcOJWBL = PrrMvSSZWe9xIwKYCtyy(P_0);
							Clear();
							num3 = 0;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_6914a7e965794704a147f3749924962d == 0)
							{
								num3 = 0;
							}
							continue;
						}
						goto case 4;
					case 5:
						try
						{
							while (enumerator.MoveNext())
							{
								JKiJRyoaKDmkFpOUPDi9 current = enumerator.Current;
								kOhoDeQDsSf(current, P_1);
							}
						}
						finally
						{
							((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
						}
						goto case 3;
					case 4:
						if (flag)
						{
							List<JKiJRyoaKDmkFpOUPDi9> list = new List<JKiJRyoaKDmkFpOUPDi9>(pAGoDEj0uIu);
							zMyLSxSZURhtlG7EHg1a(pAGoDEj0uIu);
							enumerator = list.GetEnumerator();
							num3 = 5;
							continue;
						}
						goto case 3;
					}
					break;
				}
			}
			finally
			{
				if (lockTaken)
				{
					Monitor.Exit(a87oDgGkHC);
				}
			}
			return result;
		}
	}

	public bool kOhoDeQDsSf(JKiJRyoaKDmkFpOUPDi9 P_0, long P_1)
	{
		int num = 1;
		int num2 = num;
		object a87oDgGkHC = default(object);
		while (true)
		{
			switch (num2)
			{
			case 1:
				a87oDgGkHC = A87oDgGkHC6;
				num2 = 0;
				if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_3d8a38b1cb21466e854270ec8942c6ca != 0)
				{
					num2 = 0;
				}
				continue;
			}
			bool lockTaken = false;
			try
			{
				Monitor.Enter(a87oDgGkHC, ref lockTaken);
				int num3 = 11;
				while (true)
				{
					int num4;
					switch (num3)
					{
					case 4:
						if (AgFoDXXcEtf < P_0.ToVersion)
						{
							num3 = 3;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_262c45b675dc44e594e3edec7c08a152 == 0)
							{
								num3 = 2;
							}
							continue;
						}
						goto case 6;
					case 6:
						pAGoDEj0uIu.Add(P_0);
						return false;
					case 11:
						if (!ujToDQoJJty)
						{
							num3 = 8;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_eb6cefc1df37468ab8b9384866953722 == 0)
							{
								num3 = 1;
							}
							continue;
						}
						goto IL_02a1;
					default:
						ujToDQoJJty = true;
						cn0oDcOJWBL = Math.Max(0L, P_0.FromVersion - 1);
						goto IL_02a1;
					case 8:
						if (!GhMoDd5W4pF)
						{
							if (vXdoDsgyKFR != 0L)
							{
								goto case 4;
							}
							vXdoDsgyKFR = twjuEnSZTI9PVI5VNwTC(P_0);
							num4 = 4;
							goto IL_0065;
						}
						num3 = 0;
						if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_5a00a8f236ab4094a78e373adc786558 == 0)
						{
							num3 = 0;
						}
						continue;
					case 7:
					{
						using (List<f8skKYoiGdAaekg4uXCB>.Enumerator enumerator = P_0.Asks.GetEnumerator())
						{
							while (enumerator.MoveNext())
							{
								f8skKYoiGdAaekg4uXCB current2 = enumerator.Current;
								AnaoFel7mcS(nOn5CESZyOayYZekqRIA(current2), current2.Quantity);
							}
							int num5 = 0;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_82741674950e4c70a0407e3b1a670169 != 0)
							{
								num5 = 0;
							}
							switch (num5)
							{
							case 0:
								break;
							}
						}
						break;
					}
					case 5:
						return false;
					case 3:
						AgFoDXXcEtf = P_0.ToVersion;
						num4 = 6;
						goto IL_0065;
					case 2:
						if (P_0.Bids != null)
						{
							foreach (f8skKYoiGdAaekg4uXCB item in P_0.Bids)
							{
								CLgoFsnYMr3(item.Price, item.Quantity);
							}
						}
						if (P_0.Asks == null)
						{
							break;
						}
						goto case 7;
					case 10:
						zFZoDjK9JZb += (int)P_1;
						num3 = 0;
						if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_aec259916d0a4bcebababa49a58288c4 != 0)
						{
							num3 = 2;
						}
						continue;
					case 9:
						zFZoDjK9JZb = Math.Max(0, (int)(DateTimeOffset.UtcNow.ToUnixTimeMilliseconds() + Acj0FgGhg83F5A0lfPa4.q3hGwXLLhPb() - P_0.FromVersion));
						num3 = 10;
						continue;
					case 1:
						break;
						IL_0065:
						num3 = num4;
						continue;
						IL_02a1:
						if (P_0.ToVersion <= cn0oDcOJWBL)
						{
							num3 = 5;
							if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_70b4b4a3c8d3471f9796e8c8caf6f35b == 0)
							{
								num3 = 2;
							}
							continue;
						}
						goto case 9;
					}
					break;
				}
				return true;
			}
			finally
			{
				if (lockTaken)
				{
					Monitor.Exit(a87oDgGkHC);
				}
			}
		}
	}

	public override void odClvnSDwKl(Symbol P_0, MarketDepthFullEvent P_1)
	{
		LMYgDwSZZYPQix4SGVrI(P_1, zFZoDjK9JZb);
		object a87oDgGkHC = A87oDgGkHC6;
		bool lockTaken = false;
		int num = 0;
		if (_003CModule_003E_007B68812e8e_002D4b5b_002D44f2_002D9304_002D3f1c4ea04b49_007D.m_91fb7809389f4424adc9e876d4e4cb71 == 0)
		{
			num = 0;
		}
		switch (num)
		{
		}
		try
		{
			Monitor.Enter(a87oDgGkHC, ref lockTaken);
			base.odClvnSDwKl(P_0, P_1);
		}
		finally
		{
			if (lockTaken)
			{
				Uurh7CSZVyroE5ZtHX3p(a87oDgGkHC);
			}
		}
	}

	static rJkPoOoD5Rvt2742WnFb()
	{
		F71m3059rTj4gyFcUtWX.xiX5n2gNr23();
		vwmycBSZCP1UxBGOw1nR();
	}

	internal static bool nwRAClSZRgTnq0hrhJ20()
	{
		return h764N7SZgvjYXrp64EiQ == null;
	}

	internal static rJkPoOoD5Rvt2742WnFb TepqUMSZ6MMUlj2QJYWV()
	{
		return h764N7SZgvjYXrp64EiQ;
	}

	internal static double u2M3iPSZM1DVRPeCJySl(object P_0)
	{
		return ((SymbolBase)P_0).SizeStep;
	}

	internal static decimal KOe5eKSZO495EY065ZvJ(decimal P_0, decimal P_1)
	{
		return P_0 / P_1;
	}

	internal static long xuTRI9SZqKqdoPOLg8Ql(decimal P_0)
	{
		return (long)P_0;
	}

	internal static int LTNpv3SZIoWt3PNxJy4n(object P_0)
	{
		return ((List<JKiJRyoaKDmkFpOUPDi9>)P_0).Count;
	}

	internal static long PrrMvSSZWe9xIwKYCtyy(object P_0)
	{
		return ((lEa2hGoSvF3S7lY1ZaNU)P_0).LastUpdateId;
	}

	internal static object NlhI5WSZtq2Ew7cxm7IR(object P_0, int P_1)
	{
		return ((JArray)P_0)[P_1];
	}

	internal static void zMyLSxSZURhtlG7EHg1a(object P_0)
	{
		((List<JKiJRyoaKDmkFpOUPDi9>)P_0).Clear();
	}

	internal static long twjuEnSZTI9PVI5VNwTC(object P_0)
	{
		return ((JKiJRyoaKDmkFpOUPDi9)P_0).FromVersion;
	}

	internal static decimal nOn5CESZyOayYZekqRIA(object P_0)
	{
		return ((f8skKYoiGdAaekg4uXCB)P_0).Price;
	}

	internal static void LMYgDwSZZYPQix4SGVrI(object P_0, int P_1)
	{
		((MarketDepthDiffEvent)P_0).LastPing = P_1;
	}

	internal static void Uurh7CSZVyroE5ZtHX3p(object P_0)
	{
		Monitor.Exit(P_0);
	}

	internal static void vwmycBSZCP1UxBGOw1nR()
	{
		pBBtaj5Gmf2YibAYEwgh.kLjw4iIsCLsZtxc4lksN0j();
	}
}
